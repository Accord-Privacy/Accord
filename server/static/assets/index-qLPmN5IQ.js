var Ev=Object.defineProperty;var jv=(r,l,u)=>l in r?Ev(r,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[l]=u;var ue=(r,l,u)=>jv(r,typeof l!="symbol"?l+"":l,u);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function u(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=u(h);fetch(h.href,m)}})();function Ng(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nf={exports:{}},yo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function Cv(){if(qp)return yo;qp=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function u(o,h,m){var p=null;if(m!==void 0&&(p=""+m),h.key!==void 0&&(p=""+h.key),"key"in h){m={};for(var b in h)b!=="key"&&(m[b]=h[b])}else m=h;return h=m.ref,{$$typeof:r,type:o,key:p,ref:h!==void 0?h:null,props:m}}return yo.Fragment=l,yo.jsx=u,yo.jsxs=u,yo}var Kp;function Tv(){return Kp||(Kp=1,nf.exports=Cv()),nf.exports}var s=Tv(),af={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function Av(){if(Yp)return Ke;Yp=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),p=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),X=Symbol.iterator;function O(S){return S===null||typeof S!="object"?null:(S=X&&S[X]||S["@@iterator"],typeof S=="function"?S:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,te={};function oe(S,D,H){this.props=S,this.context=D,this.refs=te,this.updater=H||L}oe.prototype.isReactComponent={},oe.prototype.setState=function(S,D){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,D,"setState")},oe.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function ge(){}ge.prototype=oe.prototype;function fe(S,D,H){this.props=S,this.context=D,this.refs=te,this.updater=H||L}var de=fe.prototype=new ge;de.constructor=fe,I(de,oe.prototype),de.isPureReactComponent=!0;var ke=Array.isArray;function Ge(){}var Te={H:null,A:null,T:null,S:null},we=Object.prototype.hasOwnProperty;function re(S,D,H){var ie=H.ref;return{$$typeof:r,type:S,key:D,ref:ie!==void 0?ie:null,props:H}}function Ue(S,D){return re(S.type,D,S.props)}function je(S){return typeof S=="object"&&S!==null&&S.$$typeof===r}function ye(S){var D={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(H){return D[H]})}var se=/\/+/g;function Y(S,D){return typeof S=="object"&&S!==null&&S.key!=null?ye(""+S.key):D.toString(36)}function U(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Ge,Ge):(S.status="pending",S.then(function(D){S.status==="pending"&&(S.status="fulfilled",S.value=D)},function(D){S.status==="pending"&&(S.status="rejected",S.reason=D)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function E(S,D,H,ie,P){var ae=typeof S;(ae==="undefined"||ae==="boolean")&&(S=null);var be=!1;if(S===null)be=!0;else switch(ae){case"bigint":case"string":case"number":be=!0;break;case"object":switch(S.$$typeof){case r:case l:be=!0;break;case A:return be=S._init,E(be(S._payload),D,H,ie,P)}}if(be)return P=P(S),be=ie===""?"."+Y(S,0):ie,ke(P)?(H="",be!=null&&(H=be.replace(se,"$&/")+"/"),E(P,D,H,"",function(He){return He})):P!=null&&(je(P)&&(P=Ue(P,H+(P.key==null||S&&S.key===P.key?"":(""+P.key).replace(se,"$&/")+"/")+be)),D.push(P)),1;be=0;var Me=ie===""?".":ie+":";if(ke(S))for(var Be=0;Be<S.length;Be++)ie=S[Be],ae=Me+Y(ie,Be),be+=E(ie,D,H,ae,P);else if(Be=O(S),typeof Be=="function")for(S=Be.call(S),Be=0;!(ie=S.next()).done;)ie=ie.value,ae=Me+Y(ie,Be++),be+=E(ie,D,H,ae,P);else if(ae==="object"){if(typeof S.then=="function")return E(U(S),D,H,ie,P);throw D=String(S),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return be}function K(S,D,H){if(S==null)return S;var ie=[],P=0;return E(S,ie,"","",function(ae){return D.call(H,ae,P++)}),ie}function Z(S){if(S._status===-1){var D=S._result;D=D(),D.then(function(H){(S._status===0||S._status===-1)&&(S._status=1,S._result=H)},function(H){(S._status===0||S._status===-1)&&(S._status=2,S._result=H)}),S._status===-1&&(S._status=0,S._result=D)}if(S._status===1)return S._result.default;throw S._result}var ne=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},ce={map:K,forEach:function(S,D,H){K(S,function(){D.apply(this,arguments)},H)},count:function(S){var D=0;return K(S,function(){D++}),D},toArray:function(S){return K(S,function(D){return D})||[]},only:function(S){if(!je(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Ke.Activity=T,Ke.Children=ce,Ke.Component=oe,Ke.Fragment=u,Ke.Profiler=h,Ke.PureComponent=fe,Ke.StrictMode=o,Ke.Suspense=v,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Te,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(S){return Te.H.useMemoCache(S)}},Ke.cache=function(S){return function(){return S.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(S,D,H){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var ie=I({},S.props),P=S.key;if(D!=null)for(ae in D.key!==void 0&&(P=""+D.key),D)!we.call(D,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&D.ref===void 0||(ie[ae]=D[ae]);var ae=arguments.length-2;if(ae===1)ie.children=H;else if(1<ae){for(var be=Array(ae),Me=0;Me<ae;Me++)be[Me]=arguments[Me+2];ie.children=be}return re(S.type,P,ie)},Ke.createContext=function(S){return S={$$typeof:p,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:m,_context:S},S},Ke.createElement=function(S,D,H){var ie,P={},ae=null;if(D!=null)for(ie in D.key!==void 0&&(ae=""+D.key),D)we.call(D,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(P[ie]=D[ie]);var be=arguments.length-2;if(be===1)P.children=H;else if(1<be){for(var Me=Array(be),Be=0;Be<be;Be++)Me[Be]=arguments[Be+2];P.children=Me}if(S&&S.defaultProps)for(ie in be=S.defaultProps,be)P[ie]===void 0&&(P[ie]=be[ie]);return re(S,ae,P)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(S){return{$$typeof:b,render:S}},Ke.isValidElement=je,Ke.lazy=function(S){return{$$typeof:A,_payload:{_status:-1,_result:S},_init:Z}},Ke.memo=function(S,D){return{$$typeof:x,type:S,compare:D===void 0?null:D}},Ke.startTransition=function(S){var D=Te.T,H={};Te.T=H;try{var ie=S(),P=Te.S;P!==null&&P(H,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Ge,ne)}catch(ae){ne(ae)}finally{D!==null&&H.types!==null&&(D.types=H.types),Te.T=D}},Ke.unstable_useCacheRefresh=function(){return Te.H.useCacheRefresh()},Ke.use=function(S){return Te.H.use(S)},Ke.useActionState=function(S,D,H){return Te.H.useActionState(S,D,H)},Ke.useCallback=function(S,D){return Te.H.useCallback(S,D)},Ke.useContext=function(S){return Te.H.useContext(S)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(S,D){return Te.H.useDeferredValue(S,D)},Ke.useEffect=function(S,D){return Te.H.useEffect(S,D)},Ke.useEffectEvent=function(S){return Te.H.useEffectEvent(S)},Ke.useId=function(){return Te.H.useId()},Ke.useImperativeHandle=function(S,D,H){return Te.H.useImperativeHandle(S,D,H)},Ke.useInsertionEffect=function(S,D){return Te.H.useInsertionEffect(S,D)},Ke.useLayoutEffect=function(S,D){return Te.H.useLayoutEffect(S,D)},Ke.useMemo=function(S,D){return Te.H.useMemo(S,D)},Ke.useOptimistic=function(S,D){return Te.H.useOptimistic(S,D)},Ke.useReducer=function(S,D,H){return Te.H.useReducer(S,D,H)},Ke.useRef=function(S){return Te.H.useRef(S)},Ke.useState=function(S){return Te.H.useState(S)},Ke.useSyncExternalStore=function(S,D,H){return Te.H.useSyncExternalStore(S,D,H)},Ke.useTransition=function(){return Te.H.useTransition()},Ke.version="19.2.4",Ke}var Gp;function Rf(){return Gp||(Gp=1,af.exports=Av()),af.exports}var w=Rf();const eu=Ng(w);var lf={exports:{}},vo={},sf={exports:{}},cf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function kv(){return Vp||(Vp=1,(function(r){function l(E,K){var Z=E.length;E.push(K);e:for(;0<Z;){var ne=Z-1>>>1,ce=E[ne];if(0<h(ce,K))E[ne]=K,E[Z]=ce,Z=ne;else break e}}function u(E){return E.length===0?null:E[0]}function o(E){if(E.length===0)return null;var K=E[0],Z=E.pop();if(Z!==K){E[0]=Z;e:for(var ne=0,ce=E.length,S=ce>>>1;ne<S;){var D=2*(ne+1)-1,H=E[D],ie=D+1,P=E[ie];if(0>h(H,Z))ie<ce&&0>h(P,H)?(E[ne]=P,E[ie]=Z,ne=ie):(E[ne]=H,E[D]=Z,ne=D);else if(ie<ce&&0>h(P,Z))E[ne]=P,E[ie]=Z,ne=ie;else break e}}return K}function h(E,K){var Z=E.sortIndex-K.sortIndex;return Z!==0?Z:E.id-K.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var p=Date,b=p.now();r.unstable_now=function(){return p.now()-b}}var v=[],x=[],A=1,T=null,X=3,O=!1,L=!1,I=!1,te=!1,oe=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function de(E){for(var K=u(x);K!==null;){if(K.callback===null)o(x);else if(K.startTime<=E)o(x),K.sortIndex=K.expirationTime,l(v,K);else break;K=u(x)}}function ke(E){if(I=!1,de(E),!L)if(u(v)!==null)L=!0,Ge||(Ge=!0,ye());else{var K=u(x);K!==null&&U(ke,K.startTime-E)}}var Ge=!1,Te=-1,we=5,re=-1;function Ue(){return te?!0:!(r.unstable_now()-re<we)}function je(){if(te=!1,Ge){var E=r.unstable_now();re=E;var K=!0;try{e:{L=!1,I&&(I=!1,ge(Te),Te=-1),O=!0;var Z=X;try{t:{for(de(E),T=u(v);T!==null&&!(T.expirationTime>E&&Ue());){var ne=T.callback;if(typeof ne=="function"){T.callback=null,X=T.priorityLevel;var ce=ne(T.expirationTime<=E);if(E=r.unstable_now(),typeof ce=="function"){T.callback=ce,de(E),K=!0;break t}T===u(v)&&o(v),de(E)}else o(v);T=u(v)}if(T!==null)K=!0;else{var S=u(x);S!==null&&U(ke,S.startTime-E),K=!1}}break e}finally{T=null,X=Z,O=!1}K=void 0}}finally{K?ye():Ge=!1}}}var ye;if(typeof fe=="function")ye=function(){fe(je)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Y=se.port2;se.port1.onmessage=je,ye=function(){Y.postMessage(null)}}else ye=function(){oe(je,0)};function U(E,K){Te=oe(function(){E(r.unstable_now())},K)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(E){E.callback=null},r.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<E?Math.floor(1e3/E):5},r.unstable_getCurrentPriorityLevel=function(){return X},r.unstable_next=function(E){switch(X){case 1:case 2:case 3:var K=3;break;default:K=X}var Z=X;X=K;try{return E()}finally{X=Z}},r.unstable_requestPaint=function(){te=!0},r.unstable_runWithPriority=function(E,K){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var Z=X;X=E;try{return K()}finally{X=Z}},r.unstable_scheduleCallback=function(E,K,Z){var ne=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ne+Z:ne):Z=ne,E){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Z+ce,E={id:A++,callback:K,priorityLevel:E,startTime:Z,expirationTime:ce,sortIndex:-1},Z>ne?(E.sortIndex=Z,l(x,E),u(v)===null&&E===u(x)&&(I?(ge(Te),Te=-1):I=!0,U(ke,Z-ne))):(E.sortIndex=ce,l(v,E),L||O||(L=!0,Ge||(Ge=!0,ye()))),E},r.unstable_shouldYield=Ue,r.unstable_wrapCallback=function(E){var K=X;return function(){var Z=X;X=K;try{return E.apply(this,arguments)}finally{X=Z}}}})(cf)),cf}var Zp;function Rv(){return Zp||(Zp=1,sf.exports=kv()),sf.exports}var of={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function Mv(){if(Xp)return wn;Xp=1;var r=Rf();function l(v){var x="https://react.dev/errors/"+v;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)x+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var o={d:{f:u,r:function(){throw Error(l(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(v,x,A){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:T==null?null:""+T,children:v,containerInfo:x,implementation:A}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(v,x){if(v==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,wn.createPortal=function(v,x){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(l(299));return m(v,x,null,A)},wn.flushSync=function(v){var x=p.T,A=o.p;try{if(p.T=null,o.p=2,v)return v()}finally{p.T=x,o.p=A,o.d.f()}},wn.preconnect=function(v,x){typeof v=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(v,x))},wn.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},wn.preinit=function(v,x){if(typeof v=="string"&&x&&typeof x.as=="string"){var A=x.as,T=b(A,x.crossOrigin),X=typeof x.integrity=="string"?x.integrity:void 0,O=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;A==="style"?o.d.S(v,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:T,integrity:X,fetchPriority:O}):A==="script"&&o.d.X(v,{crossOrigin:T,integrity:X,fetchPriority:O,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},wn.preinitModule=function(v,x){if(typeof v=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var A=b(x.as,x.crossOrigin);o.d.M(v,{crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(v)},wn.preload=function(v,x){if(typeof v=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var A=x.as,T=b(A,x.crossOrigin);o.d.L(v,A,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},wn.preloadModule=function(v,x){if(typeof v=="string")if(x){var A=b(x.as,x.crossOrigin);o.d.m(v,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:A,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(v)},wn.requestFormReset=function(v){o.d.r(v)},wn.unstable_batchedUpdates=function(v,x){return v(x)},wn.useFormState=function(v,x,A){return p.H.useFormState(v,x,A)},wn.useFormStatus=function(){return p.H.useHostTransitionStatus()},wn.version="19.2.4",wn}var Qp;function Dv(){if(Qp)return of.exports;Qp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),of.exports=Mv(),of.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function Uv(){if(Ip)return vo;Ip=1;var r=Rv(),l=Rf(),u=Dv();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(m(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var c=i.alternate;if(c===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===n)return v(i),e;if(c===a)return v(i),t;c=c.sibling}throw Error(o(188))}if(n.return!==a.return)n=i,a=c;else{for(var f=!1,y=i.child;y;){if(y===n){f=!0,n=i,a=c;break}if(y===a){f=!0,a=i,n=c;break}y=y.sibling}if(!f){for(y=c.child;y;){if(y===n){f=!0,n=c,a=i;break}if(y===a){f=!0,a=c,n=i;break}y=y.sibling}if(!f)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function A(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=A(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,X=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ge=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),Ue=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function ye(e){return e===null||typeof e!="object"?null:(e=je&&e[je]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function Y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case oe:return"Profiler";case te:return"StrictMode";case ke:return"Suspense";case Ge:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case fe:return e.displayName||"Context";case ge:return(e._context.displayName||"Context")+".Consumer";case de:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return t=e.displayName||null,t!==null?t:Y(e.type)||"Memo";case we:t=e._payload,e=e._init;try{return Y(e(t))}catch{}}return null}var U=Array.isArray,E=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ne=[],ce=-1;function S(e){return{current:e}}function D(e){0>ce||(e.current=ne[ce],ne[ce]=null,ce--)}function H(e,t){ce++,ne[ce]=e.current,e.current=t}var ie=S(null),P=S(null),ae=S(null),be=S(null);function Me(e,t){switch(H(ae,t),H(P,e),H(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=rp(t),e=up(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}D(ie),H(ie,e)}function Be(){D(ie),D(P),D(ae)}function He(e){e.memoizedState!==null&&H(be,e);var t=ie.current,n=up(t,e.type);t!==n&&(H(P,e),H(ie,n))}function Fe(e){P.current===e&&(D(ie),D(P)),be.current===e&&(D(be),ho._currentValue=Z)}var Jt,Et;function Vt(e){if(Jt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jt=t&&t[1]||"",Et=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+e+Et}var Bt=!1;function sn(e,t){if(!e||Bt)return"";Bt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(V){var q=V}Reflect.construct(e,[],W)}else{try{W.call()}catch(V){q=V}e.call(W.prototype)}}else{try{throw Error()}catch(V){q=V}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(V){if(V&&q&&typeof V.stack=="string")return[V.stack,q.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=a.DetermineComponentFrameRoot(),f=c[0],y=c[1];if(f&&y){var N=f.split(`
`),B=y.split(`
`);for(i=a=0;a<N.length&&!N[a].includes("DetermineComponentFrameRoot");)a++;for(;i<B.length&&!B[i].includes("DetermineComponentFrameRoot");)i++;if(a===N.length||i===B.length)for(a=N.length-1,i=B.length-1;1<=a&&0<=i&&N[a]!==B[i];)i--;for(;1<=a&&0<=i;a--,i--)if(N[a]!==B[i]){if(a!==1||i!==1)do if(a--,i--,0>i||N[a]!==B[i]){var Q=`
`+N[a].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=a&&0<=i);break}}}finally{Bt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Vt(n):""}function Rn(e,t){switch(e.tag){case 26:case 27:case 5:return Vt(e.type);case 16:return Vt("Lazy");case 13:return e.child!==t&&t!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return sn(e.type,!1);case 11:return sn(e.type.render,!1);case 1:return sn(e.type,!0);case 31:return Vt("Activity");default:return""}}function $t(e){try{var t="",n=null;do t+=Rn(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var en=Object.prototype.hasOwnProperty,gn=r.unstable_scheduleCallback,cn=r.unstable_cancelCallback,le=r.unstable_shouldYield,Ie=r.unstable_requestPaint,k=r.unstable_now,pe=r.unstable_getCurrentPriorityLevel,Oe=r.unstable_ImmediatePriority,qe=r.unstable_UserBlockingPriority,rt=r.unstable_NormalPriority,Ye=r.unstable_LowPriority,G=r.unstable_IdlePriority,Je=r.log,on=r.unstable_setDisableYieldValue,Lt=null,Ht=null;function qt(e){if(typeof Je=="function"&&on(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Lt,e)}catch{}}var Tt=Math.clz32?Math.clz32:Ml,Wa=Math.log,st=Math.LN2;function Ml(e){return e>>>=0,e===0?32:31-(Wa(e)/st|0)|0}var De=256,rn=262144,Mn=4194304;function yn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function jt(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,c=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var y=a&134217727;return y!==0?(a=y&~c,a!==0?i=yn(a):(f&=y,f!==0?i=yn(f):n||(n=y&~e,n!==0&&(i=yn(n))))):(y=a&~c,y!==0?i=yn(y):f!==0?i=yn(f):n||(n=a&~e,n!==0&&(i=yn(n)))),i===0?0:t!==0&&t!==i&&(t&c)===0&&(c=i&-i,n=t&-t,c>=n||c===32&&(n&4194048)!==0)?t:i}function _a(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function We(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $n(){var e=Mn;return Mn<<=1,(Mn&62914560)===0&&(Mn=4194304),e}function Fn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Dn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ft(e,t,n,a,i,c){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var y=e.entanglements,N=e.expirationTimes,B=e.hiddenUpdates;for(n=f&~n;0<n;){var Q=31-Tt(n),W=1<<Q;y[Q]=0,N[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var V=q[Q];V!==null&&(V.lane&=-536870913)}n&=~W}a!==0&&Na(e,a,0),c!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=c&~(f&~t))}function Na(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Tt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Tt(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Ea(e,t){var n=t&-t;return n=(n&42)!==0?1:Ve(n),(n&(e.suspendedLanes|t))!==0?0:n}function Ve(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function oa(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:Dp(e.type))}function ra(e,t){var n=K.p;try{return K.p=e,t()}finally{K.p=n}}var nn=Math.random().toString(36).slice(2),ht="__reactFiber$"+nn,mt="__reactProps$"+nn,vn="__reactContainer$"+nn,Un="__reactEvents$"+nn,ua="__reactListeners$"+nn,Dl="__reactHandles$"+nn,Ba="__reactResources$"+nn,_e="__reactMarker$"+nn;function j(e){delete e[ht],delete e[mt],delete e[Un],delete e[ua],delete e[Dl]}function ee(e){var t=e[ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vn]||n[ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yp(e);e!==null;){if(n=e[ht])return n;e=yp(e)}return t}e=n,n=e.parentNode}return null}function xe(e){if(e=e[ht]||e[vn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function _t(e){var t=e[Ba];return t||(t=e[Ba]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Xe(e){e[_e]=!0}var Kt=new Set,bn={};function an(e,t){Wn(e,t),Wn(e+"Capture",t)}function Wn(e,t){for(bn[e]=t,e=0;e<t.length;e++)Kt.add(t[e])}var At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pa={},el={};function Ws(e){return en.call(el,e)?!0:en.call(Pa,e)?!1:At.test(e)?el[e]=!0:(Pa[e]=!0,!1)}function Ul(e,t,n){if(Ws(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function bi(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Mt(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ji(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ro(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,c=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(f){n=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xi(e){if(!e._valueTracker){var t=Ji(e)?"checked":"value";e._valueTracker=Ro(e,t,""+e[t])}}function Mo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Ji(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ps=/[\n"\\]/g;function xn(e){return e.replace(Ps,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ec(e,t,n,a,i,c,f,y){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Wt(t)):e.value!==""+Wt(t)&&(e.value=""+Wt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Si(e,f,Wt(t)):n!=null?Si(e,f,Wt(n)):a!=null&&e.removeAttribute("value"),i==null&&c!=null&&(e.defaultChecked=!!c),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Wt(y):e.removeAttribute("name")}function zl(e,t,n,a,i,c,f,y){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||n!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){xi(e);return}n=n!=null?""+Wt(n):"",t=t!=null?""+Wt(t):n,y||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=y?e.checked:!!a,e.defaultChecked=!!a,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),xi(e)}function Si(e,t,n){t==="number"&&Ol(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ja(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Wt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function tc(e,t,n){if(t!=null&&(t=""+Wt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Wt(n):""}function nc(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(o(92));if(U(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Wt(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),xi(e)}function tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ac(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||bu.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function lc(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&ac(e,i,a)}else for(var c in t)t.hasOwnProperty(c)&&ac(e,c,t[c])}function ic(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Do=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $i(e){return xu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ca(){}var wi=null;function _i(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bl=null,da=null;function Fi(e){var t=xe(e);if(t&&(e=t.stateNode)){var n=e[mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ec(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[mt]||null;if(!i)throw Error(o(90));ec(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Mo(a)}break e;case"textarea":tc(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ja(e,!!n.multiple,t,!1)}}}var Ll=!1;function nl(e,t,n){if(Ll)return e(t,n);Ll=!0;try{var a=e(t);return a}finally{if(Ll=!1,(Bl!==null||da!==null)&&(wr(),Bl&&(t=Bl,e=da,da=Bl=null,Fi(t),e)))for(t=0;t<e.length;t++)Fi(e[t])}}function Hl(e,t){var n=e.stateNode;if(n===null)return null;var a=n[mt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=!1;if(pt)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){sc=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{sc=!1}var fa=null,Ni=null,Ta=null;function cc(){if(Ta)return Ta;var e,t=Ni,n=t.length,a,i="value"in fa?fa.value:fa.textContent,c=i.length;for(e=0;e<n&&t[e]===i[e];e++);var f=n-e;for(a=1;a<=f&&t[n-a]===i[c-a];a++);return Ta=i.slice(e,1<a?1-a:void 0)}function al(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function La(){return!0}function Wi(){return!1}function un(e){function t(n,a,i,c,f){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?La:Wi,this.isPropagationStopped=Wi,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),t}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=un(Ha),ll=T({},Ha,{view:0,detail:0}),Pi=un(ll),ji,es,il,Ci=T({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==il&&(il&&e.type==="mousemove"?(ji=e.screenX-il.screenX,es=e.screenY-il.screenY):es=ji=0,il=e),ji)},movementY:function(e){return"movementY"in e?e.movementY:es}}),oc=un(Ci),rc=T({},Ci,{dataTransfer:0}),ts=un(rc),Kl=T({},ll,{relatedTarget:0}),uc=un(Kl),Ti=T({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=un(Ti),dc=T({},Ha,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uo=un(dc),wu=T({},Ha,{data:0}),ns=un(wu),fc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_u[e])?!!t[e]:!1}function mc(){return Nu}var Oo=T({},ll,{key:function(e){if(e.key){var t=fc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mc,charCode:function(e){return e.type==="keypress"?al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Eu=un(Oo),pc=T({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),as=un(pc),gc=T({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mc}),yc=un(gc),zo=T({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),sl=un(zo),vc=T({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bo=un(vc),ls=T({},Ha,{newState:0,oldState:0}),is=un(ls),ss=[9,13,27,32],Ai=pt&&"CompositionEvent"in window,Aa=null;pt&&"documentMode"in document&&(Aa=document.documentMode);var Yl=pt&&"TextEvent"in window&&!Aa,bc=pt&&(!Ai||Aa&&8<Aa&&11>=Aa),xc=" ",Sc=!1;function cs(e,t){switch(e){case"keyup":return ss.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ki(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cl=!1;function ju(e,t){switch(e){case"compositionend":return ki(t);case"keypress":return t.which!==32?null:(Sc=!0,xc);case"textInput":return e=t.data,e===xc&&Sc?null:e;default:return null}}function Cu(e,t){if(cl)return e==="compositionend"||!Ai&&cs(e,t)?(e=cc(),Ta=Ni=fa=null,cl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bc&&t.locale!=="ko"?null:t.data;default:return null}}var wc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wc[e.type]:t==="textarea"}function Ri(e,t,n,a){Bl?da?da.push(a):da=[a]:Bl=a,t=Ar(t,"onChange"),0<t.length&&(n=new Ei("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var ol=null,Mi=null;function Tu(e){ap(e,0)}function Di(e){var t=Pe(e);if(Mo(t))return e}function os(e,t){if(e==="change")return t}var Nc=!1;if(pt){var Ec;if(pt){var rs="oninput"in document;if(!rs){var Lo=document.createElement("div");Lo.setAttribute("oninput","return;"),rs=typeof Lo.oninput=="function"}Ec=rs}else Ec=!1;Nc=Ec&&(!document.documentMode||9<document.documentMode)}function Dt(){ol&&(ol.detachEvent("onpropertychange",Gl),Mi=ol=null)}function Gl(e){if(e.propertyName==="value"&&Di(Mi)){var t=[];Ri(t,Mi,e,_i(e)),nl(Tu,t)}}function Ho(e,t,n){e==="focusin"?(Dt(),ol=t,Mi=n,ol.attachEvent("onpropertychange",Gl)):e==="focusout"&&Dt()}function qo(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Di(Mi)}function Ko(e,t){if(e==="click")return Di(t)}function Yo(e,t){if(e==="input"||e==="change")return Di(t)}function Go(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _n=typeof Object.is=="function"?Object.is:Go;function Vl(e,t){if(_n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!en.call(t,i)||!_n(e[i],t[i]))return!1}return!0}function jc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zl(e,t){var n=jc(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jc(n)}}function us(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?us(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function On(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ol(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ol(e.document)}return t}function Cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vo=pt&&"documentMode"in document&&11>=document.documentMode,zn=null,Bn=null,Ln=null,qa=!1;function ds(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qa||zn==null||zn!==Ol(a)||(a=zn,"selectionStart"in a&&Cc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ln&&Vl(Ln,a)||(Ln=a,a=Ar(Bn,"onSelect"),0<a.length&&(t=new Ei("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=zn)))}function Hn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rl={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},Tc={},Zo={};pt&&(Zo=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function ul(e){if(Tc[e])return Tc[e];if(!rl[e])return e;var t=rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zo)return Tc[e]=t[n];return e}var Xo=ul("animationend"),Pn=ul("animationiteration"),Ac=ul("animationstart"),kc=ul("transitionrun"),Rc=ul("transitionstart"),Qo=ul("transitioncancel"),Mc=ul("transitionend"),fs=new Map,Dc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dc.push("scrollEnd");function ea(e,t){fs.set(e,t),an(t,[e])}var hs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qn=[],dl=0,ms=0;function ps(){for(var e=dl,t=ms=dl=0;t<e;){var n=qn[t];qn[t++]=null;var a=qn[t];qn[t++]=null;var i=qn[t];qn[t++]=null;var c=qn[t];if(qn[t++]=null,a!==null&&i!==null){var f=a.pending;f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i}c!==0&&Oc(n,i,c)}}function gs(e,t,n,a){qn[dl++]=e,qn[dl++]=t,qn[dl++]=n,qn[dl++]=a,ms|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Uc(e,t,n,a){return gs(e,t,n,a),fl(e)}function Ka(e,t){return gs(e,null,null,t),fl(e)}function Oc(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,c=e.return;c!==null;)c.childLanes|=n,a=c.alternate,a!==null&&(a.childLanes|=n),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(i=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,i&&t!==null&&(i=31-Tt(n),e=c.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),c):null}function fl(e){if(50<io)throw io=0,jd=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var hl={};function Io(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,n,a){return new Io(e,t,n,a)}function zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ha(e,t){var n=e.alternate;return n===null?(n=Sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ys(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function vs(e,t,n,a,i,c){var f=0;if(a=e,typeof e=="function")zc(e)&&(f=1);else if(typeof e=="string")f=hv(e,n,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=Sn(31,n,t,i),e.elementType=re,e.lanes=c,e;case I:return Ya(n.children,i,c,t);case te:f=8,i|=24;break;case oe:return e=Sn(12,n,t,i|2),e.elementType=oe,e.lanes=c,e;case ke:return e=Sn(13,n,t,i),e.elementType=ke,e.lanes=c,e;case Ge:return e=Sn(19,n,t,i),e.elementType=Ge,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:f=10;break e;case ge:f=9;break e;case de:f=11;break e;case Te:f=14;break e;case we:f=16,a=null;break e}f=29,n=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=Sn(f,n,t,i),t.elementType=e,t.type=a,t.lanes=c,t}function Ya(e,t,n,a){return e=Sn(7,e,a,t),e.lanes=n,e}function Bc(e,t,n){return e=Sn(6,e,null,t),e.lanes=n,e}function Lc(e){var t=Sn(18,null,null,0);return t.stateNode=e,t}function Hc(e,t,n){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var bs=new WeakMap;function Kn(e,t){if(typeof e=="object"&&e!==null){var n=bs.get(e);return n!==void 0?n:(t={value:e,source:t,stack:$t(t)},bs.set(e,t),t)}return{value:e,source:t,stack:$t(t)}}var Xl=[],Ql=0,xs=null,Ui=0,Nn=[],Yn=0,dn=null,ma=1,ta="";function pa(e,t){Xl[Ql++]=Ui,Xl[Ql++]=xs,xs=e,Ui=t}function ka(e,t,n){Nn[Yn++]=ma,Nn[Yn++]=ta,Nn[Yn++]=dn,dn=e;var a=ma;e=ta;var i=32-Tt(a)-1;a&=~(1<<i),n+=1;var c=32-Tt(t)+i;if(30<c){var f=i-i%5;c=(a&(1<<f)-1).toString(32),a>>=f,i-=f,ma=1<<32-Tt(t)+i|n<<i|a,ta=c+e}else ma=1<<c|n<<i|a,ta=e}function Oi(e){e.return!==null&&(pa(e,1),ka(e,1,0))}function Ss(e){for(;e===xs;)xs=Xl[--Ql],Xl[Ql]=null,Ui=Xl[--Ql],Xl[Ql]=null;for(;e===dn;)dn=Nn[--Yn],Nn[Yn]=null,ta=Nn[--Yn],Nn[Yn]=null,ma=Nn[--Yn],Nn[Yn]=null}function Jo(e,t){Nn[Yn++]=ma,Nn[Yn++]=ta,Nn[Yn++]=dn,ma=t.id,ta=t.overflow,dn=e}var Zt=null,bt=null,et=!1,Ga=null,En=!1,ws=Error(o(519));function Ra(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(Kn(t,e)),ws}function qc(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[ht]=e,t[mt]=a,n){case"dialog":at("cancel",t),at("close",t);break;case"iframe":case"object":case"embed":at("load",t);break;case"video":case"audio":for(n=0;n<co.length;n++)at(co[n],t);break;case"source":at("error",t);break;case"img":case"image":case"link":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"input":at("invalid",t),zl(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":at("invalid",t);break;case"textarea":at("invalid",t),nc(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||cp(t.textContent,n)?(a.popover!=null&&(at("beforetoggle",t),at("toggle",t)),a.onScroll!=null&&at("scroll",t),a.onScrollEnd!=null&&at("scrollend",t),a.onClick!=null&&(t.onclick=Ca),t=!0):t=!1,t||Ra(e,!0)}function Kc(e){for(Zt=e.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:En=!1;return;case 27:case 3:En=!0;return;default:Zt=Zt.return}}function ml(e){if(e!==Zt)return!1;if(!et)return Kc(e),et=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Kd(e.type,e.memoizedProps)),n=!n),n&&bt&&Ra(e),Kc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));bt=gp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));bt=gp(e)}else t===27?(t=bt,oi(e.type)?(e=Xd,Xd=null,bt=e):bt=t):bt=Zt?va(e.stateNode.nextSibling):null;return!0}function Va(){bt=Zt=null,et=!1}function _s(){var e=Ga;return e!==null&&(Xn===null?Xn=e:Xn.push.apply(Xn,e),Ga=null),e}function Il(e){Ga===null?Ga=[e]:Ga.push(e)}var Ns=S(null),Za=null,ga=null;function d(e,t,n){H(Ns,t._currentValue),t._currentValue=n}function g(e){e._currentValue=Ns.current,D(Ns)}function _(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function R(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){var f=i.child;c=c.firstContext;e:for(;c!==null;){var y=c;c=i;for(var N=0;N<t.length;N++)if(y.context===t[N]){c.lanes|=n,y=c.alternate,y!==null&&(y.lanes|=n),_(c.return,n,e),a||(f=null);break e}c=y.next}}else if(i.tag===18){if(f=i.return,f===null)throw Error(o(341));f.lanes|=n,c=f.alternate,c!==null&&(c.lanes|=n),_(f,n,e),f=null}else f=i.child;if(f!==null)f.return=i;else for(f=i;f!==null;){if(f===e){f=null;break}if(i=f.sibling,i!==null){i.return=f.return,f=i;break}f=f.return}i=f}}function J(e,t,n,a){e=null;for(var i=t,c=!1;i!==null;){if(!c){if((i.flags&524288)!==0)c=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var f=i.alternate;if(f===null)throw Error(o(387));if(f=f.memoizedProps,f!==null){var y=i.type;_n(i.pendingProps.value,f.value)||(e!==null?e.push(y):e=[y])}}else if(i===be.current){if(f=i.alternate,f===null)throw Error(o(387));f.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}i=i.return}e!==null&&R(t,e,n,a),t.flags|=262144}function ve(e){for(e=e.firstContext;e!==null;){if(!_n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function he(e){Za=e,ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ze(e){return Se(Za,e)}function tt(e,t){return Za===null&&he(e),Se(e,t)}function Se(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ga===null){if(e===null)throw Error(o(308));ga=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ga=ga.next=t;return n}var me=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},kt=r.unstable_scheduleCallback,Rt=r.unstable_NormalPriority,Le={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fn(){return{controller:new me,data:new Map,refCount:0}}function hn(e){e.refCount--,e.refCount===0&&kt(Rt,function(){e.controller.abort()})}var Jl=null,Au=0,Es=0,js=null;function fy(e,t){if(Jl===null){var n=Jl=[];Au=0,Es=Md(),js={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Au++,t.then(Qf,Qf),t}function Qf(){if(--Au===0&&Jl!==null){js!==null&&(js.status="fulfilled");var e=Jl;Jl=null,Es=0,js=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function hy(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var If=E.S;E.S=function(e,t){Rm=k(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&fy(e,t),If!==null&&If(e,t)};var zi=S(null);function ku(){var e=zi.current;return e!==null?e:xt.pooledCache}function $o(e,t){t===null?H(zi,zi.current):H(zi,t.pool)}function Jf(){var e=ku();return e===null?null:{parent:Le._currentValue,pool:e}}var Cs=Error(o(460)),Ru=Error(o(474)),Fo=Error(o(542)),Wo={then:function(){}};function $f(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ff(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ca,Ca),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pf(e),e;default:if(typeof t.status=="string")t.then(Ca,Ca);else{if(e=xt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pf(e),e}throw Li=t,Cs}}function Bi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Li=n,Cs):n}}var Li=null;function Wf(){if(Li===null)throw Error(o(459));var e=Li;return Li=null,e}function Pf(e){if(e===Cs||e===Fo)throw Error(o(483))}var Ts=null,Yc=0;function Po(e){var t=Yc;return Yc+=1,Ts===null&&(Ts=[]),Ff(Ts,e,t)}function Gc(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function er(e,t){throw t.$$typeof===X?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function eh(e){function t(M,C){if(e){var z=M.deletions;z===null?(M.deletions=[C],M.flags|=16):z.push(C)}}function n(M,C){if(!e)return null;for(;C!==null;)t(M,C),C=C.sibling;return null}function a(M){for(var C=new Map;M!==null;)M.key!==null?C.set(M.key,M):C.set(M.index,M),M=M.sibling;return C}function i(M,C){return M=ha(M,C),M.index=0,M.sibling=null,M}function c(M,C,z){return M.index=z,e?(z=M.alternate,z!==null?(z=z.index,z<C?(M.flags|=67108866,C):z):(M.flags|=67108866,C)):(M.flags|=1048576,C)}function f(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function y(M,C,z,F){return C===null||C.tag!==6?(C=Bc(z,M.mode,F),C.return=M,C):(C=i(C,z),C.return=M,C)}function N(M,C,z,F){var Ae=z.type;return Ae===I?Q(M,C,z.props.children,F,z.key):C!==null&&(C.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===we&&Bi(Ae)===C.type)?(C=i(C,z.props),Gc(C,z),C.return=M,C):(C=vs(z.type,z.key,z.props,null,M.mode,F),Gc(C,z),C.return=M,C)}function B(M,C,z,F){return C===null||C.tag!==4||C.stateNode.containerInfo!==z.containerInfo||C.stateNode.implementation!==z.implementation?(C=Hc(z,M.mode,F),C.return=M,C):(C=i(C,z.children||[]),C.return=M,C)}function Q(M,C,z,F,Ae){return C===null||C.tag!==7?(C=Ya(z,M.mode,F,Ae),C.return=M,C):(C=i(C,z),C.return=M,C)}function W(M,C,z){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Bc(""+C,M.mode,z),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case O:return z=vs(C.type,C.key,C.props,null,M.mode,z),Gc(z,C),z.return=M,z;case L:return C=Hc(C,M.mode,z),C.return=M,C;case we:return C=Bi(C),W(M,C,z)}if(U(C)||ye(C))return C=Ya(C,M.mode,z,null),C.return=M,C;if(typeof C.then=="function")return W(M,Po(C),z);if(C.$$typeof===fe)return W(M,tt(M,C),z);er(M,C)}return null}function q(M,C,z,F){var Ae=C!==null?C.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ae!==null?null:y(M,C,""+z,F);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return z.key===Ae?N(M,C,z,F):null;case L:return z.key===Ae?B(M,C,z,F):null;case we:return z=Bi(z),q(M,C,z,F)}if(U(z)||ye(z))return Ae!==null?null:Q(M,C,z,F,null);if(typeof z.then=="function")return q(M,C,Po(z),F);if(z.$$typeof===fe)return q(M,C,tt(M,z),F);er(M,z)}return null}function V(M,C,z,F,Ae){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return M=M.get(z)||null,y(C,M,""+F,Ae);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return M=M.get(F.key===null?z:F.key)||null,N(C,M,F,Ae);case L:return M=M.get(F.key===null?z:F.key)||null,B(C,M,F,Ae);case we:return F=Bi(F),V(M,C,z,F,Ae)}if(U(F)||ye(F))return M=M.get(z)||null,Q(C,M,F,Ae,null);if(typeof F.then=="function")return V(M,C,z,Po(F),Ae);if(F.$$typeof===fe)return V(M,C,z,tt(C,F),Ae);er(C,F)}return null}function Ne(M,C,z,F){for(var Ae=null,ct=null,Ee=C,Qe=C=0,it=null;Ee!==null&&Qe<z.length;Qe++){Ee.index>Qe?(it=Ee,Ee=null):it=Ee.sibling;var ot=q(M,Ee,z[Qe],F);if(ot===null){Ee===null&&(Ee=it);break}e&&Ee&&ot.alternate===null&&t(M,Ee),C=c(ot,C,Qe),ct===null?Ae=ot:ct.sibling=ot,ct=ot,Ee=it}if(Qe===z.length)return n(M,Ee),et&&pa(M,Qe),Ae;if(Ee===null){for(;Qe<z.length;Qe++)Ee=W(M,z[Qe],F),Ee!==null&&(C=c(Ee,C,Qe),ct===null?Ae=Ee:ct.sibling=Ee,ct=Ee);return et&&pa(M,Qe),Ae}for(Ee=a(Ee);Qe<z.length;Qe++)it=V(Ee,M,Qe,z[Qe],F),it!==null&&(e&&it.alternate!==null&&Ee.delete(it.key===null?Qe:it.key),C=c(it,C,Qe),ct===null?Ae=it:ct.sibling=it,ct=it);return e&&Ee.forEach(function(hi){return t(M,hi)}),et&&pa(M,Qe),Ae}function Re(M,C,z,F){if(z==null)throw Error(o(151));for(var Ae=null,ct=null,Ee=C,Qe=C=0,it=null,ot=z.next();Ee!==null&&!ot.done;Qe++,ot=z.next()){Ee.index>Qe?(it=Ee,Ee=null):it=Ee.sibling;var hi=q(M,Ee,ot.value,F);if(hi===null){Ee===null&&(Ee=it);break}e&&Ee&&hi.alternate===null&&t(M,Ee),C=c(hi,C,Qe),ct===null?Ae=hi:ct.sibling=hi,ct=hi,Ee=it}if(ot.done)return n(M,Ee),et&&pa(M,Qe),Ae;if(Ee===null){for(;!ot.done;Qe++,ot=z.next())ot=W(M,ot.value,F),ot!==null&&(C=c(ot,C,Qe),ct===null?Ae=ot:ct.sibling=ot,ct=ot);return et&&pa(M,Qe),Ae}for(Ee=a(Ee);!ot.done;Qe++,ot=z.next())ot=V(Ee,M,Qe,ot.value,F),ot!==null&&(e&&ot.alternate!==null&&Ee.delete(ot.key===null?Qe:ot.key),C=c(ot,C,Qe),ct===null?Ae=ot:ct.sibling=ot,ct=ot);return e&&Ee.forEach(function(Nv){return t(M,Nv)}),et&&pa(M,Qe),Ae}function vt(M,C,z,F){if(typeof z=="object"&&z!==null&&z.type===I&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case O:e:{for(var Ae=z.key;C!==null;){if(C.key===Ae){if(Ae=z.type,Ae===I){if(C.tag===7){n(M,C.sibling),F=i(C,z.props.children),F.return=M,M=F;break e}}else if(C.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===we&&Bi(Ae)===C.type){n(M,C.sibling),F=i(C,z.props),Gc(F,z),F.return=M,M=F;break e}n(M,C);break}else t(M,C);C=C.sibling}z.type===I?(F=Ya(z.props.children,M.mode,F,z.key),F.return=M,M=F):(F=vs(z.type,z.key,z.props,null,M.mode,F),Gc(F,z),F.return=M,M=F)}return f(M);case L:e:{for(Ae=z.key;C!==null;){if(C.key===Ae)if(C.tag===4&&C.stateNode.containerInfo===z.containerInfo&&C.stateNode.implementation===z.implementation){n(M,C.sibling),F=i(C,z.children||[]),F.return=M,M=F;break e}else{n(M,C);break}else t(M,C);C=C.sibling}F=Hc(z,M.mode,F),F.return=M,M=F}return f(M);case we:return z=Bi(z),vt(M,C,z,F)}if(U(z))return Ne(M,C,z,F);if(ye(z)){if(Ae=ye(z),typeof Ae!="function")throw Error(o(150));return z=Ae.call(z),Re(M,C,z,F)}if(typeof z.then=="function")return vt(M,C,Po(z),F);if(z.$$typeof===fe)return vt(M,C,tt(M,z),F);er(M,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,C!==null&&C.tag===6?(n(M,C.sibling),F=i(C,z),F.return=M,M=F):(n(M,C),F=Bc(z,M.mode,F),F.return=M,M=F),f(M)):n(M,C)}return function(M,C,z,F){try{Yc=0;var Ae=vt(M,C,z,F);return Ts=null,Ae}catch(Ee){if(Ee===Cs||Ee===Fo)throw Ee;var ct=Sn(29,Ee,null,M.mode);return ct.lanes=F,ct.return=M,ct}finally{}}}var Hi=eh(!0),th=eh(!1),$l=!1;function Mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wl(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ut&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=fl(e),Oc(e,null,n),t}return gs(e,a,t,n),fl(e)}function Vc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ce(e,n)}}function Uu(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?i=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?i=c=t:c=c.next=t}else i=c=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ou=!1;function Zc(){if(Ou){var e=js;if(e!==null)throw e}}function Xc(e,t,n,a){Ou=!1;var i=e.updateQueue;$l=!1;var c=i.firstBaseUpdate,f=i.lastBaseUpdate,y=i.shared.pending;if(y!==null){i.shared.pending=null;var N=y,B=N.next;N.next=null,f===null?c=B:f.next=B,f=N;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,y=Q.lastBaseUpdate,y!==f&&(y===null?Q.firstBaseUpdate=B:y.next=B,Q.lastBaseUpdate=N))}if(c!==null){var W=i.baseState;f=0,Q=B=N=null,y=c;do{var q=y.lane&-536870913,V=q!==y.lane;if(V?(lt&q)===q:(a&q)===q){q!==0&&q===Es&&(Ou=!0),Q!==null&&(Q=Q.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var Ne=e,Re=y;q=t;var vt=n;switch(Re.tag){case 1:if(Ne=Re.payload,typeof Ne=="function"){W=Ne.call(vt,W,q);break e}W=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Re.payload,q=typeof Ne=="function"?Ne.call(vt,W,q):Ne,q==null)break e;W=T({},W,q);break e;case 2:$l=!0}}q=y.callback,q!==null&&(e.flags|=64,V&&(e.flags|=8192),V=i.callbacks,V===null?i.callbacks=[q]:V.push(q))}else V={lane:q,tag:y.tag,payload:y.payload,callback:y.callback,next:null},Q===null?(B=Q=V,N=W):Q=Q.next=V,f|=q;if(y=y.next,y===null){if(y=i.shared.pending,y===null)break;V=y,y=V.next,V.next=null,i.lastBaseUpdate=V,i.shared.pending=null}}while(!0);Q===null&&(N=W),i.baseState=N,i.firstBaseUpdate=B,i.lastBaseUpdate=Q,c===null&&(i.shared.lanes=0),ai|=f,e.lanes=f,e.memoizedState=W}}function nh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ah(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)nh(n[e],t)}var As=S(null),tr=S(0);function lh(e,t){e=_l,H(tr,e),H(As,t),_l=e|t.baseLanes}function zu(){H(tr,_l),H(As,As.current)}function Bu(){_l=tr.current,D(As),D(tr)}var na=S(null),ya=null;function Pl(e){var t=e.alternate;H(Yt,Yt.current&1),H(na,e),ya===null&&(t===null||As.current!==null||t.memoizedState!==null)&&(ya=e)}function Lu(e){H(Yt,Yt.current),H(na,e),ya===null&&(ya=e)}function ih(e){e.tag===22?(H(Yt,Yt.current),H(na,e),ya===null&&(ya=e)):ei()}function ei(){H(Yt,Yt.current),H(na,na.current)}function aa(e){D(na),ya===e&&(ya=null),D(Yt)}var Yt=S(0);function nr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Vd(n)||Zd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pl=0,Ze=null,gt=null,Xt=null,ar=!1,ks=!1,qi=!1,lr=0,Qc=0,Rs=null,my=0;function Ut(){throw Error(o(321))}function Hu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_n(e[n],t[n]))return!1;return!0}function qu(e,t,n,a,i,c){return pl=c,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?Yh:td,qi=!1,c=n(a,i),qi=!1,ks&&(c=ch(t,n,a,i)),sh(e),c}function sh(e){E.H=$c;var t=gt!==null&&gt.next!==null;if(pl=0,Xt=gt=Ze=null,ar=!1,Qc=0,Rs=null,t)throw Error(o(300));e===null||Qt||(e=e.dependencies,e!==null&&ve(e)&&(Qt=!0))}function ch(e,t,n,a){Ze=e;var i=0;do{if(ks&&(Rs=null),Qc=0,ks=!1,25<=i)throw Error(o(301));if(i+=1,Xt=gt=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}E.H=Gh,c=t(n,a)}while(ks);return c}function py(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?Ic(t):t,e=e.useState()[0],(gt!==null?gt.memoizedState:null)!==e&&(Ze.flags|=1024),t}function Ku(){var e=lr!==0;return lr=0,e}function Yu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Gu(e){if(ar){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ar=!1}pl=0,Xt=gt=Ze=null,ks=!1,Qc=lr=0,Rs=null}function jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Ze.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function Gt(){if(gt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=Xt===null?Ze.memoizedState:Xt.next;if(t!==null)Xt=t,gt=e;else{if(e===null)throw Ze.alternate===null?Error(o(467)):Error(o(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Xt===null?Ze.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function ir(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ic(e){var t=Qc;return Qc+=1,Rs===null&&(Rs=[]),e=Ff(Rs,e,t),t=Ze,(Xt===null?t.memoizedState:Xt.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?Yh:td),e}function sr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ic(e);if(e.$$typeof===fe)return ze(e)}throw Error(o(438,String(e)))}function Vu(e){var t=null,n=Ze.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Ze.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ir(),Ze.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=Ue;return t.index++,n}function gl(e,t){return typeof t=="function"?t(e):t}function cr(e){var t=Gt();return Zu(t,gt,e)}function Zu(e,t,n){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var i=e.baseQueue,c=a.pending;if(c!==null){if(i!==null){var f=i.next;i.next=c.next,c.next=f}t.baseQueue=i=c,a.pending=null}if(c=e.baseState,i===null)e.memoizedState=c;else{t=i.next;var y=f=null,N=null,B=t,Q=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(lt&W)===W:(pl&W)===W){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===Es&&(Q=!0);else if((pl&q)===q){B=B.next,q===Es&&(Q=!0);continue}else W={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(y=N=W,f=c):N=N.next=W,Ze.lanes|=q,ai|=q;W=B.action,qi&&n(c,W),c=B.hasEagerState?B.eagerState:n(c,W)}else q={lane:W,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(y=N=q,f=c):N=N.next=q,Ze.lanes|=W,ai|=W;B=B.next}while(B!==null&&B!==t);if(N===null?f=c:N.next=y,!_n(c,e.memoizedState)&&(Qt=!0,Q&&(n=js,n!==null)))throw n;e.memoizedState=c,e.baseState=f,e.baseQueue=N,a.lastRenderedState=c}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Xu(e){var t=Gt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,c=t.memoizedState;if(i!==null){n.pending=null;var f=i=i.next;do c=e(c,f.action),f=f.next;while(f!==i);_n(c,t.memoizedState)||(Qt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,a]}function oh(e,t,n){var a=Ze,i=Gt(),c=et;if(c){if(n===void 0)throw Error(o(407));n=n()}else n=t();var f=!_n((gt||i).memoizedState,n);if(f&&(i.memoizedState=n,Qt=!0),i=i.queue,Ju(dh.bind(null,a,i,e),[e]),i.getSnapshot!==t||f||Xt!==null&&Xt.memoizedState.tag&1){if(a.flags|=2048,Ms(9,{destroy:void 0},uh.bind(null,a,i,n,t),null),xt===null)throw Error(o(349));c||(pl&127)!==0||rh(a,t,n)}return n}function rh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t=ir(),Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uh(e,t,n,a){t.value=n,t.getSnapshot=a,fh(t)&&hh(e)}function dh(e,t,n){return n(function(){fh(t)&&hh(e)})}function fh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_n(e,n)}catch{return!0}}function hh(e){var t=Ka(e,2);t!==null&&Qn(t,e,2)}function Qu(e){var t=jn();if(typeof e=="function"){var n=e;if(e=n(),qi){qt(!0);try{n()}finally{qt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:e},t}function mh(e,t,n,a){return e.baseState=n,Zu(e,gt,typeof a=="function"?a:gl)}function gy(e,t,n,a,i){if(ur(e))throw Error(o(485));if(e=t.action,e!==null){var c={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){c.listeners.push(f)}};E.T!==null?n(!0):c.isTransition=!1,a(c),n=t.pending,n===null?(c.next=t.pending=c,ph(t,c)):(c.next=n.next,t.pending=n.next=c)}}function ph(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var c=E.T,f={};E.T=f;try{var y=n(i,a),N=E.S;N!==null&&N(f,y),gh(e,t,y)}catch(B){Iu(e,t,B)}finally{c!==null&&f.types!==null&&(c.types=f.types),E.T=c}}else try{c=n(i,a),gh(e,t,c)}catch(B){Iu(e,t,B)}}function gh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){yh(e,t,a)},function(a){return Iu(e,t,a)}):yh(e,t,n)}function yh(e,t,n){t.status="fulfilled",t.value=n,vh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ph(e,n)))}function Iu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,vh(t),t=t.next;while(t!==a)}e.action=null}function vh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bh(e,t){return t}function xh(e,t){if(et){var n=xt.formState;if(n!==null){e:{var a=Ze;if(et){if(bt){t:{for(var i=bt,c=En;i.nodeType!==8;){if(!c){i=null;break t}if(i=va(i.nextSibling),i===null){i=null;break t}}c=i.data,i=c==="F!"||c==="F"?i:null}if(i){bt=va(i.nextSibling),a=i.data==="F!";break e}}Ra(a)}a=!1}a&&(t=n[0])}}return n=jn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:t},n.queue=a,n=Hh.bind(null,Ze,a),a.dispatch=n,a=Qu(!1),c=ed.bind(null,Ze,!1,a.queue),a=jn(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=gy.bind(null,Ze,i,c,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function Sh(e){var t=Gt();return wh(t,gt,e)}function wh(e,t,n){if(t=Zu(e,t,bh)[0],e=cr(gl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Ic(t)}catch(f){throw f===Cs?Fo:f}else a=t;t=Gt();var i=t.queue,c=i.dispatch;return n!==t.memoizedState&&(Ze.flags|=2048,Ms(9,{destroy:void 0},yy.bind(null,i,n),null)),[a,c,e]}function yy(e,t){e.action=t}function _h(e){var t=Gt(),n=gt;if(n!==null)return wh(t,n,e);Gt(),t=t.memoizedState,n=Gt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Ms(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Ze.updateQueue,t===null&&(t=ir(),Ze.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Nh(){return Gt().memoizedState}function or(e,t,n,a){var i=jn();Ze.flags|=e,i.memoizedState=Ms(1|t,{destroy:void 0},n,a===void 0?null:a)}function rr(e,t,n,a){var i=Gt();a=a===void 0?null:a;var c=i.memoizedState.inst;gt!==null&&a!==null&&Hu(a,gt.memoizedState.deps)?i.memoizedState=Ms(t,c,n,a):(Ze.flags|=e,i.memoizedState=Ms(1|t,c,n,a))}function Eh(e,t){or(8390656,8,e,t)}function Ju(e,t){rr(2048,8,e,t)}function vy(e){Ze.flags|=4;var t=Ze.updateQueue;if(t===null)t=ir(),Ze.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function jh(e){var t=Gt().memoizedState;return vy({ref:t,nextImpl:e}),function(){if((ut&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Ch(e,t){return rr(4,2,e,t)}function Th(e,t){return rr(4,4,e,t)}function Ah(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kh(e,t,n){n=n!=null?n.concat([e]):null,rr(4,4,Ah.bind(null,t,e),n)}function $u(){}function Rh(e,t){var n=Gt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Hu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Mh(e,t){var n=Gt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Hu(t,a[1]))return a[0];if(a=e(),qi){qt(!0);try{e()}finally{qt(!1)}}return n.memoizedState=[a,t],a}function Fu(e,t,n){return n===void 0||(pl&1073741824)!==0&&(lt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Dm(),Ze.lanes|=e,ai|=e,n)}function Dh(e,t,n,a){return _n(n,t)?n:As.current!==null?(e=Fu(e,n,a),_n(e,t)||(Qt=!0),e):(pl&42)===0||(pl&1073741824)!==0&&(lt&261930)===0?(Qt=!0,e.memoizedState=n):(e=Dm(),Ze.lanes|=e,ai|=e,t)}function Uh(e,t,n,a,i){var c=K.p;K.p=c!==0&&8>c?c:8;var f=E.T,y={};E.T=y,ed(e,!1,t,n);try{var N=i(),B=E.S;if(B!==null&&B(y,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=hy(N,a);Jc(e,t,Q,sa(e))}else Jc(e,t,a,sa(e))}catch(W){Jc(e,t,{then:function(){},status:"rejected",reason:W},sa())}finally{K.p=c,f!==null&&y.types!==null&&(f.types=y.types),E.T=f}}function by(){}function Wu(e,t,n,a){if(e.tag!==5)throw Error(o(476));var i=Oh(e).queue;Uh(e,i,t,Z,n===null?by:function(){return zh(e),n(a)})}function Oh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:Z},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function zh(e){var t=Oh(e);t.next===null&&(t=e.alternate.memoizedState),Jc(e,t.next.queue,{},sa())}function Pu(){return ze(ho)}function Bh(){return Gt().memoizedState}function Lh(){return Gt().memoizedState}function xy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=sa();e=Fl(n);var a=Wl(t,e,n);a!==null&&(Qn(a,t,n),Vc(a,t,n)),t={cache:fn()},e.payload=t;return}t=t.return}}function Sy(e,t,n){var a=sa();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ur(e)?qh(t,n):(n=Uc(e,t,n,a),n!==null&&(Qn(n,e,a),Kh(n,t,a)))}function Hh(e,t,n){var a=sa();Jc(e,t,n,a)}function Jc(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ur(e))qh(t,i);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,y=c(f,n);if(i.hasEagerState=!0,i.eagerState=y,_n(y,f))return gs(e,t,i,0),xt===null&&ps(),!1}catch{}finally{}if(n=Uc(e,t,i,a),n!==null)return Qn(n,e,a),Kh(n,t,a),!0}return!1}function ed(e,t,n,a){if(a={lane:2,revertLane:Md(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ur(e)){if(t)throw Error(o(479))}else t=Uc(e,n,a,2),t!==null&&Qn(t,e,2)}function ur(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function qh(e,t){ks=ar=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kh(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ce(e,n)}}var $c={readContext:ze,use:sr,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};$c.useEffectEvent=Ut;var Yh={readContext:ze,use:sr,useCallback:function(e,t){return jn().memoizedState=[e,t===void 0?null:t],e},useContext:ze,useEffect:Eh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,or(4194308,4,Ah.bind(null,t,e),n)},useLayoutEffect:function(e,t){return or(4194308,4,e,t)},useInsertionEffect:function(e,t){or(4,2,e,t)},useMemo:function(e,t){var n=jn();t=t===void 0?null:t;var a=e();if(qi){qt(!0);try{e()}finally{qt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=jn();if(n!==void 0){var i=n(t);if(qi){qt(!0);try{n(t)}finally{qt(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=Sy.bind(null,Ze,e),[a.memoizedState,e]},useRef:function(e){var t=jn();return e={current:e},t.memoizedState=e},useState:function(e){e=Qu(e);var t=e.queue,n=Hh.bind(null,Ze,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:$u,useDeferredValue:function(e,t){var n=jn();return Fu(n,e,t)},useTransition:function(){var e=Qu(!1);return e=Uh.bind(null,Ze,e.queue,!0,!1),jn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Ze,i=jn();if(et){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),xt===null)throw Error(o(349));(lt&127)!==0||rh(a,t,n)}i.memoizedState=n;var c={value:n,getSnapshot:t};return i.queue=c,Eh(dh.bind(null,a,c,e),[e]),a.flags|=2048,Ms(9,{destroy:void 0},uh.bind(null,a,c,n,t),null),n},useId:function(){var e=jn(),t=xt.identifierPrefix;if(et){var n=ta,a=ma;n=(a&~(1<<32-Tt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=lr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=my++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Pu,useFormState:xh,useActionState:xh,useOptimistic:function(e){var t=jn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ed.bind(null,Ze,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vu,useCacheRefresh:function(){return jn().memoizedState=xy.bind(null,Ze)},useEffectEvent:function(e){var t=jn(),n={impl:e};return t.memoizedState=n,function(){if((ut&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},td={readContext:ze,use:sr,useCallback:Rh,useContext:ze,useEffect:Ju,useImperativeHandle:kh,useInsertionEffect:Ch,useLayoutEffect:Th,useMemo:Mh,useReducer:cr,useRef:Nh,useState:function(){return cr(gl)},useDebugValue:$u,useDeferredValue:function(e,t){var n=Gt();return Dh(n,gt.memoizedState,e,t)},useTransition:function(){var e=cr(gl)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:Ic(e),t]},useSyncExternalStore:oh,useId:Bh,useHostTransitionStatus:Pu,useFormState:Sh,useActionState:Sh,useOptimistic:function(e,t){var n=Gt();return mh(n,gt,e,t)},useMemoCache:Vu,useCacheRefresh:Lh};td.useEffectEvent=jh;var Gh={readContext:ze,use:sr,useCallback:Rh,useContext:ze,useEffect:Ju,useImperativeHandle:kh,useInsertionEffect:Ch,useLayoutEffect:Th,useMemo:Mh,useReducer:Xu,useRef:Nh,useState:function(){return Xu(gl)},useDebugValue:$u,useDeferredValue:function(e,t){var n=Gt();return gt===null?Fu(n,e,t):Dh(n,gt.memoizedState,e,t)},useTransition:function(){var e=Xu(gl)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:Ic(e),t]},useSyncExternalStore:oh,useId:Bh,useHostTransitionStatus:Pu,useFormState:_h,useActionState:_h,useOptimistic:function(e,t){var n=Gt();return gt!==null?mh(n,gt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Vu,useCacheRefresh:Lh};Gh.useEffectEvent=jh;function nd(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:T({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ad={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=sa(),i=Fl(a);i.payload=t,n!=null&&(i.callback=n),t=Wl(e,i,a),t!==null&&(Qn(t,e,a),Vc(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=sa(),i=Fl(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Wl(e,i,a),t!==null&&(Qn(t,e,a),Vc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sa(),a=Fl(n);a.tag=2,t!=null&&(a.callback=t),t=Wl(e,a,n),t!==null&&(Qn(t,e,n),Vc(t,e,n))}};function Vh(e,t,n,a,i,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,f):t.prototype&&t.prototype.isPureReactComponent?!Vl(n,a)||!Vl(i,c):!0}function Zh(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ad.enqueueReplaceState(t,t.state,null)}function Ki(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=T({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function Xh(e){hs(e)}function Qh(e){console.error(e)}function Ih(e){hs(e)}function dr(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Jh(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ld(e,t,n){return n=Fl(n),n.tag=3,n.payload={element:null},n.callback=function(){dr(e,t)},n}function $h(e){return e=Fl(e),e.tag=3,e}function Fh(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var c=a.value;e.payload=function(){return i(c)},e.callback=function(){Jh(t,n,a)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Jh(t,n,a),typeof i!="function"&&(li===null?li=new Set([this]):li.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:y!==null?y:""})})}function wy(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&J(t,n,i,!0),n=na.current,n!==null){switch(n.tag){case 31:case 13:return ya===null?_r():n.alternate===null&&Ot===0&&(Ot=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===Wo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Ad(e,a,i)),!1;case 22:return n.flags|=65536,a===Wo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Ad(e,a,i)),!1}throw Error(o(435,n.tag))}return Ad(e,a,i),_r(),!1}if(et)return t=na.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==ws&&(e=Error(o(422),{cause:a}),Il(Kn(e,n)))):(a!==ws&&(t=Error(o(423),{cause:a}),Il(Kn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=Kn(a,n),i=ld(e.stateNode,a,i),Uu(e,i),Ot!==4&&(Ot=2)),!1;var c=Error(o(520),{cause:a});if(c=Kn(c,n),lo===null?lo=[c]:lo.push(c),Ot!==4&&(Ot=2),t===null)return!0;a=Kn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=ld(n.stateNode,a,e),Uu(n,e),!1;case 1:if(t=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))))return n.flags|=65536,i&=-i,n.lanes|=i,i=$h(i),Fh(i,e,n,a),Uu(n,i),!1}n=n.return}while(n!==null);return!1}var id=Error(o(461)),Qt=!1;function mn(e,t,n,a){t.child=e===null?th(t,null,n,a):Hi(t,e.child,n,a)}function Wh(e,t,n,a,i){n=n.render;var c=t.ref;if("ref"in a){var f={};for(var y in a)y!=="ref"&&(f[y]=a[y])}else f=a;return he(t),a=qu(e,t,n,f,c,i),y=Ku(),e!==null&&!Qt?(Yu(e,t,i),yl(e,t,i)):(et&&y&&Oi(t),t.flags|=1,mn(e,t,a,i),t.child)}function Ph(e,t,n,a,i){if(e===null){var c=n.type;return typeof c=="function"&&!zc(c)&&c.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=c,em(e,t,c,a,i)):(e=vs(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!hd(e,i)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:Vl,n(f,a)&&e.ref===t.ref)return yl(e,t,i)}return t.flags|=1,e=ha(c,a),e.ref=t.ref,e.return=t,t.child=e}function em(e,t,n,a,i){if(e!==null){var c=e.memoizedProps;if(Vl(c,a)&&e.ref===t.ref)if(Qt=!1,t.pendingProps=a=c,hd(e,i))(e.flags&131072)!==0&&(Qt=!0);else return t.lanes=e.lanes,yl(e,t,i)}return sd(e,t,n,a,i)}function tm(e,t,n,a){var i=a.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~c}else a=0,t.child=null;return nm(e,t,c,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&$o(t,c!==null?c.cachePool:null),c!==null?lh(t,c):zu(),ih(t);else return a=t.lanes=536870912,nm(e,t,c!==null?c.baseLanes|n:n,n,a)}else c!==null?($o(t,c.cachePool),lh(t,c),ei(),t.memoizedState=null):(e!==null&&$o(t,null),zu(),ei());return mn(e,t,i,n),t.child}function Fc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nm(e,t,n,a,i){var c=ku();return c=c===null?null:{parent:Le._currentValue,pool:c},t.memoizedState={baseLanes:n,cachePool:c},e!==null&&$o(t,null),zu(),ih(t),e!==null&&J(e,t,a,!0),t.childLanes=i,null}function fr(e,t){return t=mr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function am(e,t,n){return Hi(t,e.child,null,n),e=fr(t,t.pendingProps),e.flags|=2,aa(t),t.memoizedState=null,e}function _y(e,t,n){var a=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(et){if(a.mode==="hidden")return e=fr(t,a),t.lanes=536870912,Fc(null,e);if(Lu(t),(e=bt)?(e=pp(e,En),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:dn!==null?{id:ma,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},n=Lc(e),n.return=t,t.child=n,Zt=t,bt=null)):e=null,e===null)throw Ra(t);return t.lanes=536870912,null}return fr(t,a)}var c=e.memoizedState;if(c!==null){var f=c.dehydrated;if(Lu(t),i)if(t.flags&256)t.flags&=-257,t=am(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Qt||J(e,t,n,!1),i=(n&e.childLanes)!==0,Qt||i){if(a=xt,a!==null&&(f=Ea(a,n),f!==0&&f!==c.retryLane))throw c.retryLane=f,Ka(e,f),Qn(a,e,f),id;_r(),t=am(e,t,n)}else e=c.treeContext,bt=va(f.nextSibling),Zt=t,et=!0,Ga=null,En=!1,e!==null&&Jo(t,e),t=fr(t,a),t.flags|=4096;return t}return e=ha(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function hr(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function sd(e,t,n,a,i){return he(t),n=qu(e,t,n,a,void 0,i),a=Ku(),e!==null&&!Qt?(Yu(e,t,i),yl(e,t,i)):(et&&a&&Oi(t),t.flags|=1,mn(e,t,n,i),t.child)}function lm(e,t,n,a,i,c){return he(t),t.updateQueue=null,n=ch(t,a,n,i),sh(e),a=Ku(),e!==null&&!Qt?(Yu(e,t,c),yl(e,t,c)):(et&&a&&Oi(t),t.flags|=1,mn(e,t,n,c),t.child)}function im(e,t,n,a,i){if(he(t),t.stateNode===null){var c=hl,f=n.contextType;typeof f=="object"&&f!==null&&(c=ze(f)),c=new n(a,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ad,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=a,c.state=t.memoizedState,c.refs={},Mu(t),f=n.contextType,c.context=typeof f=="object"&&f!==null?ze(f):hl,c.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(nd(t,n,f,a),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(f=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),f!==c.state&&ad.enqueueReplaceState(c,c.state,null),Xc(t,a,c,i),Zc(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){c=t.stateNode;var y=t.memoizedProps,N=Ki(n,y);c.props=N;var B=c.context,Q=n.contextType;f=hl,typeof Q=="object"&&Q!==null&&(f=ze(Q));var W=n.getDerivedStateFromProps;Q=typeof W=="function"||typeof c.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,Q||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y||B!==f)&&Zh(t,c,a,f),$l=!1;var q=t.memoizedState;c.state=q,Xc(t,a,c,i),Zc(),B=t.memoizedState,y||q!==B||$l?(typeof W=="function"&&(nd(t,n,W,a),B=t.memoizedState),(N=$l||Vh(t,n,N,a,q,B,f))?(Q||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=B),c.props=a,c.state=B,c.context=f,a=N):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{c=t.stateNode,Du(e,t),f=t.memoizedProps,Q=Ki(n,f),c.props=Q,W=t.pendingProps,q=c.context,B=n.contextType,N=hl,typeof B=="object"&&B!==null&&(N=ze(B)),y=n.getDerivedStateFromProps,(B=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==W||q!==N)&&Zh(t,c,a,N),$l=!1,q=t.memoizedState,c.state=q,Xc(t,a,c,i),Zc();var V=t.memoizedState;f!==W||q!==V||$l||e!==null&&e.dependencies!==null&&ve(e.dependencies)?(typeof y=="function"&&(nd(t,n,y,a),V=t.memoizedState),(Q=$l||Vh(t,n,Q,a,q,V,N)||e!==null&&e.dependencies!==null&&ve(e.dependencies))?(B||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(a,V,N),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(a,V,N)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=V),c.props=a,c.state=V,c.context=N,a=Q):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),a=!1)}return c=a,hr(e,t),a=(t.flags&128)!==0,c||a?(c=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&a?(t.child=Hi(t,e.child,null,i),t.child=Hi(t,null,n,i)):mn(e,t,n,i),t.memoizedState=c.state,e=t.child):e=yl(e,t,i),e}function sm(e,t,n,a){return Va(),t.flags|=256,mn(e,t,n,a),t.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function od(e){return{baseLanes:e,cachePool:Jf()}}function rd(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ia),e}function cm(e,t,n){var a=t.pendingProps,i=!1,c=(t.flags&128)!==0,f;if((f=c)||(f=e!==null&&e.memoizedState===null?!1:(Yt.current&2)!==0),f&&(i=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(et){if(i?Pl(t):ei(),(e=bt)?(e=pp(e,En),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:dn!==null?{id:ma,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},n=Lc(e),n.return=t,t.child=n,Zt=t,bt=null)):e=null,e===null)throw Ra(t);return Zd(e)?t.lanes=32:t.lanes=536870912,null}var y=a.children;return a=a.fallback,i?(ei(),i=t.mode,y=mr({mode:"hidden",children:y},i),a=Ya(a,i,n,null),y.return=t,a.return=t,y.sibling=a,t.child=y,a=t.child,a.memoizedState=od(n),a.childLanes=rd(e,f,n),t.memoizedState=cd,Fc(null,a)):(Pl(t),ud(t,y))}var N=e.memoizedState;if(N!==null&&(y=N.dehydrated,y!==null)){if(c)t.flags&256?(Pl(t),t.flags&=-257,t=dd(e,t,n)):t.memoizedState!==null?(ei(),t.child=e.child,t.flags|=128,t=null):(ei(),y=a.fallback,i=t.mode,a=mr({mode:"visible",children:a.children},i),y=Ya(y,i,n,null),y.flags|=2,a.return=t,y.return=t,a.sibling=y,t.child=a,Hi(t,e.child,null,n),a=t.child,a.memoizedState=od(n),a.childLanes=rd(e,f,n),t.memoizedState=cd,t=Fc(null,a));else if(Pl(t),Zd(y)){if(f=y.nextSibling&&y.nextSibling.dataset,f)var B=f.dgst;f=B,a=Error(o(419)),a.stack="",a.digest=f,Il({value:a,source:null,stack:null}),t=dd(e,t,n)}else if(Qt||J(e,t,n,!1),f=(n&e.childLanes)!==0,Qt||f){if(f=xt,f!==null&&(a=Ea(f,n),a!==0&&a!==N.retryLane))throw N.retryLane=a,Ka(e,a),Qn(f,e,a),id;Vd(y)||_r(),t=dd(e,t,n)}else Vd(y)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,bt=va(y.nextSibling),Zt=t,et=!0,Ga=null,En=!1,e!==null&&Jo(t,e),t=ud(t,a.children),t.flags|=4096);return t}return i?(ei(),y=a.fallback,i=t.mode,N=e.child,B=N.sibling,a=ha(N,{mode:"hidden",children:a.children}),a.subtreeFlags=N.subtreeFlags&65011712,B!==null?y=ha(B,y):(y=Ya(y,i,n,null),y.flags|=2),y.return=t,a.return=t,a.sibling=y,t.child=a,Fc(null,a),a=t.child,y=e.child.memoizedState,y===null?y=od(n):(i=y.cachePool,i!==null?(N=Le._currentValue,i=i.parent!==N?{parent:N,pool:N}:i):i=Jf(),y={baseLanes:y.baseLanes|n,cachePool:i}),a.memoizedState=y,a.childLanes=rd(e,f,n),t.memoizedState=cd,Fc(e.child,a)):(Pl(t),n=e.child,e=n.sibling,n=ha(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function ud(e,t){return t=mr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mr(e,t){return e=Sn(22,e,null,t),e.lanes=0,e}function dd(e,t,n){return Hi(t,e.child,null,n),e=ud(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function om(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),_(e.return,t,n)}function fd(e,t,n,a,i,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=n,f.tailMode=i,f.treeForkCount=c)}function rm(e,t,n){var a=t.pendingProps,i=a.revealOrder,c=a.tail;a=a.children;var f=Yt.current,y=(f&2)!==0;if(y?(f=f&1|2,t.flags|=128):f&=1,H(Yt,f),mn(e,t,a,n),a=et?Ui:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&om(e,n,t);else if(e.tag===19)om(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&nr(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),fd(t,!1,i,n,c,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&nr(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}fd(t,!0,n,null,c,a);break;case"together":fd(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function yl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ai|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(J(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=ha(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ha(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ve(e)))}function Ny(e,t,n){switch(t.tag){case 3:Me(t,t.stateNode.containerInfo),d(t,Le,e.memoizedState.cache),Va();break;case 27:case 5:He(t);break;case 4:Me(t,t.stateNode.containerInfo);break;case 10:d(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Lu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Pl(t),t.flags|=128,null):(n&t.child.childLanes)!==0?cm(e,t,n):(Pl(t),e=yl(e,t,n),e!==null?e.sibling:null);Pl(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(J(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return rm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(Yt,Yt.current),a)break;return null;case 22:return t.lanes=0,tm(e,t,n,t.pendingProps);case 24:d(t,Le,e.memoizedState.cache)}return yl(e,t,n)}function um(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Qt=!0;else{if(!hd(e,n)&&(t.flags&128)===0)return Qt=!1,Ny(e,t,n);Qt=(e.flags&131072)!==0}else Qt=!1,et&&(t.flags&1048576)!==0&&ka(t,Ui,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Bi(t.elementType),t.type=e,typeof e=="function")zc(e)?(a=Ki(e,a),t.tag=1,t=im(null,t,e,a,n)):(t.tag=0,t=sd(null,t,e,a,n));else{if(e!=null){var i=e.$$typeof;if(i===de){t.tag=11,t=Wh(null,t,e,a,n);break e}else if(i===Te){t.tag=14,t=Ph(null,t,e,a,n);break e}}throw t=Y(e)||e,Error(o(306,t,""))}}return t;case 0:return sd(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=Ki(a,t.pendingProps),im(e,t,a,i,n);case 3:e:{if(Me(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var c=t.memoizedState;i=c.element,Du(e,t),Xc(t,a,null,n);var f=t.memoizedState;if(a=f.cache,d(t,Le,a),a!==c.cache&&R(t,[Le],n,!0),Zc(),a=f.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=sm(e,t,a,n);break e}else if(a!==i){i=Kn(Error(o(424)),t),Il(i),t=sm(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(bt=va(e.firstChild),Zt=t,et=!0,Ga=null,En=!0,n=th(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Va(),a===i){t=yl(e,t,n);break e}mn(e,t,a,n)}t=t.child}return t;case 26:return hr(e,t),e===null?(n=Sp(t.type,null,t.pendingProps,null))?t.memoizedState=n:et||(n=t.type,e=t.pendingProps,a=kr(ae.current).createElement(n),a[ht]=t,a[mt]=e,pn(a,n,e),Xe(a),t.stateNode=a):t.memoizedState=Sp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return He(t),e===null&&et&&(a=t.stateNode=vp(t.type,t.pendingProps,ae.current),Zt=t,En=!0,i=bt,oi(t.type)?(Xd=i,bt=va(a.firstChild)):bt=i),mn(e,t,t.pendingProps.children,n),hr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&et&&((i=a=bt)&&(a=ev(a,t.type,t.pendingProps,En),a!==null?(t.stateNode=a,Zt=t,bt=va(a.firstChild),En=!1,i=!0):i=!1),i||Ra(t)),He(t),i=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,a=c.children,Kd(i,c)?a=null:f!==null&&Kd(i,f)&&(t.flags|=32),t.memoizedState!==null&&(i=qu(e,t,py,null,null,n),ho._currentValue=i),hr(e,t),mn(e,t,a,n),t.child;case 6:return e===null&&et&&((e=n=bt)&&(n=tv(n,t.pendingProps,En),n!==null?(t.stateNode=n,Zt=t,bt=null,e=!0):e=!1),e||Ra(t)),null;case 13:return cm(e,t,n);case 4:return Me(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Hi(t,null,a,n):mn(e,t,a,n),t.child;case 11:return Wh(e,t,t.type,t.pendingProps,n);case 7:return mn(e,t,t.pendingProps,n),t.child;case 8:return mn(e,t,t.pendingProps.children,n),t.child;case 12:return mn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,d(t,t.type,a.value),mn(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,he(t),i=ze(i),a=a(i),t.flags|=1,mn(e,t,a,n),t.child;case 14:return Ph(e,t,t.type,t.pendingProps,n);case 15:return em(e,t,t.type,t.pendingProps,n);case 19:return rm(e,t,n);case 31:return _y(e,t,n);case 22:return tm(e,t,n,t.pendingProps);case 24:return he(t),a=ze(Le),e===null?(i=ku(),i===null&&(i=xt,c=fn(),i.pooledCache=c,c.refCount++,c!==null&&(i.pooledCacheLanes|=n),i=c),t.memoizedState={parent:a,cache:i},Mu(t),d(t,Le,i)):((e.lanes&n)!==0&&(Du(e,t),Xc(t,null,null,n),Zc()),i=e.memoizedState,c=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),d(t,Le,a)):(a=c.cache,d(t,Le,a),a!==i.cache&&R(t,[Le],n,!0))),mn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function vl(e){e.flags|=4}function md(e,t,n,a,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Bm())e.flags|=8192;else throw Li=Wo,Ru}else e.flags&=-16777217}function dm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jp(t))if(Bm())e.flags|=8192;else throw Li=Wo,Ru}function pr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?$n():536870912,e.lanes|=t,zs|=t)}function Wc(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Ey(e,t,n){var a=t.pendingProps;switch(Ss(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Nt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),g(Le),Be(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ml(t)?vl(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,_s())),Nt(t),null;case 26:var i=t.type,c=t.memoizedState;return e===null?(vl(t),c!==null?(Nt(t),dm(t,c)):(Nt(t),md(t,i,null,a,n))):c?c!==e.memoizedState?(vl(t),Nt(t),dm(t,c)):(Nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&vl(t),Nt(t),md(t,i,e,a,n)),null;case 27:if(Fe(t),n=ae.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&vl(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Nt(t),null}e=ie.current,ml(t)?qc(t):(e=vp(i,a,n),t.stateNode=e,vl(t))}return Nt(t),null;case 5:if(Fe(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&vl(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Nt(t),null}if(c=ie.current,ml(t))qc(t);else{var f=kr(ae.current);switch(c){case 1:c=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:c=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":c=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":c=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":c=f.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof a.is=="string"?f.createElement("select",{is:a.is}):f.createElement("select"),a.multiple?c.multiple=!0:a.size&&(c.size=a.size);break;default:c=typeof a.is=="string"?f.createElement(i,{is:a.is}):f.createElement(i)}}c[ht]=t,c[mt]=a;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)c.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=c;e:switch(pn(c,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&vl(t)}}return Nt(t),md(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&vl(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=ae.current,ml(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=Zt,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[ht]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||cp(e.nodeValue,n)),e||Ra(t,!0)}else e=kr(e).createTextNode(a),e[ht]=t,t.stateNode=e}return Nt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=ml(t),n!==null){if(e===null){if(!a)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ht]=t}else Va(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),e=!1}else n=_s(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(aa(t),t):(aa(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Nt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=ml(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[ht]=t}else Va(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),i=!1}else i=_s(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(aa(t),t):(aa(t),null)}return aa(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),pr(t,t.updateQueue),Nt(t),null);case 4:return Be(),e===null&&zd(t.stateNode.containerInfo),Nt(t),null;case 10:return g(t.type),Nt(t),null;case 19:if(D(Yt),a=t.memoizedState,a===null)return Nt(t),null;if(i=(t.flags&128)!==0,c=a.rendering,c===null)if(i)Wc(a,!1);else{if(Ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=nr(e),c!==null){for(t.flags|=128,Wc(a,!1),e=c.updateQueue,t.updateQueue=e,pr(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ys(n,e),n=n.sibling;return H(Yt,Yt.current&1|2),et&&pa(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&k()>xr&&(t.flags|=128,i=!0,Wc(a,!1),t.lanes=4194304)}else{if(!i)if(e=nr(c),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,pr(t,e),Wc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!et)return Nt(t),null}else 2*k()-a.renderingStartTime>xr&&n!==536870912&&(t.flags|=128,i=!0,Wc(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(e=a.last,e!==null?e.sibling=c:t.child=c,a.last=c)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=k(),e.sibling=null,n=Yt.current,H(Yt,i?n&1|2:n&1),et&&pa(t,a.treeForkCount),e):(Nt(t),null);case 22:case 23:return aa(t),Bu(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),n=t.updateQueue,n!==null&&pr(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&D(zi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),g(Le),Nt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function jy(e,t){switch(Ss(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return g(Le),Be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Fe(t),null;case 31:if(t.memoizedState!==null){if(aa(t),t.alternate===null)throw Error(o(340));Va()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(aa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Va()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return D(Yt),null;case 4:return Be(),null;case 10:return g(t.type),null;case 22:case 23:return aa(t),Bu(),e!==null&&D(zi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return g(Le),null;case 25:return null;default:return null}}function fm(e,t){switch(Ss(t),t.tag){case 3:g(Le),Be();break;case 26:case 27:case 5:Fe(t);break;case 4:Be();break;case 31:t.memoizedState!==null&&aa(t);break;case 13:aa(t);break;case 19:D(Yt);break;case 10:g(t.type);break;case 22:case 23:aa(t),Bu(),e!==null&&D(zi);break;case 24:g(Le)}}function Pc(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var c=n.create,f=n.inst;a=c(),f.destroy=a}n=n.next}while(n!==i)}}catch(y){ft(t,t.return,y)}}function ti(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var c=i.next;a=c;do{if((a.tag&e)===e){var f=a.inst,y=f.destroy;if(y!==void 0){f.destroy=void 0,i=t;var N=n,B=y;try{B()}catch(Q){ft(i,N,Q)}}}a=a.next}while(a!==c)}}catch(Q){ft(t,t.return,Q)}}function hm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ah(t,n)}catch(a){ft(e,e.return,a)}}}function mm(e,t,n){n.props=Ki(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){ft(e,t,a)}}function eo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){ft(e,t,i)}}function Xa(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){ft(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){ft(e,t,i)}else n.current=null}function pm(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){ft(e,e.return,i)}}function pd(e,t,n){try{var a=e.stateNode;Iy(a,e.type,n,t),a[mt]=t}catch(i){ft(e,e.return,i)}}function gm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&oi(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&oi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yd(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ca));else if(a!==4&&(a===27&&oi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(yd(e,t,n),e=e.sibling;e!==null;)yd(e,t,n),e=e.sibling}function gr(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&oi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(gr(e,t,n),e=e.sibling;e!==null;)gr(e,t,n),e=e.sibling}function ym(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);pn(t,a,n),t[ht]=e,t[mt]=n}catch(c){ft(e,e.return,c)}}var bl=!1,It=!1,vd=!1,vm=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Cy(e,t){if(e=e.containerInfo,Hd=Br,e=On(e),Cc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,y=-1,N=-1,B=0,Q=0,W=e,q=null;t:for(;;){for(var V;W!==n||i!==0&&W.nodeType!==3||(y=f+i),W!==c||a!==0&&W.nodeType!==3||(N=f+a),W.nodeType===3&&(f+=W.nodeValue.length),(V=W.firstChild)!==null;)q=W,W=V;for(;;){if(W===e)break t;if(q===n&&++B===i&&(y=f),q===c&&++Q===a&&(N=f),(V=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=V}n=y===-1||N===-1?null:{start:y,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(qd={focusedElem:e,selectionRange:n},Br=!1,ln=t;ln!==null;)if(t=ln,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ln=e;else for(;ln!==null;){switch(t=ln,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,n=t,i=c.memoizedProps,c=c.memoizedState,a=n.stateNode;try{var Ne=Ki(n.type,i);e=a.getSnapshotBeforeUpdate(Ne,c),a.__reactInternalSnapshotBeforeUpdate=e}catch(Re){ft(n,n.return,Re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Gd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ln=e;break}ln=t.return}}function bm(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Sl(e,n),a&4&&Pc(5,n);break;case 1:if(Sl(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){ft(n,n.return,f)}else{var i=Ki(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){ft(n,n.return,f)}}a&64&&hm(n),a&512&&eo(n,n.return);break;case 3:if(Sl(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ah(e,t)}catch(f){ft(n,n.return,f)}}break;case 27:t===null&&a&4&&ym(n);case 26:case 5:Sl(e,n),t===null&&a&4&&pm(n),a&512&&eo(n,n.return);break;case 12:Sl(e,n);break;case 31:Sl(e,n),a&4&&wm(e,n);break;case 13:Sl(e,n),a&4&&_m(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=zy.bind(null,n),nv(e,n))));break;case 22:if(a=n.memoizedState!==null||bl,!a){t=t!==null&&t.memoizedState!==null||It,i=bl;var c=It;bl=a,(It=t)&&!c?wl(e,n,(n.subtreeFlags&8772)!==0):Sl(e,n),bl=i,It=c}break;case 30:break;default:Sl(e,n)}}function xm(e){var t=e.alternate;t!==null&&(e.alternate=null,xm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&j(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ct=null,Gn=!1;function xl(e,t,n){for(n=n.child;n!==null;)Sm(e,t,n),n=n.sibling}function Sm(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Lt,n)}catch{}switch(n.tag){case 26:It||Xa(n,t),xl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:It||Xa(n,t);var a=Ct,i=Gn;oi(n.type)&&(Ct=n.stateNode,Gn=!1),xl(e,t,n),ro(n.stateNode),Ct=a,Gn=i;break;case 5:It||Xa(n,t);case 6:if(a=Ct,i=Gn,Ct=null,xl(e,t,n),Ct=a,Gn=i,Ct!==null)if(Gn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(n.stateNode)}catch(c){ft(n,t,c)}else try{Ct.removeChild(n.stateNode)}catch(c){ft(n,t,c)}break;case 18:Ct!==null&&(Gn?(e=Ct,hp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Vs(e)):hp(Ct,n.stateNode));break;case 4:a=Ct,i=Gn,Ct=n.stateNode.containerInfo,Gn=!0,xl(e,t,n),Ct=a,Gn=i;break;case 0:case 11:case 14:case 15:ti(2,n,t),It||ti(4,n,t),xl(e,t,n);break;case 1:It||(Xa(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&mm(n,t,a)),xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:It=(a=It)||n.memoizedState!==null,xl(e,t,n),It=a;break;default:xl(e,t,n)}}function wm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vs(e)}catch(n){ft(t,t.return,n)}}}function _m(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vs(e)}catch(n){ft(t,t.return,n)}}function Ty(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new vm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new vm),t;default:throw Error(o(435,e.tag))}}function yr(e,t){var n=Ty(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var i=By.bind(null,e,a);a.then(i,i)}})}function Vn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],c=e,f=t,y=f;e:for(;y!==null;){switch(y.tag){case 27:if(oi(y.type)){Ct=y.stateNode,Gn=!1;break e}break;case 5:Ct=y.stateNode,Gn=!1;break e;case 3:case 4:Ct=y.stateNode.containerInfo,Gn=!0;break e}y=y.return}if(Ct===null)throw Error(o(160));Sm(c,f,i),Ct=null,Gn=!1,c=i.alternate,c!==null&&(c.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Nm(t,e),t=t.sibling}var Ma=null;function Nm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vn(t,e),Zn(e),a&4&&(ti(3,e,e.return),Pc(3,e),ti(5,e,e.return));break;case 1:Vn(t,e),Zn(e),a&512&&(It||n===null||Xa(n,n.return)),a&64&&bl&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=Ma;if(Vn(t,e),Zn(e),a&512&&(It||n===null||Xa(n,n.return)),a&4){var c=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":c=i.getElementsByTagName("title")[0],(!c||c[_e]||c[ht]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=i.createElement(a),i.head.insertBefore(c,i.querySelector("head > title"))),pn(c,a,n),c[ht]=e,Xe(c),a=c;break e;case"link":var f=Np("link","href",i).get(a+(n.href||""));if(f){for(var y=0;y<f.length;y++)if(c=f[y],c.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&c.getAttribute("rel")===(n.rel==null?null:n.rel)&&c.getAttribute("title")===(n.title==null?null:n.title)&&c.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(y,1);break t}}c=i.createElement(a),pn(c,a,n),i.head.appendChild(c);break;case"meta":if(f=Np("meta","content",i).get(a+(n.content||""))){for(y=0;y<f.length;y++)if(c=f[y],c.getAttribute("content")===(n.content==null?null:""+n.content)&&c.getAttribute("name")===(n.name==null?null:n.name)&&c.getAttribute("property")===(n.property==null?null:n.property)&&c.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&c.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(y,1);break t}}c=i.createElement(a),pn(c,a,n),i.head.appendChild(c);break;default:throw Error(o(468,a))}c[ht]=e,Xe(c),a=c}e.stateNode=a}else Ep(i,e.type,e.stateNode);else e.stateNode=_p(i,a,e.memoizedProps);else c!==a?(c===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):c.count--,a===null?Ep(i,e.type,e.stateNode):_p(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&pd(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vn(t,e),Zn(e),a&512&&(It||n===null||Xa(n,n.return)),n!==null&&a&4&&pd(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vn(t,e),Zn(e),a&512&&(It||n===null||Xa(n,n.return)),e.flags&32){i=e.stateNode;try{tl(i,"")}catch(Ne){ft(e,e.return,Ne)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,pd(e,i,n!==null?n.memoizedProps:i)),a&1024&&(vd=!0);break;case 6:if(Vn(t,e),Zn(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Ne){ft(e,e.return,Ne)}}break;case 3:if(Dr=null,i=Ma,Ma=Rr(t.containerInfo),Vn(t,e),Ma=i,Zn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Vs(t.containerInfo)}catch(Ne){ft(e,e.return,Ne)}vd&&(vd=!1,Em(e));break;case 4:a=Ma,Ma=Rr(e.stateNode.containerInfo),Vn(t,e),Zn(e),Ma=a;break;case 12:Vn(t,e),Zn(e);break;case 31:Vn(t,e),Zn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,yr(e,a)));break;case 13:Vn(t,e),Zn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(br=k()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,yr(e,a)));break;case 22:i=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,B=bl,Q=It;if(bl=B||i,It=Q||N,Vn(t,e),It=Q,bl=B,Zn(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||N||bl||It||Yi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(c=N.stateNode,i)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{y=N.stateNode;var W=N.memoizedProps.style,q=W!=null&&W.hasOwnProperty("display")?W.display:null;y.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(Ne){ft(N,N.return,Ne)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=i?"":N.memoizedProps}catch(Ne){ft(N,N.return,Ne)}}}else if(t.tag===18){if(n===null){N=t;try{var V=N.stateNode;i?mp(V,!0):mp(N.stateNode,!1)}catch(Ne){ft(N,N.return,Ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,yr(e,n))));break;case 19:Vn(t,e),Zn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,yr(e,a)));break;case 30:break;case 21:break;default:Vn(t,e),Zn(e)}}function Zn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(gm(a)){n=a;break}a=a.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode,c=gd(e);gr(e,c,i);break;case 5:var f=n.stateNode;n.flags&32&&(tl(f,""),n.flags&=-33);var y=gd(e);gr(e,y,f);break;case 3:case 4:var N=n.stateNode.containerInfo,B=gd(e);yd(e,B,N);break;default:throw Error(o(161))}}catch(Q){ft(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Em(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Em(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Sl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)bm(e,t.alternate,t),t=t.sibling}function Yi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ti(4,t,t.return),Yi(t);break;case 1:Xa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&mm(t,t.return,n),Yi(t);break;case 27:ro(t.stateNode);case 26:case 5:Xa(t,t.return),Yi(t);break;case 22:t.memoizedState===null&&Yi(t);break;case 30:Yi(t);break;default:Yi(t)}e=e.sibling}}function wl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,c=t,f=c.flags;switch(c.tag){case 0:case 11:case 15:wl(i,c,n),Pc(4,c);break;case 1:if(wl(i,c,n),a=c,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(B){ft(a,a.return,B)}if(a=c,i=a.updateQueue,i!==null){var y=a.stateNode;try{var N=i.shared.hiddenCallbacks;if(N!==null)for(i.shared.hiddenCallbacks=null,i=0;i<N.length;i++)nh(N[i],y)}catch(B){ft(a,a.return,B)}}n&&f&64&&hm(c),eo(c,c.return);break;case 27:ym(c);case 26:case 5:wl(i,c,n),n&&a===null&&f&4&&pm(c),eo(c,c.return);break;case 12:wl(i,c,n);break;case 31:wl(i,c,n),n&&f&4&&wm(i,c);break;case 13:wl(i,c,n),n&&f&4&&_m(i,c);break;case 22:c.memoizedState===null&&wl(i,c,n),eo(c,c.return);break;case 30:break;default:wl(i,c,n)}t=t.sibling}}function bd(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&hn(n))}function xd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hn(e))}function Da(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jm(e,t,n,a),t=t.sibling}function jm(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Da(e,t,n,a),i&2048&&Pc(9,t);break;case 1:Da(e,t,n,a);break;case 3:Da(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hn(e)));break;case 12:if(i&2048){Da(e,t,n,a),e=t.stateNode;try{var c=t.memoizedProps,f=c.id,y=c.onPostCommit;typeof y=="function"&&y(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){ft(t,t.return,N)}}else Da(e,t,n,a);break;case 31:Da(e,t,n,a);break;case 13:Da(e,t,n,a);break;case 23:break;case 22:c=t.stateNode,f=t.alternate,t.memoizedState!==null?c._visibility&2?Da(e,t,n,a):to(e,t):c._visibility&2?Da(e,t,n,a):(c._visibility|=2,Ds(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),i&2048&&bd(f,t);break;case 24:Da(e,t,n,a),i&2048&&xd(t.alternate,t);break;default:Da(e,t,n,a)}}function Ds(e,t,n,a,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,f=t,y=n,N=a,B=f.flags;switch(f.tag){case 0:case 11:case 15:Ds(c,f,y,N,i),Pc(8,f);break;case 23:break;case 22:var Q=f.stateNode;f.memoizedState!==null?Q._visibility&2?Ds(c,f,y,N,i):to(c,f):(Q._visibility|=2,Ds(c,f,y,N,i)),i&&B&2048&&bd(f.alternate,f);break;case 24:Ds(c,f,y,N,i),i&&B&2048&&xd(f.alternate,f);break;default:Ds(c,f,y,N,i)}t=t.sibling}}function to(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:to(n,a),i&2048&&bd(a.alternate,a);break;case 24:to(n,a),i&2048&&xd(a.alternate,a);break;default:to(n,a)}t=t.sibling}}var no=8192;function Us(e,t,n){if(e.subtreeFlags&no)for(e=e.child;e!==null;)Cm(e,t,n),e=e.sibling}function Cm(e,t,n){switch(e.tag){case 26:Us(e,t,n),e.flags&no&&e.memoizedState!==null&&mv(n,Ma,e.memoizedState,e.memoizedProps);break;case 5:Us(e,t,n);break;case 3:case 4:var a=Ma;Ma=Rr(e.stateNode.containerInfo),Us(e,t,n),Ma=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=no,no=16777216,Us(e,t,n),no=a):Us(e,t,n));break;default:Us(e,t,n)}}function Tm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];ln=a,km(a,e)}Tm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Am(e),e=e.sibling}function Am(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&ti(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,vr(e)):ao(e);break;default:ao(e)}}function vr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];ln=a,km(a,e)}Tm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ti(8,t,t.return),vr(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,vr(t));break;default:vr(t)}e=e.sibling}}function km(e,t){for(;ln!==null;){var n=ln;switch(n.tag){case 0:case 11:case 15:ti(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:hn(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,ln=a;else e:for(n=e;ln!==null;){a=ln;var i=a.sibling,c=a.return;if(xm(a),a===n){ln=null;break e}if(i!==null){i.return=c,ln=i;break e}ln=c}}}var Ay={getCacheForType:function(e){var t=ze(Le),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ze(Le).controller.signal}},ky=typeof WeakMap=="function"?WeakMap:Map,ut=0,xt=null,nt=null,lt=0,dt=0,la=null,ni=!1,Os=!1,Sd=!1,_l=0,Ot=0,ai=0,Gi=0,wd=0,ia=0,zs=0,lo=null,Xn=null,_d=!1,br=0,Rm=0,xr=1/0,Sr=null,li=null,Pt=0,ii=null,Bs=null,Nl=0,Nd=0,Ed=null,Mm=null,io=0,jd=null;function sa(){return(ut&2)!==0&&lt!==0?lt&-lt:E.T!==null?Md():oa()}function Dm(){if(ia===0)if((lt&536870912)===0||et){var e=rn;rn<<=1,(rn&3932160)===0&&(rn=262144),ia=e}else ia=536870912;return e=na.current,e!==null&&(e.flags|=32),ia}function Qn(e,t,n){(e===xt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(Ls(e,0),si(e,lt,ia,!1)),Dn(e,n),((ut&2)===0||e!==xt)&&(e===xt&&((ut&2)===0&&(Gi|=n),Ot===4&&si(e,lt,ia,!1)),Qa(e))}function Um(e,t,n){if((ut&6)!==0)throw Error(o(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||_a(e,t),i=a?Dy(e,t):Td(e,t,!0),c=a;do{if(i===0){Os&&!a&&si(e,t,0,!1);break}else{if(n=e.current.alternate,c&&!Ry(n)){i=Td(e,t,!1),c=!1;continue}if(i===2){if(c=t,e.errorRecoveryDisabledLanes&c)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var y=e;i=lo;var N=y.current.memoizedState.isDehydrated;if(N&&(Ls(y,f).flags|=256),f=Td(y,f,!1),f!==2){if(Sd&&!N){y.errorRecoveryDisabledLanes|=c,Gi|=c,i=4;break e}c=Xn,Xn=i,c!==null&&(Xn===null?Xn=c:Xn.push.apply(Xn,c))}i=f}if(c=!1,i!==2)continue}}if(i===1){Ls(e,0),si(e,t,0,!0);break}e:{switch(a=e,c=i,c){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:si(a,t,ia,!ni);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(i=br+300-k(),10<i)){if(si(a,t,ia,!ni),jt(a,0,!0)!==0)break e;Nl=t,a.timeoutHandle=dp(Om.bind(null,a,n,Xn,Sr,_d,t,ia,Gi,zs,ni,c,"Throttled",-0,0),i);break e}Om(a,n,Xn,Sr,_d,t,ia,Gi,zs,ni,c,null,-0,0)}}break}while(!0);Qa(e)}function Om(e,t,n,a,i,c,f,y,N,B,Q,W,q,V){if(e.timeoutHandle=-1,W=t.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},Cm(t,c,W);var Ne=(c&62914560)===c?br-k():(c&4194048)===c?Rm-k():0;if(Ne=pv(W,Ne),Ne!==null){Nl=c,e.cancelPendingCommit=Ne(Gm.bind(null,e,t,c,n,a,i,f,y,N,Q,W,null,q,V)),si(e,c,f,!B);return}}Gm(e,t,c,n,a,i,f,y,N)}function Ry(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],c=i.getSnapshot;i=i.value;try{if(!_n(c(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function si(e,t,n,a){t&=~wd,t&=~Gi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var c=31-Tt(i),f=1<<c;a[c]=-1,i&=~f}n!==0&&Na(e,n,t)}function wr(){return(ut&6)===0?(so(0),!1):!0}function Cd(){if(nt!==null){if(dt===0)var e=nt.return;else e=nt,ga=Za=null,Gu(e),Ts=null,Yc=0,e=nt;for(;e!==null;)fm(e.alternate,e),e=e.return;nt=null}}function Ls(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Fy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Nl=0,Cd(),xt=e,nt=n=ha(e.current,null),lt=t,dt=0,la=null,ni=!1,Os=_a(e,t),Sd=!1,zs=ia=wd=Gi=ai=Ot=0,Xn=lo=null,_d=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-Tt(a),c=1<<i;t|=e[i],a&=~c}return _l=t,ps(),n}function zm(e,t){Ze=null,E.H=$c,t===Cs||t===Fo?(t=Wf(),dt=3):t===Ru?(t=Wf(),dt=4):dt=t===id?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,la=t,nt===null&&(Ot=1,dr(e,Kn(t,e.current)))}function Bm(){var e=na.current;return e===null?!0:(lt&4194048)===lt?ya===null:(lt&62914560)===lt||(lt&536870912)!==0?e===ya:!1}function Lm(){var e=E.H;return E.H=$c,e===null?$c:e}function Hm(){var e=E.A;return E.A=Ay,e}function _r(){Ot=4,ni||(lt&4194048)!==lt&&na.current!==null||(Os=!0),(ai&134217727)===0&&(Gi&134217727)===0||xt===null||si(xt,lt,ia,!1)}function Td(e,t,n){var a=ut;ut|=2;var i=Lm(),c=Hm();(xt!==e||lt!==t)&&(Sr=null,Ls(e,t)),t=!1;var f=Ot;e:do try{if(dt!==0&&nt!==null){var y=nt,N=la;switch(dt){case 8:Cd(),f=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(t=!0);var B=dt;if(dt=0,la=null,Hs(e,y,N,B),n&&Os){f=0;break e}break;default:B=dt,dt=0,la=null,Hs(e,y,N,B)}}My(),f=Ot;break}catch(Q){zm(e,Q)}while(!0);return t&&e.shellSuspendCounter++,ga=Za=null,ut=a,E.H=i,E.A=c,nt===null&&(xt=null,lt=0,ps()),f}function My(){for(;nt!==null;)qm(nt)}function Dy(e,t){var n=ut;ut|=2;var a=Lm(),i=Hm();xt!==e||lt!==t?(Sr=null,xr=k()+500,Ls(e,t)):Os=_a(e,t);e:do try{if(dt!==0&&nt!==null){t=nt;var c=la;t:switch(dt){case 1:dt=0,la=null,Hs(e,t,c,1);break;case 2:case 9:if($f(c)){dt=0,la=null,Km(t);break}t=function(){dt!==2&&dt!==9||xt!==e||(dt=7),Qa(e)},c.then(t,t);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:$f(c)?(dt=0,la=null,Km(t)):(dt=0,la=null,Hs(e,t,c,7));break;case 5:var f=null;switch(nt.tag){case 26:f=nt.memoizedState;case 5:case 27:var y=nt;if(f?jp(f):y.stateNode.complete){dt=0,la=null;var N=y.sibling;if(N!==null)nt=N;else{var B=y.return;B!==null?(nt=B,Nr(B)):nt=null}break t}}dt=0,la=null,Hs(e,t,c,5);break;case 6:dt=0,la=null,Hs(e,t,c,6);break;case 8:Cd(),Ot=6;break e;default:throw Error(o(462))}}Uy();break}catch(Q){zm(e,Q)}while(!0);return ga=Za=null,E.H=a,E.A=i,ut=n,nt!==null?0:(xt=null,lt=0,ps(),Ot)}function Uy(){for(;nt!==null&&!le();)qm(nt)}function qm(e){var t=um(e.alternate,e,_l);e.memoizedProps=e.pendingProps,t===null?Nr(e):nt=t}function Km(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=lm(n,t,t.pendingProps,t.type,void 0,lt);break;case 11:t=lm(n,t,t.pendingProps,t.type.render,t.ref,lt);break;case 5:Gu(t);default:fm(n,t),t=nt=ys(t,_l),t=um(n,t,_l)}e.memoizedProps=e.pendingProps,t===null?Nr(e):nt=t}function Hs(e,t,n,a){ga=Za=null,Gu(t),Ts=null,Yc=0;var i=t.return;try{if(wy(e,i,t,n,lt)){Ot=1,dr(e,Kn(n,e.current)),nt=null;return}}catch(c){if(i!==null)throw nt=i,c;Ot=1,dr(e,Kn(n,e.current)),nt=null;return}t.flags&32768?(et||a===1?e=!0:Os||(lt&536870912)!==0?e=!1:(ni=e=!0,(a===2||a===9||a===3||a===6)&&(a=na.current,a!==null&&a.tag===13&&(a.flags|=16384))),Ym(t,e)):Nr(t)}function Nr(e){var t=e;do{if((t.flags&32768)!==0){Ym(t,ni);return}e=t.return;var n=Ey(t.alternate,t,_l);if(n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);Ot===0&&(Ot=5)}function Ym(e,t){do{var n=jy(e.alternate,e);if(n!==null){n.flags&=32767,nt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){nt=e;return}nt=e=n}while(e!==null);Ot=6,nt=null}function Gm(e,t,n,a,i,c,f,y,N){e.cancelPendingCommit=null;do Er();while(Pt!==0);if((ut&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(c=t.lanes|t.childLanes,c|=ms,Ft(e,n,c,f,y,N),e===xt&&(nt=xt=null,lt=0),Bs=t,ii=e,Nl=n,Nd=c,Ed=i,Mm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ly(rt,function(){return Im(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null,i=K.p,K.p=2,f=ut,ut|=4;try{Cy(e,t,n)}finally{ut=f,K.p=i,E.T=a}}Pt=1,Vm(),Zm(),Xm()}}function Vm(){if(Pt===1){Pt=0;var e=ii,t=Bs,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=E.T,E.T=null;var a=K.p;K.p=2;var i=ut;ut|=4;try{Nm(t,e);var c=qd,f=On(e.containerInfo),y=c.focusedElem,N=c.selectionRange;if(f!==y&&y&&y.ownerDocument&&us(y.ownerDocument.documentElement,y)){if(N!==null&&Cc(y)){var B=N.start,Q=N.end;if(Q===void 0&&(Q=B),"selectionStart"in y)y.selectionStart=B,y.selectionEnd=Math.min(Q,y.value.length);else{var W=y.ownerDocument||document,q=W&&W.defaultView||window;if(q.getSelection){var V=q.getSelection(),Ne=y.textContent.length,Re=Math.min(N.start,Ne),vt=N.end===void 0?Re:Math.min(N.end,Ne);!V.extend&&Re>vt&&(f=vt,vt=Re,Re=f);var M=Zl(y,Re),C=Zl(y,vt);if(M&&C&&(V.rangeCount!==1||V.anchorNode!==M.node||V.anchorOffset!==M.offset||V.focusNode!==C.node||V.focusOffset!==C.offset)){var z=W.createRange();z.setStart(M.node,M.offset),V.removeAllRanges(),Re>vt?(V.addRange(z),V.extend(C.node,C.offset)):(z.setEnd(C.node,C.offset),V.addRange(z))}}}}for(W=[],V=y;V=V.parentNode;)V.nodeType===1&&W.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<W.length;y++){var F=W[y];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Br=!!Hd,qd=Hd=null}finally{ut=i,K.p=a,E.T=n}}e.current=t,Pt=2}}function Zm(){if(Pt===2){Pt=0;var e=ii,t=Bs,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=E.T,E.T=null;var a=K.p;K.p=2;var i=ut;ut|=4;try{bm(e,t.alternate,t)}finally{ut=i,K.p=a,E.T=n}}Pt=3}}function Xm(){if(Pt===4||Pt===3){Pt=0,Ie();var e=ii,t=Bs,n=Nl,a=Mm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pt=5:(Pt=0,Bs=ii=null,Qm(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(li=null),tn(n),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Lt,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=E.T,i=K.p,K.p=2,E.T=null;try{for(var c=e.onRecoverableError,f=0;f<a.length;f++){var y=a[f];c(y.value,{componentStack:y.stack})}}finally{E.T=t,K.p=i}}(Nl&3)!==0&&Er(),Qa(e),i=e.pendingLanes,(n&261930)!==0&&(i&42)!==0?e===jd?io++:(io=0,jd=e):io=0,so(0)}}function Qm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hn(t)))}function Er(){return Vm(),Zm(),Xm(),Im()}function Im(){if(Pt!==5)return!1;var e=ii,t=Nd;Nd=0;var n=tn(Nl),a=E.T,i=K.p;try{K.p=32>n?32:n,E.T=null,n=Ed,Ed=null;var c=ii,f=Nl;if(Pt=0,Bs=ii=null,Nl=0,(ut&6)!==0)throw Error(o(331));var y=ut;if(ut|=4,Am(c.current),jm(c,c.current,f,n),ut=y,so(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Lt,c)}catch{}return!0}finally{K.p=i,E.T=a,Qm(e,t)}}function Jm(e,t,n){t=Kn(n,t),t=ld(e.stateNode,t,2),e=Wl(e,t,2),e!==null&&(Dn(e,2),Qa(e))}function ft(e,t,n){if(e.tag===3)Jm(e,e,n);else for(;t!==null;){if(t.tag===3){Jm(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(li===null||!li.has(a))){e=Kn(n,e),n=$h(2),a=Wl(t,n,2),a!==null&&(Fh(n,a,t,e),Dn(a,2),Qa(a));break}}t=t.return}}function Ad(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new ky;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Sd=!0,i.add(n),e=Oy.bind(null,e,t,n),t.then(e,e))}function Oy(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,xt===e&&(lt&n)===n&&(Ot===4||Ot===3&&(lt&62914560)===lt&&300>k()-br?(ut&2)===0&&Ls(e,0):wd|=n,zs===lt&&(zs=0)),Qa(e)}function $m(e,t){t===0&&(t=$n()),e=Ka(e,t),e!==null&&(Dn(e,t),Qa(e))}function zy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$m(e,n)}function By(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),$m(e,n)}function Ly(e,t){return gn(e,t)}var jr=null,qs=null,kd=!1,Cr=!1,Rd=!1,ci=0;function Qa(e){e!==qs&&e.next===null&&(qs===null?jr=qs=e:qs=qs.next=e),Cr=!0,kd||(kd=!0,qy())}function so(e,t){if(!Rd&&Cr){Rd=!0;do for(var n=!1,a=jr;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var c=0;else{var f=a.suspendedLanes,y=a.pingedLanes;c=(1<<31-Tt(42|e)+1)-1,c&=i&~(f&~y),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(n=!0,ep(a,c))}else c=lt,c=jt(a,a===xt?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(c&3)===0||_a(a,c)||(n=!0,ep(a,c));a=a.next}while(n);Rd=!1}}function Hy(){Fm()}function Fm(){Cr=kd=!1;var e=0;ci!==0&&$y()&&(e=ci);for(var t=k(),n=null,a=jr;a!==null;){var i=a.next,c=Wm(a,t);c===0?(a.next=null,n===null?jr=i:n.next=i,i===null&&(qs=n)):(n=a,(e!==0||(c&3)!==0)&&(Cr=!0)),a=i}Pt!==0&&Pt!==5||so(e),ci!==0&&(ci=0)}function Wm(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var f=31-Tt(c),y=1<<f,N=i[f];N===-1?((y&n)===0||(y&a)!==0)&&(i[f]=We(y,t)):N<=t&&(e.expiredLanes|=y),c&=~y}if(t=xt,n=lt,n=jt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&cn(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||_a(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&cn(a),tn(n)){case 2:case 8:n=qe;break;case 32:n=rt;break;case 268435456:n=G;break;default:n=rt}return a=Pm.bind(null,e),n=gn(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&cn(a),e.callbackPriority=2,e.callbackNode=null,2}function Pm(e,t){if(Pt!==0&&Pt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Er()&&e.callbackNode!==n)return null;var a=lt;return a=jt(e,e===xt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Um(e,a,t),Wm(e,k()),e.callbackNode!=null&&e.callbackNode===n?Pm.bind(null,e):null)}function ep(e,t){if(Er())return null;Um(e,t,!0)}function qy(){Wy(function(){(ut&6)!==0?gn(Oe,Hy):Fm()})}function Md(){if(ci===0){var e=Es;e===0&&(e=De,De<<=1,(De&261888)===0&&(De=256)),ci=e}return ci}function tp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$i(""+e)}function np(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ky(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var c=tp((i[mt]||null).action),f=a.submitter;f&&(t=(t=f[mt]||null)?tp(t.formAction):f.getAttribute("formAction"),t!==null&&(c=t,f=null));var y=new Ei("action","action",null,a,i);e.push({event:y,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ci!==0){var N=f?np(i,f):new FormData(i);Wu(n,{pending:!0,data:N,method:i.method,action:c},null,N)}}else typeof c=="function"&&(y.preventDefault(),N=f?np(i,f):new FormData(i),Wu(n,{pending:!0,data:N,method:i.method,action:c},c,N))},currentTarget:i}]})}}for(var Dd=0;Dd<Dc.length;Dd++){var Ud=Dc[Dd],Yy=Ud.toLowerCase(),Gy=Ud[0].toUpperCase()+Ud.slice(1);ea(Yy,"on"+Gy)}ea(Xo,"onAnimationEnd"),ea(Pn,"onAnimationIteration"),ea(Ac,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(kc,"onTransitionRun"),ea(Rc,"onTransitionStart"),ea(Qo,"onTransitionCancel"),ea(Mc,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(co));function ap(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var c=void 0;if(t)for(var f=a.length-1;0<=f;f--){var y=a[f],N=y.instance,B=y.currentTarget;if(y=y.listener,N!==c&&i.isPropagationStopped())break e;c=y,i.currentTarget=B;try{c(i)}catch(Q){hs(Q)}i.currentTarget=null,c=N}else for(f=0;f<a.length;f++){if(y=a[f],N=y.instance,B=y.currentTarget,y=y.listener,N!==c&&i.isPropagationStopped())break e;c=y,i.currentTarget=B;try{c(i)}catch(Q){hs(Q)}i.currentTarget=null,c=N}}}}function at(e,t){var n=t[Un];n===void 0&&(n=t[Un]=new Set);var a=e+"__bubble";n.has(a)||(lp(t,e,2,!1),n.add(a))}function Od(e,t,n){var a=0;t&&(a|=4),lp(n,e,a,t)}var Tr="_reactListening"+Math.random().toString(36).slice(2);function zd(e){if(!e[Tr]){e[Tr]=!0,Kt.forEach(function(n){n!=="selectionchange"&&(Vy.has(n)||Od(n,!1,e),Od(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tr]||(t[Tr]=!0,Od("selectionchange",!1,t))}}function lp(e,t,n,a){switch(Dp(t)){case 2:var i=vv;break;case 8:i=bv;break;default:i=Fd}n=i.bind(null,t,n,e),i=void 0,!sc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bd(e,t,n,a,i){var c=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var y=a.stateNode.containerInfo;if(y===i)break;if(f===4)for(f=a.return;f!==null;){var N=f.tag;if((N===3||N===4)&&f.stateNode.containerInfo===i)return;f=f.return}for(;y!==null;){if(f=ee(y),f===null)return;if(N=f.tag,N===5||N===6||N===26||N===27){a=c=f;continue e}y=y.parentNode}}a=a.return}nl(function(){var B=c,Q=_i(n),W=[];e:{var q=fs.get(e);if(q!==void 0){var V=Ei,Ne=e;switch(e){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":V=Eu;break;case"focusin":Ne="focus",V=uc;break;case"focusout":Ne="blur",V=uc;break;case"beforeblur":case"afterblur":V=uc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=yc;break;case Xo:case Pn:case Ac:V=Su;break;case Mc:V=sl;break;case"scroll":case"scrollend":V=Pi;break;case"wheel":V=Bo;break;case"copy":case"cut":case"paste":V=Uo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=as;break;case"toggle":case"beforetoggle":V=is}var Re=(t&4)!==0,vt=!Re&&(e==="scroll"||e==="scrollend"),M=Re?q!==null?q+"Capture":null:q;Re=[];for(var C=B,z;C!==null;){var F=C;if(z=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||z===null||M===null||(F=Hl(C,M),F!=null&&Re.push(oo(C,F,z))),vt)break;C=C.return}0<Re.length&&(q=new V(q,Ne,null,n,Q),W.push({event:q,listeners:Re}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",q&&n!==wi&&(Ne=n.relatedTarget||n.fromElement)&&(ee(Ne)||Ne[vn]))break e;if((V||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,V?(Ne=n.relatedTarget||n.toElement,V=B,Ne=Ne?ee(Ne):null,Ne!==null&&(vt=m(Ne),Re=Ne.tag,Ne!==vt||Re!==5&&Re!==27&&Re!==6)&&(Ne=null)):(V=null,Ne=B),V!==Ne)){if(Re=oc,F="onMouseLeave",M="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(Re=as,F="onPointerLeave",M="onPointerEnter",C="pointer"),vt=V==null?q:Pe(V),z=Ne==null?q:Pe(Ne),q=new Re(F,C+"leave",V,n,Q),q.target=vt,q.relatedTarget=z,F=null,ee(Q)===B&&(Re=new Re(M,C+"enter",Ne,n,Q),Re.target=z,Re.relatedTarget=vt,F=Re),vt=F,V&&Ne)t:{for(Re=Zy,M=V,C=Ne,z=0,F=M;F;F=Re(F))z++;F=0;for(var Ae=C;Ae;Ae=Re(Ae))F++;for(;0<z-F;)M=Re(M),z--;for(;0<F-z;)C=Re(C),F--;for(;z--;){if(M===C||C!==null&&M===C.alternate){Re=M;break t}M=Re(M),C=Re(C)}Re=null}else Re=null;V!==null&&ip(W,q,V,Re,!1),Ne!==null&&vt!==null&&ip(W,vt,Ne,Re,!0)}}e:{if(q=B?Pe(B):window,V=q.nodeName&&q.nodeName.toLowerCase(),V==="select"||V==="input"&&q.type==="file")var ct=os;else if(_c(q))if(Nc)ct=Yo;else{ct=qo;var Ee=Ho}else V=q.nodeName,!V||V.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ic(B.elementType)&&(ct=os):ct=Ko;if(ct&&(ct=ct(e,B))){Ri(W,ct,n,Q);break e}Ee&&Ee(e,q,B),e==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Si(q,"number",q.value)}switch(Ee=B?Pe(B):window,e){case"focusin":(_c(Ee)||Ee.contentEditable==="true")&&(zn=Ee,Bn=B,Ln=null);break;case"focusout":Ln=Bn=zn=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,ds(W,n,Q);break;case"selectionchange":if(Vo)break;case"keydown":case"keyup":ds(W,n,Q)}var Qe;if(Ai)e:{switch(e){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else cl?cs(e,n)&&(it="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(it="onCompositionStart");it&&(bc&&n.locale!=="ko"&&(cl||it!=="onCompositionStart"?it==="onCompositionEnd"&&cl&&(Qe=cc()):(fa=Q,Ni="value"in fa?fa.value:fa.textContent,cl=!0)),Ee=Ar(B,it),0<Ee.length&&(it=new ns(it,e,null,n,Q),W.push({event:it,listeners:Ee}),Qe?it.data=Qe:(Qe=ki(n),Qe!==null&&(it.data=Qe)))),(Qe=Yl?ju(e,n):Cu(e,n))&&(it=Ar(B,"onBeforeInput"),0<it.length&&(Ee=new ns("onBeforeInput","beforeinput",null,n,Q),W.push({event:Ee,listeners:it}),Ee.data=Qe)),Ky(W,e,B,n,Q)}ap(W,t)})}function oo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ar(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,c=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||c===null||(i=Hl(e,n),i!=null&&a.unshift(oo(e,i,c)),i=Hl(e,t),i!=null&&a.push(oo(e,i,c))),e.tag===3)return a;e=e.return}return[]}function Zy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ip(e,t,n,a,i){for(var c=t._reactName,f=[];n!==null&&n!==a;){var y=n,N=y.alternate,B=y.stateNode;if(y=y.tag,N!==null&&N===a)break;y!==5&&y!==26&&y!==27||B===null||(N=B,i?(B=Hl(n,c),B!=null&&f.unshift(oo(n,B,N))):i||(B=Hl(n,c),B!=null&&f.push(oo(n,B,N)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Xy=/\r\n?/g,Qy=/\u0000|\uFFFD/g;function sp(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Qy,"")}function cp(e,t){return t=sp(t),sp(e)===t}function yt(e,t,n,a,i,c){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||tl(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&tl(e,""+a);break;case"className":bi(e,"class",a);break;case"tabIndex":bi(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":bi(e,n,a);break;case"style":lc(e,a,c);break;case"data":if(t!=="object"){bi(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=$i(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(n==="formAction"?(t!=="input"&&yt(e,t,"name",i.name,i,null),yt(e,t,"formEncType",i.formEncType,i,null),yt(e,t,"formMethod",i.formMethod,i,null),yt(e,t,"formTarget",i.formTarget,i,null)):(yt(e,t,"encType",i.encType,i,null),yt(e,t,"method",i.method,i,null),yt(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=$i(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Ca);break;case"onScroll":a!=null&&at("scroll",e);break;case"onScrollEnd":a!=null&&at("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=$i(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":at("beforetoggle",e),at("toggle",e),Ul(e,"popover",a);break;case"xlinkActuate":Mt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Mt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Mt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Mt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Mt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Mt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Mt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Mt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Mt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Ul(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Do.get(n)||n,Ul(e,n,a))}}function Ld(e,t,n,a,i,c){switch(n){case"style":lc(e,a,c);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof a=="string"?tl(e,a):(typeof a=="number"||typeof a=="bigint")&&tl(e,""+a);break;case"onScroll":a!=null&&at("scroll",e);break;case"onScrollEnd":a!=null&&at("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bn.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),c=e[mt]||null,c=c!=null?c[n]:null,typeof c=="function"&&e.removeEventListener(t,c,i),typeof a=="function")){typeof c!="function"&&c!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Ul(e,n,a)}}}function pn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",e),at("load",e);var a=!1,i=!1,c;for(c in n)if(n.hasOwnProperty(c)){var f=n[c];if(f!=null)switch(c){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:yt(e,t,c,f,n,null)}}i&&yt(e,t,"srcSet",n.srcSet,n,null),a&&yt(e,t,"src",n.src,n,null);return;case"input":at("invalid",e);var y=c=f=i=null,N=null,B=null;for(a in n)if(n.hasOwnProperty(a)){var Q=n[a];if(Q!=null)switch(a){case"name":i=Q;break;case"type":f=Q;break;case"checked":N=Q;break;case"defaultChecked":B=Q;break;case"value":c=Q;break;case"defaultValue":y=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,t));break;default:yt(e,t,a,Q,n,null)}}zl(e,c,y,N,B,f,i,!1);return;case"select":at("invalid",e),a=f=c=null;for(i in n)if(n.hasOwnProperty(i)&&(y=n[i],y!=null))switch(i){case"value":c=y;break;case"defaultValue":f=y;break;case"multiple":a=y;default:yt(e,t,i,y,n,null)}t=c,n=f,e.multiple=!!a,t!=null?ja(e,!!a,t,!1):n!=null&&ja(e,!!a,n,!0);return;case"textarea":at("invalid",e),c=i=a=null;for(f in n)if(n.hasOwnProperty(f)&&(y=n[f],y!=null))switch(f){case"value":a=y;break;case"defaultValue":i=y;break;case"children":c=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:yt(e,t,f,y,n,null)}nc(e,a,i,c);return;case"option":for(N in n)if(n.hasOwnProperty(N)&&(a=n[N],a!=null))switch(N){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:yt(e,t,N,a,n,null)}return;case"dialog":at("beforetoggle",e),at("toggle",e),at("cancel",e),at("close",e);break;case"iframe":case"object":at("load",e);break;case"video":case"audio":for(a=0;a<co.length;a++)at(co[a],e);break;case"image":at("error",e),at("load",e);break;case"details":at("toggle",e);break;case"embed":case"source":case"link":at("error",e),at("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in n)if(n.hasOwnProperty(B)&&(a=n[B],a!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:yt(e,t,B,a,n,null)}return;default:if(ic(t)){for(Q in n)n.hasOwnProperty(Q)&&(a=n[Q],a!==void 0&&Ld(e,t,Q,a,n,void 0));return}}for(y in n)n.hasOwnProperty(y)&&(a=n[y],a!=null&&yt(e,t,y,a,n,null))}function Iy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,c=null,f=null,y=null,N=null,B=null,Q=null;for(V in n){var W=n[V];if(n.hasOwnProperty(V)&&W!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":N=W;default:a.hasOwnProperty(V)||yt(e,t,V,null,a,W)}}for(var q in a){var V=a[q];if(W=n[q],a.hasOwnProperty(q)&&(V!=null||W!=null))switch(q){case"type":c=V;break;case"name":i=V;break;case"checked":B=V;break;case"defaultChecked":Q=V;break;case"value":f=V;break;case"defaultValue":y=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:V!==W&&yt(e,t,q,V,a,W)}}ec(e,f,y,N,B,Q,c,i);return;case"select":V=f=y=q=null;for(c in n)if(N=n[c],n.hasOwnProperty(c)&&N!=null)switch(c){case"value":break;case"multiple":V=N;default:a.hasOwnProperty(c)||yt(e,t,c,null,a,N)}for(i in a)if(c=a[i],N=n[i],a.hasOwnProperty(i)&&(c!=null||N!=null))switch(i){case"value":q=c;break;case"defaultValue":y=c;break;case"multiple":f=c;default:c!==N&&yt(e,t,i,c,a,N)}t=y,n=f,a=V,q!=null?ja(e,!!n,q,!1):!!a!=!!n&&(t!=null?ja(e,!!n,t,!0):ja(e,!!n,n?[]:"",!1));return;case"textarea":V=q=null;for(y in n)if(i=n[y],n.hasOwnProperty(y)&&i!=null&&!a.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:yt(e,t,y,null,a,i)}for(f in a)if(i=a[f],c=n[f],a.hasOwnProperty(f)&&(i!=null||c!=null))switch(f){case"value":q=i;break;case"defaultValue":V=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==c&&yt(e,t,f,i,a,c)}tc(e,q,V);return;case"option":for(var Ne in n)if(q=n[Ne],n.hasOwnProperty(Ne)&&q!=null&&!a.hasOwnProperty(Ne))switch(Ne){case"selected":e.selected=!1;break;default:yt(e,t,Ne,null,a,q)}for(N in a)if(q=a[N],V=n[N],a.hasOwnProperty(N)&&q!==V&&(q!=null||V!=null))switch(N){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:yt(e,t,N,q,a,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in n)q=n[Re],n.hasOwnProperty(Re)&&q!=null&&!a.hasOwnProperty(Re)&&yt(e,t,Re,null,a,q);for(B in a)if(q=a[B],V=n[B],a.hasOwnProperty(B)&&q!==V&&(q!=null||V!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,t));break;default:yt(e,t,B,q,a,V)}return;default:if(ic(t)){for(var vt in n)q=n[vt],n.hasOwnProperty(vt)&&q!==void 0&&!a.hasOwnProperty(vt)&&Ld(e,t,vt,void 0,a,q);for(Q in a)q=a[Q],V=n[Q],!a.hasOwnProperty(Q)||q===V||q===void 0&&V===void 0||Ld(e,t,Q,q,a,V);return}}for(var M in n)q=n[M],n.hasOwnProperty(M)&&q!=null&&!a.hasOwnProperty(M)&&yt(e,t,M,null,a,q);for(W in a)q=a[W],V=n[W],!a.hasOwnProperty(W)||q===V||q==null&&V==null||yt(e,t,W,q,a,V)}function op(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],c=i.transferSize,f=i.initiatorType,y=i.duration;if(c&&y&&op(f)){for(f=0,y=i.responseEnd,a+=1;a<n.length;a++){var N=n[a],B=N.startTime;if(B>y)break;var Q=N.transferSize,W=N.initiatorType;Q&&op(W)&&(N=N.responseEnd,f+=Q*(N<y?1:(y-B)/(N-B)))}if(--a,t+=8*(c+f)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hd=null,qd=null;function kr(e){return e.nodeType===9?e:e.ownerDocument}function rp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function up(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Kd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yd=null;function $y(){var e=window.event;return e&&e.type==="popstate"?e===Yd?!1:(Yd=e,!0):(Yd=null,!1)}var dp=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(e){return fp.resolve(null).then(e).catch(Py)}:dp;function Py(e){setTimeout(function(){throw e})}function oi(e){return e==="head"}function hp(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(i),Vs(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")ro(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ro(n);for(var c=n.firstChild;c;){var f=c.nextSibling,y=c.nodeName;c[_e]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=f}}else n==="body"&&ro(e.ownerDocument.body);n=i}while(n);Vs(t)}function mp(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Gd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gd(n),j(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function ev(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[_e])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=va(e.nextSibling),e===null)break}return null}function tv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=va(e.nextSibling),e===null))return null;return e}function pp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=va(e.nextSibling),e===null))return null;return e}function Vd(e){return e.data==="$?"||e.data==="$~"}function Zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function nv(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function va(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Xd=null;function gp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return va(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function yp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function vp(e,t,n){switch(t=kr(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ro(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);j(e)}var ba=new Map,bp=new Set;function Rr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var El=K.d;K.d={f:av,r:lv,D:iv,C:sv,L:cv,m:ov,X:uv,S:rv,M:dv};function av(){var e=El.f(),t=wr();return e||t}function lv(e){var t=xe(e);t!==null&&t.tag===5&&t.type==="form"?zh(t):El.r(e)}var Ks=typeof document>"u"?null:document;function xp(e,t,n){var a=Ks;if(a&&typeof t=="string"&&t){var i=xn(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),bp.has(i)||(bp.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),pn(t,"link",e),Xe(t),a.head.appendChild(t)))}}function iv(e){El.D(e),xp("dns-prefetch",e,null)}function sv(e,t){El.C(e,t),xp("preconnect",e,t)}function cv(e,t,n){El.L(e,t,n);var a=Ks;if(a&&e&&t){var i='link[rel="preload"][as="'+xn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+xn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+xn(n.imageSizes)+'"]')):i+='[href="'+xn(e)+'"]';var c=i;switch(t){case"style":c=Ys(e);break;case"script":c=Gs(e)}ba.has(c)||(e=T({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ba.set(c,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(uo(c))||t==="script"&&a.querySelector(fo(c))||(t=a.createElement("link"),pn(t,"link",e),Xe(t),a.head.appendChild(t)))}}function ov(e,t){El.m(e,t);var n=Ks;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+xn(a)+'"][href="'+xn(e)+'"]',c=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Gs(e)}if(!ba.has(c)&&(e=T({rel:"modulepreload",href:e},t),ba.set(c,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fo(c)))return}a=n.createElement("link"),pn(a,"link",e),Xe(a),n.head.appendChild(a)}}}function rv(e,t,n){El.S(e,t,n);var a=Ks;if(a&&e){var i=_t(a).hoistableStyles,c=Ys(e);t=t||"default";var f=i.get(c);if(!f){var y={loading:0,preload:null};if(f=a.querySelector(uo(c)))y.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ba.get(c))&&Qd(e,n);var N=f=a.createElement("link");Xe(N),pn(N,"link",e),N._p=new Promise(function(B,Q){N.onload=B,N.onerror=Q}),N.addEventListener("load",function(){y.loading|=1}),N.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Mr(f,t,a)}f={type:"stylesheet",instance:f,count:1,state:y},i.set(c,f)}}}function uv(e,t){El.X(e,t);var n=Ks;if(n&&e){var a=_t(n).hoistableScripts,i=Gs(e),c=a.get(i);c||(c=n.querySelector(fo(i)),c||(e=T({src:e,async:!0},t),(t=ba.get(i))&&Id(e,t),c=n.createElement("script"),Xe(c),pn(c,"link",e),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(i,c))}}function dv(e,t){El.M(e,t);var n=Ks;if(n&&e){var a=_t(n).hoistableScripts,i=Gs(e),c=a.get(i);c||(c=n.querySelector(fo(i)),c||(e=T({src:e,async:!0,type:"module"},t),(t=ba.get(i))&&Id(e,t),c=n.createElement("script"),Xe(c),pn(c,"link",e),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(i,c))}}function Sp(e,t,n,a){var i=(i=ae.current)?Rr(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ys(n.href),n=_t(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ys(n.href);var c=_t(i).hoistableStyles,f=c.get(e);if(f||(i=i.ownerDocument||i,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,f),(c=i.querySelector(uo(e)))&&!c._p&&(f.instance=c,f.state.loading=5),ba.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ba.set(e,n),c||fv(i,e,n,f.state))),t&&a===null)throw Error(o(528,""));return f}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Gs(n),n=_t(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ys(e){return'href="'+xn(e)+'"'}function uo(e){return'link[rel="stylesheet"]['+e+"]"}function wp(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function fv(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),pn(t,"link",n),Xe(t),e.head.appendChild(t))}function Gs(e){return'[src="'+xn(e)+'"]'}function fo(e){return"script[async]"+e}function _p(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+xn(n.href)+'"]');if(a)return t.instance=a,Xe(a),a;var i=T({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Xe(a),pn(a,"style",i),Mr(a,n.precedence,e),t.instance=a;case"stylesheet":i=Ys(n.href);var c=e.querySelector(uo(i));if(c)return t.state.loading|=4,t.instance=c,Xe(c),c;a=wp(n),(i=ba.get(i))&&Qd(a,i),c=(e.ownerDocument||e).createElement("link"),Xe(c);var f=c;return f._p=new Promise(function(y,N){f.onload=y,f.onerror=N}),pn(c,"link",a),t.state.loading|=4,Mr(c,n.precedence,e),t.instance=c;case"script":return c=Gs(n.src),(i=e.querySelector(fo(c)))?(t.instance=i,Xe(i),i):(a=n,(i=ba.get(c))&&(a=T({},n),Id(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),Xe(i),pn(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Mr(a,n.precedence,e));return t.instance}function Mr(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,c=i,f=0;f<a.length;f++){var y=a[f];if(y.dataset.precedence===t)c=y;else if(c!==i)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Qd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Id(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Dr=null;function Np(e,t,n){if(Dr===null){var a=new Map,i=Dr=new Map;i.set(n,a)}else i=Dr,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var c=n[i];if(!(c[_e]||c[ht]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var f=c.getAttribute(t)||"";f=e+f;var y=a.get(f);y?y.push(c):a.set(f,[c])}}return a}function Ep(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function hv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function jp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mv(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var i=Ys(a.href),c=t.querySelector(uo(i));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ur.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=c,Xe(c);return}c=t.ownerDocument||t,a=wp(a),(i=ba.get(i))&&Qd(a,i),c=c.createElement("link"),Xe(c);var f=c;f._p=new Promise(function(y,N){f.onload=y,f.onerror=N}),pn(c,"link",a),n.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ur.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Jd=0;function pv(e,t){return e.stylesheets&&e.count===0&&zr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Jd===0&&(Jd=62500*Jy());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Jd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function Ur(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Or=null;function zr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Or=new Map,t.forEach(gv,e),Or=null,Ur.call(e))}function gv(e,t){if(!(t.state.loading&4)){var n=Or.get(e);if(n)var a=n.get(null);else{n=new Map,Or.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<i.length;c++){var f=i[c];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),a=f)}a&&n.set(null,a)}i=t.instance,f=i.getAttribute("data-precedence"),c=n.get(f)||a,c===a&&n.set(null,i),n.set(f,i),this.count++,a=Ur.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),c?c.parentNode.insertBefore(i,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var ho={$$typeof:fe,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function yv(e,t,n,a,i,c,f,y,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=c,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Cp(e,t,n,a,i,c,f,y,N,B,Q,W){return e=new yv(e,t,n,f,N,B,Q,W,y),t=1,c===!0&&(t|=24),c=Sn(3,null,null,t),e.current=c,c.stateNode=e,t=fn(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:a,isDehydrated:n,cache:t},Mu(c),e}function Tp(e){return e?(e=hl,e):hl}function Ap(e,t,n,a,i,c){i=Tp(i),a.context===null?a.context=i:a.pendingContext=i,a=Fl(t),a.payload={element:n},c=c===void 0?null:c,c!==null&&(a.callback=c),n=Wl(e,a,t),n!==null&&(Qn(n,e,t),Vc(n,e,t))}function kp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $d(e,t){kp(e,t),(e=e.alternate)&&kp(e,t)}function Rp(e){if(e.tag===13||e.tag===31){var t=Ka(e,67108864);t!==null&&Qn(t,e,67108864),$d(e,67108864)}}function Mp(e){if(e.tag===13||e.tag===31){var t=sa();t=Ve(t);var n=Ka(e,t);n!==null&&Qn(n,e,t),$d(e,t)}}var Br=!0;function vv(e,t,n,a){var i=E.T;E.T=null;var c=K.p;try{K.p=2,Fd(e,t,n,a)}finally{K.p=c,E.T=i}}function bv(e,t,n,a){var i=E.T;E.T=null;var c=K.p;try{K.p=8,Fd(e,t,n,a)}finally{K.p=c,E.T=i}}function Fd(e,t,n,a){if(Br){var i=Wd(a);if(i===null)Bd(e,t,a,Lr,n),Up(e,a);else if(Sv(i,e,t,n,a))a.stopPropagation();else if(Up(e,a),t&4&&-1<xv.indexOf(e)){for(;i!==null;){var c=xe(i);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=yn(c.pendingLanes);if(f!==0){var y=c;for(y.pendingLanes|=2,y.entangledLanes|=2;f;){var N=1<<31-Tt(f);y.entanglements[1]|=N,f&=~N}Qa(c),(ut&6)===0&&(xr=k()+500,so(0))}}break;case 31:case 13:y=Ka(c,2),y!==null&&Qn(y,c,2),wr(),$d(c,2)}if(c=Wd(a),c===null&&Bd(e,t,a,Lr,n),c===i)break;i=c}i!==null&&a.stopPropagation()}else Bd(e,t,a,null,n)}}function Wd(e){return e=_i(e),Pd(e)}var Lr=null;function Pd(e){if(Lr=null,e=ee(e),e!==null){var t=m(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=p(t),e!==null)return e;e=null}else if(n===31){if(e=b(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Lr=e,null}function Dp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case Oe:return 2;case qe:return 8;case rt:case Ye:return 32;case G:return 268435456;default:return 32}default:return 32}}var ef=!1,ri=null,ui=null,di=null,mo=new Map,po=new Map,fi=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Up(e,t){switch(e){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":mo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(t.pointerId)}}function go(e,t,n,a,i,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:c,targetContainers:[i]},t!==null&&(t=xe(t),t!==null&&Rp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Sv(e,t,n,a,i){switch(t){case"focusin":return ri=go(ri,e,t,n,a,i),!0;case"dragenter":return ui=go(ui,e,t,n,a,i),!0;case"mouseover":return di=go(di,e,t,n,a,i),!0;case"pointerover":var c=i.pointerId;return mo.set(c,go(mo.get(c)||null,e,t,n,a,i)),!0;case"gotpointercapture":return c=i.pointerId,po.set(c,go(po.get(c)||null,e,t,n,a,i)),!0}return!1}function Op(e){var t=ee(e.target);if(t!==null){var n=m(t);if(n!==null){if(t=n.tag,t===13){if(t=p(n),t!==null){e.blockedOn=t,ra(e.priority,function(){Mp(n)});return}}else if(t===31){if(t=b(n),t!==null){e.blockedOn=t,ra(e.priority,function(){Mp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wd(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);wi=a,n.target.dispatchEvent(a),wi=null}else return t=xe(n),t!==null&&Rp(t),e.blockedOn=n,!1;t.shift()}return!0}function zp(e,t,n){Hr(e)&&n.delete(t)}function wv(){ef=!1,ri!==null&&Hr(ri)&&(ri=null),ui!==null&&Hr(ui)&&(ui=null),di!==null&&Hr(di)&&(di=null),mo.forEach(zp),po.forEach(zp)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,ef||(ef=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wv)))}var Kr=null;function Bp(e){Kr!==e&&(Kr=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Kr===e&&(Kr=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(Pd(a||n)===null)continue;break}var c=xe(n);c!==null&&(e.splice(t,3),t-=3,Wu(c,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Vs(e){function t(N){return qr(N,e)}ri!==null&&qr(ri,e),ui!==null&&qr(ui,e),di!==null&&qr(di,e),mo.forEach(t),po.forEach(t);for(var n=0;n<fi.length;n++){var a=fi[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<fi.length&&(n=fi[0],n.blockedOn===null);)Op(n),n.blockedOn===null&&fi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],c=n[a+1],f=i[mt]||null;if(typeof c=="function")f||Bp(n);else if(f){var y=null;if(c&&c.hasAttribute("formAction")){if(i=c,f=c[mt]||null)y=f.formAction;else if(Pd(i)!==null)continue}else y=f.action;typeof y=="function"?n[a+1]=y:(n.splice(a,3),a-=3),Bp(n)}}}function Lp(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(f){return i=f})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function tf(e){this._internalRoot=e}Yr.prototype.render=tf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,a=sa();Ap(n,a,e,t,null,null)},Yr.prototype.unmount=tf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ap(e.current,2,null,e,null,null),wr(),t[vn]=null}};function Yr(e){this._internalRoot=e}Yr.prototype.unstable_scheduleHydration=function(e){if(e){var t=oa();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fi.length&&t!==0&&t<fi[n].priority;n++);fi.splice(n,0,e),n===0&&Op(e)}};var Hp=l.version;if(Hp!=="19.2.4")throw Error(o(527,Hp,"19.2.4"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(t),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var _v={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gr.isDisabled&&Gr.supportsFiber)try{Lt=Gr.inject(_v),Ht=Gr}catch{}}return vo.createRoot=function(e,t){if(!h(e))throw Error(o(299));var n=!1,a="",i=Xh,c=Qh,f=Ih;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Cp(e,1,!1,null,null,n,a,null,i,c,f,Lp),e[vn]=t.current,zd(e),new tf(t)},vo.hydrateRoot=function(e,t,n){if(!h(e))throw Error(o(299));var a=!1,i="",c=Xh,f=Qh,y=Ih,N=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.formState!==void 0&&(N=n.formState)),t=Cp(e,1,!0,t,n??null,a,i,N,c,f,y,Lp),t.context=Tp(null),n=t.current,a=sa(),a=Ve(a),i=Fl(a),i.callback=null,Wl(n,i,a),n=a,t.current.lanes=n,Dn(t,n),Qa(t),e[vn]=t.current,zd(e),new Yr(t)},vo.version="19.2.4",vo}var Jp;function Ov(){if(Jp)return lf.exports;Jp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),lf.exports=Uv(),lf.exports}var zv=Ov();const Bv=Ng(zv);/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Eg,setPrototypeOf:$p,isFrozen:Lv,getPrototypeOf:Hv,getOwnPropertyDescriptor:qv}=Object;let{freeze:An,seal:wa,create:wf}=Object,{apply:_f,construct:Nf}=typeof Reflect<"u"&&Reflect;An||(An=function(l){return l});wa||(wa=function(l){return l});_f||(_f=function(l,u){for(var o=arguments.length,h=new Array(o>2?o-2:0),m=2;m<o;m++)h[m-2]=arguments[m];return l.apply(u,h)});Nf||(Nf=function(l){for(var u=arguments.length,o=new Array(u>1?u-1:0),h=1;h<u;h++)o[h-1]=arguments[h];return new l(...o)});const Vr=kn(Array.prototype.forEach),Kv=kn(Array.prototype.lastIndexOf),Fp=kn(Array.prototype.pop),bo=kn(Array.prototype.push),Yv=kn(Array.prototype.splice),tu=kn(String.prototype.toLowerCase),rf=kn(String.prototype.toString),uf=kn(String.prototype.match),xo=kn(String.prototype.replace),Gv=kn(String.prototype.indexOf),Vv=kn(String.prototype.trim),Oa=kn(Object.prototype.hasOwnProperty),Cn=kn(RegExp.prototype.test),So=Zv(TypeError);function kn(r){return function(l){l instanceof RegExp&&(l.lastIndex=0);for(var u=arguments.length,o=new Array(u>1?u-1:0),h=1;h<u;h++)o[h-1]=arguments[h];return _f(r,l,o)}}function Zv(r){return function(){for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return Nf(r,u)}}function $e(r,l){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tu;$p&&$p(r,null);let o=l.length;for(;o--;){let h=l[o];if(typeof h=="string"){const m=u(h);m!==h&&(Lv(l)||(l[o]=m),h=m)}r[h]=!0}return r}function Xv(r){for(let l=0;l<r.length;l++)Oa(r,l)||(r[l]=null);return r}function Ja(r){const l=wf(null);for(const[u,o]of Eg(r))Oa(r,u)&&(Array.isArray(o)?l[u]=Xv(o):o&&typeof o=="object"&&o.constructor===Object?l[u]=Ja(o):l[u]=o);return l}function wo(r,l){for(;r!==null;){const o=qv(r,l);if(o){if(o.get)return kn(o.get);if(typeof o.value=="function")return kn(o.value)}r=Hv(r)}function u(){return null}return u}const Wp=An(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),df=An(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ff=An(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Qv=An(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hf=An(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Iv=An(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Pp=An(["#text"]),eg=An(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),mf=An(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tg=An(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zr=An(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Jv=wa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$v=wa(/<%[\w\W]*|[\w\W]*%>/gm),Fv=wa(/\$\{[\w\W]*/gm),Wv=wa(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pv=wa(/^aria-[\-\w]+$/),jg=wa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eb=wa(/^(?:\w+script|data):/i),tb=wa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cg=wa(/^html$/i),nb=wa(/^[a-z][.\w]*(-[.\w]+)+$/i);var ng=Object.freeze({__proto__:null,ARIA_ATTR:Pv,ATTR_WHITESPACE:tb,CUSTOM_ELEMENT:nb,DATA_ATTR:Wv,DOCTYPE_NAME:Cg,ERB_EXPR:$v,IS_ALLOWED_URI:jg,IS_SCRIPT_OR_DATA:eb,MUSTACHE_EXPR:Jv,TMPLIT_EXPR:Fv});const _o={element:1,text:3,progressingInstruction:7,comment:8,document:9},ab=function(){return typeof window>"u"?null:window},lb=function(l,u){if(typeof l!="object"||typeof l.createPolicy!="function")return null;let o=null;const h="data-tt-policy-suffix";u&&u.hasAttribute(h)&&(o=u.getAttribute(h));const m="dompurify"+(o?"#"+o:"");try{return l.createPolicy(m,{createHTML(p){return p},createScriptURL(p){return p}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}},ag=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Tg(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ab();const l=_e=>Tg(_e);if(l.version="3.3.1",l.removed=[],!r||!r.document||r.document.nodeType!==_o.document||!r.Element)return l.isSupported=!1,l;let{document:u}=r;const o=u,h=o.currentScript,{DocumentFragment:m,HTMLTemplateElement:p,Node:b,Element:v,NodeFilter:x,NamedNodeMap:A=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:T,DOMParser:X,trustedTypes:O}=r,L=v.prototype,I=wo(L,"cloneNode"),te=wo(L,"remove"),oe=wo(L,"nextSibling"),ge=wo(L,"childNodes"),fe=wo(L,"parentNode");if(typeof p=="function"){const _e=u.createElement("template");_e.content&&_e.content.ownerDocument&&(u=_e.content.ownerDocument)}let de,ke="";const{implementation:Ge,createNodeIterator:Te,createDocumentFragment:we,getElementsByTagName:re}=u,{importNode:Ue}=o;let je=ag();l.isSupported=typeof Eg=="function"&&typeof fe=="function"&&Ge&&Ge.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ye,ERB_EXPR:se,TMPLIT_EXPR:Y,DATA_ATTR:U,ARIA_ATTR:E,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:Z,CUSTOM_ELEMENT:ne}=ng;let{IS_ALLOWED_URI:ce}=ng,S=null;const D=$e({},[...Wp,...df,...ff,...hf,...Pp]);let H=null;const ie=$e({},[...eg,...mf,...tg,...Zr]);let P=Object.seal(wf(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,be=null;const Me=Object.seal(wf(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Be=!0,He=!0,Fe=!1,Jt=!0,Et=!1,Vt=!0,Bt=!1,sn=!1,Rn=!1,$t=!1,en=!1,gn=!1,cn=!0,le=!1;const Ie="user-content-";let k=!0,pe=!1,Oe={},qe=null;const rt=$e({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ye=null;const G=$e({},["audio","video","img","source","image","track"]);let Je=null;const on=$e({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lt="http://www.w3.org/1998/Math/MathML",Ht="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let Tt=qt,Wa=!1,st=null;const Ml=$e({},[Lt,Ht,qt],rf);let De=$e({},["mi","mo","mn","ms","mtext"]),rn=$e({},["annotation-xml"]);const Mn=$e({},["title","style","font","a","script"]);let yn=null;const jt=["application/xhtml+xml","text/html"],_a="text/html";let We=null,$n=null;const Fn=u.createElement("form"),Dn=function(j){return j instanceof RegExp||j instanceof Function},Ft=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!($n&&$n===j)){if((!j||typeof j!="object")&&(j={}),j=Ja(j),yn=jt.indexOf(j.PARSER_MEDIA_TYPE)===-1?_a:j.PARSER_MEDIA_TYPE,We=yn==="application/xhtml+xml"?rf:tu,S=Oa(j,"ALLOWED_TAGS")?$e({},j.ALLOWED_TAGS,We):D,H=Oa(j,"ALLOWED_ATTR")?$e({},j.ALLOWED_ATTR,We):ie,st=Oa(j,"ALLOWED_NAMESPACES")?$e({},j.ALLOWED_NAMESPACES,rf):Ml,Je=Oa(j,"ADD_URI_SAFE_ATTR")?$e(Ja(on),j.ADD_URI_SAFE_ATTR,We):on,Ye=Oa(j,"ADD_DATA_URI_TAGS")?$e(Ja(G),j.ADD_DATA_URI_TAGS,We):G,qe=Oa(j,"FORBID_CONTENTS")?$e({},j.FORBID_CONTENTS,We):rt,ae=Oa(j,"FORBID_TAGS")?$e({},j.FORBID_TAGS,We):Ja({}),be=Oa(j,"FORBID_ATTR")?$e({},j.FORBID_ATTR,We):Ja({}),Oe=Oa(j,"USE_PROFILES")?j.USE_PROFILES:!1,Be=j.ALLOW_ARIA_ATTR!==!1,He=j.ALLOW_DATA_ATTR!==!1,Fe=j.ALLOW_UNKNOWN_PROTOCOLS||!1,Jt=j.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Et=j.SAFE_FOR_TEMPLATES||!1,Vt=j.SAFE_FOR_XML!==!1,Bt=j.WHOLE_DOCUMENT||!1,$t=j.RETURN_DOM||!1,en=j.RETURN_DOM_FRAGMENT||!1,gn=j.RETURN_TRUSTED_TYPE||!1,Rn=j.FORCE_BODY||!1,cn=j.SANITIZE_DOM!==!1,le=j.SANITIZE_NAMED_PROPS||!1,k=j.KEEP_CONTENT!==!1,pe=j.IN_PLACE||!1,ce=j.ALLOWED_URI_REGEXP||jg,Tt=j.NAMESPACE||qt,De=j.MATHML_TEXT_INTEGRATION_POINTS||De,rn=j.HTML_INTEGRATION_POINTS||rn,P=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&Dn(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(P.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&Dn(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(P.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(P.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Et&&(He=!1),en&&($t=!0),Oe&&(S=$e({},Pp),H=[],Oe.html===!0&&($e(S,Wp),$e(H,eg)),Oe.svg===!0&&($e(S,df),$e(H,mf),$e(H,Zr)),Oe.svgFilters===!0&&($e(S,ff),$e(H,mf),$e(H,Zr)),Oe.mathMl===!0&&($e(S,hf),$e(H,tg),$e(H,Zr))),j.ADD_TAGS&&(typeof j.ADD_TAGS=="function"?Me.tagCheck=j.ADD_TAGS:(S===D&&(S=Ja(S)),$e(S,j.ADD_TAGS,We))),j.ADD_ATTR&&(typeof j.ADD_ATTR=="function"?Me.attributeCheck=j.ADD_ATTR:(H===ie&&(H=Ja(H)),$e(H,j.ADD_ATTR,We))),j.ADD_URI_SAFE_ATTR&&$e(Je,j.ADD_URI_SAFE_ATTR,We),j.FORBID_CONTENTS&&(qe===rt&&(qe=Ja(qe)),$e(qe,j.FORBID_CONTENTS,We)),j.ADD_FORBID_CONTENTS&&(qe===rt&&(qe=Ja(qe)),$e(qe,j.ADD_FORBID_CONTENTS,We)),k&&(S["#text"]=!0),Bt&&$e(S,["html","head","body"]),S.table&&($e(S,["tbody"]),delete ae.tbody),j.TRUSTED_TYPES_POLICY){if(typeof j.TRUSTED_TYPES_POLICY.createHTML!="function")throw So('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof j.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw So('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');de=j.TRUSTED_TYPES_POLICY,ke=de.createHTML("")}else de===void 0&&(de=lb(O,h)),de!==null&&typeof ke=="string"&&(ke=de.createHTML(""));An&&An(j),$n=j}},Na=$e({},[...df,...ff,...Qv]),Ce=$e({},[...hf,...Iv]),Ea=function(j){let ee=fe(j);(!ee||!ee.tagName)&&(ee={namespaceURI:Tt,tagName:"template"});const xe=tu(j.tagName),Pe=tu(ee.tagName);return st[j.namespaceURI]?j.namespaceURI===Ht?ee.namespaceURI===qt?xe==="svg":ee.namespaceURI===Lt?xe==="svg"&&(Pe==="annotation-xml"||De[Pe]):!!Na[xe]:j.namespaceURI===Lt?ee.namespaceURI===qt?xe==="math":ee.namespaceURI===Ht?xe==="math"&&rn[Pe]:!!Ce[xe]:j.namespaceURI===qt?ee.namespaceURI===Ht&&!rn[Pe]||ee.namespaceURI===Lt&&!De[Pe]?!1:!Ce[xe]&&(Mn[xe]||!Na[xe]):!!(yn==="application/xhtml+xml"&&st[j.namespaceURI]):!1},Ve=function(j){bo(l.removed,{element:j});try{fe(j).removeChild(j)}catch{te(j)}},tn=function(j,ee){try{bo(l.removed,{attribute:ee.getAttributeNode(j),from:ee})}catch{bo(l.removed,{attribute:null,from:ee})}if(ee.removeAttribute(j),j==="is")if($t||en)try{Ve(ee)}catch{}else try{ee.setAttribute(j,"")}catch{}},oa=function(j){let ee=null,xe=null;if(Rn)j="<remove></remove>"+j;else{const Xe=uf(j,/^[\r\n\t ]+/);xe=Xe&&Xe[0]}yn==="application/xhtml+xml"&&Tt===qt&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const Pe=de?de.createHTML(j):j;if(Tt===qt)try{ee=new X().parseFromString(Pe,yn)}catch{}if(!ee||!ee.documentElement){ee=Ge.createDocument(Tt,"template",null);try{ee.documentElement.innerHTML=Wa?ke:Pe}catch{}}const _t=ee.body||ee.documentElement;return j&&xe&&_t.insertBefore(u.createTextNode(xe),_t.childNodes[0]||null),Tt===qt?re.call(ee,Bt?"html":"body")[0]:Bt?ee.documentElement:_t},ra=function(j){return Te.call(j.ownerDocument||j,j,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},nn=function(j){return j instanceof T&&(typeof j.nodeName!="string"||typeof j.textContent!="string"||typeof j.removeChild!="function"||!(j.attributes instanceof A)||typeof j.removeAttribute!="function"||typeof j.setAttribute!="function"||typeof j.namespaceURI!="string"||typeof j.insertBefore!="function"||typeof j.hasChildNodes!="function")},ht=function(j){return typeof b=="function"&&j instanceof b};function mt(_e,j,ee){Vr(_e,xe=>{xe.call(l,j,ee,$n)})}const vn=function(j){let ee=null;if(mt(je.beforeSanitizeElements,j,null),nn(j))return Ve(j),!0;const xe=We(j.nodeName);if(mt(je.uponSanitizeElement,j,{tagName:xe,allowedTags:S}),Vt&&j.hasChildNodes()&&!ht(j.firstElementChild)&&Cn(/<[/\w!]/g,j.innerHTML)&&Cn(/<[/\w!]/g,j.textContent)||j.nodeType===_o.progressingInstruction||Vt&&j.nodeType===_o.comment&&Cn(/<[/\w]/g,j.data))return Ve(j),!0;if(!(Me.tagCheck instanceof Function&&Me.tagCheck(xe))&&(!S[xe]||ae[xe])){if(!ae[xe]&&ua(xe)&&(P.tagNameCheck instanceof RegExp&&Cn(P.tagNameCheck,xe)||P.tagNameCheck instanceof Function&&P.tagNameCheck(xe)))return!1;if(k&&!qe[xe]){const Pe=fe(j)||j.parentNode,_t=ge(j)||j.childNodes;if(_t&&Pe){const Xe=_t.length;for(let Kt=Xe-1;Kt>=0;--Kt){const bn=I(_t[Kt],!0);bn.__removalCount=(j.__removalCount||0)+1,Pe.insertBefore(bn,oe(j))}}}return Ve(j),!0}return j instanceof v&&!Ea(j)||(xe==="noscript"||xe==="noembed"||xe==="noframes")&&Cn(/<\/no(script|embed|frames)/i,j.innerHTML)?(Ve(j),!0):(Et&&j.nodeType===_o.text&&(ee=j.textContent,Vr([ye,se,Y],Pe=>{ee=xo(ee,Pe," ")}),j.textContent!==ee&&(bo(l.removed,{element:j.cloneNode()}),j.textContent=ee)),mt(je.afterSanitizeElements,j,null),!1)},Un=function(j,ee,xe){if(cn&&(ee==="id"||ee==="name")&&(xe in u||xe in Fn))return!1;if(!(He&&!be[ee]&&Cn(U,ee))){if(!(Be&&Cn(E,ee))){if(!(Me.attributeCheck instanceof Function&&Me.attributeCheck(ee,j))){if(!H[ee]||be[ee]){if(!(ua(j)&&(P.tagNameCheck instanceof RegExp&&Cn(P.tagNameCheck,j)||P.tagNameCheck instanceof Function&&P.tagNameCheck(j))&&(P.attributeNameCheck instanceof RegExp&&Cn(P.attributeNameCheck,ee)||P.attributeNameCheck instanceof Function&&P.attributeNameCheck(ee,j))||ee==="is"&&P.allowCustomizedBuiltInElements&&(P.tagNameCheck instanceof RegExp&&Cn(P.tagNameCheck,xe)||P.tagNameCheck instanceof Function&&P.tagNameCheck(xe))))return!1}else if(!Je[ee]){if(!Cn(ce,xo(xe,Z,""))){if(!((ee==="src"||ee==="xlink:href"||ee==="href")&&j!=="script"&&Gv(xe,"data:")===0&&Ye[j])){if(!(Fe&&!Cn(K,xo(xe,Z,"")))){if(xe)return!1}}}}}}}return!0},ua=function(j){return j!=="annotation-xml"&&uf(j,ne)},Dl=function(j){mt(je.beforeSanitizeAttributes,j,null);const{attributes:ee}=j;if(!ee||nn(j))return;const xe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let Pe=ee.length;for(;Pe--;){const _t=ee[Pe],{name:Xe,namespaceURI:Kt,value:bn}=_t,an=We(Xe),Wn=bn;let At=Xe==="value"?Wn:Vv(Wn);if(xe.attrName=an,xe.attrValue=At,xe.keepAttr=!0,xe.forceKeepAttr=void 0,mt(je.uponSanitizeAttribute,j,xe),At=xe.attrValue,le&&(an==="id"||an==="name")&&(tn(Xe,j),At=Ie+At),Vt&&Cn(/((--!?|])>)|<\/(style|title|textarea)/i,At)){tn(Xe,j);continue}if(an==="attributename"&&uf(At,"href")){tn(Xe,j);continue}if(xe.forceKeepAttr)continue;if(!xe.keepAttr){tn(Xe,j);continue}if(!Jt&&Cn(/\/>/i,At)){tn(Xe,j);continue}Et&&Vr([ye,se,Y],el=>{At=xo(At,el," ")});const Pa=We(j.nodeName);if(!Un(Pa,an,At)){tn(Xe,j);continue}if(de&&typeof O=="object"&&typeof O.getAttributeType=="function"&&!Kt)switch(O.getAttributeType(Pa,an)){case"TrustedHTML":{At=de.createHTML(At);break}case"TrustedScriptURL":{At=de.createScriptURL(At);break}}if(At!==Wn)try{Kt?j.setAttributeNS(Kt,Xe,At):j.setAttribute(Xe,At),nn(j)?Ve(j):Fp(l.removed)}catch{tn(Xe,j)}}mt(je.afterSanitizeAttributes,j,null)},Ba=function _e(j){let ee=null;const xe=ra(j);for(mt(je.beforeSanitizeShadowDOM,j,null);ee=xe.nextNode();)mt(je.uponSanitizeShadowNode,ee,null),vn(ee),Dl(ee),ee.content instanceof m&&_e(ee.content);mt(je.afterSanitizeShadowDOM,j,null)};return l.sanitize=function(_e){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=null,xe=null,Pe=null,_t=null;if(Wa=!_e,Wa&&(_e="<!-->"),typeof _e!="string"&&!ht(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw So("dirty is not a string, aborting")}else throw So("toString is not a function");if(!l.isSupported)return _e;if(sn||Ft(j),l.removed=[],typeof _e=="string"&&(pe=!1),pe){if(_e.nodeName){const bn=We(_e.nodeName);if(!S[bn]||ae[bn])throw So("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof b)ee=oa("<!---->"),xe=ee.ownerDocument.importNode(_e,!0),xe.nodeType===_o.element&&xe.nodeName==="BODY"||xe.nodeName==="HTML"?ee=xe:ee.appendChild(xe);else{if(!$t&&!Et&&!Bt&&_e.indexOf("<")===-1)return de&&gn?de.createHTML(_e):_e;if(ee=oa(_e),!ee)return $t?null:gn?ke:""}ee&&Rn&&Ve(ee.firstChild);const Xe=ra(pe?_e:ee);for(;Pe=Xe.nextNode();)vn(Pe),Dl(Pe),Pe.content instanceof m&&Ba(Pe.content);if(pe)return _e;if($t){if(en)for(_t=we.call(ee.ownerDocument);ee.firstChild;)_t.appendChild(ee.firstChild);else _t=ee;return(H.shadowroot||H.shadowrootmode)&&(_t=Ue.call(o,_t,!0)),_t}let Kt=Bt?ee.outerHTML:ee.innerHTML;return Bt&&S["!doctype"]&&ee.ownerDocument&&ee.ownerDocument.doctype&&ee.ownerDocument.doctype.name&&Cn(Cg,ee.ownerDocument.doctype.name)&&(Kt="<!DOCTYPE "+ee.ownerDocument.doctype.name+`>
`+Kt),Et&&Vr([ye,se,Y],bn=>{Kt=xo(Kt,bn," ")}),de&&gn?de.createHTML(Kt):Kt},l.setConfig=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ft(_e),sn=!0},l.clearConfig=function(){$n=null,sn=!1},l.isValidAttribute=function(_e,j,ee){$n||Ft({});const xe=We(_e),Pe=We(j);return Un(xe,Pe,ee)},l.addHook=function(_e,j){typeof j=="function"&&bo(je[_e],j)},l.removeHook=function(_e,j){if(j!==void 0){const ee=Kv(je[_e],j);return ee===-1?void 0:Yv(je[_e],ee,1)[0]}return Fp(je[_e])},l.removeHooks=function(_e){je[_e]=[]},l.removeAllHooks=function(){je=ag()},l}var ib=Tg();function sb(){if(typeof window<"u"){const r=localStorage.getItem("accord_server_url");if(r)return r;if(window.__ACCORD_SERVER_URL__)return window.__ACCORD_SERVER_URL__}return"http://localhost:8080"}async function cb(){if(typeof window>"u")return null;const r=window.location.origin;if(r.includes(":1420")||r.includes(":5173")||r.includes(":3000"))return null;try{const l=await fetch(`${r}/health`,{signal:AbortSignal.timeout(3e3)});if(l.ok){const u=await l.json();if(u&&(u.status==="healthy"||u.status==="ok"))return r}}catch{}return null}class ob{constructor(l){ue(this,"baseUrl");ue(this,"_tokenRefresher",null);ue(this,"_refreshingToken",null);this.baseUrl=(l||sb()).replace(/\/+$/,"")}getBaseUrl(){return this.baseUrl}setBaseUrl(l){this.baseUrl=l.replace(/\/+$/,""),localStorage.setItem("accord_server_url",l)}setTokenRefresher(l){this._tokenRefresher=l}async refreshToken(){return this._tokenRefresher?(this._refreshingToken||(this._refreshingToken=this._tokenRefresher().finally(()=>{this._refreshingToken=null})),this._refreshingToken):null}async request(l,u={},o=!1){const h=`${this.baseUrl}${l}`,m=await fetch(h,{headers:{"Content-Type":"application/json",...u.headers},...u});if(m.status===401&&!o&&this._tokenRefresher){const b=await this.refreshToken();if(b){const v=l.replace(/([?&])token=[^&]*/,`$1token=${encodeURIComponent(b)}`);return this.request(v,u,!0)}}const p=await m.json();if(!m.ok){const b=p;throw new Error(b.error||`HTTP ${m.status}`)}return p}async health(){return this.request("/health")}async register(l,u){return this.request("/register",{method:"POST",body:JSON.stringify({public_key:l,password:u})})}async login(l,u){return this.request("/auth",{method:"POST",body:JSON.stringify({public_key:l,password:u})})}async createNode(l,u,o){const h={name:l,description:o};return this.request(`/nodes?token=${encodeURIComponent(u)}`,{method:"POST",body:JSON.stringify(h)})}async getNodeInfo(l,u){const o=u?`/nodes/${l}?token=${encodeURIComponent(u)}`:`/nodes/${l}`;return this.request(o)}async joinNode(l,u){return this.request(`/nodes/${l}/join?token=${encodeURIComponent(u)}`,{method:"POST"})}async leaveNode(l,u){return this.request(`/nodes/${l}/leave?token=${encodeURIComponent(u)}`,{method:"POST"})}async getUserNodes(l){return this.request(`/nodes?token=${encodeURIComponent(l)}`)}async getNodeChannels(l,u){return this.request(`/nodes/${l}/channels?token=${encodeURIComponent(u)}`)}async getNodeMembers(l,u){const o=await this.request(`/nodes/${l}/members?token=${encodeURIComponent(u)}`);return o&&o.members&&Array.isArray(o.members)?o.members:Array.isArray(o)?o:[]}async getChannelMessages(l,u,o=50,h){let m=`/channels/${l}/messages?limit=${o}&token=${encodeURIComponent(u)}`;return h&&(m+=`&before=${encodeURIComponent(h)}`),this.request(m)}async uploadFile(l,u,o,h,m){const p=new FormData;p.append("file",u),h&&p.append("encrypted_filename",h);const b=new XMLHttpRequest;return new Promise((v,x)=>{b.upload.addEventListener("progress",A=>{A.lengthComputable&&m&&m(A.loaded,A.total)}),b.addEventListener("load",()=>{if(b.status>=200&&b.status<300)try{const A=JSON.parse(b.responseText);v(A)}catch{x(new Error("Invalid JSON response"))}else try{const A=JSON.parse(b.responseText);x(new Error(A.error||`HTTP ${b.status}`))}catch{x(new Error(`Upload failed with status ${b.status}`))}}),b.addEventListener("error",()=>{x(new Error("Upload failed"))}),b.open("POST",`${this.baseUrl}/channels/${l}/files?token=${encodeURIComponent(o)}`),b.send(p)})}async downloadFile(l,u){const o=await fetch(`${this.baseUrl}/files/${l}?token=${encodeURIComponent(u)}`);if(!o.ok){const h=await o.json();throw new Error(h.error||`HTTP ${o.status}`)}return o.arrayBuffer()}async getChannelFiles(l,u){return this.request(`/channels/${l}/files?token=${encodeURIComponent(u)}`)}async deleteFile(l,u){return this.request(`/files/${l}?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async createChannel(l,u,o,h){const m={name:u,channel_type:o};return this.request(`/nodes/${l}/channels?token=${encodeURIComponent(h)}`,{method:"POST",body:JSON.stringify(m)})}async deleteChannel(l,u){return this.request(`/channels/${l}?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async createInvite(l,u){return this.request(`/nodes/${l}/invites?token=${encodeURIComponent(u)}`,{method:"POST"})}async kickMember(l,u,o){return this.request(`/nodes/${l}/members/${u}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async getUserProfile(l,u){const o=u?`/users/${l}/profile?token=${encodeURIComponent(u)}`:`/users/${l}/profile`;return this.request(o)}async updateProfile(l,u){return this.request(`/users/me/profile?token=${encodeURIComponent(u)}`,{method:"PATCH",body:JSON.stringify(l)})}async joinNodeByInvite(l,u){return this.request(`/invites/${l}/join?token=${encodeURIComponent(u)}`,{method:"POST"})}async getNodeInvites(l,u){const o=await this.request(`/nodes/${l}/invites?token=${encodeURIComponent(u)}`);return o&&o.invites&&Array.isArray(o.invites)?o.invites:Array.isArray(o)?o:[]}async createInviteWithOptions(l,u,o,h){const m={};return o!==void 0&&(m.max_uses=o),h!==void 0&&(m.expires_hours=h),this.request(`/nodes/${l}/invites?token=${encodeURIComponent(u)}`,{method:"POST",body:Object.keys(m).length>0?JSON.stringify(m):void 0})}async revokeInvite(l,u,o){return this.request(`/nodes/${l}/invites/${u}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async searchMessages(l,u,o,h){let m=`/nodes/${l}/search?q=${encodeURIComponent(u)}&token=${encodeURIComponent(o)}`;return h&&(m+=`&channel=${encodeURIComponent(h)}`),this.request(m)}async editMessage(l,u,o){return this.request(`/messages/${l}`,{method:"PATCH",body:JSON.stringify({user_id:u,encrypted_data:o})})}async deleteMessage(l,u){return this.request(`/messages/${l}?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async getMessageThread(l,u){return this.request(`/messages/${l}/thread?token=${encodeURIComponent(u)}`)}async getMessageReactions(l,u){return this.request(`/messages/${l}/reactions?token=${encodeURIComponent(u)}`)}async addReaction(l,u,o){return this.request(`/messages/${l}/reactions/${encodeURIComponent(u)}?token=${encodeURIComponent(o)}`,{method:"PUT"})}async removeReaction(l,u,o){return this.request(`/messages/${l}/reactions/${encodeURIComponent(u)}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async pinMessage(l,u){return this.request(`/messages/${l}/pin?token=${encodeURIComponent(u)}`,{method:"PUT"})}async unpinMessage(l,u){return this.request(`/messages/${l}/pin?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async getPinnedMessages(l,u){return this.request(`/channels/${l}/pins?token=${encodeURIComponent(u)}`)}async createDmChannel(l,u){return this.request(`/dm/${l}?token=${encodeURIComponent(u)}`,{method:"POST"})}async getDmChannels(l){return this.request(`/dm?token=${encodeURIComponent(l)}`)}async getNodeAuditLog(l,u,o=50,h){const m=new URLSearchParams({token:u,limit:o.toString()});return h&&m.append("before",h),this.request(`/nodes/${l}/audit-log?${m.toString()}`)}async getRoles(l,u){const o=await this.request(`/nodes/${l}/roles?token=${encodeURIComponent(u)}`);return o&&Array.isArray(o.roles)?o.roles:Array.isArray(o)?o:[]}async importDiscordTemplate(l,u,o){return this.request(`/nodes/${l}/import-discord-template?token=${encodeURIComponent(o)}`,{method:"POST",body:JSON.stringify({template_code:u})})}async uploadNodeIcon(l,u,o){const h=new FormData;h.append("icon",u);const m=await fetch(`${this.baseUrl}/nodes/${l}/icon?token=${encodeURIComponent(o)}`,{method:"PUT",body:h});if(!m.ok){const p=await m.json();throw new Error(p.error||`HTTP ${m.status}`)}return m.json()}getNodeIconUrl(l){return`${this.baseUrl}/nodes/${l}/icon`}async uploadUserAvatar(l,u){const o=new FormData;o.append("avatar",l);const h=await fetch(`${this.baseUrl}/users/me/avatar?token=${encodeURIComponent(u)}`,{method:"PUT",body:o});if(!h.ok){const m=await h.json();throw new Error(m.error||`HTTP ${h.status}`)}return h.json()}getUserAvatarUrl(l){return`${this.baseUrl}/users/${l}/avatar`}async testConnection(){try{return await this.health(),!0}catch{return!1}}}function rb(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ub(r){let l=r.replace(/-/g,"+").replace(/_/g,"/");for(;l.length%4;)l+="=";return atob(l)}function db(r,l){return`accord://${rb(r)}/${l}`}function lg(r){const l=r.trim(),u=l.match(/^accord:\/\/([A-Za-z0-9_-]+)\/([^/?#]+)$/);if(u)try{const m=ub(u[1]);if(m.includes(".")||m.includes(":"))return{relayHost:m,relayUrl:`http://${m}`,inviteCode:u[2]}}catch{}const o=l.match(/^accord:\/\/([^/]+)\/invite\/([^/?#]+)/);if(o){const m=o[1];return{relayHost:m,relayUrl:`http://${m}`,inviteCode:o[2]}}const h=l.match(/^(https?):\/\/([^/]+)\/invite\/([^/?#]+)/);if(h){const m=h[1],p=h[2];return{relayHost:p,relayUrl:`${m}://${p}`,inviteCode:h[3]}}return null}function fb(r){return localStorage.getItem(`accord_token_${r}`)}function hb(r,l){localStorage.setItem(`accord_token_${r}`,l)}function mb(r){return localStorage.getItem(`accord_user_${r}`)}function pb(r,l){localStorage.setItem(`accord_user_${r}`,l)}const $=new ob;$.createNode.bind($);$.getNodeInfo.bind($);$.joinNode.bind($);$.getUserNodes.bind($);$.getNodeChannels.bind($);$.getNodeMembers.bind($);$.getChannelMessages.bind($);$.createChannel.bind($);$.deleteChannel.bind($);$.createInvite.bind($);$.kickMember.bind($);$.getUserProfile.bind($);$.updateProfile.bind($);$.joinNodeByInvite.bind($);$.getNodeInvites.bind($);$.createInviteWithOptions.bind($);$.revokeInvite.bind($);$.testConnection.bind($);$.searchMessages.bind($);$.getMessageThread.bind($);$.createDmChannel.bind($);$.getDmChannels.bind($);$.getNodeAuditLog.bind($);class Zs{constructor(l,u){ue(this,"ws",null);ue(this,"token");ue(this,"baseUrl");ue(this,"listeners",new Map);ue(this,"reconnectAttempts",0);ue(this,"maxReconnectAttempts",20);ue(this,"reconnectDelay",1e3);ue(this,"maxReconnectDelay",3e4);ue(this,"reconnectTimeout",null);ue(this,"isConnected",!1);ue(this,"isDestroyed",!1);ue(this,"pingInterval",null);ue(this,"connectionStatus","disconnected");ue(this,"messageQueue",[]);ue(this,"onlineHandler",null);ue(this,"offlineHandler",null);this.token=l;const o=u||typeof window<"u"&&window.__ACCORD_SERVER_URL__||"http://localhost:8080";this.baseUrl=String(o).replace(/^http/,"ws"),typeof window<"u"&&(this.onlineHandler=()=>{!this.isConnected&&!this.isDestroyed&&(this.reconnectAttempts=0,this.connect())},this.offlineHandler=()=>{this.setConnectionStatus("disconnected")},window.addEventListener("online",this.onlineHandler),window.addEventListener("offline",this.offlineHandler))}on(l,u){this.listeners.has(l)||this.listeners.set(l,new Set),this.listeners.get(l).add(u)}off(l,u){const o=this.listeners.get(l);o&&o.delete(u)}emit(l,u){const o=this.listeners.get(l);o&&o.forEach(h=>{try{h(u)}catch(m){console.error(`Error in ${l} listener:`,m)}})}setConnectionStatus(l){this.connectionStatus=l,this.emit("connection_status",{status:l,reconnectAttempt:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts})}getConnectionInfo(){return{status:this.connectionStatus,reconnectAttempt:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts}}retry(){this.isDestroyed=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.connect()}connect(){if(this.isDestroyed||this.ws&&this.ws.readyState===WebSocket.CONNECTING)return;const l=`${this.baseUrl}/ws?token=${encodeURIComponent(this.token)}`;try{this.ws=new WebSocket(l),this.setupEventHandlers()}catch(u){console.error("Failed to create WebSocket connection:",u),this.emit("error",new Error("Failed to create WebSocket connection")),this.scheduleReconnect()}}setupEventHandlers(){this.ws&&(this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.startPingInterval(),this.flushMessageQueue(),this.setConnectionStatus("connected"),this.emit("connected")},this.ws.onmessage=l=>{try{const u=JSON.parse(l.data);if(u.type==="error"&&u.code==="auth_failed"){this.emit("auth_error"),this.isDestroyed=!0;return}this.emit("message",u),u.type&&this.emit(u.type,u)}catch(u){console.error("Error parsing WebSocket message:",u),this.emit("error",new Error("Invalid message format"))}},this.ws.onclose=l=>{if(this.isConnected=!1,this.stopPingInterval(),l.code===4401||l.code===4403){this.setConnectionStatus("disconnected"),this.emit("auth_error"),this.emit("disconnected");return}this.emit("disconnected"),!this.isDestroyed&&l.code!==1e3?(this.setConnectionStatus("reconnecting"),this.scheduleReconnect()):this.setConnectionStatus("disconnected")},this.ws.onerror=l=>{console.error("WebSocket error:",l),this.emit("error",new Error("WebSocket connection error"))})}scheduleReconnect(){if(this.isDestroyed||this.reconnectTimeout)return;if(typeof navigator<"u"&&!navigator.onLine){this.setConnectionStatus("disconnected");return}if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.setConnectionStatus("disconnected"),this.emit("error",new Error("Max reconnection attempts reached"));return}this.reconnectAttempts++;const l=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),this.maxReconnectDelay);this.setConnectionStatus("reconnecting"),this.emit("reconnecting",{attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts}),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,this.connect()},l)}startPingInterval(){this.pingInterval=setInterval(()=>{this.isConnected&&this.ping()},3e4)}stopPingInterval(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}sendMessage(l){if(!this.isConnected||!this.ws){console.warn("WebSocket not connected, cannot send message");return}const u={message_type:l,message_id:this.generateId(),timestamp:Math.floor(Date.now()/1e3)};try{this.ws.send(JSON.stringify(u))}catch(o){console.error("Error sending WebSocket message:",o),this.emit("error",new Error("Failed to send message"))}}send(l){if(!this.isConnected||!this.ws){this.messageQueue.push(l);return}try{this.ws.send(l)}catch(u){console.error("Error sending WebSocket message:",u),this.messageQueue.push(l),this.emit("error",new Error("Failed to send message"))}}flushMessageQueue(){for(;this.messageQueue.length>0&&this.isConnected&&this.ws;){const l=this.messageQueue.shift();try{this.ws.send(l)}catch{this.messageQueue.unshift(l);break}}}getQueuedMessageCount(){return this.messageQueue.length}createNode(l,u){this.sendMessage({CreateNode:{name:l,description:u}})}joinNode(l){this.sendMessage({JoinNode:{node_id:l}})}leaveNode(l){this.sendMessage({LeaveNode:{node_id:l}})}getNodeInfo(l){this.sendMessage({GetNodeInfo:{node_id:l}})}createChannel(l,u){this.sendMessage({CreateChannel:{node_id:l,name:u}})}joinChannel(l){this.sendMessage({JoinChannel:{channel_id:l}})}leaveChannel(l){this.sendMessage({LeaveChannel:{channel_id:l}})}sendDirectMessage(l,u){this.sendMessage({DirectMessage:{to_user:l,encrypted_data:u}})}sendChannelMessage(l,u,o){this.sendMessage({ChannelMessage:{channel_id:l,encrypted_data:u,reply_to:o}})}sendEditMessage(l,u){this.sendMessage({EditMessage:{message_id:l,encrypted_data:u}})}sendDeleteMessage(l){this.sendMessage({DeleteMessage:{message_id:l}})}addReaction(l,u){this.sendMessage({AddReaction:{message_id:l,emoji:u}})}removeReaction(l,u){this.sendMessage({RemoveReaction:{message_id:l,emoji:u}})}pinMessage(l){this.sendMessage({PinMessage:{message_id:l}})}unpinMessage(l){this.sendMessage({UnpinMessage:{message_id:l}})}sendTypingStart(l){this.sendMessage({TypingStart:{channel_id:l}})}ping(){this.sendMessage("Ping")}pong(){this.sendMessage("Pong")}generateId(){var l;return((l=crypto.randomUUID)==null?void 0:l.call(crypto))??"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,u=>{const o=Math.random()*16|0;return(u==="x"?o:o&3|8).toString(16)})}isSocketConnected(){return this.isConnected}disconnect(){this.isDestroyed=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopPingInterval(),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),typeof window<"u"&&(this.onlineHandler&&window.removeEventListener("online",this.onlineHandler),this.offlineHandler&&window.removeEventListener("offline",this.offlineHandler)),this.messageQueue=[],this.listeners.clear()}}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mf(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Fa(r,l=""){if(!Number.isSafeInteger(r)||r<0){const u=l&&`"${l}" `;throw new Error(`${u}expected integer >= 0, got ${r}`)}}function zt(r,l,u=""){const o=Mf(r),h=r==null?void 0:r.length,m=l!==void 0;if(!o||m&&h!==l){const p=u&&`"${u}" `,b=m?` of length ${l}`:"",v=o?`length=${h}`:`type=${typeof r}`;throw new Error(p+"expected Uint8Array"+b+", got "+v)}return r}function Df(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash must wrapped by utils.createHasher");Fa(r.outputLen),Fa(r.blockLen)}function iu(r,l=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(l&&r.finished)throw new Error("Hash#digest() has already been called")}function gb(r,l){zt(r,void 0,"digestInto() output");const u=l.outputLen;if(r.length<u)throw new Error('"digestInto() output" expected to be of length >='+u)}function Eo(...r){for(let l=0;l<r.length;l++)r[l].fill(0)}function nu(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ia(r,l){return r<<32-l|r>>>l}const Ag=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",yb=Array.from({length:256},(r,l)=>l.toString(16).padStart(2,"0"));function mu(r){if(zt(r),Ag)return r.toHex();let l="";for(let u=0;u<r.length;u++)l+=yb[r[u]];return l}const jl={_0:48,_9:57,A:65,F:70,a:97,f:102};function ig(r){if(r>=jl._0&&r<=jl._9)return r-jl._0;if(r>=jl.A&&r<=jl.F)return r-(jl.A-10);if(r>=jl.a&&r<=jl.f)return r-(jl.a-10)}function su(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Ag)return Uint8Array.fromHex(r);const l=r.length,u=l/2;if(l%2)throw new Error("hex string expected, got unpadded hex of length "+l);const o=new Uint8Array(u);for(let h=0,m=0;h<u;h++,m+=2){const p=ig(r.charCodeAt(m)),b=ig(r.charCodeAt(m+1));if(p===void 0||b===void 0){const v=r[m]+r[m+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+m)}o[h]=p*16+b}return o}function vb(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function sg(r,l=""){return typeof r=="string"?vb(r):zt(r,void 0,l)}function vi(...r){let l=0;for(let o=0;o<r.length;o++){const h=r[o];zt(h),l+=h.length}const u=new Uint8Array(l);for(let o=0,h=0;o<r.length;o++){const m=r[o];u.set(m,h),h+=m.length}return u}function bb(r,l){if(l!==void 0&&{}.toString.call(l)!=="[object Object]")throw new Error("options must be object or undefined");return Object.assign(r,l)}function xb(r,l={}){const u=(h,m)=>r(m).update(h).digest(),o=r(void 0);return u.outputLen=o.outputLen,u.blockLen=o.blockLen,u.create=h=>r(h),Object.assign(u,l),Object.freeze(u)}function kg(r=32){const l=typeof globalThis=="object"?globalThis.crypto:null;if(typeof(l==null?void 0:l.getRandomValues)!="function")throw new Error("crypto.getRandomValues must be defined");return l.getRandomValues(new Uint8Array(r))}const Sb=r=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,r])});function wb(r,l,u){return r&l^~r&u}function _b(r,l,u){return r&l^r&u^l&u}class Nb{constructor(l,u,o,h){ue(this,"blockLen");ue(this,"outputLen");ue(this,"padOffset");ue(this,"isLE");ue(this,"buffer");ue(this,"view");ue(this,"finished",!1);ue(this,"length",0);ue(this,"pos",0);ue(this,"destroyed",!1);this.blockLen=l,this.outputLen=u,this.padOffset=o,this.isLE=h,this.buffer=new Uint8Array(l),this.view=nu(this.buffer)}update(l){iu(this),zt(l);const{view:u,buffer:o,blockLen:h}=this,m=l.length;for(let p=0;p<m;){const b=Math.min(h-this.pos,m-p);if(b===h){const v=nu(l);for(;h<=m-p;p+=h)this.process(v,p);continue}o.set(l.subarray(p,p+b),this.pos),this.pos+=b,p+=b,this.pos===h&&(this.process(u,0),this.pos=0)}return this.length+=l.length,this.roundClean(),this}digestInto(l){iu(this),gb(l,this),this.finished=!0;const{buffer:u,view:o,blockLen:h,isLE:m}=this;let{pos:p}=this;u[p++]=128,Eo(this.buffer.subarray(p)),this.padOffset>h-p&&(this.process(o,0),p=0);for(let T=p;T<h;T++)u[T]=0;o.setBigUint64(h-8,BigInt(this.length*8),m),this.process(o,0);const b=nu(l),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const x=v/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<x;T++)b.setUint32(4*T,A[T],m)}digest(){const{buffer:l,outputLen:u}=this;this.digestInto(l);const o=l.slice(0,u);return this.destroy(),o}_cloneInto(l){l||(l=new this.constructor),l.set(...this.get());const{blockLen:u,buffer:o,length:h,finished:m,destroyed:p,pos:b}=this;return l.destroyed=p,l.finished=m,l.length=h,l.pos=b,h%u&&l.buffer.set(o),l}clone(){return this._cloneInto()}}const mi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Eb=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pi=new Uint32Array(64);class jb extends Nb{constructor(l){super(64,l,8,!1)}get(){const{A:l,B:u,C:o,D:h,E:m,F:p,G:b,H:v}=this;return[l,u,o,h,m,p,b,v]}set(l,u,o,h,m,p,b,v){this.A=l|0,this.B=u|0,this.C=o|0,this.D=h|0,this.E=m|0,this.F=p|0,this.G=b|0,this.H=v|0}process(l,u){for(let T=0;T<16;T++,u+=4)pi[T]=l.getUint32(u,!1);for(let T=16;T<64;T++){const X=pi[T-15],O=pi[T-2],L=Ia(X,7)^Ia(X,18)^X>>>3,I=Ia(O,17)^Ia(O,19)^O>>>10;pi[T]=I+pi[T-7]+L+pi[T-16]|0}let{A:o,B:h,C:m,D:p,E:b,F:v,G:x,H:A}=this;for(let T=0;T<64;T++){const X=Ia(b,6)^Ia(b,11)^Ia(b,25),O=A+X+wb(b,v,x)+Eb[T]+pi[T]|0,I=(Ia(o,2)^Ia(o,13)^Ia(o,22))+_b(o,h,m)|0;A=x,x=v,v=b,b=p+O|0,p=m,m=h,h=o,o=O+I|0}o=o+this.A|0,h=h+this.B|0,m=m+this.C|0,p=p+this.D|0,b=b+this.E|0,v=v+this.F|0,x=x+this.G|0,A=A+this.H|0,this.set(o,h,m,p,b,v,x,A)}roundClean(){Eo(pi)}destroy(){this.set(0,0,0,0,0,0,0,0),Eo(this.buffer)}}class Cb extends jb{constructor(){super(32);ue(this,"A",mi[0]|0);ue(this,"B",mi[1]|0);ue(this,"C",mi[2]|0);ue(this,"D",mi[3]|0);ue(this,"E",mi[4]|0);ue(this,"F",mi[5]|0);ue(this,"G",mi[6]|0);ue(this,"H",mi[7]|0)}}const $s=xb(()=>new Cb,Sb(1));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uf=BigInt(0),Ef=BigInt(1);function cu(r,l=""){if(typeof r!="boolean"){const u=l&&`"${l}" `;throw new Error(u+"expected boolean, got type="+typeof r)}return r}function Rg(r){if(typeof r=="bigint"){if(!au(r))throw new Error("positive bigint expected, got "+r)}else Fa(r);return r}function Xr(r){const l=Rg(r).toString(16);return l.length&1?"0"+l:l}function Mg(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Uf:BigInt("0x"+r)}function pu(r){return Mg(mu(r))}function Dg(r){return Mg(mu(Tb(zt(r)).reverse()))}function Of(r,l){Fa(l),r=Rg(r);const u=su(r.toString(16).padStart(l*2,"0"));if(u.length!==l)throw new Error("number too large");return u}function Ug(r,l){return Of(r,l).reverse()}function Tb(r){return Uint8Array.from(r)}const au=r=>typeof r=="bigint"&&Uf<=r;function Ab(r,l,u){return au(r)&&au(l)&&au(u)&&l<=r&&r<u}function kb(r,l,u,o){if(!Ab(l,u,o))throw new Error("expected valid "+r+": "+u+" <= n < "+o+", got "+l)}function Rb(r){let l;for(l=0;r>Uf;r>>=Ef,l+=1);return l}const zf=r=>(Ef<<BigInt(r))-Ef;function Mb(r,l,u){if(Fa(r,"hashLen"),Fa(l,"qByteLen"),typeof u!="function")throw new Error("hmacFn must be a function");const o=te=>new Uint8Array(te),h=Uint8Array.of(),m=Uint8Array.of(0),p=Uint8Array.of(1),b=1e3;let v=o(r),x=o(r),A=0;const T=()=>{v.fill(1),x.fill(0),A=0},X=(...te)=>u(x,vi(v,...te)),O=(te=h)=>{x=X(m,te),v=X(),te.length!==0&&(x=X(p,te),v=X())},L=()=>{if(A++>=b)throw new Error("drbg: tried max amount of iterations");let te=0;const oe=[];for(;te<l;){v=X();const ge=v.slice();oe.push(ge),te+=v.length}return vi(...oe)};return(te,oe)=>{T(),O(te);let ge;for(;!(ge=oe(L()));)O();return T(),ge}}function Bf(r,l={},u={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function o(m,p,b){const v=r[m];if(b&&v===void 0)return;const x=typeof v;if(x!==p||v===null)throw new Error(`param "${m}" is invalid: expected ${p}, got ${x}`)}const h=(m,p)=>Object.entries(m).forEach(([b,v])=>o(b,v,p));h(l,!1),h(u,!0)}function cg(r){const l=new WeakMap;return(u,...o)=>{const h=l.get(u);if(h!==void 0)return h;const m=r(u,...o);return l.set(u,m),m}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ca=BigInt(0),Tn=BigInt(1),Zi=BigInt(2),Og=BigInt(3),zg=BigInt(4),Bg=BigInt(5),Db=BigInt(7),Lg=BigInt(8),Ub=BigInt(9),Hg=BigInt(16);function za(r,l){const u=r%l;return u>=ca?u:l+u}function og(r,l){if(r===ca)throw new Error("invert: expected non-zero number");if(l<=ca)throw new Error("invert: expected positive modulus, got "+l);let u=za(r,l),o=l,h=ca,m=Tn;for(;u!==ca;){const b=o/u,v=o%u,x=h-m*b;o=u,u=v,h=m,m=x}if(o!==Tn)throw new Error("invert: does not exist");return za(h,l)}function Lf(r,l,u){if(!r.eql(r.sqr(l),u))throw new Error("Cannot find square root")}function qg(r,l){const u=(r.ORDER+Tn)/zg,o=r.pow(l,u);return Lf(r,o,l),o}function Ob(r,l){const u=(r.ORDER-Bg)/Lg,o=r.mul(l,Zi),h=r.pow(o,u),m=r.mul(l,h),p=r.mul(r.mul(m,Zi),h),b=r.mul(m,r.sub(p,r.ONE));return Lf(r,b,l),b}function zb(r){const l=Hf(r),u=Kg(r),o=u(l,l.neg(l.ONE)),h=u(l,o),m=u(l,l.neg(o)),p=(r+Db)/Hg;return(b,v)=>{let x=b.pow(v,p),A=b.mul(x,o);const T=b.mul(x,h),X=b.mul(x,m),O=b.eql(b.sqr(A),v),L=b.eql(b.sqr(T),v);x=b.cmov(x,A,O),A=b.cmov(X,T,L);const I=b.eql(b.sqr(A),v),te=b.cmov(x,A,I);return Lf(b,te,v),te}}function Kg(r){if(r<Og)throw new Error("sqrt is not defined for small field");let l=r-Tn,u=0;for(;l%Zi===ca;)l/=Zi,u++;let o=Zi;const h=Hf(r);for(;rg(h,o)===1;)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(u===1)return qg;let m=h.pow(o,l);const p=(l+Tn)/Zi;return function(v,x){if(v.is0(x))return x;if(rg(v,x)!==1)throw new Error("Cannot find square root");let A=u,T=v.mul(v.ONE,m),X=v.pow(x,l),O=v.pow(x,p);for(;!v.eql(X,v.ONE);){if(v.is0(X))return v.ZERO;let L=1,I=v.sqr(X);for(;!v.eql(I,v.ONE);)if(L++,I=v.sqr(I),L===A)throw new Error("Cannot find square root");const te=Tn<<BigInt(A-L-1),oe=v.pow(T,te);A=L,T=v.sqr(oe),X=v.mul(X,T),O=v.mul(O,oe)}return O}}function Bb(r){return r%zg===Og?qg:r%Lg===Bg?Ob:r%Hg===Ub?zb(r):Kg(r)}const Lb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hb(r){const l={ORDER:"bigint",BYTES:"number",BITS:"number"},u=Lb.reduce((o,h)=>(o[h]="function",o),l);return Bf(r,u),r}function qb(r,l,u){if(u<ca)throw new Error("invalid exponent, negatives unsupported");if(u===ca)return r.ONE;if(u===Tn)return l;let o=r.ONE,h=l;for(;u>ca;)u&Tn&&(o=r.mul(o,h)),h=r.sqr(h),u>>=Tn;return o}function Yg(r,l,u=!1){const o=new Array(l.length).fill(u?r.ZERO:void 0),h=l.reduce((p,b,v)=>r.is0(b)?p:(o[v]=p,r.mul(p,b)),r.ONE),m=r.inv(h);return l.reduceRight((p,b,v)=>r.is0(b)?p:(o[v]=r.mul(p,o[v]),r.mul(p,b)),m),o}function rg(r,l){const u=(r.ORDER-Tn)/Zi,o=r.pow(l,u),h=r.eql(o,r.ONE),m=r.eql(o,r.ZERO),p=r.eql(o,r.neg(r.ONE));if(!h&&!m&&!p)throw new Error("invalid Legendre symbol result");return h?1:m?0:-1}function Kb(r,l){l!==void 0&&Fa(l);const u=l!==void 0?l:r.toString(2).length,o=Math.ceil(u/8);return{nBitLength:u,nByteLength:o}}class Yb{constructor(l,u={}){ue(this,"ORDER");ue(this,"BITS");ue(this,"BYTES");ue(this,"isLE");ue(this,"ZERO",ca);ue(this,"ONE",Tn);ue(this,"_lengths");ue(this,"_sqrt");ue(this,"_mod");var p;if(l<=ca)throw new Error("invalid field: expected ORDER > 0, got "+l);let o;this.isLE=!1,u!=null&&typeof u=="object"&&(typeof u.BITS=="number"&&(o=u.BITS),typeof u.sqrt=="function"&&(this.sqrt=u.sqrt),typeof u.isLE=="boolean"&&(this.isLE=u.isLE),u.allowedLengths&&(this._lengths=(p=u.allowedLengths)==null?void 0:p.slice()),typeof u.modFromBytes=="boolean"&&(this._mod=u.modFromBytes));const{nBitLength:h,nByteLength:m}=Kb(l,o);if(m>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=l,this.BITS=h,this.BYTES=m,this._sqrt=void 0,Object.preventExtensions(this)}create(l){return za(l,this.ORDER)}isValid(l){if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return ca<=l&&l<this.ORDER}is0(l){return l===ca}isValidNot0(l){return!this.is0(l)&&this.isValid(l)}isOdd(l){return(l&Tn)===Tn}neg(l){return za(-l,this.ORDER)}eql(l,u){return l===u}sqr(l){return za(l*l,this.ORDER)}add(l,u){return za(l+u,this.ORDER)}sub(l,u){return za(l-u,this.ORDER)}mul(l,u){return za(l*u,this.ORDER)}pow(l,u){return qb(this,l,u)}div(l,u){return za(l*og(u,this.ORDER),this.ORDER)}sqrN(l){return l*l}addN(l,u){return l+u}subN(l,u){return l-u}mulN(l,u){return l*u}inv(l){return og(l,this.ORDER)}sqrt(l){return this._sqrt||(this._sqrt=Bb(this.ORDER)),this._sqrt(this,l)}toBytes(l){return this.isLE?Ug(l,this.BYTES):Of(l,this.BYTES)}fromBytes(l,u=!1){zt(l);const{_lengths:o,BYTES:h,isLE:m,ORDER:p,_mod:b}=this;if(o){if(!o.includes(l.length)||l.length>h)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+l.length);const x=new Uint8Array(h);x.set(l,m?0:x.length-l.length),l=x}if(l.length!==h)throw new Error("Field.fromBytes: expected "+h+" bytes, got "+l.length);let v=m?Dg(l):pu(l);if(b&&(v=za(v,p)),!u&&!this.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v}invertBatch(l){return Yg(this,l)}cmov(l,u,o){return o?u:l}}function Hf(r,l={}){return new Yb(r,l)}function Gg(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const l=r.toString(2).length;return Math.ceil(l/8)}function Vg(r){const l=Gg(r);return l+Math.ceil(l/2)}function Gb(r,l,u=!1){zt(r);const o=r.length,h=Gg(l),m=Vg(l);if(o<16||o<m||o>1024)throw new Error("expected "+m+"-1024 bytes of input, got "+o);const p=u?Dg(r):pu(r),b=za(p,l-Tn)+Tn;return u?Ug(b,h):Of(b,h)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Js=BigInt(0),Xi=BigInt(1);function ou(r,l){const u=l.negate();return r?u:l}function ug(r,l){const u=Yg(r.Fp,l.map(o=>o.Z));return l.map((o,h)=>r.fromAffine(o.toAffine(u[h])))}function Zg(r,l){if(!Number.isSafeInteger(r)||r<=0||r>l)throw new Error("invalid window size, expected [1.."+l+"], got W="+r)}function pf(r,l){Zg(r,l);const u=Math.ceil(l/r)+1,o=2**(r-1),h=2**r,m=zf(r),p=BigInt(r);return{windows:u,windowSize:o,mask:m,maxNumber:h,shiftBy:p}}function dg(r,l,u){const{windowSize:o,mask:h,maxNumber:m,shiftBy:p}=u;let b=Number(r&h),v=r>>p;b>o&&(b-=m,v+=Xi);const x=l*o,A=x+Math.abs(b)-1,T=b===0,X=b<0,O=l%2!==0;return{nextN:v,offset:A,isZero:T,isNeg:X,isNegF:O,offsetF:x}}const gf=new WeakMap,Xg=new WeakMap;function yf(r){return Xg.get(r)||1}function fg(r){if(r!==Js)throw new Error("invalid wNAF")}class Vb{constructor(l,u){ue(this,"BASE");ue(this,"ZERO");ue(this,"Fn");ue(this,"bits");this.BASE=l.BASE,this.ZERO=l.ZERO,this.Fn=l.Fn,this.bits=u}_unsafeLadder(l,u,o=this.ZERO){let h=l;for(;u>Js;)u&Xi&&(o=o.add(h)),h=h.double(),u>>=Xi;return o}precomputeWindow(l,u){const{windows:o,windowSize:h}=pf(u,this.bits),m=[];let p=l,b=p;for(let v=0;v<o;v++){b=p,m.push(b);for(let x=1;x<h;x++)b=b.add(p),m.push(b);p=b.double()}return m}wNAF(l,u,o){if(!this.Fn.isValid(o))throw new Error("invalid scalar");let h=this.ZERO,m=this.BASE;const p=pf(l,this.bits);for(let b=0;b<p.windows;b++){const{nextN:v,offset:x,isZero:A,isNeg:T,isNegF:X,offsetF:O}=dg(o,b,p);o=v,A?m=m.add(ou(X,u[O])):h=h.add(ou(T,u[x]))}return fg(o),{p:h,f:m}}wNAFUnsafe(l,u,o,h=this.ZERO){const m=pf(l,this.bits);for(let p=0;p<m.windows&&o!==Js;p++){const{nextN:b,offset:v,isZero:x,isNeg:A}=dg(o,p,m);if(o=b,!x){const T=u[v];h=h.add(A?T.negate():T)}}return fg(o),h}getPrecomputes(l,u,o){let h=gf.get(u);return h||(h=this.precomputeWindow(u,l),l!==1&&(typeof o=="function"&&(h=o(h)),gf.set(u,h))),h}cached(l,u,o){const h=yf(l);return this.wNAF(h,this.getPrecomputes(h,l,o),u)}unsafe(l,u,o,h){const m=yf(l);return m===1?this._unsafeLadder(l,u,h):this.wNAFUnsafe(m,this.getPrecomputes(m,l,o),u,h)}createCache(l,u){Zg(u,this.bits),Xg.set(l,u),gf.delete(l)}hasCache(l){return yf(l)!==1}}function Zb(r,l,u,o){let h=l,m=r.ZERO,p=r.ZERO;for(;u>Js||o>Js;)u&Xi&&(m=m.add(h)),o&Xi&&(p=p.add(h)),h=h.double(),u>>=Xi,o>>=Xi;return{p1:m,p2:p}}function hg(r,l,u){if(l){if(l.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Hb(l),l}else return Hf(r,{isLE:u})}function Xb(r,l,u={},o){if(o===void 0&&(o=r==="edwards"),!l||typeof l!="object")throw new Error(`expected valid ${r} CURVE object`);for(const v of["p","n","h"]){const x=l[v];if(!(typeof x=="bigint"&&x>Js))throw new Error(`CURVE.${v} must be positive bigint`)}const h=hg(l.p,u.Fp,o),m=hg(l.n,u.Fn,o),b=["Gx","Gy","a","b"];for(const v of b)if(!h.isValid(l[v]))throw new Error(`CURVE.${v} must be valid field element of CURVE.Fp`);return l=Object.freeze(Object.assign({},l)),{CURVE:l,Fp:h,Fn:m}}function Qb(r,l){return function(o){const h=r(o);return{secretKey:h,publicKey:l(h)}}}class Qg{constructor(l,u){ue(this,"oHash");ue(this,"iHash");ue(this,"blockLen");ue(this,"outputLen");ue(this,"finished",!1);ue(this,"destroyed",!1);if(Df(l),zt(u,void 0,"key"),this.iHash=l.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,h=new Uint8Array(o);h.set(u.length>o?l.create().update(u).digest():u);for(let m=0;m<h.length;m++)h[m]^=54;this.iHash.update(h),this.oHash=l.create();for(let m=0;m<h.length;m++)h[m]^=106;this.oHash.update(h),Eo(h)}update(l){return iu(this),this.iHash.update(l),this}digestInto(l){iu(this),zt(l,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(l),this.oHash.update(l),this.oHash.digestInto(l),this.destroy()}digest(){const l=new Uint8Array(this.oHash.outputLen);return this.digestInto(l),l}_cloneInto(l){l||(l=Object.create(Object.getPrototypeOf(this),{}));const{oHash:u,iHash:o,finished:h,destroyed:m,blockLen:p,outputLen:b}=this;return l=l,l.finished=h,l.destroyed=m,l.blockLen=p,l.outputLen=b,l.oHash=u._cloneInto(l.oHash),l.iHash=o._cloneInto(l.iHash),l}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qf=(r,l,u)=>new Qg(r,l).update(u).digest();qf.create=(r,l)=>new Qg(r,l);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mg=(r,l)=>(r+(r>=0?l:-l)/Ig)/l;function Ib(r,l,u){const[[o,h],[m,p]]=l,b=mg(p*r,u),v=mg(-h*r,u);let x=r-b*o-v*m,A=-b*h-v*p;const T=x<Tl,X=A<Tl;T&&(x=-x),X&&(A=-A);const O=zf(Math.ceil(Rb(u)/2))+Qs;if(x<Tl||x>=O||A<Tl||A>=O)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:T,k1:x,k2neg:X,k2:A}}function jf(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function vf(r,l){const u={};for(let o of Object.keys(l))u[o]=r[o]===void 0?l[o]:r[o];return cu(u.lowS,"lowS"),cu(u.prehash,"prehash"),u.format!==void 0&&jf(u.format),u}class Jb extends Error{constructor(l=""){super(l)}}const yi={Err:Jb,_tlv:{encode:(r,l)=>{const{Err:u}=yi;if(r<0||r>256)throw new u("tlv.encode: wrong tag");if(l.length&1)throw new u("tlv.encode: unpadded data");const o=l.length/2,h=Xr(o);if(h.length/2&128)throw new u("tlv.encode: long form length too big");const m=o>127?Xr(h.length/2|128):"";return Xr(r)+m+h+l},decode(r,l){const{Err:u}=yi;let o=0;if(r<0||r>256)throw new u("tlv.encode: wrong tag");if(l.length<2||l[o++]!==r)throw new u("tlv.decode: wrong tlv");const h=l[o++],m=!!(h&128);let p=0;if(!m)p=h;else{const v=h&127;if(!v)throw new u("tlv.decode(long): indefinite length not supported");if(v>4)throw new u("tlv.decode(long): byte length is too big");const x=l.subarray(o,o+v);if(x.length!==v)throw new u("tlv.decode: length bytes not complete");if(x[0]===0)throw new u("tlv.decode(long): zero leftmost byte");for(const A of x)p=p<<8|A;if(o+=v,p<128)throw new u("tlv.decode(long): not minimal encoding")}const b=l.subarray(o,o+p);if(b.length!==p)throw new u("tlv.decode: wrong value length");return{v:b,l:l.subarray(o+p)}}},_int:{encode(r){const{Err:l}=yi;if(r<Tl)throw new l("integer: negative integers are not allowed");let u=Xr(r);if(Number.parseInt(u[0],16)&8&&(u="00"+u),u.length&1)throw new l("unexpected DER parsing assertion: unpadded hex");return u},decode(r){const{Err:l}=yi;if(r[0]&128)throw new l("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new l("invalid signature integer: unnecessary leading zero");return pu(r)}},toSig(r){const{Err:l,_int:u,_tlv:o}=yi,h=zt(r,void 0,"signature"),{v:m,l:p}=o.decode(48,h);if(p.length)throw new l("invalid signature: left bytes after parsing");const{v:b,l:v}=o.decode(2,m),{v:x,l:A}=o.decode(2,v);if(A.length)throw new l("invalid signature: left bytes after parsing");return{r:u.decode(b),s:u.decode(x)}},hexFromSig(r){const{_tlv:l,_int:u}=yi,o=l.encode(2,u.encode(r.r)),h=l.encode(2,u.encode(r.s)),m=o+h;return l.encode(48,m)}},Tl=BigInt(0),Qs=BigInt(1),Ig=BigInt(2),Qr=BigInt(3),$b=BigInt(4);function Fb(r,l={}){const u=Xb("weierstrass",r,l),{Fp:o,Fn:h}=u;let m=u.CURVE;const{h:p,n:b}=m;Bf(l,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:v}=l;if(v&&(!o.is0(m.a)||typeof v.beta!="bigint"||!Array.isArray(v.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const x=$g(o,h);function A(){if(!o.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function T(se,Y,U){const{x:E,y:K}=Y.toAffine(),Z=o.toBytes(E);if(cu(U,"isCompressed"),U){A();const ne=!o.isOdd(K);return vi(Jg(ne),Z)}else return vi(Uint8Array.of(4),Z,o.toBytes(K))}function X(se){zt(se,void 0,"Point");const{publicKey:Y,publicKeyUncompressed:U}=x,E=se.length,K=se[0],Z=se.subarray(1);if(E===Y&&(K===2||K===3)){const ne=o.fromBytes(Z);if(!o.isValid(ne))throw new Error("bad point: is not on curve, wrong x");const ce=I(ne);let S;try{S=o.sqrt(ce)}catch(ie){const P=ie instanceof Error?": "+ie.message:"";throw new Error("bad point: is not on curve, sqrt error"+P)}A();const D=o.isOdd(S);return(K&1)===1!==D&&(S=o.neg(S)),{x:ne,y:S}}else if(E===U&&K===4){const ne=o.BYTES,ce=o.fromBytes(Z.subarray(0,ne)),S=o.fromBytes(Z.subarray(ne,ne*2));if(!te(ce,S))throw new Error("bad point: is not on curve");return{x:ce,y:S}}else throw new Error(`bad point: got length ${E}, expected compressed=${Y} or uncompressed=${U}`)}const O=l.toBytes||T,L=l.fromBytes||X;function I(se){const Y=o.sqr(se),U=o.mul(Y,se);return o.add(o.add(U,o.mul(se,m.a)),m.b)}function te(se,Y){const U=o.sqr(Y),E=I(se);return o.eql(U,E)}if(!te(m.Gx,m.Gy))throw new Error("bad curve params: generator point");const oe=o.mul(o.pow(m.a,Qr),$b),ge=o.mul(o.sqr(m.b),BigInt(27));if(o.is0(o.add(oe,ge)))throw new Error("bad curve params: a or b");function fe(se,Y,U=!1){if(!o.isValid(Y)||U&&o.is0(Y))throw new Error(`bad point coordinate ${se}`);return Y}function de(se){if(!(se instanceof re))throw new Error("Weierstrass Point expected")}function ke(se){if(!v||!v.basises)throw new Error("no endo");return Ib(se,v.basises,h.ORDER)}const Ge=cg((se,Y)=>{const{X:U,Y:E,Z:K}=se;if(o.eql(K,o.ONE))return{x:U,y:E};const Z=se.is0();Y==null&&(Y=Z?o.ONE:o.inv(K));const ne=o.mul(U,Y),ce=o.mul(E,Y),S=o.mul(K,Y);if(Z)return{x:o.ZERO,y:o.ZERO};if(!o.eql(S,o.ONE))throw new Error("invZ was invalid");return{x:ne,y:ce}}),Te=cg(se=>{if(se.is0()){if(l.allowInfinityPoint&&!o.is0(se.Y))return;throw new Error("bad point: ZERO")}const{x:Y,y:U}=se.toAffine();if(!o.isValid(Y)||!o.isValid(U))throw new Error("bad point: x or y not field elements");if(!te(Y,U))throw new Error("bad point: equation left != right");if(!se.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function we(se,Y,U,E,K){return U=new re(o.mul(U.X,se),U.Y,U.Z),Y=ou(E,Y),U=ou(K,U),Y.add(U)}const ye=class ye{constructor(Y,U,E){ue(this,"X");ue(this,"Y");ue(this,"Z");this.X=fe("x",Y),this.Y=fe("y",U,!0),this.Z=fe("z",E),Object.freeze(this)}static CURVE(){return m}static fromAffine(Y){const{x:U,y:E}=Y||{};if(!Y||!o.isValid(U)||!o.isValid(E))throw new Error("invalid affine point");if(Y instanceof ye)throw new Error("projective point not allowed");return o.is0(U)&&o.is0(E)?ye.ZERO:new ye(U,E,o.ONE)}static fromBytes(Y){const U=ye.fromAffine(L(zt(Y,void 0,"point")));return U.assertValidity(),U}static fromHex(Y){return ye.fromBytes(su(Y))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(Y=8,U=!0){return je.createCache(this,Y),U||this.multiply(Qr),this}assertValidity(){Te(this)}hasEvenY(){const{y:Y}=this.toAffine();if(!o.isOdd)throw new Error("Field doesn't support isOdd");return!o.isOdd(Y)}equals(Y){de(Y);const{X:U,Y:E,Z:K}=this,{X:Z,Y:ne,Z:ce}=Y,S=o.eql(o.mul(U,ce),o.mul(Z,K)),D=o.eql(o.mul(E,ce),o.mul(ne,K));return S&&D}negate(){return new ye(this.X,o.neg(this.Y),this.Z)}double(){const{a:Y,b:U}=m,E=o.mul(U,Qr),{X:K,Y:Z,Z:ne}=this;let ce=o.ZERO,S=o.ZERO,D=o.ZERO,H=o.mul(K,K),ie=o.mul(Z,Z),P=o.mul(ne,ne),ae=o.mul(K,Z);return ae=o.add(ae,ae),D=o.mul(K,ne),D=o.add(D,D),ce=o.mul(Y,D),S=o.mul(E,P),S=o.add(ce,S),ce=o.sub(ie,S),S=o.add(ie,S),S=o.mul(ce,S),ce=o.mul(ae,ce),D=o.mul(E,D),P=o.mul(Y,P),ae=o.sub(H,P),ae=o.mul(Y,ae),ae=o.add(ae,D),D=o.add(H,H),H=o.add(D,H),H=o.add(H,P),H=o.mul(H,ae),S=o.add(S,H),P=o.mul(Z,ne),P=o.add(P,P),H=o.mul(P,ae),ce=o.sub(ce,H),D=o.mul(P,ie),D=o.add(D,D),D=o.add(D,D),new ye(ce,S,D)}add(Y){de(Y);const{X:U,Y:E,Z:K}=this,{X:Z,Y:ne,Z:ce}=Y;let S=o.ZERO,D=o.ZERO,H=o.ZERO;const ie=m.a,P=o.mul(m.b,Qr);let ae=o.mul(U,Z),be=o.mul(E,ne),Me=o.mul(K,ce),Be=o.add(U,E),He=o.add(Z,ne);Be=o.mul(Be,He),He=o.add(ae,be),Be=o.sub(Be,He),He=o.add(U,K);let Fe=o.add(Z,ce);return He=o.mul(He,Fe),Fe=o.add(ae,Me),He=o.sub(He,Fe),Fe=o.add(E,K),S=o.add(ne,ce),Fe=o.mul(Fe,S),S=o.add(be,Me),Fe=o.sub(Fe,S),H=o.mul(ie,He),S=o.mul(P,Me),H=o.add(S,H),S=o.sub(be,H),H=o.add(be,H),D=o.mul(S,H),be=o.add(ae,ae),be=o.add(be,ae),Me=o.mul(ie,Me),He=o.mul(P,He),be=o.add(be,Me),Me=o.sub(ae,Me),Me=o.mul(ie,Me),He=o.add(He,Me),ae=o.mul(be,He),D=o.add(D,ae),ae=o.mul(Fe,He),S=o.mul(Be,S),S=o.sub(S,ae),ae=o.mul(Be,be),H=o.mul(Fe,H),H=o.add(H,ae),new ye(S,D,H)}subtract(Y){return this.add(Y.negate())}is0(){return this.equals(ye.ZERO)}multiply(Y){const{endo:U}=l;if(!h.isValidNot0(Y))throw new Error("invalid scalar: out of range");let E,K;const Z=ne=>je.cached(this,ne,ce=>ug(ye,ce));if(U){const{k1neg:ne,k1:ce,k2neg:S,k2:D}=ke(Y),{p:H,f:ie}=Z(ce),{p:P,f:ae}=Z(D);K=ie.add(ae),E=we(U.beta,H,P,ne,S)}else{const{p:ne,f:ce}=Z(Y);E=ne,K=ce}return ug(ye,[E,K])[0]}multiplyUnsafe(Y){const{endo:U}=l,E=this;if(!h.isValid(Y))throw new Error("invalid scalar: out of range");if(Y===Tl||E.is0())return ye.ZERO;if(Y===Qs)return E;if(je.hasCache(this))return this.multiply(Y);if(U){const{k1neg:K,k1:Z,k2neg:ne,k2:ce}=ke(Y),{p1:S,p2:D}=Zb(ye,E,Z,ce);return we(U.beta,S,D,K,ne)}else return je.unsafe(E,Y)}toAffine(Y){return Ge(this,Y)}isTorsionFree(){const{isTorsionFree:Y}=l;return p===Qs?!0:Y?Y(ye,this):je.unsafe(this,b).is0()}clearCofactor(){const{clearCofactor:Y}=l;return p===Qs?this:Y?Y(ye,this):this.multiplyUnsafe(p)}isSmallOrder(){return this.multiplyUnsafe(p).is0()}toBytes(Y=!0){return cu(Y,"isCompressed"),this.assertValidity(),O(ye,this,Y)}toHex(Y=!0){return mu(this.toBytes(Y))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}};ue(ye,"BASE",new ye(m.Gx,m.Gy,o.ONE)),ue(ye,"ZERO",new ye(o.ZERO,o.ONE,o.ZERO)),ue(ye,"Fp",o),ue(ye,"Fn",h);let re=ye;const Ue=h.BITS,je=new Vb(re,l.endo?Math.ceil(Ue/2):Ue);return re.BASE.precompute(8),re}function Jg(r){return Uint8Array.of(r?2:3)}function $g(r,l){return{secretKey:l.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*l.BYTES}}function Wb(r,l={}){const{Fn:u}=r,o=l.randomBytes||kg,h=Object.assign($g(r.Fp,u),{seed:Vg(u.ORDER)});function m(O){try{const L=u.fromBytes(O);return u.isValidNot0(L)}catch{return!1}}function p(O,L){const{publicKey:I,publicKeyUncompressed:te}=h;try{const oe=O.length;return L===!0&&oe!==I||L===!1&&oe!==te?!1:!!r.fromBytes(O)}catch{return!1}}function b(O=o(h.seed)){return Gb(zt(O,h.seed,"seed"),u.ORDER)}function v(O,L=!0){return r.BASE.multiply(u.fromBytes(O)).toBytes(L)}function x(O){const{secretKey:L,publicKey:I,publicKeyUncompressed:te}=h;if(!Mf(O)||"_lengths"in u&&u._lengths||L===I)return;const oe=zt(O,void 0,"key").length;return oe===I||oe===te}function A(O,L,I=!0){if(x(O)===!0)throw new Error("first arg must be private key");if(x(L)===!1)throw new Error("second arg must be public key");const te=u.fromBytes(O);return r.fromBytes(L).multiply(te).toBytes(I)}const T={isValidSecretKey:m,isValidPublicKey:p,randomSecretKey:b},X=Qb(b,v);return Object.freeze({getPublicKey:v,getSharedSecret:A,keygen:X,Point:r,utils:T,lengths:h})}function Pb(r,l,u={}){Df(l),Bf(u,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),u=Object.assign({},u);const o=u.randomBytes||kg,h=u.hmac||((Y,U)=>qf(l,Y,U)),{Fp:m,Fn:p}=r,{ORDER:b,BITS:v}=p,{keygen:x,getPublicKey:A,getSharedSecret:T,utils:X,lengths:O}=Wb(r,u),L={prehash:!0,lowS:typeof u.lowS=="boolean"?u.lowS:!0,format:"compact",extraEntropy:!1},I=b*Ig<m.ORDER;function te(Y){const U=b>>Qs;return Y>U}function oe(Y,U){if(!p.isValidNot0(U))throw new Error(`invalid signature ${Y}: out of range 1..Point.Fn.ORDER`);return U}function ge(){if(I)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function fe(Y,U){jf(U);const E=O.signature,K=U==="compact"?E:U==="recovered"?E+1:void 0;return zt(Y,K)}class de{constructor(U,E,K){ue(this,"r");ue(this,"s");ue(this,"recovery");if(this.r=oe("r",U),this.s=oe("s",E),K!=null){if(ge(),![0,1,2,3].includes(K))throw new Error("invalid recovery id");this.recovery=K}Object.freeze(this)}static fromBytes(U,E=L.format){fe(U,E);let K;if(E==="der"){const{r:S,s:D}=yi.toSig(zt(U));return new de(S,D)}E==="recovered"&&(K=U[0],E="compact",U=U.subarray(1));const Z=O.signature/2,ne=U.subarray(0,Z),ce=U.subarray(Z,Z*2);return new de(p.fromBytes(ne),p.fromBytes(ce),K)}static fromHex(U,E){return this.fromBytes(su(U),E)}assertRecovery(){const{recovery:U}=this;if(U==null)throw new Error("invalid recovery id: must be present");return U}addRecoveryBit(U){return new de(this.r,this.s,U)}recoverPublicKey(U){const{r:E,s:K}=this,Z=this.assertRecovery(),ne=Z===2||Z===3?E+b:E;if(!m.isValid(ne))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const ce=m.toBytes(ne),S=r.fromBytes(vi(Jg((Z&1)===0),ce)),D=p.inv(ne),H=Ge(zt(U,void 0,"msgHash")),ie=p.create(-H*D),P=p.create(K*D),ae=r.BASE.multiplyUnsafe(ie).add(S.multiplyUnsafe(P));if(ae.is0())throw new Error("invalid recovery: point at infinify");return ae.assertValidity(),ae}hasHighS(){return te(this.s)}toBytes(U=L.format){if(jf(U),U==="der")return su(yi.hexFromSig(this));const{r:E,s:K}=this,Z=p.toBytes(E),ne=p.toBytes(K);return U==="recovered"?(ge(),vi(Uint8Array.of(this.assertRecovery()),Z,ne)):vi(Z,ne)}toHex(U){return mu(this.toBytes(U))}}const ke=u.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");const E=pu(U),K=U.length*8-v;return K>0?E>>BigInt(K):E},Ge=u.bits2int_modN||function(U){return p.create(ke(U))},Te=zf(v);function we(Y){return kb("num < 2^"+v,Y,Tl,Te),p.toBytes(Y)}function re(Y,U){return zt(Y,void 0,"message"),U?zt(l(Y),void 0,"prehashed message"):Y}function Ue(Y,U,E){const{lowS:K,prehash:Z,extraEntropy:ne}=vf(E,L);Y=re(Y,Z);const ce=Ge(Y),S=p.fromBytes(U);if(!p.isValidNot0(S))throw new Error("invalid private key");const D=[we(S),we(ce)];if(ne!=null&&ne!==!1){const ae=ne===!0?o(O.secretKey):ne;D.push(zt(ae,void 0,"extraEntropy"))}const H=vi(...D),ie=ce;function P(ae){const be=ke(ae);if(!p.isValidNot0(be))return;const Me=p.inv(be),Be=r.BASE.multiply(be).toAffine(),He=p.create(Be.x);if(He===Tl)return;const Fe=p.create(Me*p.create(ie+He*S));if(Fe===Tl)return;let Jt=(Be.x===He?0:2)|Number(Be.y&Qs),Et=Fe;return K&&te(Fe)&&(Et=p.neg(Fe),Jt^=1),new de(He,Et,I?void 0:Jt)}return{seed:H,k2sig:P}}function je(Y,U,E={}){const{seed:K,k2sig:Z}=Ue(Y,U,E);return Mb(l.outputLen,p.BYTES,h)(K,Z).toBytes(E.format)}function ye(Y,U,E,K={}){const{lowS:Z,prehash:ne,format:ce}=vf(K,L);if(E=zt(E,void 0,"publicKey"),U=re(U,ne),!Mf(Y)){const S=Y instanceof de?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+S)}fe(Y,ce);try{const S=de.fromBytes(Y,ce),D=r.fromBytes(E);if(Z&&S.hasHighS())return!1;const{r:H,s:ie}=S,P=Ge(U),ae=p.inv(ie),be=p.create(P*ae),Me=p.create(H*ae),Be=r.BASE.multiplyUnsafe(be).add(D.multiplyUnsafe(Me));return Be.is0()?!1:p.create(Be.x)===H}catch{return!1}}function se(Y,U,E={}){const{prehash:K}=vf(E,L);return U=re(U,K),de.fromBytes(Y,"recovered").recoverPublicKey(U).toBytes()}return Object.freeze({keygen:x,getPublicKey:A,getSharedSecret:T,utils:X,lengths:O,Point:r,sign:je,verify:ye,recoverPublicKey:se,Signature:de,hash:l})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e0={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},t0=Fb(e0),Ao=Pb(t0,$s);function n0(r,l,u,o){Df(r);const h=bb({dkLen:32,asyncTick:10},o),{c:m,dkLen:p,asyncTick:b}=h;if(Fa(m,"c"),Fa(p,"dkLen"),Fa(b,"asyncTick"),m<1)throw new Error("iterations (c) must be >= 1");const v=sg(l,"password"),x=sg(u,"salt"),A=new Uint8Array(p),T=qf.create(r,v),X=T._cloneInto().update(x);return{c:m,dkLen:p,asyncTick:b,DK:A,PRF:T,PRFSalt:X}}function a0(r,l,u,o,h){return r.destroy(),l.destroy(),o&&o.destroy(),Eo(h),u}function l0(r,l,u,o){const{c:h,dkLen:m,DK:p,PRF:b,PRFSalt:v}=n0(r,l,u,o);let x;const A=new Uint8Array(4),T=nu(A),X=new Uint8Array(b.outputLen);for(let O=1,L=0;L<m;O++,L+=b.outputLen){const I=p.subarray(L,L+b.outputLen);T.setInt32(0,O,!1),(x=v._cloneInto(x)).update(A).digestInto(X),I.set(X.subarray(0,I.length));for(let te=1;te<h;te++){b._cloneInto(x).update(X).digestInto(X);for(let oe=0;oe<I.length;oe++)I[oe]^=X[oe]}}return a0(b,v,p,x,X)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function i0(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function In(r,l,u=""){const o=i0(r),h=r==null?void 0:r.length,m=l!==void 0;if(!o||m&&h!==l){const p=u&&`"${u}" `,b=m?` of length ${l}`:"",v=o?`length=${h}`:`type=${typeof r}`;throw new Error(p+"expected Uint8Array"+b+", got "+v)}return r}function ru(r,l=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(l&&r.finished)throw new Error("Hash#digest() has already been called")}function Fg(r,l){In(r,void 0,"output");const u=l.outputLen;if(r.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}function s0(r){return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function Al(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function kl(...r){for(let l=0;l<r.length;l++)r[l].fill(0)}function gu(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}const c0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function o0(r,l){if(r.length!==l.length)return!1;let u=0;for(let o=0;o<r.length;o++)u|=r[o]^l[o];return u===0}const r0=(r,l)=>{function u(o,...h){if(In(o,void 0,"key"),!c0)throw new Error("Non little-endian hardware is not yet supported");if(r.nonceLength!==void 0){const A=h[0];In(A,r.varSizeNonce?void 0:r.nonceLength,"nonce")}const m=r.tagLength;m&&h[1]!==void 0&&In(h[1],void 0,"AAD");const p=l(o,...h),b=(A,T)=>{if(T!==void 0){if(A!==2)throw new Error("cipher output not supported");In(T,void 0,"output")}};let v=!1;return{encrypt(A,T){if(v)throw new Error("cannot encrypt() twice with same key + nonce");return v=!0,In(A),b(p.encrypt.length,T),p.encrypt(A,T)},decrypt(A,T){if(In(A),m&&A.length<m)throw new Error('"ciphertext" expected length bigger than tagLength='+m);return b(p.decrypt.length,T),p.decrypt(A,T)}}}return Object.assign(u,r),u};function u0(r,l,u=!0){if(l===void 0)return new Uint8Array(r);if(l.length!==r)throw new Error('"output" expected Uint8Array of length '+r+", got: "+l.length);if(u&&!uu(l))throw new Error("invalid output, must be aligned");return l}function d0(r,l,u){const o=new Uint8Array(16),h=gu(o);return h.setBigUint64(0,BigInt(l),u),h.setBigUint64(8,BigInt(r),u),o}function uu(r){return r.byteOffset%4===0}function Qi(r){return Uint8Array.from(r)}const Cl=16,Kf=new Uint8Array(16),$a=Al(Kf),f0=225,h0=(r,l,u,o)=>{const h=o&1;return{s3:u<<31|o>>>1,s2:l<<31|u>>>1,s1:r<<31|l>>>1,s0:r>>>1^f0<<24&-(h&1)}},xa=r=>(r>>>0&255)<<24|(r>>>8&255)<<16|(r>>>16&255)<<8|r>>>24&255|0;function m0(r){r.reverse();const l=r[15]&1;let u=0;for(let o=0;o<r.length;o++){const h=r[o];r[o]=h>>>1|u,u=(h&1)<<7}return r[0]^=-l&225,r}const p0=r=>r>64*1024?8:r>1024?4:2;class Wg{constructor(l,u){ue(this,"blockLen",Cl);ue(this,"outputLen",Cl);ue(this,"s0",0);ue(this,"s1",0);ue(this,"s2",0);ue(this,"s3",0);ue(this,"finished",!1);ue(this,"t");ue(this,"W");ue(this,"windowSize");In(l,16,"key"),l=Qi(l);const o=gu(l);let h=o.getUint32(0,!1),m=o.getUint32(4,!1),p=o.getUint32(8,!1),b=o.getUint32(12,!1);const v=[];for(let L=0;L<128;L++)v.push({s0:xa(h),s1:xa(m),s2:xa(p),s3:xa(b)}),{s0:h,s1:m,s2:p,s3:b}=h0(h,m,p,b);const x=p0(u||1024);if(![1,2,4,8].includes(x))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=x;const T=128/x,X=this.windowSize=2**x,O=[];for(let L=0;L<T;L++)for(let I=0;I<X;I++){let te=0,oe=0,ge=0,fe=0;for(let de=0;de<x;de++){if(!(I>>>x-de-1&1))continue;const{s0:Ge,s1:Te,s2:we,s3:re}=v[x*L+de];te^=Ge,oe^=Te,ge^=we,fe^=re}O.push({s0:te,s1:oe,s2:ge,s3:fe})}this.t=O}_updateBlock(l,u,o,h){l^=this.s0,u^=this.s1,o^=this.s2,h^=this.s3;const{W:m,t:p,windowSize:b}=this;let v=0,x=0,A=0,T=0;const X=(1<<m)-1;let O=0;for(const L of[l,u,o,h])for(let I=0;I<4;I++){const te=L>>>8*I&255;for(let oe=8/m-1;oe>=0;oe--){const ge=te>>>m*oe&X,{s0:fe,s1:de,s2:ke,s3:Ge}=p[O*b+ge];v^=fe,x^=de,A^=ke,T^=Ge,O+=1}}this.s0=v,this.s1=x,this.s2=A,this.s3=T}update(l){ru(this),In(l),l=Qi(l);const u=Al(l),o=Math.floor(l.length/Cl),h=l.length%Cl;for(let m=0;m<o;m++)this._updateBlock(u[m*4+0],u[m*4+1],u[m*4+2],u[m*4+3]);return h&&(Kf.set(l.subarray(o*Cl)),this._updateBlock($a[0],$a[1],$a[2],$a[3]),kl($a)),this}destroy(){const{t:l}=this;for(const u of l)u.s0=0,u.s1=0,u.s2=0,u.s3=0}digestInto(l){ru(this),Fg(l,this),this.finished=!0;const{s0:u,s1:o,s2:h,s3:m}=this,p=Al(l);return p[0]=u,p[1]=o,p[2]=h,p[3]=m,l}digest(){const l=new Uint8Array(Cl);return this.digestInto(l),this.destroy(),l}}class g0 extends Wg{constructor(l,u){In(l);const o=m0(Qi(l));super(o,u),kl(o)}update(l){ru(this),In(l),l=Qi(l);const u=Al(l),o=l.length%Cl,h=Math.floor(l.length/Cl);for(let m=0;m<h;m++)this._updateBlock(xa(u[m*4+3]),xa(u[m*4+2]),xa(u[m*4+1]),xa(u[m*4+0]));return o&&(Kf.set(l.subarray(h*Cl)),this._updateBlock(xa($a[3]),xa($a[2]),xa($a[1]),xa($a[0])),kl($a)),this}digestInto(l){ru(this),Fg(l,this),this.finished=!0;const{s0:u,s1:o,s2:h,s3:m}=this,p=Al(l);return p[0]=u,p[1]=o,p[2]=h,p[3]=m,l.reverse()}}function Pg(r){const l=(o,h)=>r(h,o.length).update(o).digest(),u=r(new Uint8Array(16),0);return l.outputLen=u.outputLen,l.blockLen=u.blockLen,l.create=(o,h)=>r(o,h),l}const pg=Pg((r,l)=>new Wg(r,l));Pg((r,l)=>new g0(r,l));const Cf=16,y0=4,Ir=new Uint8Array(Cf),v0=283;function b0(r){if(![16,24,32].includes(r.length))throw new Error('"aes key" expected Uint8Array of length 16/24/32, got length='+r.length)}function Yf(r){return r<<1^v0&-(r>>7)}function gg(r,l){let u=0;for(;l>0;l>>=1)u^=r&-(l&1),r=Yf(r);return u}const x0=(()=>{const r=new Uint8Array(256);for(let u=0,o=1;u<256;u++,o^=Yf(o))r[u]=o;const l=new Uint8Array(256);l[0]=99;for(let u=0;u<255;u++){let o=r[255-u];o|=o<<8,l[r[u]]=(o^o>>4^o>>5^o>>6^o>>7^99)&255}return kl(r),l})(),S0=r=>r<<24|r>>>8,bf=r=>r<<8|r>>>24;function w0(r,l){if(r.length!==256)throw new Error("Wrong sbox length");const u=new Uint32Array(256).map((x,A)=>l(r[A])),o=u.map(bf),h=o.map(bf),m=h.map(bf),p=new Uint32Array(256*256),b=new Uint32Array(256*256),v=new Uint16Array(256*256);for(let x=0;x<256;x++)for(let A=0;A<256;A++){const T=x*256+A;p[T]=u[x]^o[A],b[T]=h[x]^m[A],v[T]=r[x]<<8|r[A]}return{sbox:r,sbox2:v,T0:u,T1:o,T2:h,T3:m,T01:p,T23:b}}const ey=w0(x0,r=>gg(r,3)<<24|r<<16|r<<8|gg(r,2)),_0=(()=>{const r=new Uint8Array(16);for(let l=0,u=1;l<16;l++,u=Yf(u))r[l]=u;return r})();function N0(r){In(r);const l=r.length;b0(r);const{sbox2:u}=ey,o=[];uu(r)||o.push(r=Qi(r));const h=Al(r),m=h.length,p=v=>No(u,v,v,v,v),b=new Uint32Array(l+28);b.set(h);for(let v=m;v<b.length;v++){let x=b[v-1];v%m===0?x=p(S0(x))^_0[v/m-1]:m>6&&v%m===4&&(x=p(x)),b[v]=b[v-m]^x}return kl(...o),b}function Jr(r,l,u,o,h,m){return r[u<<8&65280|o>>>8&255]^l[h>>>8&65280|m>>>24&255]}function No(r,l,u,o,h){return r[l&255|u&65280]|r[o>>>16&255|h>>>16&65280]<<16}function yg(r,l,u,o,h){const{sbox2:m,T01:p,T23:b}=ey;let v=0;l^=r[v++],u^=r[v++],o^=r[v++],h^=r[v++];const x=r.length/4-2;for(let L=0;L<x;L++){const I=r[v++]^Jr(p,b,l,u,o,h),te=r[v++]^Jr(p,b,u,o,h,l),oe=r[v++]^Jr(p,b,o,h,l,u),ge=r[v++]^Jr(p,b,h,l,u,o);l=I,u=te,o=oe,h=ge}const A=r[v++]^No(m,l,u,o,h),T=r[v++]^No(m,u,o,h,l),X=r[v++]^No(m,o,h,l,u),O=r[v++]^No(m,h,l,u,o);return{s0:A,s1:T,s2:X,s3:O}}function $r(r,l,u,o,h){In(u,Cf,"nonce"),In(o),h=u0(o.length,h);const m=u,p=Al(m),b=gu(m),v=Al(o),x=Al(h),A=l?0:12,T=o.length;let X=b.getUint32(A,l),{s0:O,s1:L,s2:I,s3:te}=yg(r,p[0],p[1],p[2],p[3]);for(let ge=0;ge+4<=v.length;ge+=4)x[ge+0]=v[ge+0]^O,x[ge+1]=v[ge+1]^L,x[ge+2]=v[ge+2]^I,x[ge+3]=v[ge+3]^te,X=X+1>>>0,b.setUint32(A,X,l),{s0:O,s1:L,s2:I,s3:te}=yg(r,p[0],p[1],p[2],p[3]);const oe=Cf*Math.floor(v.length/y0);if(oe<T){const ge=new Uint32Array([O,L,I,te]),fe=s0(ge);for(let de=oe,ke=0;de<T;de++,ke++)h[de]=o[de]^fe[ke];kl(ge)}return h}function E0(r,l,u,o,h){const m=h?h.length:0,p=r.create(u,o.length+m);h&&p.update(h);const b=d0(8*o.length,8*m,l);p.update(o),p.update(b);const v=p.digest();return kl(b),v}const Fs=r0({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(l,u,o){if(u.length<8)throw new Error("aes/gcm: invalid nonce length");const h=16;function m(b,v,x){const A=E0(pg,!1,b,x,o);for(let T=0;T<v.length;T++)A[T]^=v[T];return A}function p(){const b=N0(l),v=Ir.slice(),x=Ir.slice();if($r(b,!1,x,x,v),u.length===12)x.set(u);else{const T=Ir.slice();gu(T).setBigUint64(8,BigInt(u.length*8),!1);const O=pg.create(v).update(u).update(T);O.digestInto(x),O.destroy()}const A=$r(b,!1,x,Ir);return{xk:b,authKey:v,counter:x,tagMask:A}}return{encrypt(b){const{xk:v,authKey:x,counter:A,tagMask:T}=p(),X=new Uint8Array(b.length+h),O=[v,x,A,T];uu(b)||O.push(b=Qi(b)),$r(v,!1,A,b,X.subarray(0,b.length));const L=m(x,T,X.subarray(0,X.length-h));return O.push(L),X.set(L,b.length),kl(...O),X},decrypt(b){const{xk:v,authKey:x,counter:A,tagMask:T}=p(),X=[v,x,T,A];uu(b)||X.push(b=Qi(b));const O=b.subarray(0,-h),L=b.subarray(-h),I=m(x,T,O);if(X.push(I),!o0(I,L))throw new Error("aes/gcm: invalid ghash tag");const te=$r(v,!1,A,O);return kl(...X),te}}}),ty=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];function jo(r){const l=new Uint8Array(r);return crypto.getRandomValues(l),l}function j0(r){const l=r?`_${r.slice(0,16)}`:"";return{PRIVATE_KEY:`accord_private_key${l}`,PUBLIC_KEY:`accord_public_key${l}`,CHANNEL_KEYS:`accord_channel_keys${l}`}}let ny;function Ua(r){ny=r}function ko(r){return j0(r||ny)}const Rl={PRIVATE_KEY:"accord_private_key",PUBLIC_KEY:"accord_public_key",CHANNEL_KEYS:"accord_channel_keys"},Co={name:"ECDH",namedCurve:"P-256"},C0={name:"AES-GCM",length:256},Jn=typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u";function T0(){return!0}async function gi(r){const l=new TextEncoder().encode(r);if(Jn){const o=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(o)).map(h=>h.toString(16).padStart(2,"0")).join("")}const u=$s(l);return Array.from(u).map(o=>o.toString(16).padStart(2,"0")).join("")}function Ii(r){const l=String.fromCharCode.apply(null,Array.from(new Uint8Array(r)));return btoa(l)}function To(r){const l=atob(r),u=new ArrayBuffer(l.length),o=new Uint8Array(u);for(let h=0;h<l.length;h++)o[h]=l.charCodeAt(h);return u}function Gf(r){return Ii(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength))}function A0(r){return new Uint8Array(To(r))}async function ay(r,l){const u=new TextEncoder,o=await window.crypto.subtle.importKey("raw",u.encode(r),"PBKDF2",!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:l,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function ly(r,l){const u=new TextEncoder;return l0($s,u.encode(r),l,{c:1e5,dkLen:32})}async function iy(r,l){const u=jo(16),o=jo(12);if(Jn){const v=await ay(l,u),x=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},v,r),A=new Uint8Array(u.length+o.length+x.byteLength);return A.set(u,0),A.set(o,u.length),A.set(new Uint8Array(x),u.length+o.length),Ii(A.buffer)}const h=ly(l,u),p=Fs(h,o).encrypt(new Uint8Array(r)),b=new Uint8Array(u.length+o.length+p.length);return b.set(u,0),b.set(o,u.length),b.set(p,u.length+o.length),Gf(b)}async function sy(r,l){const u=new Uint8Array(To(r)),o=u.slice(0,16),h=u.slice(16,28),m=u.slice(28);if(Jn){const x=await ay(l,o);return window.crypto.subtle.decrypt({name:"AES-GCM",iv:h},x,m)}const p=ly(l,o),v=Fs(p,h).decrypt(m);return v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength)}function cy(){return`accord-key-wrap:${localStorage.getItem("accord_token")||""}`}async function xf(){return Jn?await window.crypto.subtle.generateKey(Co,!0,["deriveKey","deriveBits"]):k0()}function k0(){const r=jo(32),l=Ao.getPublicKey(r,!1),u=yu(l),o=vu(r,l);return{privateKey:{_nobleRaw:r,_noblePkcs8:o},publicKey:{_nobleRaw:l,_nobleSpki:u},_privateKeyRaw:r,_publicKeyRaw:u}}const Is=new Uint8Array([48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7]);function yu(r){const l=new Uint8Array(3+r.length);l[0]=3,l[1]=1+r.length,l[2]=0,l.set(r,3);const u=Is.length+l.length,o=new Uint8Array(2+u);return o[0]=48,o[1]=u,o.set(Is,2),o.set(l,2+Is.length),o}function vu(r,l){const u=R0(r,l),o=new Uint8Array([2,1,0]),h=new Uint8Array(2+u.length);h[0]=4,h[1]=u.length,h.set(u,2);const m=o.length+Is.length+h.length,p=new Uint8Array(2+m);p[0]=48,p[1]=m;let b=2;return p.set(o,b),b+=o.length,p.set(Is,b),b+=Is.length,p.set(h,b),p}function R0(r,l){const u=new Uint8Array([2,1,1]),o=new Uint8Array([4,32,...r]),h=new Uint8Array([3,1+l.length,0,...l]),m=new Uint8Array([161,h.length,...h]),p=u.length+o.length+m.length,b=new Uint8Array(2+p);b[0]=48,b[1]=p;let v=2;return b.set(u,v),v+=u.length,b.set(o,v),v+=o.length,b.set(m,v),b}function Vf(r){for(let l=0;l<r.length-33;l++)if(r[l]===4&&r[l+1]===32){const u=r.slice(l+2,l+34);try{return Ao.getPublicKey(u,!1),u}catch{continue}}throw new Error("Could not extract P-256 private key from PKCS8")}async function Vi(r){if(Jn&&!r._nobleSpki){const u=await window.crypto.subtle.exportKey("spki",r);return Ii(u)}const l=r._nobleSpki;if(!l)throw new Error("Cannot export noble public key: missing SPKI data");return Gf(l)}async function Fr(r,l){let u,o;if(Jn&&!r.privateKey._nobleRaw)u=await window.crypto.subtle.exportKey("pkcs8",r.privateKey),o=await window.crypto.subtle.exportKey("spki",r.publicKey);else{const b=r.privateKey._noblePkcs8,v=r.publicKey._nobleSpki;u=b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength),o=v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength)}const h=cy(),m=await iy(u,h),p=ko(l);localStorage.setItem(p.PRIVATE_KEY,m),localStorage.setItem(p.PUBLIC_KEY,Ii(o))}async function Wr(r){try{const l=ko(r);let u=localStorage.getItem(l.PRIVATE_KEY),o=localStorage.getItem(l.PUBLIC_KEY);if((!u||!o)&&(u=localStorage.getItem(Rl.PRIVATE_KEY),o=localStorage.getItem(Rl.PUBLIC_KEY)),!u||!o)return null;let h;try{const A=cy();h=await sy(u,A)}catch{h=To(u)}const m=To(o);if(Jn){const A=await window.crypto.subtle.importKey("pkcs8",h,Co,!0,["deriveKey","deriveBits"]),T=await window.crypto.subtle.importKey("spki",m,Co,!0,[]);return{privateKey:A,publicKey:T}}const p=Vf(new Uint8Array(h)),b=Ao.getPublicKey(p,!1),v=yu(b),x=vu(p,b);return{privateKey:{_nobleRaw:p,_noblePkcs8:x},publicKey:{_nobleRaw:b,_nobleSpki:v}}}catch(l){return console.warn("Failed to load keys from storage (may be password-encrypted):",l),null}}async function M0(r){const l=new TextEncoder,u=localStorage.getItem("accord_token")||"",o=localStorage.getItem(Rl.PRIVATE_KEY)||"",h=`${r}:${u}:${o.slice(0,32)}`,m=l.encode(h);if(Jn){const p=await window.crypto.subtle.digest("SHA-256",m);return window.crypto.subtle.importKey("raw",p,C0,!1,["encrypt","decrypt"])}return $s(m)}async function D0(r,l){return M0(l)}const lu=new Map;async function Sa(r,l){if(lu.has(l))return lu.get(l);const u=await D0(r,l);return lu.set(l,u),u}function U0(){lu.clear()}async function du(r,l){const u=new TextEncoder().encode(l),o=jo(12);if(Jn&&r instanceof CryptoKey){const v=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},r,u),x=new Uint8Array(o.length+v.byteLength);return x.set(o),x.set(new Uint8Array(v),o.length),Ii(x.buffer)}const h=r instanceof Uint8Array?r:new Uint8Array(0),p=Fs(h,o).encrypt(u),b=new Uint8Array(o.length+p.length);return b.set(o),b.set(p,o.length),Gf(b)}async function fu(r,l){const u=A0(l),o=u.slice(0,12),h=u.slice(12);if(Jn&&r instanceof CryptoKey){const v=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:o},r,h);return new TextDecoder().decode(v)}const m=r instanceof Uint8Array?r:new Uint8Array(0),b=Fs(m,o).decrypt(h);return new TextDecoder().decode(b)}async function oy(r,l){const u=jo(12);if(Jn&&r instanceof CryptoKey){const b=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:u},r,l),v=new Uint8Array(u.length+b.byteLength);return v.set(u),v.set(new Uint8Array(b),u.length),v.buffer}const o=r instanceof Uint8Array?r:new Uint8Array(0),m=Fs(o,u).encrypt(new Uint8Array(l)),p=new Uint8Array(u.length+m.length);return p.set(u),p.set(m,u.length),p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength)}async function Tf(r,l){const u=new Uint8Array(l),o=u.slice(0,12),h=u.slice(12);if(Jn&&r instanceof CryptoKey)return window.crypto.subtle.decrypt({name:"AES-GCM",iv:o},r,h);const m=r instanceof Uint8Array?r:new Uint8Array(0),b=Fs(m,o).decrypt(h);return b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength)}async function ry(r,l){return du(r,l)}async function Af(r,l){return fu(r,l)}function O0(r){if(r.length!==32)throw new Error("Expected 32 bytes of entropy");const u=$s(r)[0];let o="";for(const m of r)o+=m.toString(2).padStart(8,"0");o+=u.toString(2).padStart(8,"0");const h=[];for(let m=0;m<24;m++){const p=parseInt(o.slice(m*11,(m+1)*11),2);h.push(ty[p])}return h.join(" ")}function z0(r){const l=r.trim().toLowerCase().split(/\s+/);if(l.length!==24)throw new Error("Expected 24 words");let u="";for(const v of l){const x=ty.indexOf(v);if(x===-1)throw new Error(`Unknown word: "${v}"`);u+=x.toString(2).padStart(11,"0")}const o=u.slice(0,256),h=u.slice(256,264),m=new Uint8Array(32);for(let v=0;v<32;v++)m[v]=parseInt(o.slice(v*8,(v+1)*8),2);const b=$s(m)[0].toString(2).padStart(8,"0");if(h!==b)throw new Error("Invalid mnemonic checksum");return m}async function B0(r){if(r.privateKey._nobleRaw)return r.privateKey._nobleRaw;const l=await window.crypto.subtle.exportKey("pkcs8",r.privateKey);return Vf(new Uint8Array(l))}async function vg(r){const l=await B0(r);return O0(l)}function L0(r){const l=z0(r),u=Ao.getPublicKey(l,!1),o=yu(u),h=vu(l,u);return{privateKey:{_nobleRaw:l,_noblePkcs8:h},publicKey:{_nobleRaw:u,_nobleSpki:o}}}async function Pr(r,l,u){let o,h;if(Jn&&!r.privateKey._nobleRaw)o=await window.crypto.subtle.exportKey("pkcs8",r.privateKey),h=await window.crypto.subtle.exportKey("spki",r.publicKey);else{const v=r.privateKey._noblePkcs8,x=r.publicKey._nobleSpki;o=v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength),h=x.buffer.slice(x.byteOffset,x.byteOffset+x.byteLength)}const m=`accord-key-wrap:${l}`,p=await iy(o,m),b=ko(u);localStorage.setItem(b.PRIVATE_KEY,p),localStorage.setItem(b.PUBLIC_KEY,Ii(h)),localStorage.setItem(Rl.PRIVATE_KEY,p),localStorage.setItem(Rl.PUBLIC_KEY,Ii(h))}async function kf(r,l){const u=ko(l);let o=localStorage.getItem(u.PRIVATE_KEY),h=localStorage.getItem(u.PUBLIC_KEY);(!o||!h)&&(o=localStorage.getItem(Rl.PRIVATE_KEY),h=localStorage.getItem(Rl.PUBLIC_KEY));try{if(!o||!h)return null;const m=`accord-key-wrap:${r}`,p=await sy(o,m),b=To(h);if(Jn){const X=await window.crypto.subtle.importKey("pkcs8",p,Co,!0,["deriveKey","deriveBits"]),O=await window.crypto.subtle.importKey("spki",b,Co,!0,[]);return{privateKey:X,publicKey:O}}const v=Vf(new Uint8Array(p)),x=Ao.getPublicKey(v,!1),A=yu(x),T=vu(v,x);return{privateKey:{_nobleRaw:v,_noblePkcs8:T},publicKey:{_nobleRaw:x,_nobleSpki:A}}}catch{return null}}function bg(r){const l=ko(r);return!!localStorage.getItem(l.PUBLIC_KEY)||!!localStorage.getItem(Rl.PUBLIC_KEY)}function Sf(){return localStorage.getItem(Rl.PUBLIC_KEY)}const Zf="accord_token",Xf="accord_token_expiry",H0=1440*60*1e3;function Xs(r,l=H0){const u=Date.now()+l;localStorage.setItem(Zf,r),localStorage.setItem(Xf,u.toString())}function q0(){const r=localStorage.getItem(Zf),l=localStorage.getItem(Xf);if(!r)return null;if(l){const u=parseInt(l,10);if(Date.now()>u)return uy(),null}return r}function uy(){localStorage.removeItem(Zf),localStorage.removeItem(Xf)}const K0=({channelId:r,token:l,keyPair:u,encryptionEnabled:o})=>{const h=w.useRef(null),[m,p]=w.useState({isUploading:!1,progress:null,fileName:""}),b=()=>{var A;(A=h.current)==null||A.click()},v=w.useCallback(async A=>{p({isUploading:!0,progress:{loaded:0,total:A.size,percentage:0},fileName:A.name});try{let T=A,X;if(o&&u)try{const O=await Sa(u.privateKey,r),L=await A.arrayBuffer(),I=await oy(O,L);X=await ry(O,A.name),T=new File([I],"encrypted_file",{type:"application/octet-stream"})}catch(O){console.warn("Failed to encrypt file, uploading plaintext:",O)}await $.uploadFile(r,T,l,X,(O,L)=>{const I=Math.round(O/L*100);p(te=>({...te,progress:{loaded:O,total:L,percentage:I}}))}),p({isUploading:!1,progress:null,fileName:""}),h.current&&(h.current.value="")}catch(T){console.error("File upload failed:",T),alert(`File upload failed: ${T instanceof Error?T.message:"Unknown error"}`),p({isUploading:!1,progress:null,fileName:""})}},[r,l,u,o]),x=async A=>{var X;const T=(X=A.target.files)==null?void 0:X[0];T&&await v(T)};return s.jsxs("div",{className:"file-upload-wrapper",children:[s.jsx("input",{ref:h,type:"file",onChange:x,style:{display:"none"},disabled:m.isUploading}),s.jsx("button",{onClick:b,disabled:m.isUploading,className:"file-upload-btn",title:"Attach file",children:""}),m.isUploading&&m.progress&&s.jsxs("div",{className:"file-upload-progress",children:[s.jsxs("div",{className:"file-upload-progress-name",children:["Uploading ",m.fileName]}),s.jsx("div",{className:"file-upload-progress-bar-track",children:s.jsx("div",{className:"file-upload-progress-bar-fill",style:{width:`${m.progress.percentage}%`}})}),s.jsxs("div",{className:"file-upload-progress-text",children:[m.progress.percentage,"% (",hu(m.progress.loaded)," / ",hu(m.progress.total),")"]})]})]})},Y0=({channelId:r,token:l,keyPair:u,encryptionEnabled:o,children:h})=>{const[m,p]=w.useState(!1),[b,v]=w.useState({isUploading:!1,progress:null,fileName:""}),x=w.useRef(0),A=w.useCallback(L=>{L.preventDefault(),L.stopPropagation(),x.current++,L.dataTransfer.items&&L.dataTransfer.items.length>0&&p(!0)},[]),T=w.useCallback(L=>{L.preventDefault(),L.stopPropagation(),x.current--,x.current===0&&p(!1)},[]),X=w.useCallback(L=>{L.preventDefault(),L.stopPropagation()},[]),O=w.useCallback(async L=>{L.preventDefault(),L.stopPropagation(),p(!1),x.current=0;const I=L.dataTransfer.files;if(!I||I.length===0)return;const te=I[0];v({isUploading:!0,progress:{loaded:0,total:te.size,percentage:0},fileName:te.name});try{let oe=te,ge;if(o&&u)try{const fe=await Sa(u.privateKey,r),de=await te.arrayBuffer(),ke=await oy(fe,de);ge=await ry(fe,te.name),oe=new File([ke],"encrypted_file",{type:"application/octet-stream"})}catch(fe){console.warn("Failed to encrypt file, uploading plaintext:",fe)}await $.uploadFile(r,oe,l,ge,(fe,de)=>{const ke=Math.round(fe/de*100);v(Ge=>({...Ge,progress:{loaded:fe,total:de,percentage:ke}}))}),v({isUploading:!1,progress:null,fileName:""})}catch(oe){console.error("File upload failed:",oe),alert(`File upload failed: ${oe instanceof Error?oe.message:"Unknown error"}`),v({isUploading:!1,progress:null,fileName:""})}},[r,l,u,o]);return s.jsxs("div",{className:"file-drop-zone",onDragEnter:A,onDragLeave:T,onDragOver:X,onDrop:O,children:[h,m&&s.jsx("div",{className:"file-drop-overlay",children:s.jsxs("div",{className:"file-drop-overlay-content",children:[s.jsx("span",{className:"file-drop-icon",children:""}),s.jsx("span",{children:"Drop file to upload"})]})}),b.isUploading&&b.progress&&s.jsxs("div",{className:"file-drop-upload-toast",children:[s.jsxs("div",{className:"file-upload-progress-name",children:["Uploading ",b.fileName]}),s.jsx("div",{className:"file-upload-progress-bar-track",children:s.jsx("div",{className:"file-upload-progress-bar-fill",style:{width:`${b.progress.percentage}%`}})}),s.jsxs("div",{className:"file-upload-progress-text",children:[b.progress.percentage,"%"]})]})]})},G0=({file:r,token:l,channelId:u,keyPair:o,encryptionEnabled:h})=>{const[m,p]=w.useState(r.encrypted_filename),[b,v]=w.useState(null),[x,A]=w.useState(!1);w.useEffect(()=>{let O=!1;return(async()=>{let I=r.encrypted_filename;if(h&&o)try{const te=await Sa(o.privateKey,u);I=await Af(te,r.encrypted_filename)}catch{}if(!O&&(p(I),Z0(I)))try{const te=await $.downloadFile(r.id,l);let oe=te;if(h&&o)try{const ge=await Sa(o.privateKey,u);oe=await Tf(ge,te)}catch{}if(!O){const ge=new Blob([oe]);v(URL.createObjectURL(ge))}}catch{}})(),()=>{O=!0}},[r.id,r.encrypted_filename,u,l,o,h]),w.useEffect(()=>()=>{b&&URL.revokeObjectURL(b)},[b]);const T=async()=>{A(!0);try{const O=await $.downloadFile(r.id,l);let L=O,I=m;if(h&&o)try{const fe=await Sa(o.privateKey,u);L=await Tf(fe,O),I=await Af(fe,r.encrypted_filename)}catch{}const te=new Blob([L]),oe=URL.createObjectURL(te),ge=document.createElement("a");ge.href=oe,ge.download=I,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(oe)}catch(O){console.error("Download failed:",O),alert(`Download failed: ${O instanceof Error?O.message:"Unknown error"}`)}finally{A(!1)}},X=dy(m);return s.jsxs("div",{className:"file-attachment",children:[b&&s.jsx("div",{className:"file-attachment-image-preview",children:s.jsx("img",{src:b,alt:m,onClick:T})}),s.jsxs("div",{className:"file-attachment-info",children:[s.jsx("span",{className:"file-attachment-icon",children:X}),s.jsxs("div",{className:"file-attachment-details",children:[s.jsx("span",{className:"file-attachment-name",title:m,children:m}),s.jsx("span",{className:"file-attachment-size",children:hu(r.file_size_bytes)})]}),s.jsx("button",{className:"file-attachment-download",onClick:T,disabled:x,title:"Download",children:x?"":""})]})]})},V0=({channelId:r,token:l,keyPair:u,encryptionEnabled:o})=>{const[h,m]=w.useState([]),[p,b]=w.useState(!1),[v,x]=w.useState(!1),A=w.useCallback(async()=>{if(v){b(!0);try{const L=await $.getChannelFiles(r,l);m(L)}catch(L){console.error("Failed to load files:",L)}finally{b(!1)}}},[r,l,v]);w.useEffect(()=>{A()},[A]);const T=async L=>{try{const I=await $.downloadFile(L.id,l);let te=I,oe=L.encrypted_filename;if(o&&u)try{const ke=await Sa(u.privateKey,r);te=await Tf(ke,I),oe=await Af(ke,L.encrypted_filename)}catch(ke){console.warn("Failed to decrypt file, using encrypted data:",ke)}const ge=new Blob([te]),fe=URL.createObjectURL(ge),de=document.createElement("a");de.href=fe,de.download=oe,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(fe)}catch(I){console.error("File download failed:",I),alert(`File download failed: ${I instanceof Error?I.message:"Unknown error"}`)}},X=async L=>{if(confirm(`Are you sure you want to delete "${L.encrypted_filename}"?`))try{await $.deleteFile(L.id,l),await A()}catch(I){console.error("File deletion failed:",I),alert(`File deletion failed: ${I instanceof Error?I.message:"Unknown error"}`)}},O=L=>{const I=new Date(L*1e3);return I.toLocaleDateString()+" "+I.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return s.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[s.jsx("button",{onClick:()=>x(!v),className:"file-list-toggle-btn",title:"Show files",children:""}),v&&s.jsxs("div",{className:"file-list-panel",children:[s.jsxs("div",{className:"file-list-header",children:[s.jsx("div",{className:"file-list-title",children:"Channel Files"}),s.jsx("button",{className:"file-list-close",onClick:()=>x(!1),children:""})]}),p?s.jsx("div",{className:"file-list-empty",children:"Loading files..."}):h.length===0?s.jsx("div",{className:"file-list-empty",children:"No files uploaded yet"}):s.jsx("div",{className:"file-list-items",children:h.map(L=>s.jsxs("div",{className:"file-list-item",children:[s.jsx("div",{className:"file-list-item-icon",children:dy(L.encrypted_filename)}),s.jsxs("div",{className:"file-list-item-info",children:[s.jsx("div",{className:"file-list-item-name",children:L.encrypted_filename}),s.jsxs("div",{className:"file-list-item-meta",children:[hu(L.file_size_bytes),"  ",O(L.created_at)]})]}),s.jsxs("div",{className:"file-list-item-actions",children:[s.jsx("button",{onClick:()=>T(L),className:"file-list-item-download",title:"Download",children:""}),s.jsx("button",{onClick:()=>X(L),className:"file-list-item-delete",title:"Delete",children:""})]})]},L.id))})]})]})};function hu(r){if(r===0)return"0 B";const l=1024,u=["B","KB","MB","GB"],o=Math.floor(Math.log(r)/Math.log(l));return parseFloat((r/Math.pow(l,o)).toFixed(1))+" "+u[o]}function Z0(r){var u;const l=((u=r.split(".").pop())==null?void 0:u.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(l)}function dy(r){var u;const l=((u=r.split(".").pop())==null?void 0:u.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(l)?"":["mp4","webm","mov","avi"].includes(l)?"":["mp3","wav","ogg","flac","aac"].includes(l)?"":["pdf"].includes(l)?"":["zip","tar","gz","rar","7z"].includes(l)?"":["doc","docx","txt","md","rtf"].includes(l)?"":["xls","xlsx","csv"].includes(l)?"":["js","ts","py","rs","go","c","cpp","h","java"].includes(l)?"":["json","yaml","yml","toml","xml"].includes(l)?"":""}const X0=[{name:"Smileys",emojis:["","","","","","","","","","","",""]},{name:"Reactions",emojis:["","","","","","","","","","","",""]},{name:"Objects",emojis:["","","","","","","","","","","",""]}],Q0=({isOpen:r,onToggle:l,onSelect:u,onClose:o})=>{const h=w.useRef(null);return w.useEffect(()=>{if(!r)return;const m=p=>{h.current&&!h.current.contains(p.target)&&o()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[r,o]),s.jsxs("div",{className:"emoji-picker-wrapper",ref:h,children:[s.jsx("button",{className:"emoji-picker-toggle",onClick:l,title:"Emoji picker",type:"button",children:""}),r&&s.jsx("div",{className:"emoji-picker-popup",children:X0.map(m=>s.jsxs("div",{className:"emoji-picker-category",children:[s.jsx("div",{className:"emoji-picker-category-label",children:m.name}),s.jsx("div",{className:"emoji-picker-grid",children:m.emojis.map(p=>s.jsx("button",{className:"emoji-picker-item",onClick:()=>u(p),type:"button",children:p},p))})]},m.name))})]})},I0=({ws:r,currentUserId:l,channelId:u,channelName:o,onLeave:h,privateKey:m})=>{const[p,b]=w.useState({channelId:null,isConnected:!1,isMuted:!0,isDeafened:!1,outputVolume:100,connectedUsers:[],isCapturingAudio:!1,vadThreshold:.01,isSpeaking:!1}),v=w.useRef(null),x=w.useRef(null),A=w.useRef(null),T=w.useRef(null),X=w.useRef(null),O=w.useRef(new Map),L=w.useRef(null),I=w.useRef(null),te=w.useCallback(async()=>{try{v.current=new(window.AudioContext||window.webkitAudioContext);const re=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}});x.current=re,A.current=v.current.createAnalyser(),A.current.fftSize=2048,A.current.smoothingTimeConstant=.8,T.current=v.current.createMediaStreamSource(re),X.current=v.current.createScriptProcessor(4096,1,1),T.current.connect(A.current),A.current.connect(X.current),X.current.connect(v.current.destination),X.current.onaudioprocess=Ue=>{if(p.isMuted)return;const je=Ue.inputBuffer.getChannelData(0),ye=new Int16Array(je.length);for(let U=0;U<je.length;U++)ye[U]=Math.max(-1,Math.min(1,je[U]))*32767;const se=ye.buffer,Y=btoa(String.fromCharCode(...new Uint8Array(se)));r&&r.isSocketConnected()&&(async()=>{let E=Y;if(m)try{const K=await Sa(m,u);E=await du(K,Y)}catch{}r.send(JSON.stringify({type:"voice_packet",channel_id:u,user_id:l,data:E,encrypted:!!m}))})()},b(Ue=>({...Ue,isCapturingAudio:!0})),oe()}catch(re){console.error("Failed to initialize audio:",re),alert("Failed to access microphone. Please check permissions.")}},[r,u,l,p.isMuted]),oe=w.useCallback(()=>{L.current||(L.current=setInterval(()=>{if(!A.current||p.isMuted)return;const re=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(re);const ye=re.reduce((se,Y)=>se+Y,0)/re.length/255>p.vadThreshold;ye!==p.isSpeaking&&(b(se=>({...se,isSpeaking:ye})),r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_speaking",channel_id:u,user_id:l,speaking:ye})),I.current&&clearTimeout(I.current),ye||(I.current=setTimeout(()=>{b(se=>({...se,isSpeaking:!1})),r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_speaking",channel_id:u,user_id:l,speaking:!1}))},500)))},100))},[A,p.isMuted,p.vadThreshold,p.isSpeaking,r,u,l]),ge=w.useCallback(()=>{L.current&&(clearInterval(L.current),L.current=null),I.current&&(clearTimeout(I.current),I.current=null)},[]),fe=w.useCallback(async(re,Ue)=>{if(!p.isDeafened)try{const je=atob(Ue),ye=new Uint8Array(je.length);for(let Z=0;Z<je.length;Z++)ye[Z]=je.charCodeAt(Z);const se=new Int16Array(ye.buffer),Y=new Float32Array(se.length);for(let Z=0;Z<se.length;Z++)Y[Z]=se[Z]/32767;let U=O.current.get(re);if(!U){const Z=new(window.AudioContext||window.webkitAudioContext),ne=Z.createGain();ne.connect(Z.destination),ne.gain.value=p.outputVolume/100,U={context:Z,gainNode:ne},O.current.set(re,U)}const E=U.context.createBuffer(1,Y.length,44100);E.copyToChannel(Y,0);const K=U.context.createBufferSource();K.buffer=E,K.connect(U.gainNode),K.start()}catch(je){console.error("Failed to play audio:",je)}},[p.isDeafened,p.outputVolume]),de=w.useCallback(async()=>{if(!p.isConnected)try{await te(),r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_join",channel_id:u,user_id:l})),b(re=>({...re,channelId:u,isConnected:!0}))}catch(re){console.error("Failed to connect to voice:",re)}},[te,r,u,l,p.isConnected]),ke=w.useCallback(()=>{r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_leave",channel_id:u,user_id:l})),ge(),X.current&&(X.current.disconnect(),X.current=null),T.current&&(T.current.disconnect(),T.current=null),A.current&&(A.current.disconnect(),A.current=null),x.current&&(x.current.getTracks().forEach(re=>re.stop()),x.current=null),v.current&&(v.current.close(),v.current=null),O.current.forEach(re=>{re.context.close()}),O.current.clear(),b(re=>({...re,channelId:null,isConnected:!1,connectedUsers:[],isCapturingAudio:!1,isSpeaking:!1})),h()},[r,u,l,ge,h]),Ge=w.useCallback(()=>{b(re=>({...re,isMuted:!re.isMuted}))},[]),Te=w.useCallback(()=>{b(re=>({...re,isDeafened:!re.isDeafened,isMuted:re.isDeafened?re.isMuted:!0}))},[]),we=w.useCallback(re=>{b(Ue=>({...Ue,outputVolume:Math.max(0,Math.min(100,re))})),O.current.forEach(Ue=>{Ue.gainNode.gain.value=re/100})},[]);return w.useEffect(()=>{if(!r)return;const re=se=>{se.channel_id===u&&b(Y=>{var U,E;return{...Y,connectedUsers:[...Y.connectedUsers.filter(K=>K.userId!==se.user_id),{userId:se.user_id,displayName:((U=se.public_key_hash)==null?void 0:U.slice(0,16))||`User ${(E=se.user_id)==null?void 0:E.slice(0,8)}`,isSpeaking:!1,audioLevel:0}]}})},Ue=se=>{if(se.channel_id!==u)return;b(U=>({...U,connectedUsers:U.connectedUsers.filter(E=>E.userId!==se.user_id)}));const Y=O.current.get(se.user_id);Y&&(Y.context.close(),O.current.delete(se.user_id))},je=async se=>{if(se.channel_id!==u||se.user_id===l)return;let Y=se.data;if(se.encrypted&&m)try{const U=await Sa(m,u);Y=await fu(U,se.data)}catch{}fe(se.user_id,Y)},ye=se=>{se.channel_id===u&&b(Y=>({...Y,connectedUsers:Y.connectedUsers.map(U=>U.userId===se.user_id?{...U,isSpeaking:se.speaking}:U)}))};return r.on("voice_join",re),r.on("voice_leave",Ue),r.on("voice_packet",je),r.on("voice_speaking",ye),()=>{r.off("voice_join",re),r.off("voice_leave",Ue),r.off("voice_packet",je),r.off("voice_speaking",ye)}},[r,u,l,fe]),w.useEffect(()=>(de(),()=>{ke()}),[]),s.jsxs("div",{style:{position:"fixed",bottom:0,left:"312px",right:"240px",height:"120px",background:"#2f3136",borderTop:"1px solid #202225",display:"flex",flexDirection:"column",zIndex:1e3},children:[s.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #202225",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"#43b581"},children:" Voice Connected"}),s.jsx("span",{style:{fontSize:"13px",color:"#b9bbbe"},children:o})]}),s.jsx("button",{onClick:ke,style:{background:"#f04747",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Disconnect"})]}),s.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[s.jsxs("span",{style:{fontSize:"12px",color:"#8e9297",marginRight:"8px"},children:["Users (",p.connectedUsers.length+1,"):"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"4px",background:p.isSpeaking?"rgba(67, 181, 129, 0.3)":"transparent",border:p.isSpeaking?"2px solid #43b581":"2px solid transparent",transition:"all 0.2s"},children:[s.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#fff"},children:"U"}),s.jsx("span",{style:{fontSize:"12px",color:"#dcddde"},children:"You"}),p.isMuted&&s.jsx("span",{style:{fontSize:"10px",color:"#f04747"},children:""})]}),p.connectedUsers.map(re=>{var Ue;return s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"4px",background:re.isSpeaking?"rgba(67, 181, 129, 0.3)":"transparent",border:re.isSpeaking?"2px solid #43b581":"2px solid transparent",transition:"all 0.2s"},children:[s.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#fff"},children:(Ue=re.displayName[0])==null?void 0:Ue.toUpperCase()}),s.jsx("span",{style:{fontSize:"12px",color:"#dcddde"},children:re.displayName})]},re.userId)})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("button",{onClick:Ge,style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",background:p.isMuted?"#f04747":"#3ba55d",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},title:p.isMuted?"Unmute":"Mute",children:p.isMuted?"":""}),s.jsx("button",{onClick:Te,style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",background:p.isDeafened?"#f04747":"#4f545c",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},title:p.isDeafened?"Undeafen":"Deafen",children:p.isDeafened?"":""}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"120px"},children:[s.jsx("span",{style:{fontSize:"12px",color:"#8e9297"},children:"Vol:"}),s.jsx("input",{type:"range",min:"0",max:"100",value:p.outputVolume,onChange:re=>we(parseInt(re.target.value)),style:{flex:1,height:"4px",borderRadius:"2px",background:"#4f545c",outline:"none",cursor:"pointer"}}),s.jsxs("span",{style:{fontSize:"11px",color:"#8e9297",minWidth:"25px"},children:[p.outputVolume,"%"]})]})]})]})]})},J0=({isVisible:r,onClose:l,nodeId:u,channels:o,token:h,onNavigateToMessage:m})=>{const[p,b]=w.useState(""),[v,x]=w.useState(""),[A,T]=w.useState([]),[X,O]=w.useState(!1),[L,I]=w.useState(""),[te,oe]=w.useState(""),ge=w.useRef(null),fe=w.useRef(void 0);w.useEffect(()=>{r&&ge.current&&ge.current.focus()},[r]);const de=w.useCallback(async(we,re)=>{if(!u||!h||!we.trim()){T([]),oe("");return}O(!0),I("");try{const Ue=await $.searchMessages(u,we.trim(),h,re||void 0);T(Ue.results),oe(Ue.note||"")}catch(Ue){I(Ue instanceof Error?Ue.message:"Search failed"),T([]),oe("")}finally{O(!1)}},[u,h]),ke=w.useCallback(we=>{b(we),fe.current&&window.clearTimeout(fe.current),fe.current=window.setTimeout(()=>{de(we,v)},300)},[de,v]),Ge=w.useCallback(we=>{x(we),p.trim()&&de(p,we)},[p,de]),Te=we=>{m(we.channel_id,we.message_id),l()};return w.useEffect(()=>{const we=re=>{re.key==="Escape"&&r&&l()};if(r)return document.addEventListener("keydown",we),()=>{document.removeEventListener("keydown",we)}},[r,l]),w.useEffect(()=>()=>{fe.current&&window.clearTimeout(fe.current)},[]),r?s.jsxs("div",{className:"search-overlay",children:[s.jsx("div",{className:"search-overlay-backdrop",onClick:l}),s.jsxs("div",{className:"search-overlay-content",children:[s.jsxs("div",{className:"search-overlay-header",children:[s.jsx("h3",{children:"Search Messages"}),s.jsx("button",{className:"search-overlay-close",onClick:l,children:""})]}),s.jsxs("div",{className:"search-overlay-body",children:[s.jsxs("div",{className:"search-controls",children:[s.jsxs("div",{className:"search-input-container",children:[s.jsx("input",{ref:ge,type:"text",placeholder:"Search messages...",value:p,onChange:we=>ke(we.target.value),className:"search-input"}),X&&s.jsx("div",{className:"search-loading",children:""})]}),s.jsx("div",{className:"search-filter",children:s.jsxs("select",{value:v,onChange:we=>Ge(we.target.value),className:"channel-filter-select",children:[s.jsx("option",{value:"",children:"All channels"}),o.map(we=>s.jsxs("option",{value:we.id,children:["#",we.name]},we.id))]})})]}),te&&s.jsxs("div",{className:"search-note",children:[" ",te]}),L&&s.jsxs("div",{className:"search-error",children:[" ",L]}),s.jsxs("div",{className:"search-results",children:[A.length===0&&p.trim()&&!X&&!L&&s.jsxs("div",{className:"search-no-results",children:['No messages found for "',p,'"']}),A.map(we=>{var re;return s.jsxs("div",{className:"search-result",onClick:()=>Te(we),children:[s.jsxs("div",{className:"search-result-header",children:[s.jsx("span",{className:"search-result-sender",children:((re=we.sender_public_key_hash)==null?void 0:re.slice(0,16))||"Unknown"}),s.jsxs("span",{className:"search-result-channel",children:["#",we.channel_name]}),s.jsx("span",{className:"search-result-time",children:new Date(we.timestamp).toLocaleString()})]}),s.jsx("div",{className:"search-result-snippet",children:"Click to view message"})]},we.message_id)})]})]}),s.jsx("div",{className:"search-overlay-footer",children:s.jsx("div",{className:"search-encryption-note",children:" Content search requires client-side decryption"})})]})]}):null};function $0({isOpen:r,onClose:l,node:u,token:o,userRole:h,onNodeUpdated:m,onLeaveNode:p}){const[b,v]=w.useState("general"),[x,A]=w.useState([]),[T,X]=w.useState(!1),[O,L]=w.useState(""),[I,te]=w.useState(""),[oe,ge]=w.useState([]),[fe,de]=w.useState(!1),[ke,Ge]=w.useState("all"),[Te,we]=w.useState(!0),[re,Ue]=w.useState(),[je,ye]=w.useState(u.name),[se,Y]=w.useState(u.description||""),[U,E]=w.useState(!1),[K,Z]=w.useState(!1),[ne,ce]=w.useState(""),[S,D]=w.useState(""),[H,ie]=w.useState(!1),P=h==="admin",ae=h==="admin"||h==="moderator",be=h==="admin"||h==="moderator",Me=w.useCallback(async()=>{if(ae){X(!0),L("");try{const le=await $.getNodeInvites(u.id,o);A(le)}catch(le){L(le instanceof Error?le.message:"Failed to load invites")}finally{X(!1)}}},[u.id,o,ae]),Be=w.useCallback(async()=>{ie(!0),L("");try{const le=ne?parseInt(ne,10):void 0,Ie=S?parseInt(S,10):void 0;await $.createInviteWithOptions(u.id,o,le,Ie),te("Invite created successfully!"),ce(""),D(""),Z(!1),await Me()}catch(le){L(le instanceof Error?le.message:"Failed to create invite")}finally{ie(!1)}},[u.id,o,ne,S,Me]),He=w.useCallback(async le=>{if(confirm("Are you sure you want to revoke this invite?"))try{await $.revokeInvite(u.id,le,o),te("Invite revoked successfully!"),await Me()}catch(Ie){L(Ie instanceof Error?Ie.message:"Failed to revoke invite")}},[u.id,o,Me]),Fe=w.useCallback(async(le=!1)=>{if(be){de(!0),L("");try{const Ie=le?void 0:re,k=await $.getNodeAuditLog(u.id,o,50,Ie),pe=Array.isArray(k==null?void 0:k.entries)?k.entries:[];ge(le?pe:Oe=>[...Oe,...pe]),we((k==null?void 0:k.has_more)??!1),Ue(k==null?void 0:k.next_cursor)}catch(Ie){L(Ie instanceof Error?Ie.message:"Failed to load audit log")}finally{de(!1)}}},[u.id,o,be,re]),Jt=w.useCallback(async()=>{!Te||fe||await Fe(!1)},[Te,fe,Fe]),Et=w.useCallback(()=>ke==="all"?oe:oe.filter(le=>le.action===ke),[oe,ke]),Vt=le=>{switch(le){case"channel_create":return"";case"channel_delete":return"";case"member_kick":return"";case"member_ban":return"";case"role_change":return"";case"invite_create":return"";case"invite_revoke":return"";case"message_pin":return"";case"message_unpin":return"";case"message_delete":return"";case"node_settings_update":return"";default:return""}},Bt=le=>{const Ie=le.details?JSON.parse(le.details):{};switch(le.action){case"channel_create":return`created channel #${Ie.channel_name||"unknown"}`;case"channel_delete":return`deleted channel #${Ie.channel_name||"unknown"}`;case"member_kick":return"kicked a user";case"member_ban":return"banned a user";case"role_change":return`changed user role to ${Ie.new_role||"unknown"}`;case"invite_create":return"created an invite";case"invite_revoke":return`revoked invite ${Ie.invite_code||"unknown"}`;case"message_pin":return"pinned a message";case"message_unpin":return"unpinned a message";case"message_delete":return"deleted a message";case"node_settings_update":return"updated node settings";default:return le.action.replace(/_/g," ")}},sn=w.useCallback(async()=>{if(P){E(!0),L("");try{if(te("Node settings saved!"),m){const le={...u,name:je,description:se};m(le)}}catch(le){L(le instanceof Error?le.message:"Failed to update node")}finally{E(!1)}}},[P,je,se,u,m]),Rn=w.useCallback(async()=>{if(confirm(P?"Are you sure you want to leave this Node? As the admin, this will delete the Node permanently!":"Are you sure you want to leave this Node?"))try{await $.leaveNode(u.id,o),te("Left Node successfully!"),setTimeout(()=>{p==null||p(),l()},1e3)}catch(Ie){L(Ie instanceof Error?Ie.message:"Failed to leave node")}},[P,u.id,o,p,l]),$t=le=>{navigator.clipboard.writeText(le).then(()=>{te("Invite code copied to clipboard!")}).catch(()=>{const Ie=document.createElement("textarea");Ie.value=le,document.body.appendChild(Ie),Ie.select(),document.execCommand("copy"),document.body.removeChild(Ie),te("Invite code copied to clipboard!")})},en=le=>new Date(le*1e3).toLocaleDateString()+" "+new Date(le*1e3).toLocaleTimeString(),gn=le=>!!(le.expires_at&&le.expires_at*1e3<Date.now()),cn=le=>!!(le.max_uses&&le.uses>=le.max_uses);return w.useEffect(()=>{r&&b==="invites"&&ae&&Me()},[r,b,ae,Me]),w.useEffect(()=>{r&&b==="audit"&&be&&Fe(!0)},[r,b,be,Fe]),w.useEffect(()=>{if(I){const le=setTimeout(()=>te(""),3e3);return()=>clearTimeout(le)}},[I]),w.useEffect(()=>{if(O){const le=setTimeout(()=>L(""),5e3);return()=>clearTimeout(le)}},[O]),r?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:s.jsxs("div",{style:{background:"#36393f",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",color:"#ffffff",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #40444b",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Node Settings"}),s.jsx("button",{onClick:l,style:{background:"none",border:"none",color:"#b9bbbe",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:1},children:""})]}),s.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #40444b",background:"#2f3136"},children:[s.jsx("button",{onClick:()=>v("general"),style:{background:b==="general"?"#40444b":"transparent",border:"none",color:b==="general"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"General"}),ae&&s.jsx("button",{onClick:()=>v("invites"),style:{background:b==="invites"?"#40444b":"transparent",border:"none",color:b==="invites"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Invites"}),be&&s.jsx("button",{onClick:()=>v("audit"),style:{background:b==="audit"?"#40444b":"transparent",border:"none",color:b==="audit"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Audit Log"})]}),s.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[b==="general"&&s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"16px"},children:[s.jsxs("div",{onClick:()=>{if(!P)return;const le=document.createElement("input");le.type="file",le.accept="image/png,image/jpeg,image/gif,image/webp",le.onchange=async Ie=>{var pe;const k=(pe=Ie.target.files)==null?void 0:pe[0];if(k){if(k.size>256*1024){L("Icon must be under 256KB");return}try{L("");const Oe=await $.uploadNodeIcon(u.id,k,o);te("Node icon updated!"),m&&m({...u,icon_hash:Oe.icon_hash})}catch(Oe){L(Oe instanceof Error?Oe.message:"Failed to upload icon")}}},le.click()},style:{width:"80px",height:"80px",borderRadius:"50%",background:"#40444b",display:"flex",alignItems:"center",justifyContent:"center",cursor:P?"pointer":"default",overflow:"hidden",fontSize:"32px",color:"#b9bbbe",flexShrink:0,position:"relative"},title:P?"Click to upload icon":"Node icon",children:[u.icon_hash?s.jsx("img",{src:`${$.getNodeIconUrl(u.id)}?v=${u.icon_hash}`,alt:u.name[0],style:{width:"100%",height:"100%",objectFit:"cover"}}):u.name[0],P&&s.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",fontSize:"10px",textAlign:"center",padding:"2px",color:"#fff"},children:"EDIT"})]}),s.jsx("div",{style:{color:"#b9bbbe",fontSize:"13px"},children:P?"Click the icon to upload a new one (PNG, JPEG, GIF, WebP  max 256KB)":"Node icon"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Node Name"}),s.jsx("input",{type:"text",value:je,onChange:le=>ye(le.target.value),disabled:!P||U,maxLength:32,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"none",background:P?"#40444b":"#2f3136",color:"#ffffff",fontSize:"14px"}})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Description"}),s.jsx("textarea",{value:se,onChange:le=>Y(le.target.value),disabled:!P||U,maxLength:200,rows:3,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"none",background:P?"#40444b":"#2f3136",color:"#ffffff",fontSize:"14px",resize:"vertical"}})]}),P&&s.jsx("div",{style:{marginBottom:"20px"},children:s.jsx("button",{onClick:sn,disabled:U,style:{background:"#43b581",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:U?"not-allowed":"pointer",fontSize:"14px",opacity:U?.6:1},children:U?"Saving...":"Save Changes"})}),s.jsxs("div",{style:{marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #40444b"},children:[s.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",color:P?"#f04747":"#faa61a"},children:P?"Delete Node":"Leave Node"}),s.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#b9bbbe"},children:P?"Permanently delete this Node. This action cannot be undone.":"Leave this Node. You can rejoin later with an invite."}),s.jsx("button",{onClick:Rn,style:{background:P?"#f04747":"#faa61a",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:P?"Delete Node":"Leave Node"})]})]}),b==="invites"&&ae&&s.jsxs("div",{children:[s.jsx("div",{style:{marginBottom:"24px"},children:K?s.jsxs("div",{style:{background:"#40444b",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[s.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Create New Invite"}),s.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Max Uses (optional)"}),s.jsx("input",{type:"number",placeholder:"",value:ne,onChange:le=>ce(le.target.value),min:"1",max:"100",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#ffffff",fontSize:"14px"}})]}),s.jsxs("div",{style:{flex:1},children:[s.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Expires in (hours)"}),s.jsx("input",{type:"number",placeholder:"Never",value:S,onChange:le=>D(le.target.value),min:"1",max:"8760",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#ffffff",fontSize:"14px"}})]})]}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx("button",{onClick:Be,disabled:H,style:{background:"#43b581",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:H?"not-allowed":"pointer",fontSize:"13px",opacity:H?.6:1},children:H?"Creating...":"Create"}),s.jsx("button",{onClick:()=>{Z(!1),ce(""),D("")},disabled:H,style:{background:"#4f545c",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:H?"not-allowed":"pointer",fontSize:"13px"},children:"Cancel"})]})]}):s.jsx("button",{onClick:()=>Z(!0),style:{background:"#7289da",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:" Create Invite"})}),s.jsxs("div",{children:[s.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Active Invites"}),T?s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading invites..."}):x.length===0?s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No active invites"}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:x.map(le=>{const Ie=gn(le),k=cn(le),pe=Ie||k;return s.jsxs("div",{style:{background:"#40444b",padding:"12px",borderRadius:"6px",border:pe?"1px solid #f04747":"none",opacity:pe?.7:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsx("code",{style:{background:"#2f3136",padding:"4px 8px",borderRadius:"4px",fontSize:"13px",fontFamily:"monospace"},children:le.code}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx("button",{onClick:()=>$t(le.code),disabled:pe,style:{background:"#7289da",border:"none",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",cursor:pe?"not-allowed":"pointer",fontSize:"12px",opacity:pe?.5:1},children:"Copy"}),s.jsx("button",{onClick:()=>He(le.code),style:{background:"#f04747",border:"none",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Revoke"})]})]}),s.jsxs("div",{style:{fontSize:"12px",color:"#b9bbbe",display:"flex",flexWrap:"wrap",gap:"16px"},children:[s.jsxs("span",{children:["Created: ",en(le.created_at)]}),s.jsxs("span",{children:["Uses: ",le.uses,le.max_uses?`/${le.max_uses}`:""]}),le.expires_at&&s.jsxs("span",{style:{color:Ie?"#f04747":"#b9bbbe"},children:[Ie?"Expired: ":"Expires: ",en(le.expires_at)]}),k&&s.jsx("span",{style:{color:"#f04747"},children:"Max uses reached"})]})]},le.code)})})]})]}),b==="audit"&&be&&s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Filter by Action"}),s.jsxs("select",{value:ke,onChange:le=>Ge(le.target.value),style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#40444b",color:"#ffffff",fontSize:"14px",cursor:"pointer",minWidth:"200px"},children:[s.jsx("option",{value:"all",children:"All Actions"}),s.jsx("option",{value:"channel_create",children:"Channel Create"}),s.jsx("option",{value:"channel_delete",children:"Channel Delete"}),s.jsx("option",{value:"member_kick",children:"Member Kick"}),s.jsx("option",{value:"role_change",children:"Role Change"}),s.jsx("option",{value:"invite_create",children:"Invite Create"}),s.jsx("option",{value:"invite_revoke",children:"Invite Revoke"}),s.jsx("option",{value:"message_pin",children:"Message Pin"}),s.jsx("option",{value:"message_unpin",children:"Message Unpin"}),s.jsx("option",{value:"message_delete",children:"Message Delete"}),s.jsx("option",{value:"node_settings_update",children:"Settings Update"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Recent Activity"}),fe&&oe.length===0?s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading audit log..."}):Et().length===0?s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No audit entries found"}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"400px",overflowY:"auto"},children:[Et().map(le=>{var Ie;return s.jsxs("div",{style:{background:"#40444b",padding:"12px",borderRadius:"6px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[s.jsx("div",{style:{fontSize:"18px",marginTop:"2px"},children:Vt(le.action)}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{marginBottom:"4px",fontSize:"14px"},children:[s.jsx("span",{style:{fontWeight:"600",color:"#ffffff"},children:((Ie=le.actor_public_key_hash)==null?void 0:Ie.slice(0,16))||"Unknown"})," ",s.jsx("span",{style:{color:"#b9bbbe"},children:Bt(le)})]}),s.jsxs("div",{style:{fontSize:"12px",color:"#72767d",display:"flex",alignItems:"center",gap:"16px"},children:[s.jsx("span",{children:en(le.created_at)}),s.jsx("span",{style:{background:"#2f3136",padding:"2px 6px",borderRadius:"3px",fontSize:"11px",fontFamily:"monospace"},children:le.target_type})]})]})]},le.id)}),Te&&s.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:s.jsx("button",{onClick:Jt,disabled:fe,style:{background:"#7289da",border:"none",color:"#ffffff",padding:"8px 16px",borderRadius:"4px",cursor:fe?"not-allowed":"pointer",fontSize:"13px",opacity:fe?.6:1},children:fe?"Loading...":"Load More"})})]})]})]})]}),(O||I)&&s.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",background:O?"#f04747":"#43b581",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",maxWidth:"300px",zIndex:1002},children:O||I})]})}):null}class F0{constructor(){ue(this,"preferences");ue(this,"unreads",{});ue(this,"currentUsername","");ue(this,"windowFocused",!0);ue(this,"activeChannelId",null);ue(this,"audioContext",null);this.preferences=this.loadPreferences(),this.setupWindowFocusHandlers(),this.requestNotificationPermission(),this.initAudioContext()}loadPreferences(){const l=localStorage.getItem("accord_notification_preferences");return l?JSON.parse(l):{enabled:!0,mode:"all",sounds:!0}}savePreferences(){localStorage.setItem("accord_notification_preferences",JSON.stringify(this.preferences))}loadUnreads(){const l=localStorage.getItem("accord_unreads");return l?JSON.parse(l):{}}saveUnreads(){localStorage.setItem("accord_unreads",JSON.stringify(this.unreads))}setupWindowFocusHandlers(){window.addEventListener("focus",()=>{this.windowFocused=!0}),window.addEventListener("blur",()=>{this.windowFocused=!1}),this.windowFocused=document.hasFocus()}async requestNotificationPermission(){"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()}initAudioContext(){(typeof AudioContext<"u"||typeof window.webkitAudioContext<"u")&&(this.audioContext=new(AudioContext||window.webkitAudioContext))}setActiveChannel(l){this.activeChannelId=l}setCurrentUsername(l){this.currentUsername=l,this.unreads=this.loadUnreads()}getPreferences(){return{...this.preferences}}updatePreferences(l){this.preferences={...this.preferences,...l},this.savePreferences()}getNodeUnreads(l){const u=this.unreads[l];return u?{totalUnreads:u.totalUnreads,totalMentions:u.totalMentions}:{totalUnreads:0,totalMentions:0}}getChannelUnreads(l,u){const o=this.unreads[l];return!o||!o.channels[u]?{lastReadMessageId:null,count:0,mentions:0,lastMessageTimestamp:0}:o.channels[u]}markChannelAsRead(l,u,o){this.unreads[l]||(this.unreads[l]={totalUnreads:0,totalMentions:0,channels:{}}),this.unreads[l].channels[u]||(this.unreads[l].channels[u]={lastReadMessageId:null,count:0,mentions:0,lastMessageTimestamp:0});const h=this.unreads[l].channels[u];this.unreads[l].totalUnreads-=h.count,this.unreads[l].totalMentions-=h.mentions,h.count=0,h.mentions=0,o&&(h.lastReadMessageId=o,h.lastMessageTimestamp=Date.now()),this.unreads[l].totalUnreads=Math.max(0,this.unreads[l].totalUnreads),this.unreads[l].totalMentions=Math.max(0,this.unreads[l].totalMentions),this.saveUnreads()}addMessage(l,u,o){if(o.author===this.currentUsername)return;this.unreads[l]||(this.unreads[l]={totalUnreads:0,totalMentions:0,channels:{}}),this.unreads[l].channels[u]||(this.unreads[l].channels[u]={lastReadMessageId:null,count:0,mentions:0,lastMessageTimestamp:0});const h=this.unreads[l].channels[u];if(!h.lastReadMessageId||o.timestamp>h.lastMessageTimestamp){const p=this.containsMention(o.content);h.count++,this.unreads[l].totalUnreads++,p&&(h.mentions++,this.unreads[l].totalMentions++),h.lastMessageTimestamp=Math.max(h.lastMessageTimestamp,o.timestamp),this.saveUnreads(),this.handleMessageNotification(o,u,p)}}containsMention(l){if(!this.currentUsername)return!1;const u=l.toLowerCase(),o=this.currentUsername.toLowerCase();return u.includes(`@${o}`)||u.includes("@everyone")}highlightMentions(l){if(!this.currentUsername)return l;const u=window.DOMPurify;let h=u?u.sanitize(l,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}):this.escapeHtml(l);const m=this.escapeRegExp(this.currentUsername),p=new RegExp(`(@${m})`,"gi");h=h.replace(p,'<span class="mention">$1</span>');const b=new RegExp("(@everyone)","gi");return h=h.replace(b,'<span class="mention mention-everyone">$1</span>'),h}escapeHtml(l){const u=document.createElement("div");return u.textContent=l,u.innerHTML}escapeRegExp(l){return l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}handleMessageNotification(l,u,o){if(!this.preferences.enabled||this.windowFocused&&this.activeChannelId===u)return;(this.preferences.mode==="all"||this.preferences.mode==="mentions"&&o)&&(this.showDesktopNotification(l,u,o),this.preferences.sounds&&this.playNotificationSound())}showDesktopNotification(l,u,o){if("Notification"in window&&Notification.permission==="granted"){const h=o?`${l.author} mentioned you`:`${l.author}`,m=l.content.length>100?l.content.substring(0,100)+"...":l.content,p=new Notification(h,{body:m,icon:"/favicon.ico",badge:"/favicon.ico",tag:u});setTimeout(()=>{p.close()},5e3),p.onclick=()=>{window.focus(),p.close()}}}playNotificationSound(){if(this.audioContext)try{const l=this.audioContext.createOscillator(),u=this.audioContext.createGain();l.connect(u),u.connect(this.audioContext.destination),l.frequency.setValueAtTime(800,this.audioContext.currentTime),l.frequency.setValueAtTime(600,this.audioContext.currentTime+.1),u.gain.setValueAtTime(0,this.audioContext.currentTime),u.gain.linearRampToValueAtTime(.1,this.audioContext.currentTime+.01),u.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+.2),l.start(this.audioContext.currentTime),l.stop(this.audioContext.currentTime+.2)}catch(l){console.warn("Failed to play notification sound:",l)}}getAllUnreads(){return{...this.unreads}}clearAllUnreads(){this.unreads={},this.saveUnreads()}clearNodeUnreads(l){delete this.unreads[l],this.saveUnreads()}}const wt=new F0,W0=({isOpen:r,onClose:l,preferences:u,onPreferencesChange:o})=>{if(!r)return null;const h=A=>{const T={...u,mode:A};o(T)},m=()=>{const A={...u,enabled:!u.enabled};o(A)},p=()=>{const A={...u,sounds:!u.sounds};o(A)},b=()=>{"Notification"in window&&(Notification.permission==="granted"?new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"}):Notification.permission!=="denied"&&Notification.requestPermission().then(A=>{A==="granted"&&new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"})}))},v=()=>{u.sounds&&wt.playNotificationSound()},x=()=>{wt.clearAllUnreads(),o({...u})};return s.jsx("div",{className:"notification-modal",children:s.jsxs("div",{className:"notification-modal-content",children:[s.jsx("h3",{style:{margin:"0 0 16px 0",color:"#ffffff"},children:"Notification Settings"}),s.jsxs("div",{className:"notification-setting",children:[s.jsx("label",{children:"Enable Notifications"}),s.jsx("div",{className:`notification-checkbox ${u.enabled?"checked":""}`,onClick:m,children:u.enabled&&""})]}),s.jsxs("div",{className:"notification-setting",children:[s.jsx("label",{children:"Notification Mode"}),s.jsxs("div",{style:{display:"flex",gap:"4px"},children:[s.jsx("button",{className:`notification-toggle ${u.mode==="all"?"active":""}`,onClick:()=>h("all"),children:"All"}),s.jsx("button",{className:`notification-toggle ${u.mode==="mentions"?"active":""}`,onClick:()=>h("mentions"),children:"Mentions"}),s.jsx("button",{className:`notification-toggle ${u.mode==="none"?"active":""}`,onClick:()=>h("none"),children:"None"})]})]}),s.jsxs("div",{className:"notification-setting",children:[s.jsx("label",{children:"Sound Notifications"}),s.jsx("div",{className:`notification-checkbox ${u.sounds?"checked":""}`,onClick:p,children:u.sounds&&""})]}),s.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #40444b"},children:[s.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[s.jsx("button",{onClick:b,style:{flex:1,background:"#7289da",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Test Notification"}),s.jsx("button",{onClick:v,style:{flex:1,background:"#43b581",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Test Sound"})]}),s.jsx("button",{onClick:x,style:{width:"100%",background:"#f04747",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",marginBottom:"12px"},children:"Clear All Unread Counts"})]}),s.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"16px"},children:s.jsx("button",{onClick:l,style:{background:"#747f8d",border:"none",color:"#ffffff",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Close"})}),s.jsxs("div",{style:{fontSize:"11px",color:"#72767d",marginTop:"12px",lineHeight:"1.4"},children:[s.jsx("strong",{children:"Tips:"}),s.jsx("br",{})," Desktop notifications only show when window is not focused",s.jsx("br",{})," @username and @everyone will be highlighted in messages",s.jsx("br",{})," Orange badges show mentions, red badges show regular unreads"]})]})})},xg={displayName:"",bio:"",status:"online"},Sg={theme:"dark",fontSize:15,messageDensity:"comfortable"},wg={inputDevice:"default",outputDevice:"default",inputVolume:100,outputVolume:100,vadSensitivity:50,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},_g={readReceipts:!0,typingIndicators:!0,blockedUsers:[]},P0=({isOpen:r,onClose:l,currentUser:u,onUserUpdate:o,serverInfo:h})=>{const[m,p]=w.useState("account"),[b,v]=w.useState(xg),[x,A]=w.useState(Sg),[T,X]=w.useState(wt.getPreferences()),[O,L]=w.useState(wg),[I,te]=w.useState(_g),[oe,ge]=w.useState([]),[fe,de]=w.useState([]),[ke,Ge]=w.useState(""),[Te,we]=w.useState(!1),[re,Ue]=w.useState(!1),[je,ye]=w.useState(""),[se,Y]=w.useState(""),[U,E]=w.useState(!1);w.useEffect(()=>{r&&((()=>{try{const pe=localStorage.getItem("accord_account_settings");pe?v({...xg,...JSON.parse(pe)}):u&&v({displayName:u.displayName||u.display_name||u.username||u.public_key_hash.slice(0,16),bio:u.bio||"",status:u.status||"online"});const Oe=localStorage.getItem("accord_appearance_settings");if(Oe){const Ye=JSON.parse(Oe);if(typeof Ye.fontSize=="string"){const G={small:13,medium:15,large:17};Ye.fontSize=G[Ye.fontSize]||15}Ye.compactMode!==void 0&&!Ye.messageDensity&&(Ye.messageDensity=Ye.compactMode?"compact":"comfortable",delete Ye.compactMode),A({...Sg,...Ye})}const qe=localStorage.getItem("accord_voice_settings");qe&&L({...wg,...JSON.parse(qe)});const rt=localStorage.getItem("accord_privacy_settings");rt&&te({..._g,...JSON.parse(rt)}),X(wt.getPreferences())}catch(pe){console.error("Error loading settings:",pe)}})(),K(),we(!1),ye(""),E(!1))},[r,u]),w.useEffect(()=>{ie(x)},[x]);const K=w.useCallback(async()=>{try{const k=await navigator.mediaDevices.enumerateDevices();ge(k.filter(pe=>pe.kind==="audioinput")),de(k.filter(pe=>pe.kind==="audiooutput")),Ge("")}catch(k){Ge("Failed to load audio devices"),console.error("Error loading media devices:",k)}},[]),Z=w.useCallback(k=>{v(k),we(!0),ye("")},[]),ne=w.useCallback(async()=>{Ue(!0),ye("");try{const k=localStorage.getItem("accord_token")||(u?localStorage.getItem(`accord_token_${$.getBaseUrl().replace(/https?:\/\//,"")}`):null);k&&await $.updateProfile({display_name:b.displayName,bio:b.bio},k),localStorage.setItem("accord_account_settings",JSON.stringify(b)),o==null||o(b),we(!1),ye("Profile saved!")}catch(k){console.error("Failed to save profile:",k),localStorage.setItem("accord_account_settings",JSON.stringify(b)),o==null||o(b),we(!1),ye("Saved locally (server sync failed)")}finally{Ue(!1)}},[b,u,o]),ce=w.useCallback(k=>{localStorage.setItem("accord_appearance_settings",JSON.stringify(k)),A(k)},[]),S=w.useCallback(k=>{localStorage.setItem("accord_voice_settings",JSON.stringify(k)),L(k)},[]),D=w.useCallback(k=>{localStorage.setItem("accord_privacy_settings",JSON.stringify(k)),te(k)},[]),H=w.useCallback(k=>{wt.updatePreferences(k),X(k)},[]),ie=k=>{const pe=document.documentElement;k.theme==="light"?(pe.style.setProperty("--bg-primary","#ffffff"),pe.style.setProperty("--bg-secondary","#f6f6f6"),pe.style.setProperty("--bg-tertiary","#e3e5e8"),pe.style.setProperty("--text-primary","#2e3338"),pe.style.setProperty("--text-secondary","#747f8d")):(pe.style.setProperty("--bg-primary","#36393f"),pe.style.setProperty("--bg-secondary","#2f3136"),pe.style.setProperty("--bg-tertiary","#202225"),pe.style.setProperty("--text-primary","#dcddde"),pe.style.setProperty("--text-secondary","#8e9297")),pe.style.setProperty("--font-size",`${k.fontSize}px`),localStorage.setItem("accord_font_size",String(k.fontSize));const Oe={compact:"2px",comfortable:"8px",cozy:"16px"};pe.style.setProperty("--message-spacing",Oe[k.messageDensity]),localStorage.setItem("accord_message_density",k.messageDensity),document.body.className=`theme-${k.theme} density-${k.messageDensity}`};w.useEffect(()=>{const k=pe=>{r&&pe.key==="Escape"&&l()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[r,l]);const P=async()=>{try{const k=await navigator.mediaDevices.getUserMedia({audio:!0});setTimeout(()=>{k.getTracks().forEach(pe=>pe.stop()),alert("Microphone test completed!")},2e3)}catch(k){alert("Microphone test failed: "+k)}},ae=()=>{const k=new(window.AudioContext||window.webkitAudioContext),pe=k.createOscillator(),Oe=k.createGain();pe.connect(Oe),Oe.connect(k.destination),pe.frequency.setValueAtTime(440,k.currentTime),Oe.gain.setValueAtTime(O.outputVolume/100*.1,k.currentTime),pe.start(),pe.stop(k.currentTime+.5)},[be,Me]=w.useState(""),[Be,He]=w.useState(""),[Fe,Jt]=w.useState(null),[Et,Vt]=w.useState(""),[Bt,sn]=w.useState(!1),Rn=w.useRef(null),$t=()=>{const pe=((u==null?void 0:u.public_key_hash)||"").substring(0,16);if(!pe){alert("No identity found to export.");return}const Oe=localStorage.getItem(`accord_private_key_${pe}`),qe=localStorage.getItem(`accord_public_key_${pe}`),rt=Oe||localStorage.getItem("accord_private_key"),Ye=qe||localStorage.getItem("accord_public_key");if(!rt||!Ye){alert("Could not find encrypted keys in storage. Cannot export.");return}const G=JSON.stringify({version:1,public_key:Ye,encrypted_private_key:rt,public_key_hash:pe},null,2),Je=new Blob([G],{type:"application/json"}),on=URL.createObjectURL(Je),Lt=document.createElement("a");Lt.href=on,Lt.download=`accord-identity-${pe}.json`,document.body.appendChild(Lt),Lt.click(),document.body.removeChild(Lt),URL.revokeObjectURL(on)},en=k=>{var qe;He(""),Me("");const pe=(qe=k.target.files)==null?void 0:qe[0];if(!pe)return;const Oe=new FileReader;Oe.onload=rt=>{var Ye;try{const G=JSON.parse((Ye=rt.target)==null?void 0:Ye.result);if(!G.version||!G.public_key||!G.encrypted_private_key||!G.public_key_hash){He("Invalid identity file: missing required fields (version, public_key, encrypted_private_key, public_key_hash).");return}if(G.version!==1){He(`Unsupported identity file version: ${G.version}`);return}Jt({hash16:G.public_key_hash,encPrivKey:G.encrypted_private_key,pubKeyB64:G.public_key})}catch{He("Failed to parse identity file. Must be valid JSON.")}},Oe.readAsText(pe),k.target.value=""},gn=async()=>{if(!(!Fe||!Et)){sn(!0),He("");try{const{hash16:k,encPrivKey:pe,pubKeyB64:Oe}=Fe;if(localStorage.setItem(`accord_private_key_${k}`,pe),localStorage.setItem(`accord_public_key_${k}`,Oe),localStorage.setItem("accord_private_key",pe),localStorage.setItem("accord_public_key",Oe),!await kf(Et,k)){He("Incorrect password  could not decrypt the private key."),sn(!1);return}Ua(k),Jt(null),Vt(""),Me("Identity imported successfully! Reloading..."),setTimeout(()=>window.location.reload(),1200)}catch(k){He(`Import failed: ${k.message||"unknown error"}`)}finally{sn(!1)}}},cn=()=>{if(!U){E(!0);return}const k=[];for(let pe=0;pe<localStorage.length;pe++){const Oe=localStorage.key(pe);Oe&&Oe.startsWith("accord_")&&k.push(Oe)}k.forEach(pe=>localStorage.removeItem(pe)),E(!1),alert("Local data cleared. Please refresh the app."),window.location.reload()},le=()=>{if(!se.trim())return;let k=se.trim();!k.startsWith("http://")&&!k.startsWith("https://")&&(k="http://"+k),$.setBaseUrl(k),alert(`Relay URL set to ${k}. You may need to re-authenticate.`),Y("")},Ie=k=>k.slice(0,32).replace(/(.{4})/g,"$1 ").trim().toUpperCase();return r?s.jsx("div",{className:"settings-overlay",children:s.jsxs("div",{className:"settings-modal",children:[s.jsxs("div",{className:"settings-sidebar",children:[s.jsx("div",{className:"settings-header",children:s.jsx("h2",{children:"Settings"})}),s.jsxs("nav",{className:"settings-nav",children:[s.jsx("button",{className:`settings-nav-item ${m==="account"?"active":""}`,onClick:()=>p("account"),children:" Profile"}),s.jsx("button",{className:`settings-nav-item ${m==="appearance"?"active":""}`,onClick:()=>p("appearance"),children:" Appearance"}),s.jsx("button",{className:`settings-nav-item ${m==="notifications"?"active":""}`,onClick:()=>p("notifications"),children:" Notifications"}),s.jsx("button",{className:`settings-nav-item ${m==="voice"?"active":""}`,onClick:()=>p("voice"),children:" Voice & Audio"}),s.jsx("button",{className:`settings-nav-item ${m==="privacy"?"active":""}`,onClick:()=>p("privacy"),children:" Privacy"}),s.jsx("button",{className:`settings-nav-item ${m==="advanced"?"active":""}`,onClick:()=>p("advanced"),children:" Advanced"}),s.jsx("button",{className:`settings-nav-item ${m==="server"?"active":""}`,onClick:()=>p("server"),children:" Server Info"}),s.jsx("button",{className:`settings-nav-item ${m==="about"?"active":""}`,onClick:()=>p("about"),children:" About"})]})]}),s.jsxs("div",{className:"settings-content",children:[s.jsx("div",{className:"settings-content-header",children:s.jsx("button",{className:"settings-close",onClick:l,children:""})}),s.jsxs("div",{className:"settings-panel",children:[m==="account"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Profile"}),s.jsxs("div",{className:"settings-group",style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{onClick:()=>{const k=document.createElement("input");k.type="file",k.accept="image/png,image/jpeg,image/gif,image/webp",k.onchange=async pe=>{var qe;const Oe=(qe=pe.target.files)==null?void 0:qe[0];if(Oe){if(Oe.size>256*1024){ye("Avatar must be under 256KB");return}try{const rt=localStorage.getItem("accord_auth_token")||"";await $.uploadUserAvatar(Oe,rt),ye("Avatar updated!"),we(!1)}catch(rt){ye(rt instanceof Error?rt.message:"Failed to upload avatar")}}},k.click()},style:{width:"80px",height:"80px",borderRadius:"50%",background:"#40444b",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",overflow:"hidden",fontSize:"32px",color:"#b9bbbe",flexShrink:0,position:"relative"},title:"Click to upload avatar",children:[u!=null&&u.id?s.jsx("img",{src:`${$.getUserAvatarUrl(u.id)}?t=${Date.now()}`,alt:((u==null?void 0:u.display_name)||"U")[0],style:{width:"100%",height:"100%",objectFit:"cover"},onError:k=>{k.target.style.display="none",k.target.parentElement.textContent=((u==null?void 0:u.display_name)||"U")[0]}}):((u==null?void 0:u.display_name)||"U")[0],s.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",fontSize:"10px",textAlign:"center",padding:"2px",color:"#fff"},children:"EDIT"})]}),s.jsx("div",{style:{color:"#b9bbbe",fontSize:"13px"},children:"Click to upload avatar (PNG, JPEG, GIF, WebP  max 256KB)"})]}),(u==null?void 0:u.public_key_hash)&&s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Public Key Fingerprint"}),s.jsx("div",{className:"settings-info",style:{fontFamily:"var(--font-mono)",fontSize:13,letterSpacing:"0.05em"},children:Ie(u.public_key_hash)})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Display Name"}),s.jsx("input",{type:"text",className:"settings-input",value:b.displayName,onChange:k=>Z({...b,displayName:k.target.value}),placeholder:"Enter display name..."})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Bio"}),s.jsx("textarea",{className:"settings-textarea",value:b.bio,onChange:k=>Z({...b,bio:k.target.value}),placeholder:"Tell others about yourself...",rows:3})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Status"}),s.jsx("div",{className:"status-buttons",children:["online","away","busy","invisible"].map(k=>s.jsxs("button",{className:`status-button ${b.status===k?"active":""}`,onClick:()=>Z({...b,status:k}),children:[s.jsx("div",{className:`status-indicator ${k}`}),k.charAt(0).toUpperCase()+k.slice(1)]},k))})]}),s.jsxs("div",{className:"settings-group",style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("button",{className:"btn btn-primary",style:{width:"auto",padding:"10px 24px"},disabled:!Te||re,onClick:ne,children:re?"Saving...":"Save Profile"}),je&&s.jsx("span",{style:{fontSize:13,color:je.includes("failed")?"var(--yellow)":"var(--green)"},children:je})]}),s.jsx("div",{className:"settings-group",children:s.jsxs("div",{className:"settings-info",children:[s.jsx("strong",{children:"User ID:"})," ",(u==null?void 0:u.id)||"Unknown"]})})]}),m==="appearance"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Appearance"}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Theme"}),s.jsxs("div",{className:"theme-buttons",children:[s.jsx("button",{className:`theme-button dark ${x.theme==="dark"?"active":""}`,onClick:()=>ce({...x,theme:"dark"}),children:" Dark"}),s.jsx("button",{className:`theme-button light ${x.theme==="light"?"active":""}`,onClick:()=>ce({...x,theme:"light"}),children:" Light"})]}),s.jsx("div",{className:"settings-help",children:"Light theme is experimental and may not look perfect everywhere."})]}),s.jsxs("div",{className:"settings-group",children:[s.jsxs("label",{className:"settings-label",children:["Font Size: ",x.fontSize,"px"]}),s.jsx("input",{type:"range",className:"settings-slider",min:"12",max:"20",step:"1",value:x.fontSize,onChange:k=>ce({...x,fontSize:parseInt(k.target.value)})}),s.jsxs("div",{className:"settings-help",style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"12px"}),s.jsx("span",{children:"20px"})]})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Message Density"}),s.jsx("div",{className:"font-size-buttons",children:["compact","comfortable","cozy"].map(k=>s.jsx("button",{className:`font-size-button ${x.messageDensity===k?"active":""}`,onClick:()=>ce({...x,messageDensity:k}),children:k.charAt(0).toUpperCase()+k.slice(1)},k))}),s.jsx("div",{className:"settings-help",children:"Controls spacing between messages. Compact shows more messages on screen."})]})]}),m==="notifications"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Notification Settings"}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:T.enabled,onChange:k=>H({...T,enabled:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Enable Desktop Notifications"]})}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Notification Mode"}),s.jsx("div",{className:"notification-mode-buttons",children:["all","mentions","none"].map(k=>s.jsx("button",{className:`notification-button ${T.mode===k?"active":""}`,onClick:()=>H({...T,mode:k}),children:k==="all"?"All Messages":k==="mentions"?"Mentions Only":"None"},k))})]}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:T.sounds,onChange:k=>H({...T,sounds:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Sound Notifications"]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("div",{className:"test-buttons",children:[s.jsx("button",{className:"test-button",onClick:()=>{"Notification"in window&&Notification.permission==="granted"?new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"}):Notification.requestPermission().then(k=>{k==="granted"&&new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"})})},children:"Test Notification"}),s.jsx("button",{className:"test-button",onClick:()=>{var k;return(k=wt.playNotificationSound)==null?void 0:k.call(wt)},children:"Test Sound"}),s.jsx("button",{className:"clear-button",onClick:()=>{wt.clearAllUnreads(),alert("All unread counts cleared")},children:"Clear All Unreads"})]})})]}),m==="voice"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Voice & Audio Settings"}),ke&&s.jsx("div",{className:"settings-error",children:ke}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-label",children:["Input Device",s.jsxs("select",{className:"settings-select",value:O.inputDevice,onChange:k=>S({...O,inputDevice:k.target.value}),children:[s.jsx("option",{value:"default",children:"Default"}),oe.map(k=>s.jsx("option",{value:k.deviceId,children:k.label||`Microphone ${k.deviceId.slice(0,8)}...`},k.deviceId))]})]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-label",children:["Output Device",s.jsxs("select",{className:"settings-select",value:O.outputDevice,onChange:k=>S({...O,outputDevice:k.target.value}),children:[s.jsx("option",{value:"default",children:"Default"}),fe.map(k=>s.jsx("option",{value:k.deviceId,children:k.label||`Speaker ${k.deviceId.slice(0,8)}...`},k.deviceId))]})]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-label",children:["Input Volume: ",O.inputVolume,"%",s.jsx("input",{type:"range",className:"settings-slider",min:"0",max:"100",value:O.inputVolume,onChange:k=>S({...O,inputVolume:parseInt(k.target.value)})})]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-label",children:["Output Volume: ",O.outputVolume,"%",s.jsx("input",{type:"range",className:"settings-slider",min:"0",max:"100",value:O.outputVolume,onChange:k=>S({...O,outputVolume:parseInt(k.target.value)})})]})}),s.jsxs("div",{className:"settings-group",children:[s.jsxs("label",{className:"settings-label",children:["Voice Activity Sensitivity: ",O.vadSensitivity,"%",s.jsx("input",{type:"range",className:"settings-slider",min:"0",max:"100",value:O.vadSensitivity,onChange:k=>S({...O,vadSensitivity:parseInt(k.target.value)})})]}),s.jsx("div",{className:"settings-help",children:"Higher values require louder audio to trigger voice activation."})]}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:O.echoCancellation,onChange:k=>S({...O,echoCancellation:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Echo Cancellation"]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:O.noiseSuppression,onChange:k=>S({...O,noiseSuppression:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Noise Suppression"]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:O.autoGainControl,onChange:k=>S({...O,autoGainControl:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Automatic Gain Control"]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("div",{className:"test-buttons",children:[s.jsx("button",{className:"test-button",onClick:P,children:"Test Microphone"}),s.jsx("button",{className:"test-button",onClick:ae,children:"Test Speakers"}),s.jsx("button",{className:"refresh-button",onClick:K,children:"Refresh Devices"})]})})]}),m==="privacy"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Privacy Settings"}),s.jsxs("div",{className:"settings-group",children:[s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:I.readReceipts,onChange:k=>D({...I,readReceipts:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Send Read Receipts"]}),s.jsx("div",{className:"settings-help",children:"Let others know when you've read their messages."})]}),s.jsxs("div",{className:"settings-group",children:[s.jsxs("label",{className:"settings-checkbox",children:[s.jsx("input",{type:"checkbox",checked:I.typingIndicators,onChange:k=>D({...I,typingIndicators:k.target.checked})}),s.jsx("span",{className:"checkmark"}),"Show Typing Indicators"]}),s.jsx("div",{className:"settings-help",children:"Show when you're typing to other users."})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Block List"}),s.jsx("div",{className:"blocked-users",children:I.blockedUsers.length===0?s.jsx("div",{className:"settings-help",children:"No blocked users"}):I.blockedUsers.map(k=>s.jsxs("div",{className:"blocked-user",children:[s.jsx("span",{children:k}),s.jsx("button",{className:"unblock-button",onClick:()=>D({...I,blockedUsers:I.blockedUsers.filter(pe=>pe!==k)}),children:"Unblock"})]},k))})]})]}),m==="advanced"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Advanced"}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Current Relay URL"}),s.jsx("div",{className:"settings-info",style:{fontFamily:"var(--font-mono)",fontSize:13},children:$.getBaseUrl()})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Connect to Relay Manually"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("input",{type:"text",className:"settings-input",value:se,onChange:k=>Y(k.target.value),placeholder:"e.g. 192.168.1.100:8080",onKeyDown:k=>{k.key==="Enter"&&le()}}),s.jsx("button",{className:"btn btn-primary",style:{width:"auto",padding:"10px 16px",whiteSpace:"nowrap"},onClick:le,disabled:!se.trim(),children:"Connect"})]}),s.jsx("div",{className:"settings-help",children:"Enter a relay server address to connect to a different server."})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Identity Key Management"}),s.jsxs("div",{className:"test-buttons",children:[s.jsx("button",{className:"test-button",onClick:$t,children:" Export Identity"}),s.jsx("button",{className:"test-button",onClick:()=>{var k;return(k=Rn.current)==null?void 0:k.click()},children:" Import Identity"}),s.jsx("input",{ref:Rn,type:"file",accept:".json",style:{display:"none"},onChange:en})]}),s.jsx("div",{className:"settings-help",children:"Export your encrypted identity to a JSON file for backup or transfer to another browser. Import a previously exported identity file to restore access."}),be&&s.jsx("div",{className:"auth-success",style:{marginTop:8},children:be}),Be&&s.jsx("div",{style:{color:"var(--red, #f44)",marginTop:8,fontSize:13},children:Be}),Fe&&s.jsxs("div",{style:{marginTop:12,padding:12,background:"var(--bg-tertiary)",borderRadius:8},children:[s.jsxs("div",{style:{marginBottom:8,fontSize:14},children:["Enter password to decrypt identity ",s.jsx("code",{children:Fe.hash16}),":"]}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"password",placeholder:"Password",value:Et,onChange:k=>Vt(k.target.value),onKeyDown:k=>{k.key==="Enter"&&gn()},className:"form-input",style:{flex:1},autoFocus:!0}),s.jsx("button",{className:"test-button",onClick:gn,disabled:Bt||!Et,children:Bt?"Verifying...":"Confirm"}),s.jsx("button",{className:"test-button",onClick:()=>{Jt(null),Vt("")},children:"Cancel"})]})]})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Clear Local Data"}),U?s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("button",{className:"clear-button",onClick:cn,children:"Confirm  Delete Everything"}),s.jsx("button",{className:"test-button",onClick:()=>E(!1),children:"Cancel"})]}):s.jsx("button",{className:"clear-button",onClick:cn,children:" Clear Local Data"}),s.jsx("div",{className:"settings-help",children:"Removes all locally stored settings, keys, and tokens. This cannot be undone."})]})]}),m==="server"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"Server Info"}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Connection Status"}),s.jsx("div",{className:"settings-info",children:h!=null&&h.isConnected?" Connected":" Disconnected"})]}),(h==null?void 0:h.version)&&s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Server Version"}),s.jsx("div",{className:"settings-info",children:h.version})]}),(h==null?void 0:h.buildHash)&&s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Server Build Hash"}),s.jsxs("div",{className:"settings-info copyable",style:{fontFamily:"var(--font-mono)",fontSize:13,cursor:"pointer"},title:"Click to copy",onClick:()=>{navigator.clipboard.writeText(h.buildHash)},children:[h.buildHash," "]})]}),(h==null?void 0:h.connectedSince)&&s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Connected Since"}),s.jsx("div",{className:"settings-info",children:new Date(h.connectedSince).toLocaleString()})]}),s.jsxs("div",{className:"settings-group",children:[s.jsx("label",{className:"settings-label",children:"Relay Address"}),s.jsx("div",{className:"settings-info",style:{fontFamily:"var(--font-mono)",fontSize:13},children:(h==null?void 0:h.relayAddress)||$.getBaseUrl()})]})]}),m==="about"&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h3",{children:"About Accord"}),s.jsxs("div",{className:"about-content",children:[s.jsxs("div",{className:"about-logo",children:[s.jsx("div",{className:"app-icon",children:"A"}),s.jsx("h2",{children:"Accord"})]}),s.jsxs("div",{className:"about-info",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("strong",{children:"Version:"})," 0.1.0-beta"]}),s.jsxs("div",{className:"info-row",children:[s.jsx("strong",{children:"Protocol:"})," Accord Protocol v1"]}),s.jsxs("div",{className:"info-row",children:[s.jsx("strong",{children:"Platform:"})," Desktop (Tauri + React)"]}),s.jsxs("div",{className:"info-row",children:[s.jsx("strong",{children:"Build:"})," Development"]})]}),s.jsx("div",{className:"about-description",children:s.jsx("p",{children:"Accord is an open-source, privacy-first chat application with end-to-end encryption. Your keys, your data, your control."})}),s.jsxs("div",{className:"about-links",children:[s.jsx("a",{href:"https://github.com/accord-chat/accord",target:"_blank",rel:"noopener noreferrer",children:" Source Code on GitHub"}),s.jsx("a",{href:"https://github.com/accord-chat/accord/issues",target:"_blank",rel:"noopener noreferrer",children:" Report a Bug"}),s.jsx("a",{href:"https://github.com/accord-chat/accord/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:" License (MIT)"})]}),s.jsxs("div",{className:"about-credits",children:[s.jsx("h4",{children:"Built with  by the Accord team"}),s.jsx("p",{children:"Special thanks to all contributors and the open-source community."})]})]})]})]})]})]})}):null};function St(r){return!r||r.length<16?r||"unknown":r.substring(0,8)+"..."+r.substring(r.length-8)}const ex=({channelName:r,connectedAt:l,onDisconnect:u})=>{const[o,h]=w.useState("00:00"),[m,p]=w.useState(!1),[b,v]=w.useState(!1);return w.useEffect(()=>{if(!l)return;const x=setInterval(()=>{const A=Math.floor((Date.now()-l)/1e3),T=String(Math.floor(A/60)).padStart(2,"0"),X=String(A%60).padStart(2,"0");h(`${T}:${X}`)},1e3);return()=>clearInterval(x)},[l]),s.jsxs("div",{className:"voice-connection-panel",children:[s.jsxs("div",{className:"voice-connection-info",children:[s.jsx("span",{className:"voice-connection-dot",children:""}),s.jsxs("div",{className:"voice-connection-details",children:[s.jsx("span",{className:"voice-connection-label",children:"Voice Connected"}),s.jsx("span",{className:"voice-connection-channel",children:r})]}),s.jsx("span",{className:"voice-connection-timer",children:o})]}),s.jsxs("div",{className:"voice-connection-controls",children:[s.jsx("button",{className:`voice-ctrl-btn ${m?"active":""}`,onClick:()=>p(!m),title:m?"Unmute":"Mute",children:m?"":""}),s.jsx("button",{className:`voice-ctrl-btn ${b?"active":""}`,onClick:()=>{v(!b),b||p(!0)},title:b?"Undeafen":"Deafen",children:b?"":""}),s.jsx("button",{className:"voice-ctrl-btn voice-disconnect-btn",onClick:u,title:"Disconnect",children:""})]})]})};function tx(){var En,ws,Ra,qc,Kc,ml,Va,_s,Il,Ns,Za,ga;const[r,l]=w.useState(()=>localStorage.getItem("accord_server_url")||"http://localhost:8080"),[u,o]=w.useState(!1),[h,m]=w.useState(!1),[p,b]=w.useState(!1),[v,x]=w.useState(""),[A,T]=w.useState(()=>{if(localStorage.getItem("accord_server_url"))return!1;const g=typeof window<"u"?window.location.origin:"";return g&&!g.includes(":1420")&&!g.includes(":5173")&&!g.includes(":3000")?(localStorage.setItem("accord_server_url",g),!1):!0}),[X,O]=w.useState("choose"),[L,I]=w.useState(""),[te,oe]=w.useState(null),[ge,fe]=w.useState(""),[de,ke]=w.useState(!1),[Ge,Te]=w.useState(""),[we,re]=w.useState(!1),[Ue,je]=w.useState(""),[ye,se]=w.useState(!1),[Y,U]=w.useState(!1),[E,K]=w.useState(!0),[Z,ne]=w.useState(""),[ce,S]=w.useState(""),[D,H]=w.useState(""),[ie,P]=w.useState(!1),[ae,be]=w.useState(""),[Me,Be]=w.useState(!1),[He,Fe]=w.useState(""),[Jt,Et]=w.useState(!1),[Vt,Bt]=w.useState(!1),[sn,Rn]=w.useState(""),[$t,en]=w.useState(""),[gn,cn]=w.useState(""),[le,Ie]=w.useState(!1),[k,pe]=w.useState(()=>bg()),Oe=w.useRef(""),[qe,rt]=w.useState(null),[Ye]=w.useState(T0()),[G,Je]=w.useState({isAuthenticated:!1,nodes:[],messages:[],isConnected:!1}),[on,Lt]=w.useState(""),[Ht,qt]=w.useState("# general"),[Tt,Wa]=w.useState(0),[st,Ml]=w.useState(!1),[De,rn]=w.useState(null),[Mn,yn]=w.useState({status:"disconnected",reconnectAttempt:0,maxReconnectAttempts:20}),[jt,_a]=w.useState(null),[We,$n]=w.useState([]),[Fn,Dn]=w.useState([]),[Ft,Na]=w.useState([]),[Ce,Ea]=w.useState(null),[Ve,tn]=w.useState(null),[oa,ra]=w.useState(!1),[nn,ht]=w.useState(!0),[mt,vn]=w.useState(void 0),Un=w.useRef(null),[ua,Dl]=w.useState(null),[Ba,_e]=w.useState(""),[j,ee]=w.useState(null),xe=(d,g)=>{Dl(d),_e(g)},[Pe,_t]=w.useState({}),[Xe,Kt]=w.useState(!1),[bn,an]=w.useState(""),[Wn,At]=w.useState("text"),[Pa,el]=w.useState(!1),[Ws,Ul]=w.useState(""),[bi,Mt]=w.useState(""),[Wt,Ji]=w.useState(null),[Ro,xi]=w.useState(""),[Mo,Ol]=w.useState(null),[Ps,xn]=w.useState(""),[ec,zl]=w.useState(!1),[Si,ja]=w.useState(""),[tc,nc]=w.useState(!1),[tl,bu]=w.useState([]),[ac,lc]=w.useState(null),[ic,Do]=w.useState(null),xu=["","","","","","","","","",""],[$i,Ca]=w.useState(wt.getPreferences()),[wi,_i]=w.useState(!1),[Bl,da]=w.useState(0),[Fi,Ll]=w.useState(!1),[nl,Hl]=w.useState([]),[pt,sc]=w.useState(null),[ql,fa]=w.useState(!1),[Ni,Ta]=w.useState(!1),[cc,al]=w.useState(!1),[La,Wi]=w.useState(""),[un,Ha]=w.useState(!1),[Ei,ll]=w.useState(""),[Pi,ji]=w.useState(""),[es,il]=w.useState(""),[Ci,oc]=w.useState(!1),[rc,ts]=w.useState(!1),[Kl,uc]=w.useState(""),[Ti,Su]=w.useState(""),[dc,Uo]=w.useState(null),[wu,ns]=w.useState(!1),[fc,hc]=w.useState(!1),[_u,Nu]=w.useState(new Set),[mc,Oo]=w.useState([]),[Eu,pc]=w.useState(!1),[as,gc]=w.useState(""),[yc,zo]=w.useState(!1),[sl,vc]=w.useState(null),[Bo,ls]=w.useState(""),[is,ss]=w.useState(null),[Ai,Aa]=w.useState(!1),[Yl,bc]=w.useState(""),[xc,Sc]=w.useState(!1),[cs,ki]=w.useState(!1),[cl,ju]=w.useState(!0),[Cu,wc]=w.useState(!1),_c=w.useRef(null),Ri=w.useRef(void 0),ol=w.useRef(!1),[Mi,Tu]=w.useState(!1),[Di,os]=w.useState(0),[Nc,Ec]=w.useState(new Map),[rs,Lo]=w.useState(new Map),[Dt,Gl]=w.useState(null),[Ho,qo]=w.useState(new Map),[Ko,Yo]=w.useState(new Map),[Go,_n]=w.useState(0),Vl=w.useState(()=>localStorage.getItem("accord-typing-indicators")!=="false")[0],jc=w.useCallback(d=>Pe[d]||"member",[Pe]),Zl=w.useCallback((d,g)=>{switch(jc(d)){case"admin":return!0;case"moderator":return["KickMembers","ManageInvites"].includes(g);case"member":return!1;default:return!1}},[jc]),us=d=>{switch(d){case"admin":return"";case"moderator":return"";default:return""}},On=d=>{d.message&&d.message.includes("403")?Mt("You don't have permission to perform this action"):Mt(d.message||"An error occurred"),setTimeout(()=>Mt(""),5e3)},Cc=w.useCallback(d=>{if(!Vl||!De||!d)return;const g=Date.now();g-Go>=3e3&&(De.sendTypingStart(d),_n(g))},[De,Vl,Go]),Vo=w.useCallback(d=>{const g=Ho.get(d)||[],_=localStorage.getItem("accord_user_id"),R=g.filter(ve=>ve.user_id!==_);if(R.length===0)return"";const J=ve=>{var ze,tt;const he=Ft.find(Se=>Se.user_id===ve.user_id);return(ze=he==null?void 0:he.user)!=null&&ze.display_name?he.user.display_name:(tt=he==null?void 0:he.profile)!=null&&tt.display_name?he.profile.display_name:ve.displayName};return R.length===1?`${J(R[0])} is typing`:R.length===2?`${J(R[0])} and ${J(R[1])} are typing`:"Several people are typing"},[Ho,Ft]);w.useEffect(()=>{const d=async()=>{const g=Sf(),_=Oe.current;if(!g||!_)return null;try{const R=await $.login(g,_);return Xs(R.token),localStorage.setItem("accord_user_id",R.user_id),Je(J=>({...J,token:R.token})),R.token}catch{return null}};return $.setTokenRefresher(d),()=>$.setTokenRefresher(null)},[]),w.useEffect(()=>{(async()=>{if(!localStorage.getItem("accord_server_url")){const _=await cb();if(_){$.setBaseUrl(_),l(_),Ml(!0),T(!1);return}}const g=await $.testConnection();Ml(g)})()},[]);const zn=w.useCallback(d=>{d.on("connected",()=>{var g;Je(_=>({..._,isConnected:!0})),yn({status:"connected",reconnectAttempt:0,maxReconnectAttempts:20}),Uo(Date.now()),(g=Ri.current)==null||g.call(Ri)}),d.on("hello",g=>{g.server_version&&Su(g.server_version),g.server_build_hash&&uc(g.server_build_hash)}),d.on("disconnected",()=>{Je(g=>({...g,isConnected:!1})),Uo(null)}),d.on("connection_status",g=>{yn(g)}),d.on("auth_error",async()=>{const g=Sf(),_=Oe.current;if(g&&_)try{const R=await $.login(g,_);Xs(R.token),localStorage.setItem("accord_user_id",R.user_id),Je(ve=>({...ve,token:R.token})),d.disconnect();const J=new Zs(R.token,r.replace(/^http/,"ws"));zn(J),rn(J),J.connect();return}catch{}Sn()}),d.on("message",g=>{}),d.on("channel_message",async g=>{var me,kt,Rt;let _=g.encrypted_data,R=!1;if(Ye&&qe&&g.channel_id)try{const Le=await Sa(qe.privateKey,g.channel_id);_=await fu(Le,g.encrypted_data),R=!0}catch(Le){console.warn("Failed to decrypt message, showing encrypted data:",Le)}const J=Ft.find(Le=>Le.user_id===g.from),ve=J?((me=J.user)==null?void 0:me.display_name)||((kt=J.profile)==null?void 0:kt.display_name)||St(J.public_key_hash||g.from||""):St(g.from||""),he={id:g.message_id||Math.random().toString(),author:ve,content:_,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:g.timestamp*1e3,channel_id:g.channel_id,isEncrypted:R,reply_to:g.reply_to,replied_message:g.replied_message?{id:g.replied_message.id,sender_id:g.replied_message.sender_id,sender_public_key_hash:g.replied_message.sender_public_key_hash||"",encrypted_payload:g.replied_message.encrypted_payload,created_at:g.replied_message.created_at,content:g.replied_message.content}:void 0};if(g.from&&Lo(Le=>{const fn=new Map(Le);return fn.set(g.from,Date.now()),fn}),g.is_dm||nl.some(Le=>Le.id===g.channel_id)){Pn();const Le=nl.find(fn=>fn.id===g.channel_id);Le&&(wt.addMessage(`dm-${Le.id}`,g.channel_id,he),da(fn=>fn+1))}else{const Le=(Rt=We.find(fn=>Fn.some(hn=>hn.id===g.channel_id&&hn.node_id===fn.id)))==null?void 0:Rt.id;Le&&(wt.addMessage(Le,g.channel_id,he),da(fn=>fn+1))}const tt=Un.current,Se=tt?tt.scrollHeight-tt.scrollTop-tt.clientHeight<50:!0;Je(Le=>({...Le,messages:[...Le.messages,he]})),Se&&tt?setTimeout(()=>{tt.scrollTop=tt.scrollHeight},0):os(Le=>Le+1)}),d.on("node_info",g=>{g.data&&Je(_=>({..._,nodes:_.nodes.map(R=>R.id===g.data.id?g.data:R)}))}),d.on("message_edit",async g=>{try{let _=g.encrypted_data;if(Ye&&qe){const R=await Sa(qe.privateKey,g.channel_id);_=await fu(R,g.encrypted_data)}Je(R=>({...R,messages:R.messages.map(J=>J.id===g.message_id?{...J,content:_,edited_at:g.edited_at,isEncrypted:Ye}:J)}))}catch(_){console.warn("Failed to decrypt edited message:",_),Je(R=>({...R,messages:R.messages.map(J=>J.id===g.message_id?{...J,content:g.encrypted_data,edited_at:g.edited_at,isEncrypted:!0}:J)}))}}),d.on("message_delete",g=>{Je(_=>({..._,messages:_.messages.filter(R=>R.id!==g.message_id)}))}),d.on("reaction_add",g=>{Je(_=>({..._,messages:_.messages.map(R=>R.id===g.message_id?{...R,reactions:g.reactions}:R)}))}),d.on("reaction_remove",g=>{Je(_=>({..._,messages:_.messages.map(R=>R.id===g.message_id?{...R,reactions:g.reactions}:R)}))}),d.on("message_pin",g=>{Je(_=>({..._,messages:_.messages.map(R=>R.id===g.message_id?{...R,pinned_at:g.timestamp,pinned_by:g.pinned_by}:R)}))}),d.on("message_unpin",g=>{Je(_=>({..._,messages:_.messages.map(R=>R.id===g.message_id?{...R,pinned_at:void 0,pinned_by:void 0}:R)}))}),d.on("typing_start",g=>{const _={user_id:g.user_id,displayName:g.public_key_hash?St(g.public_key_hash):g.user_id.substring(0,8),startedAt:Date.now()};qo(J=>{const ve=new Map(J),ze=(ve.get(g.channel_id)||[]).filter(tt=>tt.user_id!==g.user_id);return ve.set(g.channel_id,[...ze,_]),ve});const R=`${g.channel_id}_${g.user_id}`;Yo(J=>{const ve=new Map(J),he=ve.get(R);he&&clearTimeout(he);const ze=window.setTimeout(()=>{qo(tt=>{const Se=new Map(tt),kt=(Se.get(g.channel_id)||[]).filter(Rt=>Rt.user_id!==g.user_id);return kt.length>0?Se.set(g.channel_id,kt):Se.delete(g.channel_id),Se}),Yo(tt=>{const Se=new Map(tt);return Se.delete(R),Se})},5e3);return ve.set(R,ze),ve})}),d.on("presence_update",g=>{g.user_id&&g.status&&Ec(_=>{const R=new Map(_);return R.set(g.user_id,g.status),R})}),d.on("error",g=>{console.error("WebSocket error:",g)})},[Ye,qe]);w.useEffect(()=>()=>{Ko.forEach(d=>clearTimeout(d))},[Ko]);const Bn=w.useCallback(async()=>{if(!(!G.token||!st))try{const d=await $.getUserNodes(G.token);$n(Array.isArray(d)?d:[]),d.length>0&&!Ce&&Ea(d[0].id)}catch(d){console.error("Failed to load nodes:",d)}},[G.token,st,Ce]);Ri.current=Bn;const Ln=w.useCallback(async d=>{if(!(!G.token||!st))try{const g=await $.getNodeChannels(d,G.token);Dn(Array.isArray(g)?g:[]),g.length>0&&!Ve&&tn(g[0].id)}catch(g){console.error("Failed to load channels:",g),On(g),Dn([])}},[G.token,st,Ve]),qa=w.useCallback(async d=>{if(!(!G.token||!st))try{const g=await $.getNodeMembers(d,G.token),_=(Array.isArray(g)?g:[]).map(J=>{var ve;return{...J,user:J.user||{id:J.user_id,public_key_hash:J.public_key_hash||"",public_key:"",created_at:J.joined_at||0,display_name:((ve=J.profile)==null?void 0:ve.display_name)||void 0}}});Na(_);const R=localStorage.getItem("accord_user_id");if(R&&_.length>0){const J=_.find(ve=>ve.user_id===R);J&&_t(ve=>({...ve,[d]:J.role}))}}catch(g){console.error("Failed to load members:",g),On(g),Na([])}},[G.token,st]),ds=w.useCallback(async d=>{if(!(!G.token||!st))try{const g=await $.getRoles(d,G.token);Oo(Array.isArray(g)?g:[])}catch(g){console.error("Failed to load roles:",g),Oo([])}},[G.token,st]),Hn=w.useCallback(async d=>{if(!(!G.token||!st))try{const g=await $.getChannelMessages(d,G.token),_=g.messages.map(R=>({...R,author:R.author||St(R.sender_public_key_hash||R.sender_id||"")||"Unknown",time:R.time||new Date(R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));_.sort((R,J)=>R.timestamp-J.timestamp),Je(R=>({...R,messages:_})),ht(g.has_more),vn(g.next_cursor),setTimeout(()=>{const R=Un.current;R&&(R.scrollTop=R.scrollHeight)},0),Uc(d,_)}catch(g){console.error("Failed to load messages:",g),On(g),Je(_=>({..._,messages:[]})),ht(!1),vn(void 0)}},[G.token,st]),rl=w.useCallback(async d=>{if(!(!G.token||!st||oa||!nn||!mt)){ra(!0);try{const g=await $.getChannelMessages(d,G.token,50,mt);if(g.messages.length===0){ht(!1),ra(!1);return}const _=g.messages.map(he=>({...he,author:he.author||St(he.sender_public_key_hash||he.sender_id||"")||"Unknown",time:he.time||new Date(he.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));_.sort((he,ze)=>he.timestamp-ze.timestamp);const R=Un.current,J=(R==null?void 0:R.scrollTop)||0,ve=(R==null?void 0:R.scrollHeight)||0;Je(he=>({...he,messages:[..._,...he.messages]})),ht(g.has_more),vn(g.next_cursor),setTimeout(()=>{if(R){const ze=R.scrollHeight-ve;R.scrollTop=J+ze}},0)}catch(g){console.error("Failed to load older messages:",g),On(g)}finally{ra(!1)}}},[G.token,st,oa,nn,mt]),Tc=w.useCallback(d=>{const g=_c.current;if(g){const _=g.selectionStart,R=g.selectionEnd,J=on.substring(0,_)+d+on.substring(R);Lt(J),setTimeout(()=>{g.selectionStart=g.selectionEnd=_+d.length,g.focus()},0)}else Lt(_=>_+d);wc(!1)},[on]),Zo=w.useCallback(d=>{const g=d.target;g.scrollTop<=50&&nn&&!oa&&Ve&&rl(Ve);const _=g.scrollHeight-g.scrollTop-g.clientHeight;Tu(_>200),_<50&&os(0)},[nn,oa,Ve,rl]),ul=w.useCallback(()=>{const d=Un.current;d&&(d.scrollTo({top:d.scrollHeight,behavior:"smooth"}),os(0))},[]),Xo=w.useCallback((d,g)=>{Ea(d),tn(null),Wa(g),Dn([]),Na([]),Je(_=>({..._,messages:[]})),ra(!1),ht(!0),vn(void 0),Ln(d),qa(d),ds(d)},[Ln,qa,ds]),Pn=w.useCallback(async()=>{if(!(!G.token||!st))try{const d=await $.getDmChannels(G.token);Hl(d.dm_channels)}catch(d){console.error("Failed to load DM channels:",d),On(d),Hl([])}},[G.token,st]),Ac=w.useCallback(async d=>{if(!G.token||!st)return null;try{const g=await $.createDmChannel(d,G.token);return await Pn(),g}catch(g){return console.error("Failed to create DM channel:",g),On(g),null}},[G.token,st,Pn]),kc=w.useCallback(d=>{Ea(null),tn(null),sc(d),wt.setActiveChannel(d.id),ra(!1),ht(!0),vn(void 0),Hn(d.id),De&&De.isSocketConnected()&&De.joinChannel(d.id)},[Hn,De]),Rc=w.useCallback(async d=>{const g=await Ac(d.id);if(g){await Pn();const _=nl.find(R=>R.id===g.id);_&&kc(_)}},[Ac,Pn,nl,kc]),Qo=async()=>{if(!(!Yl.trim()||!G.token)){Sc(!0);try{await $.updateProfile({display_name:Yl.trim()},G.token),Je(d=>({...d,user:d.user?{...d.user,display_name:Yl.trim()}:d.user})),wt.setCurrentUsername(Yl.trim()),Aa(!1),bc("")}catch(d){console.error("Failed to update display name:",d)}finally{Sc(!1)}}},Mc=async()=>{if(!G.token)return;const d=Si.trim().slice(0,128);try{await $.updateProfile({custom_status:d||void 0},G.token),xn(d),zl(!1)}catch(g){console.error("Failed to update custom status:",g)}};w.useEffect(()=>{var d;(d=G.user)!=null&&d.id&&G.token&&$.getUserProfile(G.user.id,G.token).then(g=>{g!=null&&g.custom_status&&(xn(g.custom_status),ja(g.custom_status))}).catch(()=>{})},[(En=G.user)==null?void 0:En.id,G.token]);const fs=w.useCallback((d,g)=>{if(tn(d),qt(g),Je(_=>({..._,activeChannel:d})),wt.setActiveChannel(d),Ce){const _=G.messages.length>0?G.messages[G.messages.length-1]:null;wt.markChannelAsRead(Ce,d,_==null?void 0:_.id),localStorage.setItem(`accord_lastread_${d}`,Date.now().toString()),da(R=>R+1)}ra(!1),ht(!0),vn(void 0),Hn(d),De&&De.isSocketConnected()&&De.joinChannel(d)},[Hn,De,Ce,G.messages]),Dc=async()=>{if(!(!Ce||!G.token||!bn.trim()))try{await $.createChannel(Ce,bn.trim(),Wn,G.token),Kt(!1),an(""),At("text"),await Ln(Ce)}catch(d){console.error("Failed to create channel:",d),On(d)}},ea=async()=>{if(!(!Ce||!G.token))try{const d=await $.createInviteWithOptions(Ce,G.token),g=$.getBaseUrl();try{const R=new URL(g).host;Ul(db(R,d.invite_code))}catch{Ul(d.invite_code)}el(!0)}catch(d){console.error("Failed to generate invite:",d),On(d)}},hs=async(d,g)=>{if(!(!Ce||!G.token||!window.confirm(`Are you sure you want to kick ${g} from this node?`)))try{await $.kickMember(Ce,d,G.token),await qa(Ce)}catch(R){console.error("Failed to kick member:",R),On(R)}},qn=async d=>{if(G.token){try{await $.deleteChannel(d,G.token),d===Ve&&(tn(null),qt("# general")),Ce&&await Ln(Ce)}catch(g){console.error("Failed to delete channel:",g),On(g)}ss(null)}},dl=async()=>{if(!(!G.token||!La.trim())){Ha(!0),ll("");try{const d=La.trim(),g=lg(d),_=g?g.inviteCode:d;await $.joinNodeByInvite(_,G.token),al(!1),Ta(!1),Wi(""),await Bn()}catch(d){ll(d.message||"Failed to join node")}finally{Ha(!1)}}},ms=async()=>{if(!(!G.token||!Pi.trim())&&!ol.current){ol.current=!0,oc(!0);try{const d=await $.createNode(Pi.trim(),G.token,es.trim()||void 0);try{const g=await $.getNodeChannels(d.id,G.token);Array.isArray(g)&&g.length>0||await $.createChannel(d.id,"general","text",G.token)}catch(g){console.warn("Failed to check/create #general channel:",g)}await Bn(),Ea(d.id),Wa(We.length),Ta(!1),ji(""),il(""),await Ln(d.id),await qa(d.id)}catch(d){console.error("Failed to create node:",d),On(d)}finally{oc(!1),ol.current=!1}}},ps=w.useCallback(d=>{wt.updatePreferences(d),Ca(d),da(g=>g+1)},[]),gs=w.useCallback((d,g)=>{if(d!==Ve){const _=Fn.find(R=>R.id===d);_&&fs(d,`# ${_.name}`)}},[Ve,Fn,fs]),Uc=w.useCallback((d,g)=>{if(Ce&&g.length>0){const _=g[g.length-1];wt.markChannelAsRead(Ce,d,_.id),localStorage.setItem(`accord_lastread_${d}`,Date.now().toString()),da(R=>R+1)}},[Ce]),Ka=async()=>{fe("");const d=lg(L);if(!d){fe("Invalid invite link. Expected format: accord://host:port/invite/CODE or https://host:port/invite/CODE");return}oe(d),ke(!0);try{$.setBaseUrl(d.relayUrl);const g=await $.health();o(!0),Ml(!0),Te(g.version),l(d.relayUrl);const _=fb(d.relayHost),R=mb(d.relayHost);if(_&&R)try{Xs(_),localStorage.setItem("accord_user_id",R);let J="";if(Ye){const ze=await Wr();if(ze){rt(ze);const tt=await Vi(ze.publicKey);J=await gi(tt),be(J),Ua(J),S(tt)}}Je(ze=>({...ze,isAuthenticated:!0,token:_,user:{id:R,public_key_hash:J,public_key:"",created_at:0,display_name:St(J)}})),U(!0);try{await $.joinNodeByInvite(d.inviteCode,_)}catch{}const ve=r.replace(/^http/,"ws"),he=new Zs(_,ve);zn(he),rn(he),he.connect(),T(!1),setTimeout(()=>{Bn(),Pn()},100);return}catch{}re(!0)}catch{fe(`Cannot connect to relay at ${d.relayUrl}`),oe(null)}finally{ke(!1)}},Oc=async()=>{if(te){if(fe(""),Ue.length<8){fe("Password must be at least 8 characters");return}se(!0);try{let d="",g="";if(Ye){const J=await xf();d=await Vi(J.publicKey),g=await gi(d),Ua(g),await Fr(J,g),await Pr(J,Ue,g),rt(J),S(d);const ve=await vg(J);Fe(ve)}if(!d){fe("Failed to generate encryption keys"),se(!1);return}await $.register(d,Ue),Oe.current=Ue,be(g),Ua(g);const _=await $.login(d,Ue);Xs(_.token),localStorage.setItem("accord_user_id",_.user_id),hb(te.relayHost,_.token),pb(te.relayHost,_.user_id);try{await $.joinNodeByInvite(te.inviteCode,_.token)}catch{}Je(J=>({...J,isAuthenticated:!0,token:_.token,user:{id:_.user_id,public_key_hash:g,public_key:d,created_at:0,display_name:St(g)}})),U(!0),wt.setCurrentUsername(St(g));const R=new Zs(_.token,r.replace(/^http/,"ws"));zn(R),rn(R),R.connect(),Be(!0),Et(!1),T(!1),setTimeout(()=>{Aa(!0)},500),setTimeout(()=>{Bn(),Pn()},100)}catch(d){fe(d instanceof Error?d.message:"Registration failed")}finally{se(!1)}}},fl=async()=>{b(!0),H("");try{const d=r.replace(/\/+$/,"");l(d),$.setBaseUrl(d),localStorage.setItem("accord_server_url",d);const g=await $.health();o(!0),Ml(!0),x(g.version),m(!1),T(!1)}catch{H(`Cannot connect to ${r}`),o(!1)}finally{b(!1)}},hl=async()=>{if(!st){if(Ye&&!qe)try{const d=await xf();await Fr(d),rt(d);const g=await Vi(d.publicKey);S(g),be(await gi(g))}catch(d){console.warn("Failed to generate demo keys:",d)}U(!0),Je(d=>({...d,isAuthenticated:!0}));return}H("");try{if(E){let d=ce.trim();if(!d&&Ye){const J=localStorage.getItem("accord_public_key_hash");J&&Ua(J);let ve=await kf(Z);if(ve||(ve=await Wr()),ve)d=await Vi(ve.publicKey),rt(ve),S(d);else if(k){const he=Sf();he&&(d=he)}if(!d){const he=localStorage.getItem("accord_public_key_plain");he&&(d=he)}}if(!d){if(localStorage.getItem("accord_public_key_hash")){H("Keypair not found in this browser. Use 'Recover with recovery phrase' to restore your identity, or register a new account.");return}H("No identity found. Create a new identity or recover with your recovery phrase.");return}const g=await $.login(d,Z);Xs(g.token),localStorage.setItem("accord_user_id",g.user_id),Oe.current=Z;const _=await gi(d);if(be(_),Ua(_),Ye&&!qe){let J=await kf(Z,_);J||(J=await Wr(_)),J&&(rt(J),await Pr(J,Z,_))}pe(!0),localStorage.setItem("accord_public_key_plain",d),localStorage.setItem("accord_public_key_hash",_),Je(J=>({...J,isAuthenticated:!0,token:g.token,user:{id:g.user_id,public_key_hash:_,public_key:d,created_at:0,display_name:St(_)}})),U(!0),wt.setCurrentUsername(St(_));const R=new Zs(g.token,r.replace(/^http/,"ws"));zn(R),rn(R),R.connect(),setTimeout(()=>{Bn(),Pn()},100)}else{if(Z.length<8){H("Password must be at least 8 characters long");return}let d=ce.trim();if(!d&&Ye)try{const _=await xf();d=await Vi(_.publicKey);const R=await gi(d);Ua(R),await Fr(_,R),await Pr(_,Z,R),rt(_),S(d);const J=await vg(_);Fe(J)}catch{H("Failed to generate encryption keys");return}if(!d){H("Public key generation failed. Crypto may not be supported.");return}await $.register(d,Z),Oe.current=Z;const g=await gi(d);be(g),Ua(g),localStorage.setItem("accord_public_key_plain",d),localStorage.setItem("accord_public_key_hash",g),Be(!0),Et(!1),setTimeout(()=>{Aa(!0)},500)}}catch(d){H(d instanceof Error?d.message:"Authentication failed")}},Io=async()=>{cn(""),Ie(!0);try{const d=L0(sn),g=await Vi(d.publicKey),_=await $.login(g,$t),R=await gi(g);Ua(R),await Fr(d,R),await Pr(d,$t,R),rt(d),S(g),Oe.current=$t,be(R),Ua(R),Xs(_.token),localStorage.setItem("accord_user_id",_.user_id),Je(ve=>({...ve,isAuthenticated:!0,token:_.token,user:{id:_.user_id,public_key_hash:R,public_key:g,created_at:0,display_name:St(R)}})),U(!0),Bt(!1),Rn(""),en(""),pe(!0),wt.setCurrentUsername(St(R));const J=new Zs(_.token,r.replace(/^http/,"ws"));zn(J),rn(J),J.connect(),setTimeout(()=>{Bn(),Pn()},100)}catch(d){cn(d instanceof Error?d.message:"Recovery failed. Check your phrase and password.")}finally{Ie(!1)}},Sn=()=>{De&&(De.disconnect(),rn(null)),uy(),localStorage.removeItem("accord_user_id"),Oe.current="",rt(null),U0(),pe(bg()),$n([]),Dn([]),Na([]),Ea(null),tn(null),U(!1),Je({isAuthenticated:!1,nodes:[],messages:[],isConnected:!1}),ne(""),S(""),be(""),T(!0),O("choose"),I(""),oe(null),fe(""),re(!1),je("")},zc=async()=>{var g,_,R,J;if(!on.trim())return;const d=(pt==null?void 0:pt.id)||Ve||G.activeChannel;if(De&&De.isSocketConnected()&&d)try{let ve=on,he=!1;if(Ye&&qe&&d)try{const Se=await Sa(qe.privateKey,d);ve=await du(Se,on),he=!0}catch(Se){console.warn("Failed to encrypt message, sending plaintext:",Se)}De.sendChannelMessage(d,ve,jt==null?void 0:jt.id);const ze={id:Math.random().toString(),author:((g=G.user)==null?void 0:g.display_name)||St(((_=G.user)==null?void 0:_.public_key_hash)||"")||"You",content:on,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:Date.now(),channel_id:d,isEncrypted:he,reply_to:jt==null?void 0:jt.id,replied_message:jt?{id:jt.id,sender_id:jt.author,sender_public_key_hash:"",encrypted_payload:"",created_at:jt.timestamp,content:jt.content}:void 0};Je(Se=>({...Se,messages:[...Se.messages,ze]}));const tt=Un.current;tt&&setTimeout(()=>{tt.scrollTop=tt.scrollHeight},0)}catch(ve){console.error("Failed to send message:",ve)}else{const ve={id:Math.random().toString(),author:((R=G.user)==null?void 0:R.display_name)||St(((J=G.user)==null?void 0:J.public_key_hash)||"")||"You",content:on,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:Date.now(),isEncrypted:!1};Je(ze=>({...ze,messages:[...ze.messages,ve]}));const he=Un.current;he&&setTimeout(()=>{he.scrollTop=he.scrollHeight},0)}Lt(""),_a(null)},ha=async()=>{if(!(!ua||!Ba.trim()||!G.user))try{let d=Ba;if(Ye&&qe&&Ve)try{const g=await Sa(qe.privateKey,Ve);d=await du(g,Ba)}catch(g){console.warn("Failed to encrypt edited message:",g),Mt("Failed to encrypt message");return}De&&De.isSocketConnected()?De.sendEditMessage(ua,d):(await $.editMessage(ua,G.user.id,d),Je(g=>({...g,messages:g.messages.map(_=>_.id===ua?{..._,content:Ba,edited_at:Date.now()}:_)}))),Dl(null),_e("")}catch(d){console.error("Failed to edit message:",d),Mt("Failed to edit message")}},ys=()=>{Dl(null),_e("")},vs=async d=>{if(G.token)try{De&&De.isSocketConnected()?De.sendDeleteMessage(d):(await $.deleteMessage(d,G.token),Je(g=>({...g,messages:g.messages.filter(_=>_.id!==d)}))),ee(null)}catch(g){console.error("Failed to delete message:",g),Mt("Failed to delete message")}},Ya=d=>{if(!G.user||!Ce)return!1;if(d.author===(G.user.display_name||St(G.user.public_key_hash)))return!0;const g=localStorage.getItem("accord_user_id"),_=Ft.find(R=>R.user_id===g);return _?_.role==="admin"||_.role==="moderator":!1},Bc=d=>{_a(d);const g=document.querySelector(".message-input");g&&g.focus()},Lc=()=>{_a(null)},Hc=d=>{const g=document.querySelector(`[data-message-id="${d}"]`);g&&(g.scrollIntoView({behavior:"smooth",block:"center"}),g.classList.add("highlight-message"),setTimeout(()=>{g.classList.remove("highlight-message")},2e3))},bs=async(d,g)=>{if(G.token){try{De&&De.isSocketConnected()?De.addReaction(d,g):await $.addReaction(d,g,G.token)}catch(_){console.error("Failed to add reaction:",_),Mt("Failed to add reaction")}lc(null)}},Kn=async(d,g)=>{if(G.token)try{De&&De.isSocketConnected()?De.removeReaction(d,g):await $.removeReaction(d,g,G.token)}catch(_){console.error("Failed to remove reaction:",_),Mt("Failed to remove reaction")}},Xl=async d=>{if(G.token)try{De&&De.isSocketConnected()?De.pinMessage(d):await $.pinMessage(d,G.token)}catch(g){console.error("Failed to pin message:",g),Mt("Failed to pin message")}},Ql=async d=>{if(G.token)try{De&&De.isSocketConnected()?De.unpinMessage(d):await $.unpinMessage(d,G.token)}catch(g){console.error("Failed to unpin message:",g),Mt("Failed to unpin message")}},xs=async()=>{if(!(!Ve||!G.token))try{const g=(await $.getPinnedMessages(Ve,G.token)).pinned_messages.map(_=>({..._,time:new Date(_.created_at*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pinned_at:_.pinned_at*1e3,timestamp:_.created_at*1e3}));bu(g)}catch(d){console.error("Failed to load pinned messages:",d),Mt("Failed to load pinned messages")}},Ui=()=>{nc(d=>(d||xs(),!d))},Nn=async(d,g)=>{if(!G.user)return;const _=G.messages.find(J=>J.id===d);if(!_||!_.reactions){bs(d,g);return}const R=_.reactions.find(J=>J.emoji===g);R&&R.users.includes(G.user.id)?Kn(d,g):bs(d,g)};w.useEffect(()=>{(async()=>{const g=q0(),_=localStorage.getItem("accord_user_id");if(g&&_&&st){T(!1);let R=null;Ye&&(R=await Wr(),R&&rt(R));let J="";if(R){const he=await Vi(R.publicKey);J=await gi(he),be(J),Ua(J),S(he)}Je(he=>({...he,isAuthenticated:!0,token:g,user:{id:_,public_key_hash:J,public_key:"",created_at:0,display_name:St(J)}})),U(!0);const ve=new Zs(g,r.replace(/^http/,"ws"));zn(ve),rn(ve),ve.connect(),setTimeout(()=>{Bn(),Pn()},100)}})()},[st,zn,Ye,Bn]),w.useEffect(()=>{Ce&&G.token&&st&&(Ln(Ce),qa(Ce))},[Ce,G.token,st,Ln,qa]),w.useEffect(()=>{Ve&&G.token&&st&&Hn(Ve)},[Ve,G.token,st,Hn]),w.useEffect(()=>{const d=g=>{if((g.ctrlKey||g.metaKey)&&(g.key==="k"||g.key==="f")&&(g.preventDefault(),Ll(!0)),(g.ctrlKey||g.metaKey)&&g.key===","&&(g.preventDefault(),ts(!0)),(g.ctrlKey||g.metaKey)&&g.key==="/"&&(g.preventDefault(),ki(_=>!_)),g.key==="Escape"){if(cs){ki(!1);return}if(Fi){Ll(!1);return}if(rc){ts(!1);return}if(fc){hc(!1);return}if(is){ss(null);return}if(wi){_i(!1);return}if(Ni){Ta(!1);return}if(Pa){el(!1);return}if(Ai){Aa(!1);return}if(ua){ys();return}if(jt){Lc();return}}};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[cs,Fi,rc,wi,Ni,Pa,Ai,ua,jt]),w.useEffect(()=>{const d=localStorage.getItem("accord-font-size");d&&document.documentElement.style.setProperty("--font-size",d)},[]);const[Yn]=w.useState(()=>localStorage.getItem("accord-message-density")||"comfortable");w.useEffect(()=>()=>{De&&De.disconnect()},[De]);const dn=w.useCallback(d=>{var J;const g=Nc.get(d);if(g)return g;const _=rs.get(d);if(_&&Date.now()-_<300*1e3)return"online";const R=Ft.find(ve=>ve.user_id===d);return R!=null&&R.status?R.status:(J=R==null?void 0:R.profile)!=null&&J.status?R.profile.status:"offline"},[Nc,rs,Ft]),ma=eu.useMemo(()=>{const d={online:0,idle:1,dnd:2,offline:3};return[...Ft].sort((g,_)=>{const R=d[dn(g.user_id)]??3,J=d[dn(_.user_id)]??3;return R-J})},[Ft,dn]),ta=w.useCallback((d,g,_,R,J,ve)=>{d.preventDefault(),Gl({x:d.clientX,y:d.clientY,userId:g,publicKeyHash:_,displayName:R,bio:J,user:ve})},[]);if(w.useEffect(()=>{const d=()=>Gl(null);if(Dt)return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[Dt]),Me)return s.jsx("div",{className:"app",children:s.jsx("div",{className:"auth-page",children:s.jsxs("div",{className:"auth-card key-backup-card",children:[s.jsx("h2",{className:"auth-title",children:" Save Your Recovery Phrase"}),s.jsxs("p",{className:"auth-subtitle",children:["This 24-word phrase is the ",s.jsx("strong",{children:"only way"})," to recover your identity if you lose access to this browser.",s.jsx("strong",{className:"warning",style:{color:"var(--yellow)"},children:" Write it down and store it safely. It will NOT be shown again."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Recovery Phrase (24 words)"}),s.jsx("div",{style:{background:"var(--bg-tertiary)",border:"2px solid var(--yellow)",borderRadius:"8px",padding:"16px",fontFamily:"monospace",fontSize:"15px",lineHeight:"2",wordSpacing:"8px",userSelect:"all",cursor:"text"},children:He})]}),s.jsx("div",{className:"form-group",style:{marginTop:"16px"},children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:Jt,onChange:d=>Et(d.target.checked)}),"I have written down my recovery phrase and stored it safely"]})}),s.jsxs("div",{className:"key-backup-actions",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(He).catch(()=>{}),alert("Recovery phrase copied to clipboard! Store it safely and clear your clipboard.")},className:"btn btn-green",children:"Copy to Clipboard"}),s.jsx("button",{onClick:()=>{Be(!1),Fe(""),Y||(K(!0),ne(""),H(""))},disabled:!Jt,className:"btn btn-primary",title:Jt?"":"Please acknowledge you saved your phrase",children:Y?"Continue":"Continue to Login"})]})]})})});if(Vt)return s.jsx("div",{className:"app",children:s.jsx("div",{className:"auth-page",children:s.jsxs("div",{className:"auth-card",children:[s.jsx("button",{onClick:()=>{Bt(!1),cn(""),Rn(""),en("")},className:"auth-back-btn",children:" Back"}),s.jsx("h2",{className:"auth-title",children:" Recover Identity"}),s.jsx("p",{className:"auth-subtitle",children:"Enter your 24-word recovery phrase and password to restore your identity"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Recovery Phrase (24 words)"}),s.jsx("textarea",{placeholder:"word1 word2 word3 ... word24",value:sn,onChange:d=>Rn(d.target.value),rows:3,className:"form-textarea",style:{fontFamily:"monospace"}})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Password"}),s.jsx("input",{type:"password",placeholder:"Your account password",value:$t,onChange:d=>en(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Io()},className:"form-input"})]}),gn&&s.jsx("div",{className:"auth-error",children:gn}),s.jsx("button",{onClick:Io,disabled:le||!sn.trim()||!$t,className:"btn btn-primary",children:le?"Recovering...":"Recover Identity"})]})})});if(ie)return s.jsx("div",{className:"app",children:s.jsx("div",{className:"auth-page",children:s.jsxs("div",{className:"auth-card key-backup-card",children:[s.jsx("h2",{className:"auth-title",children:" Backup Your Key"}),s.jsxs("p",{className:"auth-subtitle",children:["Your identity is your keypair. If you lose it, you lose access to your account forever.",s.jsx("strong",{className:"warning",style:{color:"var(--yellow)"},children:" There is no recovery."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Your Public Key Fingerprint"}),s.jsx("div",{className:"key-value",children:ae||"computing..."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Public Key (share this)"}),s.jsx("textarea",{readOnly:!0,value:ce,rows:3,className:"form-textarea"})]}),s.jsx("div",{className:"auth-success",style:{marginBottom:"16px"},children:" Your keypair is saved in this browser's storage. To use Accord on another device, you'll need to export and import your key."}),s.jsxs("div",{className:"key-backup-actions",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ce).catch(()=>{}),alert("Public key copied to clipboard!")},className:"btn btn-green",children:"Copy Public Key"}),s.jsx("button",{onClick:()=>{P(!1),K(!0),ne(""),H("")},className:"btn btn-primary",children:"Continue to Login"})]})]})})});if(A)return s.jsx("div",{className:"app",children:s.jsx("div",{className:"auth-page",children:s.jsxs("div",{className:"auth-card auth-card-narrow",children:[X==="choose"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"auth-brand",children:s.jsxs("h1",{children:[" ",s.jsx("span",{className:"brand-accent",children:"Accord"})]})}),s.jsx("p",{className:"auth-tagline",children:"Privacy-first community communications"}),s.jsx("div",{className:"auth-buttons-stack",children:st?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{T(!1),K(!0)},className:"btn btn-primary",children:"Log in"}),s.jsx("button",{onClick:()=>{T(!1),K(!1)},className:"btn btn-outline",children:"Create new identity"}),s.jsx("button",{onClick:()=>O("invite"),className:"btn btn-outline",children:"I have an invite link"}),s.jsx("button",{onClick:()=>{T(!1),Bt(!0),cn("")},className:"btn-ghost",style:{fontSize:"13px",marginTop:"8px",opacity:.8},children:" Recover identity with recovery phrase"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>O("invite"),className:"btn btn-primary",children:"I have an invite link"}),s.jsx("button",{onClick:()=>O("admin"),className:"btn btn-outline",children:"Set up a new relay (admin)"}),s.jsx("button",{onClick:()=>O("recover"),className:"btn-ghost",style:{fontSize:"13px",marginTop:"8px",opacity:.8},children:" Recover identity (connect to relay first)"})]})})]}),X==="invite"&&!we&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{O("choose"),fe(""),I(""),oe(null),Te("")},className:"auth-back-btn",children:" Back"}),s.jsx("h2",{className:"auth-title",children:"Join via Invite"}),s.jsx("p",{className:"auth-subtitle",children:"Paste the invite link you received"}),s.jsx("div",{className:"form-group",children:s.jsx("input",{type:"text",placeholder:"accord://host:port/invite/CODE or https://...",value:L,onChange:d=>I(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Ka()},className:"form-input"})}),ge&&s.jsx("div",{className:"auth-error",children:ge}),Ge&&s.jsxs("div",{className:"auth-success",children:[" Connected to relay v",Ge]}),s.jsx("button",{onClick:Ka,disabled:de||!L.trim(),className:"btn btn-primary",children:de?"Connecting to relay...":"Join"})]}),X==="invite"&&we&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"auth-title",children:"Create Your Identity"}),s.jsx("p",{className:"auth-subtitle",children:"Connected to relay  now set a password to create your identity"}),s.jsx("div",{className:"auth-info-box",children:s.jsx("span",{className:"accent",children:" A keypair will be auto-generated. No username needed."})}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Password (min 8 characters)"}),s.jsx("input",{type:"password",placeholder:"Choose a password",value:Ue,onChange:d=>je(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Oc()},className:"form-input"})]}),ge&&s.jsx("div",{className:"auth-error",children:ge}),s.jsx("button",{onClick:Oc,disabled:ye||Ue.length<8,className:"btn btn-green",children:ye?"Creating identity & joining...":"Create Identity & Join"})]}),X==="admin"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{O("choose"),H("")},className:"auth-back-btn",children:" Back"}),s.jsx("h2",{className:"auth-title",children:"Connect to Relay"}),s.jsx("p",{className:"auth-subtitle",children:"Enter the relay server URL (admin/power-user)"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Server URL"}),s.jsx("input",{type:"text",placeholder:"http://localhost:8080",value:r,onChange:d=>l(d.target.value),onKeyDown:d=>{d.key==="Enter"&&fl()},className:"form-input"})]}),D&&s.jsx("div",{className:"auth-error",children:D}),v&&s.jsxs("div",{className:"auth-success",children:[" Connected  server v",v]}),s.jsx("button",{onClick:fl,disabled:p,className:"btn btn-primary",children:p?"Connecting...":"Connect"})]})]})})});if(h)return s.jsx("div",{className:"app",children:s.jsx("div",{className:"auth-page",children:s.jsxs("div",{className:"auth-card auth-card-narrow",children:[s.jsx("h2",{className:"auth-title",children:"Connect to Relay"}),s.jsx("p",{className:"auth-subtitle",children:"Manual relay connection"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Server URL"}),s.jsx("input",{type:"text",placeholder:"http://localhost:8080",value:r,onChange:d=>l(d.target.value),onKeyDown:d=>{d.key==="Enter"&&fl()},className:"form-input"})]}),D&&s.jsx("div",{className:"auth-error",children:D}),v&&s.jsxs("div",{className:"auth-success",children:[" Connected  server v",v]}),s.jsx("button",{onClick:fl,disabled:p,className:"btn btn-primary",children:p?"Connecting...":"Connect"})]})})});if(!Y)return s.jsx("div",{className:"app",children:s.jsx("div",{className:"auth-page",children:s.jsxs("div",{className:"auth-card",children:[s.jsx("h2",{className:"auth-title",children:E?k?"Welcome Back":"Login to Accord":"Create Identity"}),s.jsx("p",{className:"auth-subtitle",children:E?k?"Enter your password to sign back in":"Authenticate with your keypair and password":"A new keypair will be generated automatically"}),s.jsxs("div",{className:"auth-server-bar",children:[s.jsxs("span",{children:[" ",r," ",st&&s.jsx("span",{className:"connected",children:" connected"})]}),s.jsx("button",{onClick:()=>{T(!0),O("choose"),H("")},className:"btn-ghost",style:{fontSize:"12px"},children:"Change"})]}),E&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Key Status"}),s.jsx("div",{className:"auth-info-box",children:qe||ce||k?s.jsx("span",{className:"accent",children:" Keypair found  enter your password to sign back in"}):localStorage.getItem("accord_public_key_plain")?s.jsx("span",{className:"accent",children:" Identity remembered  enter your password to log in"}):s.jsx("span",{style:{color:"var(--yellow)"},children:" No identity found on this device  create a new one or recover with your phrase"})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Password"}),s.jsx("input",{type:"password",placeholder:E?"Enter your password":"Choose a password (min 8 chars)",value:Z,onChange:d=>ne(d.target.value),onKeyDown:d=>{d.key==="Enter"&&hl()},className:"form-input"}),!E&&Z&&Z.length<8&&s.jsx("div",{className:"form-hint",style:{color:"var(--red)"},children:"Password must be at least 8 characters"})]}),!E&&Ye&&s.jsxs("div",{className:"auth-info-box",style:{marginBottom:"20px"},children:[s.jsx("div",{className:"accent",children:" A new ECDH P-256 keypair will be generated for your identity"}),s.jsx("div",{style:{fontSize:"12px",marginTop:"4px"},children:"No username needed  you are identified by your public key hash"})]}),D&&s.jsx("div",{className:"auth-error",children:D}),s.jsx("button",{onClick:hl,className:"btn btn-primary",style:{marginBottom:"16px"},children:E?"Login":"Create Identity & Register"}),s.jsxs("div",{className:"auth-toggle",style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[s.jsx("button",{onClick:()=>{K(!E),H(""),ne("")},className:"btn-ghost",children:E?"Need to create an identity?":"Already have a keypair? Login"}),s.jsxs("div",{style:{borderTop:"1px solid var(--border)",width:"100%",paddingTop:"12px",marginTop:"4px",display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"12px",opacity:.6},children:"Lost access to your keypair?"}),s.jsx("button",{onClick:()=>{Bt(!0),cn("")},className:"btn btn-outline",style:{width:"100%"},children:" Recover with recovery phrase"})]})]})]})})});const pa=We.map(d=>d.name),ka=d=>d?d.display_name||St(d.public_key_hash):"Unknown",Oi=d=>typeof d.channel_type=="number"?d.channel_type:d.channel_type==="voice"?2:d.channel_type==="category"?4:0,Ss=[...Fn].sort((d,g)=>(d.position??0)-(g.position??0)),Jo=Ss.filter(d=>Oi(d)===4),Zt=Ss.filter(d=>Oi(d)!==4),bt=Zt.filter(d=>!d.parent_id),et=d=>Zt.filter(g=>g.parent_id===d),Ga=d=>{Nu(g=>{const _=new Set(g);return _.has(d)?_.delete(d):_.add(d),_})};return s.jsxs("div",{className:"app",children:[s.jsxs("div",{className:"server-list",children:[pa.map((d,g)=>{var J,ve;const _=We.length>0?(J=We[g])==null?void 0:J.id:null,R=_?wt.getNodeUnreads(_):{totalUnreads:0,totalMentions:0};return s.jsxs("div",{className:`server-icon ${g===Tt?"active":""}`,onClick:()=>{_?Xo(_,g):Wa(g)},title:d,children:[(ve=We[g])!=null&&ve.icon_hash?s.jsx("img",{src:`${$.getNodeIconUrl(We[g].id)}?v=${We[g].icon_hash}`,alt:d[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"inherit"},onError:he=>{he.target.style.display="none",he.target.parentElement.textContent=d[0]}}):d[0],R.totalMentions>0&&s.jsx("div",{className:"server-notification mention",children:R.totalMentions>9?"9+":R.totalMentions}),R.totalMentions===0&&R.totalUnreads>0&&s.jsx("div",{className:"server-notification dot"})]},_||d)}),s.jsx("div",{className:"server-icon add-server",title:"Join or Create Node",onClick:()=>Ta(!0),style:{cursor:"pointer"},children:"+"})]},Bl),s.jsxs("div",{className:"channel-sidebar",children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsxs("div",{className:"sidebar-header-row",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[pa[Tt],st&&s.jsxs("span",{className:"connection-status",children:[s.jsx("span",{className:`connection-dot ${Mn.status}`,children:""}),s.jsxs("span",{className:"connection-label",children:[Mn.status==="connected"&&"Connected",Mn.status==="reconnecting"&&`Reconnecting... ${Mn.reconnectAttempt}/${Mn.maxReconnectAttempts}`,Mn.status==="disconnected"&&!G.isConnected&&"Disconnected"]}),Mn.status==="disconnected"&&!G.isConnected&&De&&s.jsx("button",{className:"connection-retry-btn",onClick:()=>De.retry(),children:"Retry"})]}),!st&&s.jsx("span",{className:"demo-badge",children:"DEMO"})]}),s.jsxs("div",{className:"sidebar-admin-buttons",children:[Ce&&Zl(Ce,"ManageInvites")&&s.jsx("button",{onClick:ea,className:"sidebar-admin-btn",title:"Generate Invite",children:"Invite"}),Ce&&s.jsx("button",{onClick:()=>hc(!0),className:"sidebar-admin-btn",title:"Node Settings",children:""})]})]}),Ce&&Pe[Ce]&&s.jsxs("div",{className:"sidebar-role",children:[us(Pe[Ce])," ",Pe[Ce]]}),Ce&&((ws=We.find(d=>d.id===Ce))==null?void 0:ws.description)&&s.jsx("div",{className:"sidebar-description",title:(Ra=We.find(d=>d.id===Ce))==null?void 0:Ra.description,children:(qc=We.find(d=>d.id===Ce))==null?void 0:qc.description})]}),s.jsxs("div",{className:"channel-list",children:[(()=>{const d=Ce&&Zl(Ce,"DeleteChannel"),g=_=>{var tt,Se;const R=Oi(_)===2,J=_.id===Ve,ve=R&&Wt===_.id,he=Ce?wt.getChannelUnreads(Ce,_.id):{count:0,mentions:0},ze=he.count>0||he.mentions>0;return s.jsxs("div",{className:`channel ${J?"active":""} ${ve?"voice-connected":""} ${ze&&!J?"unread":""}`,title:_.topic||void 0,children:[s.jsxs("div",{onClick:()=>{R?ve||(Ji(_.id),xi(_.name),Ol(Date.now())):fs(_.id,`# ${_.name}`)},style:{flex:1,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsxs("span",{style:{color:R?"#8e9297":void 0},children:[R?"":"#"," ",_.name]}),R&&!ve&&s.jsx("span",{style:{fontSize:"10px",color:"#8e9297",marginLeft:"4px"},children:"Voice Channel"}),ve&&s.jsx("span",{style:{fontSize:"10px",color:"#43b581"},children:""})]}),s.jsxs("div",{className:"channel-badges",children:[he.mentions>0&&s.jsx("div",{className:"mention-badge",children:he.mentions>9?"9+":he.mentions}),he.mentions===0&&he.count>0&&s.jsx("div",{className:"unread-badge",children:he.count>99?"99+":he.count}),d&&s.jsx("button",{onClick:me=>{me.stopPropagation(),ss({id:_.id,name:_.name})},className:"channel-delete-btn",title:"Delete channel",children:""})]}),ve&&Wt===_.id&&s.jsx("div",{className:"voice-channel-users",children:s.jsxs("div",{className:"voice-channel-user",children:[s.jsx("div",{className:"voice-user-avatar",children:(((tt=G.user)==null?void 0:tt.display_name)||"U")[0]}),s.jsx("span",{className:"voice-user-name",children:((Se=G.user)==null?void 0:Se.display_name)||"You"})]})})]},_.id)};return s.jsxs(s.Fragment,{children:[bt.map(_=>g(_)),Jo.map(_=>{const R=et(_.id),J=_u.has(_.id);return s.jsxs("div",{className:"channel-category",children:[s.jsxs("div",{className:"category-header",onClick:()=>Ga(_.id),children:[s.jsx("span",{className:"category-arrow",children:J?"":""}),s.jsx("span",{className:"category-name",children:_.name})]}),!J&&R.map(ve=>g(ve))]},_.id)})]})})(),Ce&&Zl(Ce,"ManageNode")&&s.jsx("div",{style:{padding:"4px 8px"},children:s.jsx("button",{onClick:()=>pc(!0),className:"btn btn-outline btn-sm",style:{width:"100%",fontSize:"11px"},children:" Import Discord Template"})}),Ce&&Zl(Ce,"CreateChannel")&&s.jsx("div",{style:{marginTop:"4px",padding:"0 8px"},children:Xe?s.jsxs("div",{className:"create-channel-form",children:[s.jsx("input",{type:"text",placeholder:"Channel name",value:bn,onChange:d=>an(d.target.value)}),s.jsxs("select",{value:Wn,onChange:d=>At(d.target.value),children:[s.jsx("option",{value:"text",children:"Text Channel"}),s.jsx("option",{value:"voice",children:"Voice Channel"})]}),s.jsxs("div",{className:"create-channel-actions",children:[s.jsx("button",{onClick:Dc,className:"btn btn-green btn-sm",children:"Create"}),s.jsx("button",{onClick:()=>{Kt(!1),an(""),At("text")},className:"btn btn-outline btn-sm",children:"Cancel"})]})]}):s.jsx("button",{onClick:()=>Kt(!0),className:"btn btn-green btn-sm",style:{width:"100%"},children:"+ Create Channel"})})]}),s.jsxs("div",{className:"dm-section",children:[s.jsxs("div",{className:"dm-header",children:["Direct Messages",s.jsx("button",{onClick:()=>fa(!ql),className:"dm-header-add-btn",title:"Create DM",children:"+"})]}),s.jsxs("div",{className:"dm-list",children:[nl.map(d=>{var R;const g=(pt==null?void 0:pt.id)===d.id,_=wt.getChannelUnreads(`dm-${d.id}`,d.id);return s.jsxs("div",{className:`dm-item ${g?"active":""}`,onClick:()=>kc(d),children:[s.jsx("div",{className:"dm-avatar",children:(((R=d.other_user_profile)==null?void 0:R.display_name)||"?")[0].toUpperCase()}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{className:"dm-name",children:d.other_user_profile.display_name}),d.last_message&&s.jsx("div",{className:"dm-last-message",children:d.last_message.content.substring(0,30)})]}),s.jsxs("div",{className:"dm-badges",children:[_.mentions>0&&s.jsx("div",{className:"mention-badge",children:_.mentions>9?"9+":_.mentions}),_.mentions===0&&_.count>0&&s.jsx("div",{className:"notification-dot"})]})]},d.id)}),nl.length===0&&s.jsx("div",{className:"dm-empty",children:"No direct messages yet"})]})]}),Wt&&s.jsx(ex,{channelName:Ro,connectedAt:Mo,onDisconnect:()=>{Ji(null),xi(""),Ol(null)}}),s.jsxs("div",{className:"user-panel",children:[s.jsx("div",{className:"user-avatar",children:(Kc=G.user)!=null&&Kc.id?s.jsx("img",{src:`${$.getUserAvatarUrl(G.user.id)}`,alt:(((ml=G.user)==null?void 0:ml.display_name)||"U")[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:d=>{var g,_,R;d.target.style.display="none",d.target.parentElement.textContent=((R=((g=G.user)==null?void 0:g.display_name)||St(((_=G.user)==null?void 0:_.public_key_hash)||""))==null?void 0:R[0])||"U"}}):((Il=((Va=G.user)==null?void 0:Va.display_name)||St(((_s=G.user)==null?void 0:_s.public_key_hash)||""))==null?void 0:Il[0])||"U"}),s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"username",children:((Ns=G.user)==null?void 0:Ns.display_name)||St(((Za=G.user)==null?void 0:Za.public_key_hash)||"")||"You"}),s.jsx("div",{className:"user-status",onClick:()=>{ja(Ps),zl(!0)},style:{cursor:"pointer"},title:"Click to set custom status",children:Ps||(G.isConnected?"Online":"Offline")})]}),s.jsx("button",{onClick:()=>ns(!0),className:"user-panel-settings connection-indicator",title:G.isConnected?`Connected${Ti?`  v${Ti}`:""}${Kl?` (${Kl.slice(0,8)})`:""}`:"Disconnected",children:G.isConnected?"":""}),s.jsx("button",{onClick:()=>_i(!0),className:"user-panel-settings",title:"Notification Settings",children:""}),s.jsx("button",{onClick:()=>ts(!0),className:"user-panel-settings",title:"Settings (Ctrl+,)",children:""}),s.jsx("button",{onClick:Sn,className:"user-panel-logout",children:"Logout"})]}),ec&&s.jsxs("div",{className:"status-popover",children:[s.jsxs("div",{className:"status-popover-header",children:[s.jsx("span",{children:"Set Custom Status"}),s.jsx("button",{onClick:()=>zl(!1),className:"status-popover-close",children:""})]}),s.jsx("input",{type:"text",className:"status-popover-input",placeholder:"What's on your mind?",value:Si,onChange:d=>ja(d.target.value.slice(0,128)),onKeyDown:d=>{d.key==="Enter"&&Mc(),d.key==="Escape"&&zl(!1)},maxLength:128,autoFocus:!0}),s.jsxs("div",{className:"status-popover-footer",children:[s.jsxs("span",{className:"status-popover-count",children:[Si.length,"/128"]}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[Ps&&s.jsx("button",{className:"status-popover-clear",onClick:()=>{ja(""),xn(""),$.updateProfile({custom_status:""},G.token||"").catch(()=>{}),zl(!1)},children:"Clear"}),s.jsx("button",{className:"status-popover-save",onClick:Mc,children:"Save"})]})]})]})]}),s.jsx("div",{className:"chat-area",children:s.jsxs(Y0,{channelId:(pt==null?void 0:pt.id)||Ve||"",token:G.token||"",keyPair:qe,encryptionEnabled:Ye,children:[s.jsxs("div",{className:"chat-header",children:[s.jsx("div",{className:"chat-header-left",children:pt?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("div",{className:"dm-avatar",style:{width:"24px",height:"24px",fontSize:"12px",marginRight:"8px"},children:(((ga=pt.other_user_profile)==null?void 0:ga.display_name)||"?")[0].toUpperCase()}),s.jsx("span",{className:"chat-channel-name",children:pt.other_user_profile.display_name})]}),s.jsxs("span",{className:"chat-topic",children:["Direct message with ",pt.other_user_profile.display_name]})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"chat-channel-name",children:Ht}),s.jsx("span",{className:"chat-topic",children:(()=>{const d=Fn.find(g=>g.id===Ve);return(d==null?void 0:d.channel_type)==="voice"?` Voice channel  ${d.name}`:d!=null&&d.topic?d.topic:""})()})]})}),s.jsxs("div",{className:"chat-header-right",children:[s.jsx("button",{onClick:Ui,className:`chat-header-btn ${tc?"active":""}`,title:"Toggle pinned messages",children:""}),Ye&&qe&&s.jsx("span",{className:"e2ee-badge enabled",title:"End-to-end encryption enabled",children:" E2EE"}),Ye&&!qe&&s.jsx("span",{className:"e2ee-badge warning",title:"Encryption not available",children:" No Keys"}),!Ye&&s.jsx("span",{className:"e2ee-badge disabled",title:"Encryption not supported",children:" No E2EE"}),s.jsx("button",{className:"search-button",onClick:()=>Ll(!0),title:"Search messages (Ctrl+K)",children:""}),s.jsx("button",{onClick:()=>ju(d=>!d),className:`chat-header-btn ${cl?"active":""}`,title:"Toggle member list",children:""})]})]}),s.jsxs("div",{className:`messages ${Wt?"with-voice":""} density-${Yn}`,ref:Un,onScroll:Zo,children:[oa&&s.jsxs("div",{className:"messages-loading",children:[s.jsx("span",{className:"spinner spinner-sm"})," Loading older messages..."]}),!nn&&G.messages.length>0&&s.jsx("div",{className:"messages-beginning",children:"You've reached the beginning of this channel"}),!oa&&G.messages.length===0&&Ve&&s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-state-icon",children:""}),s.jsx("div",{className:"empty-state-title",children:"No messages yet"}),s.jsx("div",{className:"empty-state-text",children:"Be the first to send a message in this channel!"})]}),!Ve&&!pt&&Fn.length===0&&We.length>0&&s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-state-icon",children:"#"}),s.jsx("div",{className:"empty-state-title",children:"No channels"}),s.jsx("div",{className:"empty-state-text",children:"Create a channel to start chatting."})]}),We.length===0&&!pt&&s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-state-icon",children:""}),s.jsx("div",{className:"empty-state-title",children:"Welcome to Accord"}),s.jsx("div",{className:"empty-state-text",children:"Join a node via invite or create your own to get started."})]}),G.messages.map((d,g)=>{const _=g>0?G.messages[g-1]:null,R=_&&_.author===d.author&&Math.abs(d.timestamp-_.timestamp)<300*1e3&&!d.reply_to,J=new Date(d.timestamp),ve=_?new Date(_.timestamp):null,he=!ve||J.toDateString()!==ve.toDateString(),ze=Se=>{const me=new Date,kt=new Date(me.getFullYear(),me.getMonth(),me.getDate()),Rt=new Date(Se.getFullYear(),Se.getMonth(),Se.getDate()),Le=kt.getTime()-Rt.getTime();return Le===0?"Today":Le===864e5?"Yesterday":Se.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},tt=Se=>{const me=Date.now()-Se;return me<6e4?"just now":me<36e5?`${Math.floor(me/6e4)}m ago`:me<864e5?`${Math.floor(me/36e5)}h ago`:new Date(Se).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return s.jsxs(eu.Fragment,{children:[he&&s.jsx("div",{className:"date-separator",children:s.jsx("span",{className:"date-separator-text",children:ze(J)})}),s.jsxs("div",{className:`message ${d.reply_to?"reply-message":""} ${R?"message-grouped":""}`,"data-message-id":d.id,children:[d.replied_message&&s.jsxs("div",{className:"reply-preview",onClick:()=>Hc(d.reply_to),children:[s.jsx("div",{className:"reply-bar"}),s.jsxs("div",{className:"reply-content",children:[s.jsxs("span",{className:"reply-author",children:["Replying to ",St(d.replied_message.sender_public_key_hash)]}),s.jsx("span",{className:"reply-snippet",children:d.replied_message.content||d.replied_message.encrypted_payload.substring(0,50)+"..."})]})]}),!R&&s.jsx("div",{className:"message-avatar",children:d.sender_id?s.jsx("img",{src:`${$.getUserAvatarUrl(d.sender_id)}`,alt:(d.author||"?")[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:Se=>{Se.target.style.display="none",Se.target.parentElement.textContent=(d.author||"?")[0]}}):(d.author||"?")[0]}),R&&s.jsx("div",{className:"message-avatar-spacer",children:s.jsx("span",{className:"message-hover-time",children:new Date(d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}),s.jsxs("div",{className:"message-body",children:[!R&&s.jsxs("div",{className:"message-header",children:[s.jsx("span",{className:"message-author",onContextMenu:Se=>{var kt;const me=Ft.find(Rt=>ka(Rt.user)===d.author||St(Rt.public_key_hash)===d.author);me&&ta(Se,me.user_id,me.public_key_hash,d.author,(kt=me.profile)==null?void 0:kt.bio,me.user)},children:d.author}),s.jsx("span",{className:"message-time",children:tt(d.timestamp)}),d.edited_at&&s.jsx("span",{className:"message-edited",title:`Edited at ${new Date(d.edited_at).toLocaleString()}`,children:"(edited)"}),d.isEncrypted&&s.jsx("span",{className:"message-encrypted-badge",title:"End-to-end encrypted",children:""}),d.pinned_at&&s.jsx("span",{className:"message-pinned-badge",title:`Pinned ${new Date(d.pinned_at).toLocaleString()}`,children:""}),G.user&&s.jsxs("div",{className:"message-actions",children:[s.jsx("button",{onClick:()=>Bc(d),className:"message-action-btn",title:"Reply to message",children:""}),d.author===(G.user.display_name||St(G.user.public_key_hash))&&s.jsx("button",{onClick:()=>xe(d.id,d.content),className:"message-action-btn",title:"Edit message",children:""}),(d.author===(G.user.display_name||St(G.user.public_key_hash))||Ya(d))&&s.jsx("button",{onClick:()=>ee(d.id),className:"message-action-btn",title:"Delete message",children:""}),Ya(d)&&s.jsx("button",{onClick:()=>d.pinned_at?Ql(d.id):Xl(d.id),className:"message-action-btn",title:d.pinned_at?"Unpin message":"Pin message",children:""})]})]}),ua===d.id?s.jsxs("div",{className:"message-edit-container",children:[s.jsx("input",{type:"text",value:Ba,onChange:Se=>_e(Se.target.value),onKeyDown:Se=>{Se.key==="Enter"&&!Se.shiftKey?(Se.preventDefault(),ha()):Se.key==="Escape"&&ys()},className:"message-edit-input",placeholder:"Edit your message...",autoFocus:!0}),s.jsxs("div",{className:"message-edit-actions",children:[s.jsx("button",{onClick:ha,className:"edit-save-btn",children:"Save"}),s.jsx("button",{onClick:ys,className:"edit-cancel-btn",children:"Cancel"})]})]}):s.jsx("div",{className:"message-content",dangerouslySetInnerHTML:{__html:wt.highlightMentions(d.content)}}),d.files&&d.files.length>0&&s.jsx("div",{className:"message-attachments",children:d.files.map(Se=>s.jsx(G0,{file:Se,token:G.token||"",channelId:d.channel_id||(pt==null?void 0:pt.id)||Ve||"",keyPair:qe,encryptionEnabled:Ye},Se.id))}),s.jsxs("div",{className:"message-reactions-container",onMouseEnter:()=>Do(d.id),onMouseLeave:()=>Do(null),children:[d.reactions&&d.reactions.length>0&&s.jsx("div",{className:"message-reactions",children:d.reactions.map(Se=>{const me=G.user&&Se.users.includes(G.user.id);return s.jsxs("button",{className:`reaction ${me?"reaction-user-reacted":""}`,onClick:()=>Nn(d.id,Se.emoji),title:`${Se.users.length} reactions`,children:[s.jsx("span",{className:"reaction-emoji",children:Se.emoji}),s.jsx("span",{className:"reaction-count",children:Se.count})]},Se.emoji)})}),ic===d.id&&G.user&&s.jsxs("div",{className:"add-reaction-container quick-react-bar",children:[["","","","",""].map(Se=>s.jsx("button",{className:"quick-react-btn",onClick:()=>Nn(d.id,Se),title:`React with ${Se}`,children:Se},Se)),s.jsx("button",{className:"add-reaction-btn",onClick:()=>lc(ac===d.id?null:d.id),title:"More reactions",children:"+"}),ac===d.id&&s.jsx("div",{className:"emoji-picker",children:xu.map(Se=>s.jsx("button",{className:"emoji-option",onClick:()=>bs(d.id,Se),title:`React with ${Se}`,children:Se},Se))})]})]}),j===d.id&&s.jsx("div",{className:"delete-confirm-overlay",children:s.jsxs("div",{className:"delete-confirm-dialog",children:[s.jsx("p",{children:"Are you sure you want to delete this message?"}),s.jsxs("div",{className:"delete-confirm-actions",children:[s.jsx("button",{onClick:()=>vs(d.id),className:"delete-confirm-btn",children:"Delete"}),s.jsx("button",{onClick:()=>ee(null),className:"delete-cancel-btn",children:"Cancel"})]})]})})]})]})]},d.id||g)}),Mi&&s.jsxs("button",{className:"scroll-to-bottom-btn",onClick:ul,children:[" ",Di>0&&s.jsx("span",{className:"scroll-to-bottom-count",children:Di})]})]}),Ve&&Vo(Ve)&&s.jsxs("div",{className:"typing-indicator",children:[s.jsxs("div",{className:"typing-dots-animated",children:[s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{})]}),s.jsx("span",{className:"typing-text",children:Vo(Ve)})]}),s.jsxs("div",{className:"message-input-container",children:[jt&&s.jsxs("div",{className:"reply-input-preview",children:[s.jsx("div",{className:"reply-input-bar"}),s.jsxs("div",{className:"reply-input-content",children:[s.jsxs("span",{className:"reply-input-text",children:["Replying to ",s.jsx("strong",{children:jt.author}),": ",jt.content.substring(0,100),jt.content.length>100?"...":""]}),s.jsx("button",{className:"reply-cancel-btn",onClick:Lc,title:"Cancel reply",children:""})]})]}),st&&G.activeChannel&&s.jsx(K0,{channelId:G.activeChannel,token:G.token||"",keyPair:qe,encryptionEnabled:Ye}),s.jsx("textarea",{ref:_c,className:"message-input",placeholder:`Message ${Ht}`,value:on,rows:1,onChange:d=>{Lt(d.target.value),d.target.style.height="auto",d.target.style.height=Math.min(d.target.scrollHeight,200)+"px",Ve&&Cc(Ve)},onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),zc())}}),s.jsx(Q0,{isOpen:Cu,onToggle:()=>wc(d=>!d),onSelect:Tc,onClose:()=>wc(!1)}),st&&G.activeChannel&&s.jsx(V0,{channelId:G.activeChannel,token:G.token||"",keyPair:qe,encryptionEnabled:Ye})]})]})}),Wt&&s.jsx(I0,{ws:De,currentUserId:localStorage.getItem("accord_user_id"),channelId:Wt,channelName:Ro,onLeave:()=>{Ji(null),xi(""),Ol(null)}}),cl&&s.jsxs("div",{className:"member-sidebar",children:[s.jsxs("div",{className:"member-header",children:["Members  ",Ft.filter(d=>d.user).length]}),(()=>{const d=localStorage.getItem("accord_user_id"),g=Ce&&Zl(Ce,"KickMembers"),_=me=>{var Le,fn;const kt=me.user_id===d,Rt=dn(me.user_id);return s.jsxs("div",{className:`member ${Rt==="offline"?"member-offline":""}`,onContextMenu:hn=>{var Jl;return ta(hn,me.user_id,me.public_key_hash,ka(me.user),(Jl=me.profile)==null?void 0:Jl.bio,me.user)},children:[s.jsxs("div",{className:"member-avatar-wrapper",children:[s.jsx("div",{className:"member-avatar",children:s.jsx("img",{src:`${$.getUserAvatarUrl(me.user_id)}`,alt:ka(me.user)[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:hn=>{hn.target.style.display="none",hn.target.parentElement.textContent=ka(me.user)[0]}})}),s.jsx("span",{className:`presence-dot presence-${Rt}`,title:Rt})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[s.jsx("span",{className:"member-name",children:ka(me.user)}),s.jsx("span",{className:"member-role-badge",title:me.role,children:us(me.role)})]}),((Le=me.profile)==null?void 0:Le.custom_status)&&s.jsx("span",{className:"member-custom-status",children:me.profile.custom_status})]}),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px"},children:[!kt&&s.jsx("button",{onClick:hn=>{hn.stopPropagation(),Rc(me.user)},className:"member-action-btn",title:"Send DM",children:"DM"}),g&&!kt&&s.jsx("button",{onClick:hn=>{hn.stopPropagation(),hs(me.user_id,ka(me.user))},className:"member-action-btn danger",title:"Kick member",children:"Kick"})]})]},((fn=me.user)==null?void 0:fn.id)||me.user_id)},R=mc.filter(me=>me.hoist).sort((me,kt)=>kt.position-me.position),J=ma.filter(me=>me.user);if(R.length===0){const me=J.filter(Rt=>dn(Rt.user_id)!=="offline"),kt=J.filter(Rt=>dn(Rt.user_id)==="offline");return s.jsxs(s.Fragment,{children:[me.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"role-section-header",children:["Online  ",me.length]}),me.map(Rt=>_(Rt))]}),kt.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"role-section-header",style:{color:"#72767d"},children:["Offline  ",kt.length]}),kt.map(Rt=>_(Rt))]})]})}const ve=new Set,he=[];for(const me of R)he.push({name:me.name,color:me.color,members:[]});const ze=J.filter(me=>!ve.has(me.user_id)),tt=ze.filter(me=>dn(me.user_id)!=="offline"),Se=ze.filter(me=>dn(me.user_id)==="offline");return s.jsxs(s.Fragment,{children:[he.filter(me=>me.members.length>0).map(me=>s.jsxs(eu.Fragment,{children:[s.jsxs("div",{className:"role-section-header",style:{color:me.color||void 0},children:[me.name,"  ",me.members.length]}),me.members.map(kt=>_(kt))]},me.name)),tt.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"role-section-header",children:["Online  ",tt.length]}),tt.map(me=>_(me))]}),Se.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"role-section-header",style:{color:"#72767d"},children:["Offline  ",Se.length]}),Se.map(me=>_(me))]}),J.length===0&&Ft.length===0&&s.jsx("div",{className:"members-empty",children:We.length===0?"Join or create a node to see members":"No members loaded"})]})})()]}),bi&&s.jsxs("div",{className:"error-toast",children:[s.jsx("span",{style:{flex:1},children:bi}),s.jsx("button",{onClick:()=>Mt(""),className:"error-toast-close",children:""})]}),Ni&&!cc&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsx("h3",{children:"Create a Node"}),s.jsx("p",{children:"A Node is your community space. A #general channel will be created automatically."}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Node Name"}),s.jsx("input",{type:"text",placeholder:"My Community",value:Pi,onChange:d=>ji(d.target.value),onKeyDown:d=>{d.key==="Enter"&&ms()},className:"form-input"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Description (optional)"}),s.jsx("input",{type:"text",placeholder:"What's this node about?",value:es,onChange:d=>il(d.target.value),className:"form-input"})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:ms,disabled:Ci||!Pi.trim(),className:"btn btn-green",children:Ci?"Creating...":"Create Node"}),s.jsx("button",{onClick:()=>{Ta(!1),ji(""),il("")},className:"btn btn-outline",children:"Cancel"})]}),s.jsx("div",{style:{borderTop:"1px solid var(--border)",marginTop:"16px",paddingTop:"16px",textAlign:"center"},children:s.jsxs("button",{onClick:()=>al(!0),className:"btn-ghost",children:["Have an invite code? ",s.jsx("strong",{children:"Join a Node"})]})})]})}),cc&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsx("h3",{children:"Join a Node"}),s.jsx("p",{children:"Enter an invite code or link to join an existing Node."}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Invite Code or Link"}),s.jsx("input",{type:"text",placeholder:"accord://host/invite/CODE or just the code",value:La,onChange:d=>Wi(d.target.value),onKeyDown:d=>{d.key==="Enter"&&La.trim()&&dl()},className:"form-input"})]}),Ei&&s.jsx("div",{className:"auth-error",children:Ei}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:dl,disabled:un||!La.trim(),className:"btn btn-primary",children:un?"Joining...":"Join Node"}),s.jsx("button",{onClick:()=>{al(!1),Ta(!1),Wi(""),ll("")},className:"btn btn-outline",children:"Cancel"})]}),s.jsx("div",{style:{borderTop:"1px solid var(--border)",marginTop:"16px",paddingTop:"16px",textAlign:"center"},children:s.jsxs("button",{onClick:()=>al(!1),className:"btn-ghost",children:["Want to create your own? ",s.jsx("strong",{children:"Create a Node"})]})})]})}),Pa&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsx("h3",{children:"Invite Link Generated"}),s.jsx("p",{children:"Share this link to invite others to your node. The relay address is encoded for privacy."}),s.jsx("div",{className:"modal-code-block",style:{wordBreak:"break-all",fontFamily:"monospace",fontSize:"0.85em"},children:Ws}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ws).then(()=>{alert("Invite code copied to clipboard!")}).catch(()=>{const d=document.createElement("textarea");d.value=Ws,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),alert("Invite code copied to clipboard!")})},className:"btn btn-primary",style:{width:"auto"},children:"Copy"}),s.jsx("button",{onClick:()=>{el(!1),Ul("")},className:"btn btn-outline",style:{width:"auto"},children:"Close"})]})]})}),is&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsx("h3",{children:"Delete Channel"}),s.jsxs("p",{children:["Are you sure you want to delete ",s.jsxs("strong",{children:["#",is.name]}),"? This action cannot be undone. All messages will be permanently lost."]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:()=>qn(is.id),className:"btn btn-red",children:"Delete Channel"}),s.jsx("button",{onClick:()=>ss(null),className:"btn btn-outline",children:"Cancel"})]})]})}),Eu&&Ce&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",style:{maxWidth:"480px"},children:[s.jsx("h3",{children:" Import Discord Template"}),sl?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{color:"#43b581",marginBottom:"12px",fontSize:"14px"},children:" Import complete!"}),s.jsxs("div",{style:{color:"#dcddde",fontSize:"13px",lineHeight:"1.6"},children:[sl.roles_created!==void 0&&s.jsxs("div",{children:["Roles created: ",s.jsx("strong",{children:sl.roles_created})]}),sl.channels_created!==void 0&&s.jsxs("div",{children:["Channels created: ",s.jsx("strong",{children:sl.channels_created})]}),sl.categories_created!==void 0&&s.jsxs("div",{children:["Categories created: ",s.jsx("strong",{children:sl.categories_created})]})]}),s.jsx("div",{className:"modal-actions",style:{marginTop:"16px"},children:s.jsx("button",{className:"btn btn-green",onClick:()=>{pc(!1),gc(""),vc(null),ls(""),Ce&&(Ln(Ce),ds(Ce))},children:"Done"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{style:{color:"#b9bbbe",fontSize:"14px"},children:"Paste a discord.new link, discord.com/template link, or raw template code."}),s.jsx("div",{className:"form-group",children:s.jsx("input",{type:"text",placeholder:"discord.new/CODE or template code",value:as,onChange:d=>gc(d.target.value),className:"form-input",disabled:yc})}),Bo&&s.jsx("div",{style:{color:"#f04747",fontSize:"13px",marginBottom:"8px"},children:Bo}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn btn-green",disabled:yc||!as.trim(),onClick:async()=>{ls(""),zo(!0);try{let d=as.trim();const g=d.match(/discord\.new\/([A-Za-z0-9]+)/),_=d.match(/discord\.com\/template\/([A-Za-z0-9]+)/);g?d=g[1]:_&&(d=_[1]);const R=await $.importDiscordTemplate(Ce,d,G.token||"");vc(R)}catch(d){ls(d.message||"Import failed")}finally{zo(!1)}},children:yc?" Importing...":"Import"}),s.jsx("button",{className:"btn btn-outline",onClick:()=>{pc(!1),gc(""),ls(""),vc(null)},children:"Cancel"})]})]})]})}),fc&&Ce&&(()=>{const d=We.find(g=>g.id===Ce);return d?s.jsx($0,{isOpen:fc,onClose:()=>hc(!1),node:d,token:G.token||"",userRole:Pe[Ce]||"member",onNodeUpdated:g=>{$n(_=>_.map(R=>R.id===g.id?g:R))},onLeaveNode:()=>{Ea(null),Dn([]),Na([]),Bn()}}):null})(),s.jsx(J0,{isVisible:Fi,onClose:()=>Ll(!1),nodeId:Ce,channels:Fn,token:G.token||null,onNavigateToMessage:gs}),s.jsx(W0,{isOpen:wi,onClose:()=>_i(!1),preferences:$i,onPreferencesChange:ps}),s.jsx(P0,{isOpen:rc,onClose:()=>ts(!1),currentUser:G.user,serverInfo:{version:Ti,buildHash:Kl,connectedSince:dc,relayAddress:$.getBaseUrl(),isConnected:G.isConnected},onUserUpdate:d=>{G.user&&Je(g=>({...g,user:{...g.user,...d}}))}}),wu&&s.jsx("div",{className:"settings-overlay",onClick:()=>ns(!1),children:s.jsxs("div",{className:"connection-info-modal",onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"connection-info-header",children:[s.jsx("h3",{children:"Connection Info"}),s.jsx("button",{className:"settings-close",onClick:()=>ns(!1),children:""})]}),s.jsxs("div",{className:"connection-info-body",children:[s.jsxs("div",{className:"connection-info-row",children:[s.jsx("span",{className:"connection-info-label",children:"Status"}),s.jsx("span",{className:"connection-info-value",children:G.isConnected?" Connected":" Disconnected"})]}),Ti&&s.jsxs("div",{className:"connection-info-row",children:[s.jsx("span",{className:"connection-info-label",children:"Server Version"}),s.jsx("span",{className:"connection-info-value",children:Ti})]}),Kl&&s.jsxs("div",{className:"connection-info-row",children:[s.jsx("span",{className:"connection-info-label",children:"Build Hash"}),s.jsxs("span",{className:"connection-info-value copyable",title:"Click to copy",onClick:()=>{navigator.clipboard.writeText(Kl)},children:[s.jsx("code",{children:Kl}),s.jsx("span",{className:"copy-hint",children:""})]})]}),dc&&s.jsxs("div",{className:"connection-info-row",children:[s.jsx("span",{className:"connection-info-label",children:"Connected Since"}),s.jsx("span",{className:"connection-info-value",children:new Date(dc).toLocaleString()})]}),s.jsxs("div",{className:"connection-info-row",children:[s.jsx("span",{className:"connection-info-label",children:"Relay Address"}),s.jsx("span",{className:"connection-info-value",children:s.jsx("code",{children:$.getBaseUrl()})})]})]})]})}),tc&&s.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"400px",height:"100vh",background:"var(--background)",borderLeft:"1px solid var(--border)",zIndex:1e3,display:"flex",flexDirection:"column",color:"var(--text)"},children:[s.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600},children:" Pinned Messages"}),s.jsx("button",{onClick:()=>nc(!1),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"var(--text)",padding:"4px",borderRadius:"4px"},children:""})]}),s.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:tl.length===0?s.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",marginTop:"50px"},children:[s.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),s.jsx("p",{children:"No pinned messages in this channel yet."}),s.jsx("p",{style:{fontSize:"14px"},children:"Pin messages to keep important information easily accessible."})]}):s.jsx("div",{children:tl.map((d,g)=>s.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"var(--background-modifier-accent)",borderRadius:"8px",border:"1px solid var(--border)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px"},children:[s.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:600,marginRight:"8px"},children:(d.author||"?")[0]}),s.jsx("span",{style:{fontWeight:600,marginRight:"8px"},children:d.author}),s.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"12px"},children:[new Date(d.timestamp).toLocaleDateString()," at ",d.time]})]}),s.jsx("div",{style:{marginLeft:"32px",lineHeight:"1.4"},dangerouslySetInnerHTML:{__html:wt.highlightMentions(d.content)}}),s.jsxs("div",{style:{marginLeft:"32px",marginTop:"8px",fontSize:"12px",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:[" Pinned ",new Date(d.pinned_at).toLocaleDateString()]})]},d.id||g))})})]}),ql&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",style:{maxWidth:"380px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[s.jsx("h3",{style:{margin:0},children:"Start a Direct Message"}),s.jsx("button",{onClick:()=>fa(!1),className:"error-toast-close",style:{color:"var(--text-muted)"},children:""})]}),s.jsx("p",{children:"Select a user to start a direct message:"}),s.jsxs("div",{style:{maxHeight:"300px",overflow:"auto"},children:[Ft.filter(d=>d.user_id!==localStorage.getItem("accord_user_id")).map(d=>s.jsxs("div",{className:"member",onClick:()=>{Rc(d.user),fa(!1)},children:[s.jsx("div",{className:"dm-avatar",style:{width:"24px",height:"24px",fontSize:"12px",marginRight:"12px"},children:ka(d.user)[0].toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:"500"},children:ka(d.user)}),s.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"12px"},children:[us(d.role)," ",d.role]})]})]},d.user_id)),Ft.filter(d=>d.user_id!==localStorage.getItem("accord_user_id")).length===0&&s.jsx("div",{className:"members-empty",children:"No other members available"})]})]})}),Ai&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-card",children:[s.jsx("h3",{children:"Set Your Display Name"}),s.jsx("p",{children:"Choose a name that others will see instead of your fingerprint."}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Display Name"}),s.jsx("input",{type:"text",placeholder:"Enter a display name...",value:Yl,onChange:d=>bc(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Qo()},className:"form-input",autoFocus:!0,maxLength:32})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:Qo,disabled:xc||!Yl.trim(),className:"btn btn-green",style:{width:"auto"},children:xc?"Saving...":"Save"}),s.jsx("button",{onClick:()=>Aa(!1),className:"btn btn-outline",style:{width:"auto"},children:"Skip"})]})]})}),Dt&&s.jsxs("div",{className:"context-menu",style:{left:Dt.x,top:Dt.y},children:[s.jsxs("div",{className:"context-menu-item context-menu-profile-header",children:[s.jsx("div",{style:{fontWeight:600,fontSize:"14px"},children:Dt.displayName}),s.jsx("div",{style:{fontSize:"11px",color:"var(--text-faint)",fontFamily:"var(--font-mono)"},children:St(Dt.publicKeyHash)}),Dt.bio&&s.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:Dt.bio})]}),s.jsx("div",{className:"context-menu-separator"}),s.jsx("div",{className:"context-menu-item",onClick:()=>{const d=`Display Name: ${Dt.displayName}
Fingerprint: ${St(Dt.publicKeyHash)}
Full Hash: ${Dt.publicKeyHash}${Dt.bio?`
Bio: ${Dt.bio}`:""}`;alert(d),Gl(null)},children:" View Profile"}),Dt.user&&Dt.userId!==localStorage.getItem("accord_user_id")&&s.jsx("div",{className:"context-menu-item",onClick:()=>{Dt.user&&Rc(Dt.user),Gl(null)},children:" Send DM"}),s.jsx("div",{className:"context-menu-separator"}),s.jsx("div",{className:"context-menu-item",onClick:()=>{navigator.clipboard.writeText(Dt.publicKeyHash).catch(()=>{}),Gl(null)},children:" Copy Public Key Hash"})]}),cs&&s.jsx("div",{className:"modal-overlay",onClick:()=>ki(!1),children:s.jsxs("div",{className:"modal-card shortcuts-modal",onClick:d=>d.stopPropagation(),children:[s.jsx("h3",{children:" Keyboard Shortcuts"}),s.jsxs("div",{className:"shortcuts-list",children:[s.jsxs("div",{className:"shortcut-row",children:[s.jsx("kbd",{children:"Enter"}),s.jsx("span",{children:"Send message"})]}),s.jsxs("div",{className:"shortcut-row",children:[s.jsx("kbd",{children:"Shift + Enter"}),s.jsx("span",{children:"New line in message"})]}),s.jsxs("div",{className:"shortcut-row",children:[s.jsx("kbd",{children:"Escape"}),s.jsx("span",{children:"Close modal / Cancel edit"})]}),s.jsxs("div",{className:"shortcut-row",children:[s.jsx("kbd",{children:"Ctrl + K"}),s.jsx("span",{children:"Open search"})]}),s.jsxs("div",{className:"shortcut-row",children:[s.jsx("kbd",{children:"Ctrl + /"}),s.jsx("span",{children:"Show this help"})]}),s.jsxs("div",{className:"shortcut-row",children:[s.jsx("kbd",{children:"Ctrl + ,"}),s.jsx("span",{children:"Open settings"})]})]}),s.jsx("div",{className:"modal-actions",style:{marginTop:"16px"},children:s.jsx("button",{onClick:()=>ki(!1),className:"btn btn-outline",style:{width:"auto"},children:"Close"})})]})})]})}class nx extends w.Component{constructor(l){super(l),this.state={hasError:!1,error:null}}static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,u){console.error("Uncaught error:",l,u)}render(){var l;return this.state.hasError?s.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:[s.jsx("h1",{children:"Something went wrong"}),s.jsx("p",{children:(l=this.state.error)==null?void 0:l.message}),s.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer",background:"#5865f2",color:"white",border:"none",borderRadius:"4px"},children:"Try Again"})]}):this.props.children}}window.DOMPurify=ib;Bv.createRoot(document.getElementById("root")).render(s.jsx(eu.StrictMode,{children:s.jsx(nx,{children:s.jsx(tx,{})})}));
