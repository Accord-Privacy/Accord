import{r as n,a as x,j as e}from"./index-BAF5kJbA.js";import"./vendor-react-j2mp3VYR.js";function Xe({isOpen:y,onClose:T,node:o,token:r,userRole:v,onNodeUpdated:z,onLeaveNode:_}){const[d,N]=n.useState("general"),[ie,Se]=n.useState([]),[Ce,oe]=n.useState(!1),[I,a]=n.useState(""),[A,u]=n.useState(""),[E,se]=n.useState([]),[m,re]=n.useState(!1),[M,Re]=n.useState("all"),[H,we]=n.useState(!0),[ae,ze]=n.useState(),[P,Ie]=n.useState(o.name),[U,_e]=n.useState(o.description||""),[j,le]=n.useState(!1),[Ne,$]=n.useState(!1),[B,G]=n.useState(""),[D,K]=n.useState(""),[k,de]=n.useState(!1),[f,Ae]=n.useState([]),[Ee,ce]=n.useState(!1),[g,F]=n.useState(null),[Me,Y]=n.useState(!1),[J,pe]=n.useState("New Role"),[V,xe]=n.useState("#99aab5"),[q,ue]=n.useState(!1),[Q,fe]=n.useState(!1),[X,be]=n.useState(""),[Z,ge]=n.useState("#99aab5"),[O,he]=n.useState(!1),[ee,ye]=n.useState(!1),[te,me]=n.useState(0),[h,L]=n.useState(!1),l=v==="admin",S=v==="admin"||v==="moderator",C=v==="admin",R=v==="admin"||v==="moderator",w=n.useCallback(async()=>{if(S){oe(!0),a("");try{const t=await x.getNodeInvites(o.id,r);Se(t)}catch(t){a(t instanceof Error?t.message:"Failed to load invites")}finally{oe(!1)}}},[o.id,r,S]),b=n.useCallback(async()=>{if(C){ce(!0);try{const t=await x.getRoles(o.id,r);Ae((Array.isArray(t)?t:[]).sort((i,s)=>s.position-i.position))}catch(t){a(t instanceof Error?t.message:"Failed to load roles")}finally{ce(!1)}}},[o.id,r,C]),Be=n.useCallback(async()=>{L(!0),a("");try{await x.createRole(o.id,r,{name:J,color:V,hoist:q,mentionable:Q}),u("Role created!"),Y(!1),pe("New Role"),xe("#99aab5"),ue(!1),fe(!1),await b()}catch(t){a(t instanceof Error?t.message:"Failed to create role")}finally{L(!1)}},[o.id,r,J,V,q,Q,b]),De=n.useCallback(async()=>{if(g){L(!0),a("");try{await x.updateRole(o.id,g.id,r,{name:X,color:Z,hoist:O,mentionable:ee,permissions:te}),u("Role updated!"),F(null),await b()}catch(t){a(t instanceof Error?t.message:"Failed to update role")}finally{L(!1)}}},[o.id,r,g,X,Z,O,ee,te,b]),Fe=n.useCallback(async t=>{if(confirm("Delete this role? Members will lose it."))try{await x.deleteRole(o.id,t,r),u("Role deleted!"),(g==null?void 0:g.id)===t&&F(null),await b()}catch(i){a(i instanceof Error?i.message:"Failed to delete role")}},[o.id,r,g,b]),ve=n.useCallback(async(t,i)=>{const s=f.findIndex(p=>p.id===t);if(s<0)return;const c=i==="up"?s-1:s+1;if(!(c<0||c>=f.length))try{const p=f[s],ke=f[c];await x.updateRole(o.id,p.id,r,{position:ke.position}),await x.updateRole(o.id,ke.id,r,{position:p.position}),await b()}catch(p){a(p instanceof Error?p.message:"Failed to reorder roles")}},[o.id,r,f,b]),Le=n.useCallback(t=>{F(t),be(t.name),ge(t.color||"#99aab5"),he(t.hoist),ye(t.mentionable),me(t.permissions)},[]),We=[{bit:1,label:"Manage Channels"},{bit:2,label:"Manage Members"},{bit:4,label:"Kick Members"},{bit:8,label:"Manage Invites"},{bit:16,label:"Manage Node"},{bit:32,label:"Manage Roles"},{bit:64,label:"Manage Messages"}],Te=n.useCallback(async()=>{de(!0),a("");try{const t=B?parseInt(B,10):void 0,i=D?parseInt(D,10):void 0;await x.createInviteWithOptions(o.id,r,t,i),u("Invite created successfully!"),G(""),K(""),$(!1),await w()}catch(t){a(t instanceof Error?t.message:"Failed to create invite")}finally{de(!1)}},[o.id,r,B,D,w]),He=n.useCallback(async t=>{if(confirm("Are you sure you want to revoke this invite?"))try{await x.revokeInvite(o.id,t,r),u("Invite revoked successfully!"),await w()}catch(i){a(i instanceof Error?i.message:"Failed to revoke invite")}},[o.id,r,w]),W=n.useCallback(async(t=!1)=>{if(R){re(!0),a("");try{const i=t?void 0:ae,s=await x.getNodeAuditLog(o.id,r,50,i),c=Array.isArray(s==null?void 0:s.entries)?s.entries:[];se(t?c:p=>[...p,...c]),we((s==null?void 0:s.has_more)??!1),ze(s==null?void 0:s.next_cursor)}catch(i){a(i instanceof Error?i.message:"Failed to load audit log")}finally{re(!1)}}},[o.id,r,R,ae]),Pe=n.useCallback(async()=>{!H||m||await W(!1)},[H,m,W]),je=n.useCallback(()=>M==="all"?E:E.filter(t=>t.action===M),[E,M]),Ue=t=>{switch(t){case"channel_create":return"ðŸ“";case"channel_delete":return"ðŸ—‘ï¸";case"member_kick":return"ðŸ‘¢";case"member_ban":return"ðŸ”¨";case"role_change":return"ðŸ‘‘";case"invite_create":return"ðŸ“¬";case"invite_revoke":return"ðŸš«";case"message_pin":return"ðŸ“Œ";case"message_unpin":return"ðŸ“Œ";case"message_delete":return"âŒ";case"node_settings_update":return"âš™ï¸";default:return"ðŸ“„"}},$e=t=>{const i=t.details?JSON.parse(t.details):{};switch(t.action){case"channel_create":return`created channel #${i.channel_name||"unknown"}`;case"channel_delete":return`deleted channel #${i.channel_name||"unknown"}`;case"member_kick":return"kicked a user";case"member_ban":return"banned a user";case"role_change":return`changed user role to ${i.new_role||"unknown"}`;case"invite_create":return"created an invite";case"invite_revoke":return`revoked invite ${i.invite_code||"unknown"}`;case"message_pin":return"pinned a message";case"message_unpin":return"unpinned a message";case"message_delete":return"deleted a message";case"node_settings_update":return"updated node settings";default:return t.action.replace(/_/g," ")}},Ge=n.useCallback(async()=>{if(l){le(!0),a("");try{if(u("Node settings saved!"),z){const t={...o,name:P,description:U};z(t)}}catch(t){a(t instanceof Error?t.message:"Failed to update node")}finally{le(!1)}}},[l,P,U,o,z]),Ke=n.useCallback(async()=>{if(confirm(l?"Are you sure you want to leave this Node? As the admin, this will delete the Node permanently!":"Are you sure you want to leave this Node?"))try{await x.leaveNode(o.id,r),u("Left Node successfully!"),setTimeout(()=>{_==null||_(),T()},1e3)}catch(i){a(i instanceof Error?i.message:"Failed to leave node")}},[l,o.id,r,_,T]),Ye=t=>{navigator.clipboard.writeText(t).then(()=>{u("Invite code copied to clipboard!")}).catch(()=>{const i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),u("Invite code copied to clipboard!")})},ne=t=>new Date(t*1e3).toLocaleDateString()+" "+new Date(t*1e3).toLocaleTimeString(),Je=t=>!!(t.expires_at&&t.expires_at*1e3<Date.now()),Ve=t=>!!(t.max_uses&&t.uses>=t.max_uses);return n.useEffect(()=>{y&&d==="roles"&&C&&b()},[y,d,C,b]),n.useEffect(()=>{y&&d==="invites"&&S&&w()},[y,d,S,w]),n.useEffect(()=>{y&&d==="audit"&&R&&W(!0)},[y,d,R,W]),n.useEffect(()=>{if(A){const t=setTimeout(()=>u(""),3e3);return()=>clearTimeout(t)}},[A]),n.useEffect(()=>{if(I){const t=setTimeout(()=>a(""),5e3);return()=>clearTimeout(t)}},[I]),y?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:e.jsxs("div",{style:{background:"#36393f",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",color:"#ffffff",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #40444b",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Node Settings"}),e.jsx("button",{onClick:T,style:{background:"none",border:"none",color:"#b9bbbe",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:1},children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #40444b",background:"#2f3136"},children:[e.jsx("button",{onClick:()=>N("general"),style:{background:d==="general"?"#40444b":"transparent",border:"none",color:d==="general"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"General"}),C&&e.jsx("button",{onClick:()=>N("roles"),style:{background:d==="roles"?"#40444b":"transparent",border:"none",color:d==="roles"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Roles"}),S&&e.jsx("button",{onClick:()=>N("invites"),style:{background:d==="invites"?"#40444b":"transparent",border:"none",color:d==="invites"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Invites"}),R&&e.jsx("button",{onClick:()=>N("audit"),style:{background:d==="audit"?"#40444b":"transparent",border:"none",color:d==="audit"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Audit Log"})]}),e.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[d==="general"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{onClick:()=>{if(!l)return;const t=document.createElement("input");t.type="file",t.accept="image/png,image/jpeg,image/gif,image/webp",t.onchange=async i=>{var c;const s=(c=i.target.files)==null?void 0:c[0];if(s){if(s.size>256*1024){a("Icon must be under 256KB");return}try{a("");const p=await x.uploadNodeIcon(o.id,s,r);u("Node icon updated!"),z&&z({...o,icon_hash:p.icon_hash})}catch(p){a(p instanceof Error?p.message:"Failed to upload icon")}}},t.click()},style:{width:"80px",height:"80px",borderRadius:"50%",background:"#40444b",display:"flex",alignItems:"center",justifyContent:"center",cursor:l?"pointer":"default",overflow:"hidden",fontSize:"32px",color:"#b9bbbe",flexShrink:0,position:"relative"},title:l?"Click to upload icon":"Node icon",children:[o.icon_hash?e.jsx("img",{src:`${x.getNodeIconUrl(o.id)}?v=${o.icon_hash}`,alt:o.name[0],style:{width:"100%",height:"100%",objectFit:"cover"}}):o.name[0],l&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",fontSize:"10px",textAlign:"center",padding:"2px",color:"#fff"},children:"EDIT"})]}),e.jsx("div",{style:{color:"#b9bbbe",fontSize:"13px"},children:l?"Click the icon to upload a new one (PNG, JPEG, GIF, WebP â€” max 256KB)":"Node icon"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Node Name"}),e.jsx("input",{type:"text",value:P,onChange:t=>Ie(t.target.value),disabled:!l||j,maxLength:32,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"none",background:l?"#40444b":"#2f3136",color:"#ffffff",fontSize:"14px"}})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Description"}),e.jsx("textarea",{value:U,onChange:t=>_e(t.target.value),disabled:!l||j,maxLength:200,rows:3,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"none",background:l?"#40444b":"#2f3136",color:"#ffffff",fontSize:"14px",resize:"vertical"}})]}),l&&e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx("button",{onClick:Ge,disabled:j,style:{background:"#43b581",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:j?"not-allowed":"pointer",fontSize:"14px",opacity:j?.6:1},children:j?"Saving...":"Save Changes"})}),e.jsxs("div",{style:{marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #40444b"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",color:l?"#f04747":"#faa61a"},children:l?"Delete Node":"Leave Node"}),e.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#b9bbbe"},children:l?"Permanently delete this Node. This action cannot be undone.":"Leave this Node. You can rejoin later with an invite."}),e.jsx("button",{onClick:Ke,style:{background:l?"#f04747":"#faa61a",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:l?"Delete Node":"Leave Node"})]})]}),d==="roles"&&C&&e.jsx("div",{children:g?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[e.jsx("button",{onClick:()=>F(null),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"18px"},children:"â†"}),e.jsx("h4",{style:{margin:0,fontSize:"16px"},children:"Edit Role"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe",fontWeight:600},children:"Role Name"}),e.jsx("input",{type:"text",value:X,onChange:t=>be(t.target.value),maxLength:32,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#40444b",color:"#fff",fontSize:"14px"}})]}),e.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe",fontWeight:600},children:"Color"}),e.jsx("input",{type:"color",value:Z,onChange:t=>ge(t.target.value),style:{width:"48px",height:"32px",border:"none",background:"none",cursor:"pointer"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:O,onChange:t=>he(t.target.checked)})," Display separately in member list"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:ee,onChange:t=>ye(t.target.checked)})," Allow anyone to @mention this role"]})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#b9bbbe",fontWeight:600},children:"Permissions"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:We.map(t=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:(te&t.bit)!==0,onChange:i=>me(s=>i.target.checked?s|t.bit:s&~t.bit)}),t.label]},t.bit))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:De,disabled:h,style:{background:"#43b581",border:"none",color:"#fff",padding:"8px 16px",borderRadius:"4px",cursor:h?"not-allowed":"pointer",fontSize:"13px",opacity:h?.6:1},children:h?"Saving...":"Save Changes"}),e.jsx("button",{onClick:()=>Fe(g.id),style:{background:"#f04747",border:"none",color:"#fff",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Delete Role"})]})]}):e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"16px"},children:Me?e.jsxs("div",{style:{background:"#40444b",padding:"16px",borderRadius:"8px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"16px"},children:"New Role"}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Name"}),e.jsx("input",{type:"text",value:J,onChange:t=>pe(t.target.value),maxLength:32,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#fff",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Color"}),e.jsx("input",{type:"color",value:V,onChange:t=>xe(t.target.value),style:{width:"48px",height:"32px",border:"none",background:"none",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"12px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:q,onChange:t=>ue(t.target.checked)})," Hoisted"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:Q,onChange:t=>fe(t.target.checked)})," Mentionable"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:Be,disabled:h,style:{background:"#43b581",border:"none",color:"#fff",padding:"8px 12px",borderRadius:"4px",cursor:h?"not-allowed":"pointer",fontSize:"13px",opacity:h?.6:1},children:h?"Creating...":"Create"}),e.jsx("button",{onClick:()=>Y(!1),style:{background:"#4f545c",border:"none",color:"#fff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>Y(!0),style:{background:"#7289da",border:"none",color:"#fff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"âž• Create Role"})}),Ee?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading roles..."}):f.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No roles created yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:f.map((t,i)=>e.jsxs("div",{style:{background:"#40444b",padding:"10px 12px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:t.color||"#99aab5",flexShrink:0}}),e.jsx("span",{style:{flex:1,fontSize:"14px",color:t.color||"#dcddde",fontWeight:500,cursor:"pointer"},onClick:()=>Le(t),children:t.name}),t.hoist&&e.jsx("span",{style:{fontSize:"11px",color:"#72767d",background:"#2f3136",padding:"1px 6px",borderRadius:"3px"},children:"hoisted"}),e.jsxs("div",{style:{display:"flex",gap:"2px"},children:[e.jsx("button",{onClick:()=>ve(t.id,"up"),disabled:i===0,style:{background:"none",border:"none",color:i===0?"#4f545c":"#b9bbbe",cursor:i===0?"default":"pointer",fontSize:"14px",padding:"2px 4px"},children:"â–²"}),e.jsx("button",{onClick:()=>ve(t.id,"down"),disabled:i===f.length-1,style:{background:"none",border:"none",color:i===f.length-1?"#4f545c":"#b9bbbe",cursor:i===f.length-1?"default":"pointer",fontSize:"14px",padding:"2px 4px"},children:"â–¼"})]})]},t.id))})]})}),d==="invites"&&S&&e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"24px"},children:Ne?e.jsxs("div",{style:{background:"#40444b",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Create New Invite"}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Max Uses (optional)"}),e.jsx("input",{type:"number",placeholder:"âˆž",value:B,onChange:t=>G(t.target.value),min:"1",max:"100",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#ffffff",fontSize:"14px"}})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Expires in (hours)"}),e.jsx("input",{type:"number",placeholder:"Never",value:D,onChange:t=>K(t.target.value),min:"1",max:"8760",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#ffffff",fontSize:"14px"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:Te,disabled:k,style:{background:"#43b581",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:k?"not-allowed":"pointer",fontSize:"13px",opacity:k?.6:1},children:k?"Creating...":"Create"}),e.jsx("button",{onClick:()=>{$(!1),G(""),K("")},disabled:k,style:{background:"#4f545c",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:k?"not-allowed":"pointer",fontSize:"13px"},children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>$(!0),style:{background:"#7289da",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:"âž• Create Invite"})}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Active Invites"}),Ce?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading invites..."}):ie.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No active invites"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ie.map(t=>{const i=Je(t),s=Ve(t),c=i||s;return e.jsxs("div",{style:{background:"#40444b",padding:"12px",borderRadius:"6px",border:c?"1px solid #f04747":"none",opacity:c?.7:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("code",{style:{background:"#2f3136",padding:"4px 8px",borderRadius:"4px",fontSize:"13px",fontFamily:"monospace"},children:t.code}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>Ye(t.code),disabled:c,style:{background:"#7289da",border:"none",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",cursor:c?"not-allowed":"pointer",fontSize:"12px",opacity:c?.5:1},children:"Copy"}),e.jsx("button",{onClick:()=>He(t.code),style:{background:"#f04747",border:"none",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Revoke"})]})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#b9bbbe",display:"flex",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("span",{children:["Created: ",ne(t.created_at)]}),e.jsxs("span",{children:["Uses: ",t.uses,t.max_uses?`/${t.max_uses}`:""]}),t.expires_at&&e.jsxs("span",{style:{color:i?"#f04747":"#b9bbbe"},children:[i?"Expired: ":"Expires: ",ne(t.expires_at)]}),s&&e.jsx("span",{style:{color:"#f04747"},children:"Max uses reached"})]})]},t.code)})})]})]}),d==="audit"&&R&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Filter by Action"}),e.jsxs("select",{value:M,onChange:t=>Re(t.target.value),style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#40444b",color:"#ffffff",fontSize:"14px",cursor:"pointer",minWidth:"200px"},children:[e.jsx("option",{value:"all",children:"All Actions"}),e.jsx("option",{value:"channel_create",children:"Channel Create"}),e.jsx("option",{value:"channel_delete",children:"Channel Delete"}),e.jsx("option",{value:"member_kick",children:"Member Kick"}),e.jsx("option",{value:"role_change",children:"Role Change"}),e.jsx("option",{value:"invite_create",children:"Invite Create"}),e.jsx("option",{value:"invite_revoke",children:"Invite Revoke"}),e.jsx("option",{value:"message_pin",children:"Message Pin"}),e.jsx("option",{value:"message_unpin",children:"Message Unpin"}),e.jsx("option",{value:"message_delete",children:"Message Delete"}),e.jsx("option",{value:"node_settings_update",children:"Settings Update"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Recent Activity"}),m&&E.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading audit log..."}):je().length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No audit entries found"}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"400px",overflowY:"auto"},children:[je().map(t=>{var i;return e.jsxs("div",{style:{background:"#40444b",padding:"12px",borderRadius:"6px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx("div",{style:{fontSize:"18px",marginTop:"2px"},children:Ue(t.action)}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{marginBottom:"4px",fontSize:"14px"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#ffffff"},children:((i=t.actor_public_key_hash)==null?void 0:i.slice(0,16))||"Unknown"})," ",e.jsx("span",{style:{color:"#b9bbbe"},children:$e(t)})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#72767d",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{children:ne(t.created_at)}),e.jsx("span",{style:{background:"#2f3136",padding:"2px 6px",borderRadius:"3px",fontSize:"11px",fontFamily:"monospace"},children:t.target_type})]})]})]},t.id)}),H&&e.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:e.jsx("button",{onClick:Pe,disabled:m,style:{background:"#7289da",border:"none",color:"#ffffff",padding:"8px 16px",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"13px",opacity:m?.6:1},children:m?"Loading...":"Load More"})})]})]})]})]}),(I||A)&&e.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",background:I?"#f04747":"#43b581",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",maxWidth:"300px",zIndex:1002},children:I||A})]})}):null}export{Xe as NodeSettings};
