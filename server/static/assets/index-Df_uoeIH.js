var jb=Object.defineProperty;var Eb=(r,i,u)=>i in r?jb(r,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[i]=u;var fe=(r,i,u)=>Eb(r,typeof i!="symbol"?i+"":i,u);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function u(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=u(h);fetch(h.href,m)}})();function Eg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var of={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function Cb(){if(Yp)return pc;Yp=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function u(o,h,m){var g=null;if(m!==void 0&&(g=""+m),h.key!==void 0&&(g=""+h.key),"key"in h){m={};for(var v in h)v!=="key"&&(m[v]=h[v])}else m=h;return h=m.ref,{$$typeof:r,type:o,key:g,ref:h!==void 0?h:null,props:m}}return pc.Fragment=i,pc.jsx=u,pc.jsxs=u,pc}var Gp;function Tb(){return Gp||(Gp=1,of.exports=Cb()),of.exports}var l=Tb(),cf={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function Ab(){if(Vp)return Ze;Vp=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),Q=Symbol.iterator;function O(w){return w===null||typeof w!="object"?null:(w=Q&&w[Q]||w["@@iterator"],typeof w=="function"?w:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,te={};function re(w,D,K){this.props=w,this.context=D,this.refs=te,this.updater=K||U}re.prototype.isReactComponent={},re.prototype.setState=function(w,D){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,D,"setState")},re.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function ye(){}ye.prototype=re.prototype;function me(w,D,K){this.props=w,this.context=D,this.refs=te,this.updater=K||U}var he=me.prototype=new ye;he.constructor=me,F(he,re.prototype),he.isPureReactComponent=!0;var De=Array.isArray;function Xe(){}var Ae={H:null,A:null,T:null,S:null},we=Object.prototype.hasOwnProperty;function de(w,D,K){var ie=K.ref;return{$$typeof:r,type:w,key:D,ref:ie!==void 0?ie:null,props:K}}function Oe(w,D){return de(w.type,D,w.props)}function Te(w){return typeof w=="object"&&w!==null&&w.$$typeof===r}function be(w){var D={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(K){return D[K]})}var se=/\/+/g;function V(w,D){return typeof w=="object"&&w!==null&&w.key!=null?be(""+w.key):D.toString(36)}function z(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Xe,Xe):(w.status="pending",w.then(function(D){w.status==="pending"&&(w.status="fulfilled",w.value=D)},function(D){w.status==="pending"&&(w.status="rejected",w.reason=D)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function j(w,D,K,ie,ee){var ue=typeof w;(ue==="undefined"||ue==="boolean")&&(w=null);var _e=!1;if(w===null)_e=!0;else switch(ue){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(w.$$typeof){case r:case i:_e=!0;break;case k:return _e=w._init,j(_e(w._payload),D,K,ie,ee)}}if(_e)return ee=ee(w),_e=ie===""?"."+V(w,0):ie,De(ee)?(K="",_e!=null&&(K=_e.replace(se,"$&/")+"/"),j(ee,D,K,"",function(qe){return qe})):ee!=null&&(Te(ee)&&(ee=Oe(ee,K+(ee.key==null||w&&w.key===ee.key?"":(""+ee.key).replace(se,"$&/")+"/")+_e)),D.push(ee)),1;_e=0;var Ye=ie===""?".":ie+":";if(De(w))for(var Re=0;Re<w.length;Re++)ie=w[Re],ue=Ye+V(ie,Re),_e+=j(ie,D,K,ue,ee);else if(Re=O(w),typeof Re=="function")for(w=Re.call(w),Re=0;!(ie=w.next()).done;)ie=ie.value,ue=Ye+V(ie,Re++),_e+=j(ie,D,K,ue,ee);else if(ue==="object"){if(typeof w.then=="function")return j(z(w),D,K,ie,ee);throw D=String(w),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return _e}function G(w,D,K){if(w==null)return w;var ie=[],ee=0;return j(w,ie,"","",function(ue){return D.call(K,ue,ee++)}),ie}function X(w){if(w._status===-1){var D=w._result;D=D(),D.then(function(K){(w._status===0||w._status===-1)&&(w._status=1,w._result=K)},function(K){(w._status===0||w._status===-1)&&(w._status=2,w._result=K)}),w._status===-1&&(w._status=0,w._result=D)}if(w._status===1)return w._result.default;throw w._result}var le=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},oe={map:G,forEach:function(w,D,K){G(w,function(){D.apply(this,arguments)},K)},count:function(w){var D=0;return G(w,function(){D++}),D},toArray:function(w){return G(w,function(D){return D})||[]},only:function(w){if(!Te(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Ze.Activity=A,Ze.Children=oe,Ze.Component=re,Ze.Fragment=u,Ze.Profiler=h,Ze.PureComponent=me,Ze.StrictMode=o,Ze.Suspense=b,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(w){return Ae.H.useMemoCache(w)}},Ze.cache=function(w){return function(){return w.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(w,D,K){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ie=F({},w.props),ee=w.key;if(D!=null)for(ue in D.key!==void 0&&(ee=""+D.key),D)!we.call(D,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&D.ref===void 0||(ie[ue]=D[ue]);var ue=arguments.length-2;if(ue===1)ie.children=K;else if(1<ue){for(var _e=Array(ue),Ye=0;Ye<ue;Ye++)_e[Ye]=arguments[Ye+2];ie.children=_e}return de(w.type,ee,ie)},Ze.createContext=function(w){return w={$$typeof:g,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:m,_context:w},w},Ze.createElement=function(w,D,K){var ie,ee={},ue=null;if(D!=null)for(ie in D.key!==void 0&&(ue=""+D.key),D)we.call(D,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ee[ie]=D[ie]);var _e=arguments.length-2;if(_e===1)ee.children=K;else if(1<_e){for(var Ye=Array(_e),Re=0;Re<_e;Re++)Ye[Re]=arguments[Re+2];ee.children=Ye}if(w&&w.defaultProps)for(ie in _e=w.defaultProps,_e)ee[ie]===void 0&&(ee[ie]=_e[ie]);return de(w,ue,ee)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(w){return{$$typeof:v,render:w}},Ze.isValidElement=Te,Ze.lazy=function(w){return{$$typeof:k,_payload:{_status:-1,_result:w},_init:X}},Ze.memo=function(w,D){return{$$typeof:S,type:w,compare:D===void 0?null:D}},Ze.startTransition=function(w){var D=Ae.T,K={};Ae.T=K;try{var ie=w(),ee=Ae.S;ee!==null&&ee(K,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Xe,le)}catch(ue){le(ue)}finally{D!==null&&K.types!==null&&(D.types=K.types),Ae.T=D}},Ze.unstable_useCacheRefresh=function(){return Ae.H.useCacheRefresh()},Ze.use=function(w){return Ae.H.use(w)},Ze.useActionState=function(w,D,K){return Ae.H.useActionState(w,D,K)},Ze.useCallback=function(w,D){return Ae.H.useCallback(w,D)},Ze.useContext=function(w){return Ae.H.useContext(w)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(w,D){return Ae.H.useDeferredValue(w,D)},Ze.useEffect=function(w,D){return Ae.H.useEffect(w,D)},Ze.useEffectEvent=function(w){return Ae.H.useEffectEvent(w)},Ze.useId=function(){return Ae.H.useId()},Ze.useImperativeHandle=function(w,D,K){return Ae.H.useImperativeHandle(w,D,K)},Ze.useInsertionEffect=function(w,D){return Ae.H.useInsertionEffect(w,D)},Ze.useLayoutEffect=function(w,D){return Ae.H.useLayoutEffect(w,D)},Ze.useMemo=function(w,D){return Ae.H.useMemo(w,D)},Ze.useOptimistic=function(w,D){return Ae.H.useOptimistic(w,D)},Ze.useReducer=function(w,D,K){return Ae.H.useReducer(w,D,K)},Ze.useRef=function(w){return Ae.H.useRef(w)},Ze.useState=function(w){return Ae.H.useState(w)},Ze.useSyncExternalStore=function(w,D,K){return Ae.H.useSyncExternalStore(w,D,K)},Ze.useTransition=function(){return Ae.H.useTransition()},Ze.version="19.2.4",Ze}var Zp;function zf(){return Zp||(Zp=1,cf.exports=Ab()),cf.exports}var x=zf();const su=Eg(x);var rf={exports:{}},gc={},uf={exports:{}},df={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function kb(){return Xp||(Xp=1,(function(r){function i(j,G){var X=j.length;j.push(G);e:for(;0<X;){var le=X-1>>>1,oe=j[le];if(0<h(oe,G))j[le]=G,j[X]=oe,X=le;else break e}}function u(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var G=j[0],X=j.pop();if(X!==G){j[0]=X;e:for(var le=0,oe=j.length,w=oe>>>1;le<w;){var D=2*(le+1)-1,K=j[D],ie=D+1,ee=j[ie];if(0>h(K,X))ie<oe&&0>h(ee,K)?(j[le]=ee,j[ie]=X,le=ie):(j[le]=K,j[D]=X,le=D);else if(ie<oe&&0>h(ee,X))j[le]=ee,j[ie]=X,le=ie;else break e}}return G}function h(j,G){var X=j.sortIndex-G.sortIndex;return X!==0?X:j.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var g=Date,v=g.now();r.unstable_now=function(){return g.now()-v}}var b=[],S=[],k=1,A=null,Q=3,O=!1,U=!1,F=!1,te=!1,re=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function he(j){for(var G=u(S);G!==null;){if(G.callback===null)o(S);else if(G.startTime<=j)o(S),G.sortIndex=G.expirationTime,i(b,G);else break;G=u(S)}}function De(j){if(F=!1,he(j),!U)if(u(b)!==null)U=!0,Xe||(Xe=!0,be());else{var G=u(S);G!==null&&z(De,G.startTime-j)}}var Xe=!1,Ae=-1,we=5,de=-1;function Oe(){return te?!0:!(r.unstable_now()-de<we)}function Te(){if(te=!1,Xe){var j=r.unstable_now();de=j;var G=!0;try{e:{U=!1,F&&(F=!1,ye(Ae),Ae=-1),O=!0;var X=Q;try{t:{for(he(j),A=u(b);A!==null&&!(A.expirationTime>j&&Oe());){var le=A.callback;if(typeof le=="function"){A.callback=null,Q=A.priorityLevel;var oe=le(A.expirationTime<=j);if(j=r.unstable_now(),typeof oe=="function"){A.callback=oe,he(j),G=!0;break t}A===u(b)&&o(b),he(j)}else o(b);A=u(b)}if(A!==null)G=!0;else{var w=u(S);w!==null&&z(De,w.startTime-j),G=!1}}break e}finally{A=null,Q=X,O=!1}G=void 0}}finally{G?be():Xe=!1}}}var be;if(typeof me=="function")be=function(){me(Te)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,V=se.port2;se.port1.onmessage=Te,be=function(){V.postMessage(null)}}else be=function(){re(Te,0)};function z(j,G){Ae=re(function(){j(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return Q},r.unstable_next=function(j){switch(Q){case 1:case 2:case 3:var G=3;break;default:G=Q}var X=Q;Q=G;try{return j()}finally{Q=X}},r.unstable_requestPaint=function(){te=!0},r.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=Q;Q=j;try{return G()}finally{Q=X}},r.unstable_scheduleCallback=function(j,G,X){var le=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,j){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,j={id:k++,callback:G,priorityLevel:j,startTime:X,expirationTime:oe,sortIndex:-1},X>le?(j.sortIndex=X,i(S,j),u(b)===null&&j===u(S)&&(F?(ye(Ae),Ae=-1):F=!0,z(De,X-le))):(j.sortIndex=oe,i(b,j),U||O||(U=!0,Xe||(Xe=!0,be()))),j},r.unstable_shouldYield=Oe,r.unstable_wrapCallback=function(j){var G=Q;return function(){var X=Q;Q=G;try{return j.apply(this,arguments)}finally{Q=X}}}})(df)),df}var Ip;function Rb(){return Ip||(Ip=1,uf.exports=kb()),uf.exports}var ff={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function Mb(){if(Qp)return An;Qp=1;var r=zf();function i(b){var S="https://react.dev/errors/"+b;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)S+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+b+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var o={d:{f:u,r:function(){throw Error(i(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(b,S,k){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:A==null?null:""+A,children:b,containerInfo:S,implementation:k}}var g=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(b,S){if(b==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,An.createPortal=function(b,S){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(i(299));return m(b,S,null,k)},An.flushSync=function(b){var S=g.T,k=o.p;try{if(g.T=null,o.p=2,b)return b()}finally{g.T=S,o.p=k,o.d.f()}},An.preconnect=function(b,S){typeof b=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,o.d.C(b,S))},An.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},An.preinit=function(b,S){if(typeof b=="string"&&S&&typeof S.as=="string"){var k=S.as,A=v(k,S.crossOrigin),Q=typeof S.integrity=="string"?S.integrity:void 0,O=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;k==="style"?o.d.S(b,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:A,integrity:Q,fetchPriority:O}):k==="script"&&o.d.X(b,{crossOrigin:A,integrity:Q,fetchPriority:O,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},An.preinitModule=function(b,S){if(typeof b=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var k=v(S.as,S.crossOrigin);o.d.M(b,{crossOrigin:k,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&o.d.M(b)},An.preload=function(b,S){if(typeof b=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var k=S.as,A=v(k,S.crossOrigin);o.d.L(b,k,{crossOrigin:A,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},An.preloadModule=function(b,S){if(typeof b=="string")if(S){var k=v(S.as,S.crossOrigin);o.d.m(b,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:k,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else o.d.m(b)},An.requestFormReset=function(b){o.d.r(b)},An.unstable_batchedUpdates=function(b,S){return b(S)},An.useFormState=function(b,S,k){return g.H.useFormState(b,S,k)},An.useFormStatus=function(){return g.H.useHostTransitionStatus()},An.version="19.2.4",An}var $p;function Db(){if($p)return ff.exports;$p=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),ff.exports=Mb(),ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function Ub(){if(Jp)return gc;Jp=1;var r=Rb(),i=zf(),u=Db();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(m(e)!==e)throw Error(o(188))}function S(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(s===null)break;var c=s.alternate;if(c===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===n)return b(s),e;if(c===a)return b(s),t;c=c.sibling}throw Error(o(188))}if(n.return!==a.return)n=s,a=c;else{for(var f=!1,y=s.child;y;){if(y===n){f=!0,n=s,a=c;break}if(y===a){f=!0,a=s,n=c;break}y=y.sibling}if(!f){for(y=c.child;y;){if(y===n){f=!0,n=c,a=s;break}if(y===a){f=!0,a=c,n=s;break}y=y.sibling}if(!f)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function k(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=k(e),t!==null)return t;e=e.sibling}return null}var A=Object.assign,Q=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ye=Symbol.for("react.consumer"),me=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),Oe=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=Te&&e[Te]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case re:return"Profiler";case te:return"StrictMode";case De:return"Suspense";case Xe:return"SuspenseList";case de:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case me:return e.displayName||"Context";case ye:return(e._context.displayName||"Context")+".Consumer";case he:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return t=e.displayName||null,t!==null?t:V(e.type)||"Memo";case we:t=e._payload,e=e._init;try{return V(e(t))}catch{}}return null}var z=Array.isArray,j=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},le=[],oe=-1;function w(e){return{current:e}}function D(e){0>oe||(e.current=le[oe],le[oe]=null,oe--)}function K(e,t){oe++,le[oe]=e.current,e.current=t}var ie=w(null),ee=w(null),ue=w(null),_e=w(null);function Ye(e,t){switch(K(ue,t),K(ee,e),K(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?dp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=dp(t),e=fp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}D(ie),K(ie,e)}function Re(){D(ie),D(ee),D(ue)}function qe(e){e.memoizedState!==null&&K(_e,e);var t=ie.current,n=fp(t,e.type);t!==n&&(K(ee,e),K(ie,n))}function ot(e){ee.current===e&&(D(ie),D(ee)),_e.current===e&&(D(_e),dc._currentValue=X)}var It,Mt;function Qt(e){if(It===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);It=t&&t[1]||"",Mt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+e+Mt}var Ot=!1;function rn(e,t){if(!e||Ot)return"";Ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(Z){var Y=Z}Reflect.construct(e,[],P)}else{try{P.call()}catch(Z){Y=Z}e.call(P.prototype)}}else{try{throw Error()}catch(Z){Y=Z}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(Z){if(Z&&Y&&typeof Z.stack=="string")return[Z.stack,Y.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=a.DetermineComponentFrameRoot(),f=c[0],y=c[1];if(f&&y){var N=f.split(`
`),L=y.split(`
`);for(s=a=0;a<N.length&&!N[a].includes("DetermineComponentFrameRoot");)a++;for(;s<L.length&&!L[s].includes("DetermineComponentFrameRoot");)s++;if(a===N.length||s===L.length)for(a=N.length-1,s=L.length-1;1<=a&&0<=s&&N[a]!==L[s];)s--;for(;1<=a&&0<=s;a--,s--)if(N[a]!==L[s]){if(a!==1||s!==1)do if(a--,s--,0>s||N[a]!==L[s]){var $=`
`+N[a].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=a&&0<=s);break}}}finally{Ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Qt(n):""}function _n(e,t){switch(e.tag){case 26:case 27:case 5:return Qt(e.type);case 16:return Qt("Lazy");case 13:return e.child!==t&&t!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return rn(e.type,!1);case 11:return rn(e.type.render,!1);case 1:return rn(e.type,!0);case 31:return Qt("Activity");default:return""}}function Pt(e){try{var t="",n=null;do t+=_n(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var un=Object.prototype.hasOwnProperty,yn=r.unstable_scheduleCallback,ln=r.unstable_cancelCallback,Pn=r.unstable_shouldYield,ua=r.unstable_requestPaint,R=r.unstable_now,Se=r.unstable_getCurrentPriorityLevel,Ge=r.unstable_ImmediatePriority,Be=r.unstable_UserBlockingPriority,ct=r.unstable_NormalPriority,Ke=r.unstable_LowPriority,H=r.unstable_IdlePriority,Le=r.log,Ht=r.unstable_setDisableYieldValue,Qe=null,vt=null;function xt(e){if(typeof Le=="function"&&Ht(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Qe,e)}catch{}}var pt=Math.clz32?Math.clz32:La,Nn=Math.log,He=Math.LN2;function La(e){return e>>>=0,e===0?32:31-(Nn(e)/He|0)|0}var Ue=256,sn=262144,bn=4194304;function dn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function At(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var s=0,c=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var y=a&134217727;return y!==0?(a=y&~c,a!==0?s=dn(a):(f&=y,f!==0?s=dn(f):n||(n=y&~e,n!==0&&(s=dn(n))))):(y=a&~c,y!==0?s=dn(y):f!==0?s=dn(f):n||(n=a&~e,n!==0&&(s=dn(n)))),s===0?0:t!==0&&t!==s&&(t&c)===0&&(c=s&-s,n=t&-t,c>=n||c===32&&(n&4194048)!==0)?t:s}function ea(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fn(){var e=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),e}function kn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qt(e,t,n,a,s,c){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var y=e.entanglements,N=e.expirationTimes,L=e.hiddenUpdates;for(n=f&~n;0<n;){var $=31-pt(n),P=1<<$;y[$]=0,N[$]=-1;var Y=L[$];if(Y!==null)for(L[$]=null,$=0;$<Y.length;$++){var Z=Y[$];Z!==null&&(Z.lane&=-536870913)}n&=~P}a!==0&&ta(e,a,0),c!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=c&~(f&~t))}function ta(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-pt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-pt(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}function na(e,t){var n=t&-t;return n=(n&42)!==0?1:Ve(n),(n&(e.suspendedLanes|t))!==0?0:n}function Ve(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gn(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:zp(e.type))}function Vn(e,t){var n=G.p;try{return G.p=e,t()}finally{G.p=n}}var q=Math.random().toString(36).slice(2),pe="__reactFiber$"+q,ke="__reactProps$"+q,ut="__reactContainer$"+q,gt="__reactEvents$"+q,Rn="__reactListeners$"+q,Bl="__reactHandles$"+q,Ha="__reactResources$"+q,je="__reactMarker$"+q;function E(e){delete e[pe],delete e[ke],delete e[gt],delete e[Rn],delete e[Bl]}function ne(e){var t=e[pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ut]||n[pe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vp(e);e!==null;){if(n=e[pe])return n;e=vp(e)}return t}e=n,n=e.parentNode}return null}function xe(e){if(e=e[pe]||e[ut]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function tt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Dt(e){var t=e[Ha];return t||(t=e[Ha]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $e(e){e[je]=!0}var $t=new Set,jn={};function hn(e,t){aa(e,t),aa(e+"Capture",t)}function aa(e,t){for(jn[e]=t,e=0;e<t.length;e++)$t.add(t[e])}var Bt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},ll={};function no(e){return un.call(ll,e)?!0:un.call(al,e)?!1:Bt.test(e)?ll[e]=!0:(al[e]=!0,!1)}function Ll(e,t,n){if(no(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function _i(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Lt(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function is(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ac(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,c=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){n=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){if(!e._valueTracker){var t=is(e)?"checked":"value";e._valueTracker=Ac(e,t,""+e[t])}}function kc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=is(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Hl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ao=/[\n"\\]/g;function En(e){return e.replace(ao,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lo(e,t,n,a,s,c,f,y){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+on(t)):e.value!==""+on(t)&&(e.value=""+on(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?ji(e,f,on(t)):n!=null?ji(e,f,on(n)):a!=null&&e.removeAttribute("value"),s==null&&c!=null&&(e.defaultChecked=!!c),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+on(y):e.removeAttribute("name")}function ql(e,t,n,a,s,c,f,y){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||n!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){Ni(e);return}n=n!=null?""+on(n):"",t=t!=null?""+on(t):n,y||t===e.value||(e.value=t),e.defaultValue=t}a=a??s,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=y?e.checked:!!a,e.defaultChecked=!!a,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Ni(e)}function ji(e,t,n){t==="number"&&Hl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ja(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function io(e,t,n){if(t!=null&&(t=""+on(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+on(n):""}function so(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(o(92));if(z(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=on(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Ni(e)}function il(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ju=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oo(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||ju.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function co(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var s in t)a=t[s],t.hasOwnProperty(s)&&n[s]!==a&&oo(e,s,a)}else for(var c in t)t.hasOwnProperty(c)&&oo(e,c,t[c])}function ro(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ss(e){return Eu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ea(){}var Ei=null;function Ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kl=null,da=null;function os(e){var t=xe(e);if(t&&(e=t.stateNode)){var n=e[ke]||null;e:switch(e=t.stateNode,t.type){case"input":if(lo(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+En(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=a[ke]||null;if(!s)throw Error(o(90));lo(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&kc(a)}break e;case"textarea":io(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ja(e,!!n.multiple,t,!1)}}}var Yl=!1;function sl(e,t,n){if(Yl)return e(t,n);Yl=!0;try{var a=e(t);return a}finally{if(Yl=!1,(Kl!==null||da!==null)&&(Tr(),Kl&&(t=Kl,e=da,da=Kl=null,os(t),e)))for(t=0;t<e.length;t++)os(e[t])}}function Gl(e,t){var n=e.stateNode;if(n===null)return null;var a=n[ke]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var St=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=!1;if(St)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){uo=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{uo=!1}var fa=null,Ti=null,Ca=null;function fo(){if(Ca)return Ca;var e,t=Ti,n=t.length,a,s="value"in fa?fa.value:fa.textContent,c=s.length;for(e=0;e<n&&t[e]===s[e];e++);var f=n-e;for(a=1;a<=f&&t[n-a]===s[c-a];a++);return Ca=s.slice(e,1<a?1-a:void 0)}function ol(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qa(){return!0}function cs(){return!1}function xn(e){function t(n,a,s,c,f){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?qa:cs,this.isPropagationStopped=cs,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),t}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=xn(Ka),cl=A({},Ka,{view:0,detail:0}),rs=xn(cl),ki,us,rl,Ri=A({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Di,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rl&&(rl&&e.type==="mousemove"?(ki=e.screenX-rl.screenX,us=e.screenY-rl.screenY):us=ki=0,rl=e),ki)},movementY:function(e){return"movementY"in e?e.movementY:us}}),ho=xn(Ri),mo=A({},Ri,{dataTransfer:0}),ds=xn(mo),Zl=A({},cl,{relatedTarget:0}),po=xn(Zl),Mi=A({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Cu=xn(Mi),go=A({},Ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mc=xn(go),Tu=A({},Ka,{data:0}),fs=xn(Tu),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Au[e])?!!t[e]:!1}function Di(){return ku}var Dc=A({},cl,{key:function(e){if(e.key){var t=yo[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Di,charCode:function(e){return e.type==="keypress"?ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ui=xn(Dc),Uc=A({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=xn(Uc),zc=A({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Di}),Ru=xn(zc),vo=A({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),xo=xn(vo),So=A({},Ri,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wo=xn(So),Oc=A({},Ka,{newState:0,oldState:0}),ul=xn(Oc),_o=[9,13,27,32],hs=St&&"CompositionEvent"in window,Ya=null;St&&"documentMode"in document&&(Ya=document.documentMode);var ms=St&&"TextEvent"in window&&!Ya,zi=St&&(!hs||Ya&&8<Ya&&11>=Ya),ps=" ",Il=!1;function dl(e,t){switch(e){case"keyup":return _o.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function No(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fl=!1;function Bc(e,t){switch(e){case"compositionend":return No(t);case"keypress":return t.which!==32?null:(Il=!0,ps);case"textInput":return e=t.data,e===ps&&Il?null:e;default:return null}}function jo(e,t){if(fl)return e==="compositionend"||!hs&&dl(e,t)?(e=fo(),Ca=Ti=fa=null,fl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zi&&t.locale!=="ko"?null:t.data;default:return null}}var gs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gs[e.type]:t==="textarea"}function Lc(e,t,n,a){Kl?da?da.push(a):da=[a]:Kl=a,t=zr(t,"onChange"),0<t.length&&(n=new Ai("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Oi=null,hl=null;function Hc(e){ip(e,0)}function ml(e){var t=tt(e);if(kc(t))return e}function ys(e,t){if(e==="change")return t}var qc=!1;if(St){var Co;if(St){var bs="oninput"in document;if(!bs){var vs=document.createElement("div");vs.setAttribute("oninput","return;"),bs=typeof vs.oninput=="function"}Co=bs}else Co=!1;qc=Co&&(!document.documentMode||9<document.documentMode)}function To(){Oi&&(Oi.detachEvent("onpropertychange",Kc),hl=Oi=null)}function Kc(e){if(e.propertyName==="value"&&ml(hl)){var t=[];Lc(t,hl,e,Ci(e)),sl(Hc,t)}}function Yc(e,t,n){e==="focusin"?(To(),Oi=t,hl=n,Oi.attachEvent("onpropertychange",Kc)):e==="focusout"&&To()}function Mu(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ml(hl)}function Jt(e,t){if(e==="click")return ml(t)}function Bi(e,t){if(e==="input"||e==="change")return ml(t)}function Gc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cn=typeof Object.is=="function"?Object.is:Gc;function Ql(e,t){if(Cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!un.call(t,s)||!Cn(e[s],t[s]))return!1}return!0}function Ao(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ko(e,t){var n=Ao(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ao(n)}}function Vc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ro(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Hl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Hl(e.document)}return t}function xs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Li=St&&"documentMode"in document&&11>=document.documentMode,Ga=null,Mn=null,Hi=null,Ss=!1;function Va(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ss||Ga==null||Ga!==Hl(a)||(a=Ga,"selectionStart"in a&&xs(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hi&&Ql(Hi,a)||(Hi=a,a=zr(Mn,"onSelect"),0<a.length&&(t=new Ai("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Ga)))}function mn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dn={animationend:mn("Animation","AnimationEnd"),animationiteration:mn("Animation","AnimationIteration"),animationstart:mn("Animation","AnimationStart"),transitionrun:mn("Transition","TransitionRun"),transitionstart:mn("Transition","TransitionStart"),transitioncancel:mn("Transition","TransitionCancel"),transitionend:mn("Transition","TransitionEnd")},Za={},ws={};St&&(ws=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function pl(e){if(Za[e])return Za[e];if(!Dn[e])return e;var t=Dn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ws)return Za[e]=t[n];return e}var Mo=pl("animationend"),Zc=pl("animationiteration"),Xc=pl("animationstart"),$l=pl("transitionrun"),Ic=pl("transitionstart"),Du=pl("transitioncancel"),Qc=pl("transitionend"),$c=new Map,Do="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Do.push("scrollEnd");function Yt(e,t){$c.set(e,t),hn(t,[e])}var qi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tn=[],Xa=0,_s=0;function Ki(){for(var e=Xa,t=_s=Xa=0;t<e;){var n=Tn[t];Tn[t++]=null;var a=Tn[t];Tn[t++]=null;var s=Tn[t];Tn[t++]=null;var c=Tn[t];if(Tn[t++]=null,a!==null&&s!==null){var f=a.pending;f===null?s.next=s:(s.next=f.next,f.next=s),a.pending=s}c!==0&&Jc(n,s,c)}}function Jl(e,t,n,a){Tn[Xa++]=e,Tn[Xa++]=t,Tn[Xa++]=n,Tn[Xa++]=a,_s|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Uo(e,t,n,a){return Jl(e,t,n,a),Ns(e)}function gl(e,t){return Jl(e,null,null,t),Ns(e)}function Jc(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var s=!1,c=e.return;c!==null;)c.childLanes|=n,a=c.alternate,a!==null&&(a.childLanes|=n),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(s=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,s&&t!==null&&(s=31-pt(n),e=c.hiddenUpdates,a=e[s],a===null?e[s]=[t]:a.push(t),t.lane=n|536870912),c):null}function Ns(e){if(50<lc)throw lc=0,kd=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var yl={};function Fc(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,t,n,a){return new Fc(e,t,n,a)}function zo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ta(e,t){var n=e.alternate;return n===null?(n=Un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Oo(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Yi(e,t,n,a,s,c){var f=0;if(a=e,typeof e=="function")zo(e)&&(f=1);else if(typeof e=="string")f=hb(e,n,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case de:return e=Un(31,n,t,s),e.elementType=de,e.lanes=c,e;case F:return ha(n.children,s,c,t);case te:f=8,s|=24;break;case re:return e=Un(12,n,t,s|2),e.elementType=re,e.lanes=c,e;case De:return e=Un(13,n,t,s),e.elementType=De,e.lanes=c,e;case Xe:return e=Un(19,n,t,s),e.elementType=Xe,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case me:f=10;break e;case ye:f=9;break e;case he:f=11;break e;case Ae:f=14;break e;case we:f=16,a=null;break e}f=29,n=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=Un(f,n,t,s),t.elementType=e,t.type=a,t.lanes=c,t}function ha(e,t,n,a){return e=Un(7,e,a,t),e.lanes=n,e}function js(e,t,n){return e=Un(6,e,null,t),e.lanes=n,e}function Bo(e){var t=Un(18,null,null,0);return t.stateNode=e,t}function Es(e,t,n){return t=Un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wc=new WeakMap;function zn(e,t){if(typeof e=="object"&&e!==null){var n=Wc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Pt(t)},Wc.set(e,t),t)}return{value:e,source:t,stack:Pt(t)}}var Ia=[],Fl=0,Gi=null,Vi=0,On=[],Zn=0,ma=null,pa=1,ga="";function Aa(e,t){Ia[Fl++]=Vi,Ia[Fl++]=Gi,Gi=e,Vi=t}function Pc(e,t,n){On[Zn++]=pa,On[Zn++]=ga,On[Zn++]=ma,ma=e;var a=pa;e=ga;var s=32-pt(a)-1;a&=~(1<<s),n+=1;var c=32-pt(t)+s;if(30<c){var f=s-s%5;c=(a&(1<<f)-1).toString(32),a>>=f,s-=f,pa=1<<32-pt(t)+s|n<<s|a,ga=c+e}else pa=1<<c|n<<s|a,ga=e}function Lo(e){e.return!==null&&(Aa(e,1),Pc(e,1,0))}function Cs(e){for(;e===Gi;)Gi=Ia[--Fl],Ia[Fl]=null,Vi=Ia[--Fl],Ia[Fl]=null;for(;e===ma;)ma=On[--Zn],On[Zn]=null,ga=On[--Zn],On[Zn]=null,pa=On[--Zn],On[Zn]=null}function er(e,t){On[Zn++]=pa,On[Zn++]=ga,On[Zn++]=ma,pa=t.id,ga=t.overflow,ma=e}var kt=null,Et=null,We=!1,ka=null,Gt=!1,Zi=Error(o(519));function Ra(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(zn(t,e)),Zi}function tr(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[pe]=e,t[ke]=a,n){case"dialog":at("cancel",t),at("close",t);break;case"iframe":case"object":case"embed":at("load",t);break;case"video":case"audio":for(n=0;n<sc.length;n++)at(sc[n],t);break;case"source":at("error",t);break;case"img":case"image":case"link":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"input":at("invalid",t),ql(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":at("invalid",t);break;case"textarea":at("invalid",t),so(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||rp(t.textContent,n)?(a.popover!=null&&(at("beforetoggle",t),at("toggle",t)),a.onScroll!=null&&at("scroll",t),a.onScrollEnd!=null&&at("scrollend",t),a.onClick!=null&&(t.onclick=Ea),t=!0):t=!1,t||Ra(e,!0)}function Ho(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 31:case 13:Gt=!1;return;case 27:case 3:Gt=!0;return;default:kt=kt.return}}function Wl(e){if(e!==kt)return!1;if(!We)return Ho(e),We=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Zd(e.type,e.memoizedProps)),n=!n),n&&Et&&Ra(e),Ho(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Et=bp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Et=bp(e)}else t===27?(t=Et,fi(e.type)?(e=Jd,Jd=null,Et=e):Et=t):Et=kt?xa(e.stateNode.nextSibling):null;return!0}function bl(){Et=kt=null,We=!1}function qo(){var e=ka;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),ka=null),e}function Pl(e){ka===null?ka=[e]:ka.push(e)}var Ts=w(null),Qa=null,ya=null;function Ma(e,t,n){K(Ts,t._currentValue),t._currentValue=n}function ba(e){e._currentValue=Ts.current,D(Ts)}function As(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ks(e,t,n,a){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){var f=s.child;c=c.firstContext;e:for(;c!==null;){var y=c;c=s;for(var N=0;N<t.length;N++)if(y.context===t[N]){c.lanes|=n,y=c.alternate,y!==null&&(y.lanes|=n),As(c.return,n,e),a||(f=null);break e}c=y.next}}else if(s.tag===18){if(f=s.return,f===null)throw Error(o(341));f.lanes|=n,c=f.alternate,c!==null&&(c.lanes|=n),As(f,n,e),f=null}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}}function vl(e,t,n,a){e=null;for(var s=t,c=!1;s!==null;){if(!c){if((s.flags&524288)!==0)c=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var f=s.alternate;if(f===null)throw Error(o(387));if(f=f.memoizedProps,f!==null){var y=s.type;Cn(s.pendingProps.value,f.value)||(e!==null?e.push(y):e=[y])}}else if(s===_e.current){if(f=s.alternate,f===null)throw Error(o(387));f.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(dc):e=[dc])}s=s.return}e!==null&&ks(t,e,n,a),t.flags|=262144}function Xi(e){for(e=e.firstContext;e!==null;){if(!Cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $a(e){Qa=e,ya=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function en(e){return p(Qa,e)}function d(e,t){return Qa===null&&$a(e),p(e,t)}function p(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ya===null){if(e===null)throw Error(o(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var _=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},T=r.unstable_scheduleCallback,J=r.unstable_NormalPriority,ae={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ge(){return{controller:new _,data:new Map,refCount:0}}function lt(e){e.refCount--,e.refCount===0&&T(J,function(){e.controller.abort()})}var Pe=null,ve=0,ce=0,dt=null;function wt(e,t){if(Pe===null){var n=Pe=[];ve=0,ce=Od(),dt={status:"pending",value:void 0,then:function(a){n.push(a)}}}return ve++,t.then(rt,rt),t}function rt(){if(--ve===0&&Pe!==null){dt!==null&&(dt.status="fulfilled");var e=Pe;Pe=null,ce=0,dt=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Bn(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(a.status="rejected",a.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),a}var pn=j.S;j.S=function(e,t){Dm=R(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wt(e,t),pn!==null&&pn(e,t)};var Ja=w(null);function Uu(){var e=Ja.current;return e!==null?e:Ct.pooledCache}function nr(e,t){t===null?K(Ja,Ja.current):K(Ja,t.pool)}function Ff(){var e=Uu();return e===null?null:{parent:ae._currentValue,pool:e}}var Rs=Error(o(460)),zu=Error(o(474)),ar=Error(o(542)),lr={then:function(){}};function Wf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ea,Ea),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,th(e),e;default:if(typeof t.status=="string")t.then(Ea,Ea);else{if(e=Ct,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=a}},function(a){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,th(e),e}throw Qi=t,Rs}}function Ii(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Qi=n,Rs):n}}var Qi=null;function eh(){if(Qi===null)throw Error(o(459));var e=Qi;return Qi=null,e}function th(e){if(e===Rs||e===ar)throw Error(o(483))}var Ms=null,Ko=0;function ir(e){var t=Ko;return Ko+=1,Ms===null&&(Ms=[]),Pf(Ms,e,t)}function Yo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function sr(e,t){throw t.$$typeof===Q?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function nh(e){function t(M,C){if(e){var B=M.deletions;B===null?(M.deletions=[C],M.flags|=16):B.push(C)}}function n(M,C){if(!e)return null;for(;C!==null;)t(M,C),C=C.sibling;return null}function a(M){for(var C=new Map;M!==null;)M.key!==null?C.set(M.key,M):C.set(M.index,M),M=M.sibling;return C}function s(M,C){return M=Ta(M,C),M.index=0,M.sibling=null,M}function c(M,C,B){return M.index=B,e?(B=M.alternate,B!==null?(B=B.index,B<C?(M.flags|=67108866,C):B):(M.flags|=67108866,C)):(M.flags|=1048576,C)}function f(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function y(M,C,B,W){return C===null||C.tag!==6?(C=js(B,M.mode,W),C.return=M,C):(C=s(C,B),C.return=M,C)}function N(M,C,B,W){var Me=B.type;return Me===F?$(M,C,B.props.children,W,B.key):C!==null&&(C.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===we&&Ii(Me)===C.type)?(C=s(C,B.props),Yo(C,B),C.return=M,C):(C=Yi(B.type,B.key,B.props,null,M.mode,W),Yo(C,B),C.return=M,C)}function L(M,C,B,W){return C===null||C.tag!==4||C.stateNode.containerInfo!==B.containerInfo||C.stateNode.implementation!==B.implementation?(C=Es(B,M.mode,W),C.return=M,C):(C=s(C,B.children||[]),C.return=M,C)}function $(M,C,B,W,Me){return C===null||C.tag!==7?(C=ha(B,M.mode,W,Me),C.return=M,C):(C=s(C,B),C.return=M,C)}function P(M,C,B){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=js(""+C,M.mode,B),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case O:return B=Yi(C.type,C.key,C.props,null,M.mode,B),Yo(B,C),B.return=M,B;case U:return C=Es(C,M.mode,B),C.return=M,C;case we:return C=Ii(C),P(M,C,B)}if(z(C)||be(C))return C=ha(C,M.mode,B,null),C.return=M,C;if(typeof C.then=="function")return P(M,ir(C),B);if(C.$$typeof===me)return P(M,d(M,C),B);sr(M,C)}return null}function Y(M,C,B,W){var Me=C!==null?C.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Me!==null?null:y(M,C,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case O:return B.key===Me?N(M,C,B,W):null;case U:return B.key===Me?L(M,C,B,W):null;case we:return B=Ii(B),Y(M,C,B,W)}if(z(B)||be(B))return Me!==null?null:$(M,C,B,W,null);if(typeof B.then=="function")return Y(M,C,ir(B),W);if(B.$$typeof===me)return Y(M,C,d(M,B),W);sr(M,B)}return null}function Z(M,C,B,W,Me){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return M=M.get(B)||null,y(C,M,""+W,Me);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return M=M.get(W.key===null?B:W.key)||null,N(C,M,W,Me);case U:return M=M.get(W.key===null?B:W.key)||null,L(C,M,W,Me);case we:return W=Ii(W),Z(M,C,B,W,Me)}if(z(W)||be(W))return M=M.get(B)||null,$(C,M,W,Me,null);if(typeof W.then=="function")return Z(M,C,B,ir(W),Me);if(W.$$typeof===me)return Z(M,C,B,d(C,W),Me);sr(C,W)}return null}function Ee(M,C,B,W){for(var Me=null,ft=null,Ce=C,Je=C=0,st=null;Ce!==null&&Je<B.length;Je++){Ce.index>Je?(st=Ce,Ce=null):st=Ce.sibling;var ht=Y(M,Ce,B[Je],W);if(ht===null){Ce===null&&(Ce=st);break}e&&Ce&&ht.alternate===null&&t(M,Ce),C=c(ht,C,Je),ft===null?Me=ht:ft.sibling=ht,ft=ht,Ce=st}if(Je===B.length)return n(M,Ce),We&&Aa(M,Je),Me;if(Ce===null){for(;Je<B.length;Je++)Ce=P(M,B[Je],W),Ce!==null&&(C=c(Ce,C,Je),ft===null?Me=Ce:ft.sibling=Ce,ft=Ce);return We&&Aa(M,Je),Me}for(Ce=a(Ce);Je<B.length;Je++)st=Z(Ce,M,Je,B[Je],W),st!==null&&(e&&st.alternate!==null&&Ce.delete(st.key===null?Je:st.key),C=c(st,C,Je),ft===null?Me=st:ft.sibling=st,ft=st);return e&&Ce.forEach(function(yi){return t(M,yi)}),We&&Aa(M,Je),Me}function ze(M,C,B,W){if(B==null)throw Error(o(151));for(var Me=null,ft=null,Ce=C,Je=C=0,st=null,ht=B.next();Ce!==null&&!ht.done;Je++,ht=B.next()){Ce.index>Je?(st=Ce,Ce=null):st=Ce.sibling;var yi=Y(M,Ce,ht.value,W);if(yi===null){Ce===null&&(Ce=st);break}e&&Ce&&yi.alternate===null&&t(M,Ce),C=c(yi,C,Je),ft===null?Me=yi:ft.sibling=yi,ft=yi,Ce=st}if(ht.done)return n(M,Ce),We&&Aa(M,Je),Me;if(Ce===null){for(;!ht.done;Je++,ht=B.next())ht=P(M,ht.value,W),ht!==null&&(C=c(ht,C,Je),ft===null?Me=ht:ft.sibling=ht,ft=ht);return We&&Aa(M,Je),Me}for(Ce=a(Ce);!ht.done;Je++,ht=B.next())ht=Z(Ce,M,Je,ht.value,W),ht!==null&&(e&&ht.alternate!==null&&Ce.delete(ht.key===null?Je:ht.key),C=c(ht,C,Je),ft===null?Me=ht:ft.sibling=ht,ft=ht);return e&&Ce.forEach(function(Nb){return t(M,Nb)}),We&&Aa(M,Je),Me}function jt(M,C,B,W){if(typeof B=="object"&&B!==null&&B.type===F&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case O:e:{for(var Me=B.key;C!==null;){if(C.key===Me){if(Me=B.type,Me===F){if(C.tag===7){n(M,C.sibling),W=s(C,B.props.children),W.return=M,M=W;break e}}else if(C.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===we&&Ii(Me)===C.type){n(M,C.sibling),W=s(C,B.props),Yo(W,B),W.return=M,M=W;break e}n(M,C);break}else t(M,C);C=C.sibling}B.type===F?(W=ha(B.props.children,M.mode,W,B.key),W.return=M,M=W):(W=Yi(B.type,B.key,B.props,null,M.mode,W),Yo(W,B),W.return=M,M=W)}return f(M);case U:e:{for(Me=B.key;C!==null;){if(C.key===Me)if(C.tag===4&&C.stateNode.containerInfo===B.containerInfo&&C.stateNode.implementation===B.implementation){n(M,C.sibling),W=s(C,B.children||[]),W.return=M,M=W;break e}else{n(M,C);break}else t(M,C);C=C.sibling}W=Es(B,M.mode,W),W.return=M,M=W}return f(M);case we:return B=Ii(B),jt(M,C,B,W)}if(z(B))return Ee(M,C,B,W);if(be(B)){if(Me=be(B),typeof Me!="function")throw Error(o(150));return B=Me.call(B),ze(M,C,B,W)}if(typeof B.then=="function")return jt(M,C,ir(B),W);if(B.$$typeof===me)return jt(M,C,d(M,B),W);sr(M,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,C!==null&&C.tag===6?(n(M,C.sibling),W=s(C,B),W.return=M,M=W):(n(M,C),W=js(B,M.mode,W),W.return=M,M=W),f(M)):n(M,C)}return function(M,C,B,W){try{Ko=0;var Me=jt(M,C,B,W);return Ms=null,Me}catch(Ce){if(Ce===Rs||Ce===ar)throw Ce;var ft=Un(29,Ce,null,M.mode);return ft.lanes=W,ft.return=M,ft}finally{}}}var $i=nh(!0),ah=nh(!1),ei=!1;function Ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ti(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ni(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(mt&2)!==0){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,t=Ns(e),Jc(e,null,n),t}return Jl(e,a,t,n),Ns(e)}function Go(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ne(e,n)}}function Lu(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?s=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?s=c=t:c=c.next=t}else s=c=t;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Hu=!1;function Vo(){if(Hu){var e=dt;if(e!==null)throw e}}function Zo(e,t,n,a){Hu=!1;var s=e.updateQueue;ei=!1;var c=s.firstBaseUpdate,f=s.lastBaseUpdate,y=s.shared.pending;if(y!==null){s.shared.pending=null;var N=y,L=N.next;N.next=null,f===null?c=L:f.next=L,f=N;var $=e.alternate;$!==null&&($=$.updateQueue,y=$.lastBaseUpdate,y!==f&&(y===null?$.firstBaseUpdate=L:y.next=L,$.lastBaseUpdate=N))}if(c!==null){var P=s.baseState;f=0,$=L=N=null,y=c;do{var Y=y.lane&-536870913,Z=Y!==y.lane;if(Z?(it&Y)===Y:(a&Y)===Y){Y!==0&&Y===ce&&(Hu=!0),$!==null&&($=$.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var Ee=e,ze=y;Y=t;var jt=n;switch(ze.tag){case 1:if(Ee=ze.payload,typeof Ee=="function"){P=Ee.call(jt,P,Y);break e}P=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=ze.payload,Y=typeof Ee=="function"?Ee.call(jt,P,Y):Ee,Y==null)break e;P=A({},P,Y);break e;case 2:ei=!0}}Y=y.callback,Y!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=s.callbacks,Z===null?s.callbacks=[Y]:Z.push(Y))}else Z={lane:Y,tag:y.tag,payload:y.payload,callback:y.callback,next:null},$===null?(L=$=Z,N=P):$=$.next=Z,f|=Y;if(y=y.next,y===null){if(y=s.shared.pending,y===null)break;Z=y,y=Z.next,Z.next=null,s.lastBaseUpdate=Z,s.shared.pending=null}}while(!0);$===null&&(N=P),s.baseState=N,s.firstBaseUpdate=L,s.lastBaseUpdate=$,c===null&&(s.shared.lanes=0),oi|=f,e.lanes=f,e.memoizedState=P}}function lh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ih(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)lh(n[e],t)}var Ds=w(null),or=w(0);function sh(e,t){e=Tl,K(or,e),K(Ds,t),Tl=e|t.baseLanes}function qu(){K(or,Tl),K(Ds,Ds.current)}function Ku(){Tl=or.current,D(Ds),D(or)}var la=w(null),va=null;function ai(e){var t=e.alternate;K(Ft,Ft.current&1),K(la,e),va===null&&(t===null||Ds.current!==null||t.memoizedState!==null)&&(va=e)}function Yu(e){K(Ft,Ft.current),K(la,e),va===null&&(va=e)}function oh(e){e.tag===22?(K(Ft,Ft.current),K(la,e),va===null&&(va=e)):li()}function li(){K(Ft,Ft.current),K(la,la.current)}function ia(e){D(la),va===e&&(va=null),D(Ft)}var Ft=w(0);function cr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Qd(n)||$d(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xl=0,Ie=null,_t=null,tn=null,rr=!1,Us=!1,Ji=!1,ur=0,Xo=0,zs=null,my=0;function Vt(){throw Error(o(321))}function Gu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cn(e[n],t[n]))return!1;return!0}function Vu(e,t,n,a,s,c){return xl=c,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?Vh:id,Ji=!1,c=n(a,s),Ji=!1,Us&&(c=rh(t,n,a,s)),ch(e),c}function ch(e){j.H=$o;var t=_t!==null&&_t.next!==null;if(xl=0,tn=_t=Ie=null,rr=!1,Xo=0,zs=null,t)throw Error(o(300));e===null||nn||(e=e.dependencies,e!==null&&Xi(e)&&(nn=!0))}function rh(e,t,n,a){Ie=e;var s=0;do{if(Us&&(zs=null),Xo=0,Us=!1,25<=s)throw Error(o(301));if(s+=1,tn=_t=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}j.H=Zh,c=t(n,a)}while(Us);return c}function py(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?Io(t):t,e=e.useState()[0],(_t!==null?_t.memoizedState:null)!==e&&(Ie.flags|=1024),t}function Zu(){var e=ur!==0;return ur=0,e}function Xu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Iu(e){if(rr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}rr=!1}xl=0,tn=_t=Ie=null,Us=!1,Xo=ur=0,zs=null}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ie.memoizedState=tn=e:tn=tn.next=e,tn}function Wt(){if(_t===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var t=tn===null?Ie.memoizedState:tn.next;if(t!==null)tn=t,_t=e;else{if(e===null)throw Ie.alternate===null?Error(o(467)):Error(o(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},tn===null?Ie.memoizedState=tn=e:tn=tn.next=e}return tn}function dr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Io(e){var t=Xo;return Xo+=1,zs===null&&(zs=[]),e=Pf(zs,e,t),t=Ie,(tn===null?t.memoizedState:tn.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?Vh:id),e}function fr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Io(e);if(e.$$typeof===me)return en(e)}throw Error(o(438,String(e)))}function Qu(e){var t=null,n=Ie.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Ie.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=dr(),Ie.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=Oe;return t.index++,n}function Sl(e,t){return typeof t=="function"?t(e):t}function hr(e){var t=Wt();return $u(t,_t,e)}function $u(e,t,n){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var s=e.baseQueue,c=a.pending;if(c!==null){if(s!==null){var f=s.next;s.next=c.next,c.next=f}t.baseQueue=s=c,a.pending=null}if(c=e.baseState,s===null)e.memoizedState=c;else{t=s.next;var y=f=null,N=null,L=t,$=!1;do{var P=L.lane&-536870913;if(P!==L.lane?(it&P)===P:(xl&P)===P){var Y=L.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),P===ce&&($=!0);else if((xl&Y)===Y){L=L.next,Y===ce&&($=!0);continue}else P={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(y=N=P,f=c):N=N.next=P,Ie.lanes|=Y,oi|=Y;P=L.action,Ji&&n(c,P),c=L.hasEagerState?L.eagerState:n(c,P)}else Y={lane:P,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(y=N=Y,f=c):N=N.next=Y,Ie.lanes|=P,oi|=P;L=L.next}while(L!==null&&L!==t);if(N===null?f=c:N.next=y,!Cn(c,e.memoizedState)&&(nn=!0,$&&(n=dt,n!==null)))throw n;e.memoizedState=c,e.baseState=f,e.baseQueue=N,a.lastRenderedState=c}return s===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Ju(e){var t=Wt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,c=t.memoizedState;if(s!==null){n.pending=null;var f=s=s.next;do c=e(c,f.action),f=f.next;while(f!==s);Cn(c,t.memoizedState)||(nn=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,a]}function uh(e,t,n){var a=Ie,s=Wt(),c=We;if(c){if(n===void 0)throw Error(o(407));n=n()}else n=t();var f=!Cn((_t||s).memoizedState,n);if(f&&(s.memoizedState=n,nn=!0),s=s.queue,Pu(hh.bind(null,a,s,e),[e]),s.getSnapshot!==t||f||tn!==null&&tn.memoizedState.tag&1){if(a.flags|=2048,Os(9,{destroy:void 0},fh.bind(null,a,s,n,t),null),Ct===null)throw Error(o(349));c||(xl&127)!==0||dh(a,t,n)}return n}function dh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t=dr(),Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fh(e,t,n,a){t.value=n,t.getSnapshot=a,mh(t)&&ph(e)}function hh(e,t,n){return n(function(){mh(t)&&ph(e)})}function mh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cn(e,n)}catch{return!0}}function ph(e){var t=gl(e,2);t!==null&&Jn(t,e,2)}function Fu(e){var t=Ln();if(typeof e=="function"){var n=e;if(e=n(),Ji){xt(!0);try{n()}finally{xt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:e},t}function gh(e,t,n,a){return e.baseState=n,$u(e,_t,typeof a=="function"?a:Sl)}function gy(e,t,n,a,s){if(gr(e))throw Error(o(485));if(e=t.action,e!==null){var c={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){c.listeners.push(f)}};j.T!==null?n(!0):c.isTransition=!1,a(c),n=t.pending,n===null?(c.next=t.pending=c,yh(t,c)):(c.next=n.next,t.pending=n.next=c)}}function yh(e,t){var n=t.action,a=t.payload,s=e.state;if(t.isTransition){var c=j.T,f={};j.T=f;try{var y=n(s,a),N=j.S;N!==null&&N(f,y),bh(e,t,y)}catch(L){Wu(e,t,L)}finally{c!==null&&f.types!==null&&(c.types=f.types),j.T=c}}else try{c=n(s,a),bh(e,t,c)}catch(L){Wu(e,t,L)}}function bh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){vh(e,t,a)},function(a){return Wu(e,t,a)}):vh(e,t,n)}function vh(e,t,n){t.status="fulfilled",t.value=n,xh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,yh(e,n)))}function Wu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,xh(t),t=t.next;while(t!==a)}e.action=null}function xh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Sh(e,t){return t}function wh(e,t){if(We){var n=Ct.formState;if(n!==null){e:{var a=Ie;if(We){if(Et){t:{for(var s=Et,c=Gt;s.nodeType!==8;){if(!c){s=null;break t}if(s=xa(s.nextSibling),s===null){s=null;break t}}c=s.data,s=c==="F!"||c==="F"?s:null}if(s){Et=xa(s.nextSibling),a=s.data==="F!";break e}}Ra(a)}a=!1}a&&(t=n[0])}}return n=Ln(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:t},n.queue=a,n=Kh.bind(null,Ie,a),a.dispatch=n,a=Fu(!1),c=ld.bind(null,Ie,!1,a.queue),a=Ln(),s={state:t,dispatch:null,action:e,pending:null},a.queue=s,n=gy.bind(null,Ie,s,c,n),s.dispatch=n,a.memoizedState=e,[t,n,!1]}function _h(e){var t=Wt();return Nh(t,_t,e)}function Nh(e,t,n){if(t=$u(e,t,Sh)[0],e=hr(Sl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Io(t)}catch(f){throw f===Rs?ar:f}else a=t;t=Wt();var s=t.queue,c=s.dispatch;return n!==t.memoizedState&&(Ie.flags|=2048,Os(9,{destroy:void 0},yy.bind(null,s,n),null)),[a,c,e]}function yy(e,t){e.action=t}function jh(e){var t=Wt(),n=_t;if(n!==null)return Nh(t,n,e);Wt(),t=t.memoizedState,n=Wt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Os(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Ie.updateQueue,t===null&&(t=dr(),Ie.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Eh(){return Wt().memoizedState}function mr(e,t,n,a){var s=Ln();Ie.flags|=e,s.memoizedState=Os(1|t,{destroy:void 0},n,a===void 0?null:a)}function pr(e,t,n,a){var s=Wt();a=a===void 0?null:a;var c=s.memoizedState.inst;_t!==null&&a!==null&&Gu(a,_t.memoizedState.deps)?s.memoizedState=Os(t,c,n,a):(Ie.flags|=e,s.memoizedState=Os(1|t,c,n,a))}function Ch(e,t){mr(8390656,8,e,t)}function Pu(e,t){pr(2048,8,e,t)}function by(e){Ie.flags|=4;var t=Ie.updateQueue;if(t===null)t=dr(),Ie.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Th(e){var t=Wt().memoizedState;return by({ref:t,nextImpl:e}),function(){if((mt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Ah(e,t){return pr(4,2,e,t)}function kh(e,t){return pr(4,4,e,t)}function Rh(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mh(e,t,n){n=n!=null?n.concat([e]):null,pr(4,4,Rh.bind(null,t,e),n)}function ed(){}function Dh(e,t){var n=Wt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Gu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Uh(e,t){var n=Wt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Gu(t,a[1]))return a[0];if(a=e(),Ji){xt(!0);try{e()}finally{xt(!1)}}return n.memoizedState=[a,t],a}function td(e,t,n){return n===void 0||(xl&1073741824)!==0&&(it&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=zm(),Ie.lanes|=e,oi|=e,n)}function zh(e,t,n,a){return Cn(n,t)?n:Ds.current!==null?(e=td(e,n,a),Cn(e,t)||(nn=!0),e):(xl&42)===0||(xl&1073741824)!==0&&(it&261930)===0?(nn=!0,e.memoizedState=n):(e=zm(),Ie.lanes|=e,oi|=e,t)}function Oh(e,t,n,a,s){var c=G.p;G.p=c!==0&&8>c?c:8;var f=j.T,y={};j.T=y,ld(e,!1,t,n);try{var N=s(),L=j.S;if(L!==null&&L(y,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=Bn(N,a);Qo(e,t,$,ca(e))}else Qo(e,t,a,ca(e))}catch(P){Qo(e,t,{then:function(){},status:"rejected",reason:P},ca())}finally{G.p=c,f!==null&&y.types!==null&&(f.types=y.types),j.T=f}}function vy(){}function nd(e,t,n,a){if(e.tag!==5)throw Error(o(476));var s=Bh(e).queue;Oh(e,s,t,X,n===null?vy:function(){return Lh(e),n(a)})}function Bh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:X},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Lh(e){var t=Bh(e);t.next===null&&(t=e.alternate.memoizedState),Qo(e,t.next.queue,{},ca())}function ad(){return en(dc)}function Hh(){return Wt().memoizedState}function qh(){return Wt().memoizedState}function xy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ca();e=ti(n);var a=ni(t,e,n);a!==null&&(Jn(a,t,n),Go(a,t,n)),t={cache:ge()},e.payload=t;return}t=t.return}}function Sy(e,t,n){var a=ca();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},gr(e)?Yh(t,n):(n=Uo(e,t,n,a),n!==null&&(Jn(n,e,a),Gh(n,t,a)))}function Kh(e,t,n){var a=ca();Qo(e,t,n,a)}function Qo(e,t,n,a){var s={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(gr(e))Yh(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,y=c(f,n);if(s.hasEagerState=!0,s.eagerState=y,Cn(y,f))return Jl(e,t,s,0),Ct===null&&Ki(),!1}catch{}finally{}if(n=Uo(e,t,s,a),n!==null)return Jn(n,e,a),Gh(n,t,a),!0}return!1}function ld(e,t,n,a){if(a={lane:2,revertLane:Od(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gr(e)){if(t)throw Error(o(479))}else t=Uo(e,n,a,2),t!==null&&Jn(t,e,2)}function gr(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Yh(e,t){Us=rr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gh(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ne(e,n)}}var $o={readContext:en,use:fr,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};$o.useEffectEvent=Vt;var Vh={readContext:en,use:fr,useCallback:function(e,t){return Ln().memoizedState=[e,t===void 0?null:t],e},useContext:en,useEffect:Ch,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,mr(4194308,4,Rh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mr(4194308,4,e,t)},useInsertionEffect:function(e,t){mr(4,2,e,t)},useMemo:function(e,t){var n=Ln();t=t===void 0?null:t;var a=e();if(Ji){xt(!0);try{e()}finally{xt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Ln();if(n!==void 0){var s=n(t);if(Ji){xt(!0);try{n(t)}finally{xt(!1)}}}else s=t;return a.memoizedState=a.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=Sy.bind(null,Ie,e),[a.memoizedState,e]},useRef:function(e){var t=Ln();return e={current:e},t.memoizedState=e},useState:function(e){e=Fu(e);var t=e.queue,n=Kh.bind(null,Ie,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ed,useDeferredValue:function(e,t){var n=Ln();return td(n,e,t)},useTransition:function(){var e=Fu(!1);return e=Oh.bind(null,Ie,e.queue,!0,!1),Ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Ie,s=Ln();if(We){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),Ct===null)throw Error(o(349));(it&127)!==0||dh(a,t,n)}s.memoizedState=n;var c={value:n,getSnapshot:t};return s.queue=c,Ch(hh.bind(null,a,c,e),[e]),a.flags|=2048,Os(9,{destroy:void 0},fh.bind(null,a,c,n,t),null),n},useId:function(){var e=Ln(),t=Ct.identifierPrefix;if(We){var n=ga,a=pa;n=(a&~(1<<32-pt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ur++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=my++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ad,useFormState:wh,useActionState:wh,useOptimistic:function(e){var t=Ln();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ld.bind(null,Ie,!0,n),n.dispatch=t,[e,t]},useMemoCache:Qu,useCacheRefresh:function(){return Ln().memoizedState=xy.bind(null,Ie)},useEffectEvent:function(e){var t=Ln(),n={impl:e};return t.memoizedState=n,function(){if((mt&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},id={readContext:en,use:fr,useCallback:Dh,useContext:en,useEffect:Pu,useImperativeHandle:Mh,useInsertionEffect:Ah,useLayoutEffect:kh,useMemo:Uh,useReducer:hr,useRef:Eh,useState:function(){return hr(Sl)},useDebugValue:ed,useDeferredValue:function(e,t){var n=Wt();return zh(n,_t.memoizedState,e,t)},useTransition:function(){var e=hr(Sl)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:Io(e),t]},useSyncExternalStore:uh,useId:Hh,useHostTransitionStatus:ad,useFormState:_h,useActionState:_h,useOptimistic:function(e,t){var n=Wt();return gh(n,_t,e,t)},useMemoCache:Qu,useCacheRefresh:qh};id.useEffectEvent=Th;var Zh={readContext:en,use:fr,useCallback:Dh,useContext:en,useEffect:Pu,useImperativeHandle:Mh,useInsertionEffect:Ah,useLayoutEffect:kh,useMemo:Uh,useReducer:Ju,useRef:Eh,useState:function(){return Ju(Sl)},useDebugValue:ed,useDeferredValue:function(e,t){var n=Wt();return _t===null?td(n,e,t):zh(n,_t.memoizedState,e,t)},useTransition:function(){var e=Ju(Sl)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:Io(e),t]},useSyncExternalStore:uh,useId:Hh,useHostTransitionStatus:ad,useFormState:jh,useActionState:jh,useOptimistic:function(e,t){var n=Wt();return _t!==null?gh(n,_t,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Qu,useCacheRefresh:qh};Zh.useEffectEvent=Th;function sd(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:A({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var od={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ca(),s=ti(a);s.payload=t,n!=null&&(s.callback=n),t=ni(e,s,a),t!==null&&(Jn(t,e,a),Go(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ca(),s=ti(a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ni(e,s,a),t!==null&&(Jn(t,e,a),Go(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ca(),a=ti(n);a.tag=2,t!=null&&(a.callback=t),t=ni(e,a,n),t!==null&&(Jn(t,e,n),Go(t,e,n))}};function Xh(e,t,n,a,s,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,f):t.prototype&&t.prototype.isPureReactComponent?!Ql(n,a)||!Ql(s,c):!0}function Ih(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&od.enqueueReplaceState(t,t.state,null)}function Fi(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=A({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}function Qh(e){qi(e)}function $h(e){console.error(e)}function Jh(e){qi(e)}function yr(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Fh(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function cd(e,t,n){return n=ti(n),n.tag=3,n.payload={element:null},n.callback=function(){yr(e,t)},n}function Wh(e){return e=ti(e),e.tag=3,e}function Ph(e,t,n,a){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var c=a.value;e.payload=function(){return s(c)},e.callback=function(){Fh(t,n,a)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Fh(t,n,a),typeof s!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:y!==null?y:""})})}function wy(e,t,n,a,s){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&vl(t,n,s,!0),n=la.current,n!==null){switch(n.tag){case 31:case 13:return va===null?Ar():n.alternate===null&&Zt===0&&(Zt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===lr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Dd(e,a,s)),!1;case 22:return n.flags|=65536,a===lr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Dd(e,a,s)),!1}throw Error(o(435,n.tag))}return Dd(e,a,s),Ar(),!1}if(We)return t=la.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,a!==Zi&&(e=Error(o(422),{cause:a}),Pl(zn(e,n)))):(a!==Zi&&(t=Error(o(423),{cause:a}),Pl(zn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,a=zn(a,n),s=cd(e.stateNode,a,s),Lu(e,s),Zt!==4&&(Zt=2)),!1;var c=Error(o(520),{cause:a});if(c=zn(c,n),ac===null?ac=[c]:ac.push(c),Zt!==4&&(Zt=2),t===null)return!0;a=zn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=cd(n.stateNode,a,e),Lu(n,e),!1;case 1:if(t=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(ci===null||!ci.has(c))))return n.flags|=65536,s&=-s,n.lanes|=s,s=Wh(s),Ph(s,e,n,a),Lu(n,s),!1}n=n.return}while(n!==null);return!1}var rd=Error(o(461)),nn=!1;function Sn(e,t,n,a){t.child=e===null?ah(t,null,n,a):$i(t,e.child,n,a)}function em(e,t,n,a,s){n=n.render;var c=t.ref;if("ref"in a){var f={};for(var y in a)y!=="ref"&&(f[y]=a[y])}else f=a;return $a(t),a=Vu(e,t,n,f,c,s),y=Zu(),e!==null&&!nn?(Xu(e,t,s),wl(e,t,s)):(We&&y&&Lo(t),t.flags|=1,Sn(e,t,a,s),t.child)}function tm(e,t,n,a,s){if(e===null){var c=n.type;return typeof c=="function"&&!zo(c)&&c.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=c,nm(e,t,c,a,s)):(e=Yi(n.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!yd(e,s)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:Ql,n(f,a)&&e.ref===t.ref)return wl(e,t,s)}return t.flags|=1,e=Ta(c,a),e.ref=t.ref,e.return=t,t.child=e}function nm(e,t,n,a,s){if(e!==null){var c=e.memoizedProps;if(Ql(c,a)&&e.ref===t.ref)if(nn=!1,t.pendingProps=a=c,yd(e,s))(e.flags&131072)!==0&&(nn=!0);else return t.lanes=e.lanes,wl(e,t,s)}return ud(e,t,n,a,s)}function am(e,t,n,a){var s=a.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|n:n,e!==null){for(a=t.child=e.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;a=s&~c}else a=0,t.child=null;return lm(e,t,c,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nr(t,c!==null?c.cachePool:null),c!==null?sh(t,c):qu(),oh(t);else return a=t.lanes=536870912,lm(e,t,c!==null?c.baseLanes|n:n,n,a)}else c!==null?(nr(t,c.cachePool),sh(t,c),li(),t.memoizedState=null):(e!==null&&nr(t,null),qu(),li());return Sn(e,t,s,n),t.child}function Jo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function lm(e,t,n,a,s){var c=Uu();return c=c===null?null:{parent:ae._currentValue,pool:c},t.memoizedState={baseLanes:n,cachePool:c},e!==null&&nr(t,null),qu(),oh(t),e!==null&&vl(e,t,a,!0),t.childLanes=s,null}function br(e,t){return t=xr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function im(e,t,n){return $i(t,e.child,null,n),e=br(t,t.pendingProps),e.flags|=2,ia(t),t.memoizedState=null,e}function _y(e,t,n){var a=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(We){if(a.mode==="hidden")return e=br(t,a),t.lanes=536870912,Jo(null,e);if(Yu(t),(e=Et)?(e=yp(e,Gt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ma!==null?{id:pa,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},n=Bo(e),n.return=t,t.child=n,kt=t,Et=null)):e=null,e===null)throw Ra(t);return t.lanes=536870912,null}return br(t,a)}var c=e.memoizedState;if(c!==null){var f=c.dehydrated;if(Yu(t),s)if(t.flags&256)t.flags&=-257,t=im(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(nn||vl(e,t,n,!1),s=(n&e.childLanes)!==0,nn||s){if(a=Ct,a!==null&&(f=na(a,n),f!==0&&f!==c.retryLane))throw c.retryLane=f,gl(e,f),Jn(a,e,f),rd;Ar(),t=im(e,t,n)}else e=c.treeContext,Et=xa(f.nextSibling),kt=t,We=!0,ka=null,Gt=!1,e!==null&&er(t,e),t=br(t,a),t.flags|=4096;return t}return e=Ta(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function vr(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ud(e,t,n,a,s){return $a(t),n=Vu(e,t,n,a,void 0,s),a=Zu(),e!==null&&!nn?(Xu(e,t,s),wl(e,t,s)):(We&&a&&Lo(t),t.flags|=1,Sn(e,t,n,s),t.child)}function sm(e,t,n,a,s,c){return $a(t),t.updateQueue=null,n=rh(t,a,n,s),ch(e),a=Zu(),e!==null&&!nn?(Xu(e,t,c),wl(e,t,c)):(We&&a&&Lo(t),t.flags|=1,Sn(e,t,n,c),t.child)}function om(e,t,n,a,s){if($a(t),t.stateNode===null){var c=yl,f=n.contextType;typeof f=="object"&&f!==null&&(c=en(f)),c=new n(a,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=od,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=a,c.state=t.memoizedState,c.refs={},Ou(t),f=n.contextType,c.context=typeof f=="object"&&f!==null?en(f):yl,c.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(sd(t,n,f,a),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(f=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),f!==c.state&&od.enqueueReplaceState(c,c.state,null),Zo(t,a,c,s),Vo(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){c=t.stateNode;var y=t.memoizedProps,N=Fi(n,y);c.props=N;var L=c.context,$=n.contextType;f=yl,typeof $=="object"&&$!==null&&(f=en($));var P=n.getDerivedStateFromProps;$=typeof P=="function"||typeof c.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,$||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y||L!==f)&&Ih(t,c,a,f),ei=!1;var Y=t.memoizedState;c.state=Y,Zo(t,a,c,s),Vo(),L=t.memoizedState,y||Y!==L||ei?(typeof P=="function"&&(sd(t,n,P,a),L=t.memoizedState),(N=ei||Xh(t,n,N,a,Y,L,f))?($||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=L),c.props=a,c.state=L,c.context=f,a=N):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{c=t.stateNode,Bu(e,t),f=t.memoizedProps,$=Fi(n,f),c.props=$,P=t.pendingProps,Y=c.context,L=n.contextType,N=yl,typeof L=="object"&&L!==null&&(N=en(L)),y=n.getDerivedStateFromProps,(L=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==P||Y!==N)&&Ih(t,c,a,N),ei=!1,Y=t.memoizedState,c.state=Y,Zo(t,a,c,s),Vo();var Z=t.memoizedState;f!==P||Y!==Z||ei||e!==null&&e.dependencies!==null&&Xi(e.dependencies)?(typeof y=="function"&&(sd(t,n,y,a),Z=t.memoizedState),($=ei||Xh(t,n,$,a,Y,Z,N)||e!==null&&e.dependencies!==null&&Xi(e.dependencies))?(L||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(a,Z,N),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(a,Z,N)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Z),c.props=a,c.state=Z,c.context=N,a=$):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),a=!1)}return c=a,vr(e,t),a=(t.flags&128)!==0,c||a?(c=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&a?(t.child=$i(t,e.child,null,s),t.child=$i(t,null,n,s)):Sn(e,t,n,s),t.memoizedState=c.state,e=t.child):e=wl(e,t,s),e}function cm(e,t,n,a){return bl(),t.flags|=256,Sn(e,t,n,a),t.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(e){return{baseLanes:e,cachePool:Ff()}}function hd(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=oa),e}function rm(e,t,n){var a=t.pendingProps,s=!1,c=(t.flags&128)!==0,f;if((f=c)||(f=e!==null&&e.memoizedState===null?!1:(Ft.current&2)!==0),f&&(s=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(We){if(s?ai(t):li(),(e=Et)?(e=yp(e,Gt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ma!==null?{id:pa,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},n=Bo(e),n.return=t,t.child=n,kt=t,Et=null)):e=null,e===null)throw Ra(t);return $d(e)?t.lanes=32:t.lanes=536870912,null}var y=a.children;return a=a.fallback,s?(li(),s=t.mode,y=xr({mode:"hidden",children:y},s),a=ha(a,s,n,null),y.return=t,a.return=t,y.sibling=a,t.child=y,a=t.child,a.memoizedState=fd(n),a.childLanes=hd(e,f,n),t.memoizedState=dd,Jo(null,a)):(ai(t),md(t,y))}var N=e.memoizedState;if(N!==null&&(y=N.dehydrated,y!==null)){if(c)t.flags&256?(ai(t),t.flags&=-257,t=pd(e,t,n)):t.memoizedState!==null?(li(),t.child=e.child,t.flags|=128,t=null):(li(),y=a.fallback,s=t.mode,a=xr({mode:"visible",children:a.children},s),y=ha(y,s,n,null),y.flags|=2,a.return=t,y.return=t,a.sibling=y,t.child=a,$i(t,e.child,null,n),a=t.child,a.memoizedState=fd(n),a.childLanes=hd(e,f,n),t.memoizedState=dd,t=Jo(null,a));else if(ai(t),$d(y)){if(f=y.nextSibling&&y.nextSibling.dataset,f)var L=f.dgst;f=L,a=Error(o(419)),a.stack="",a.digest=f,Pl({value:a,source:null,stack:null}),t=pd(e,t,n)}else if(nn||vl(e,t,n,!1),f=(n&e.childLanes)!==0,nn||f){if(f=Ct,f!==null&&(a=na(f,n),a!==0&&a!==N.retryLane))throw N.retryLane=a,gl(e,a),Jn(f,e,a),rd;Qd(y)||Ar(),t=pd(e,t,n)}else Qd(y)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Et=xa(y.nextSibling),kt=t,We=!0,ka=null,Gt=!1,e!==null&&er(t,e),t=md(t,a.children),t.flags|=4096);return t}return s?(li(),y=a.fallback,s=t.mode,N=e.child,L=N.sibling,a=Ta(N,{mode:"hidden",children:a.children}),a.subtreeFlags=N.subtreeFlags&65011712,L!==null?y=Ta(L,y):(y=ha(y,s,n,null),y.flags|=2),y.return=t,a.return=t,a.sibling=y,t.child=a,Jo(null,a),a=t.child,y=e.child.memoizedState,y===null?y=fd(n):(s=y.cachePool,s!==null?(N=ae._currentValue,s=s.parent!==N?{parent:N,pool:N}:s):s=Ff(),y={baseLanes:y.baseLanes|n,cachePool:s}),a.memoizedState=y,a.childLanes=hd(e,f,n),t.memoizedState=dd,Jo(e.child,a)):(ai(t),n=e.child,e=n.sibling,n=Ta(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function md(e,t){return t=xr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function xr(e,t){return e=Un(22,e,null,t),e.lanes=0,e}function pd(e,t,n){return $i(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function um(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),As(e.return,t,n)}function gd(e,t,n,a,s,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s,treeForkCount:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=n,f.tailMode=s,f.treeForkCount=c)}function dm(e,t,n){var a=t.pendingProps,s=a.revealOrder,c=a.tail;a=a.children;var f=Ft.current,y=(f&2)!==0;if(y?(f=f&1|2,t.flags|=128):f&=1,K(Ft,f),Sn(e,t,a,n),a=We?Vi:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&um(e,n,t);else if(e.tag===19)um(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&cr(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),gd(t,!1,s,n,c,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&cr(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}gd(t,!0,n,null,c,a);break;case"together":gd(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function wl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oi|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(vl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Ta(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ta(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Xi(e)))}function Ny(e,t,n){switch(t.tag){case 3:Ye(t,t.stateNode.containerInfo),Ma(t,ae,e.memoizedState.cache),bl();break;case 27:case 5:qe(t);break;case 4:Ye(t,t.stateNode.containerInfo);break;case 10:Ma(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Yu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(ai(t),t.flags|=128,null):(n&t.child.childLanes)!==0?rm(e,t,n):(ai(t),e=wl(e,t,n),e!==null?e.sibling:null);ai(t);break;case 19:var s=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(vl(e,t,n,!1),a=(n&t.childLanes)!==0),s){if(a)return dm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(Ft,Ft.current),a)break;return null;case 22:return t.lanes=0,am(e,t,n,t.pendingProps);case 24:Ma(t,ae,e.memoizedState.cache)}return wl(e,t,n)}function fm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)nn=!0;else{if(!yd(e,n)&&(t.flags&128)===0)return nn=!1,Ny(e,t,n);nn=(e.flags&131072)!==0}else nn=!1,We&&(t.flags&1048576)!==0&&Pc(t,Vi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Ii(t.elementType),t.type=e,typeof e=="function")zo(e)?(a=Fi(e,a),t.tag=1,t=om(null,t,e,a,n)):(t.tag=0,t=ud(null,t,e,a,n));else{if(e!=null){var s=e.$$typeof;if(s===he){t.tag=11,t=em(null,t,e,a,n);break e}else if(s===Ae){t.tag=14,t=tm(null,t,e,a,n);break e}}throw t=V(e)||e,Error(o(306,t,""))}}return t;case 0:return ud(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,s=Fi(a,t.pendingProps),om(e,t,a,s,n);case 3:e:{if(Ye(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var c=t.memoizedState;s=c.element,Bu(e,t),Zo(t,a,null,n);var f=t.memoizedState;if(a=f.cache,Ma(t,ae,a),a!==c.cache&&ks(t,[ae],n,!0),Vo(),a=f.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=cm(e,t,a,n);break e}else if(a!==s){s=zn(Error(o(424)),t),Pl(s),t=cm(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Et=xa(e.firstChild),kt=t,We=!0,ka=null,Gt=!0,n=ah(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(bl(),a===s){t=wl(e,t,n);break e}Sn(e,t,a,n)}t=t.child}return t;case 26:return vr(e,t),e===null?(n=_p(t.type,null,t.pendingProps,null))?t.memoizedState=n:We||(n=t.type,e=t.pendingProps,a=Or(ue.current).createElement(n),a[pe]=t,a[ke]=e,wn(a,n,e),$e(a),t.stateNode=a):t.memoizedState=_p(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return qe(t),e===null&&We&&(a=t.stateNode=xp(t.type,t.pendingProps,ue.current),kt=t,Gt=!0,s=Et,fi(t.type)?(Jd=s,Et=xa(a.firstChild)):Et=s),Sn(e,t,t.pendingProps.children,n),vr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&We&&((s=a=Et)&&(a=eb(a,t.type,t.pendingProps,Gt),a!==null?(t.stateNode=a,kt=t,Et=xa(a.firstChild),Gt=!1,s=!0):s=!1),s||Ra(t)),qe(t),s=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,a=c.children,Zd(s,c)?a=null:f!==null&&Zd(s,f)&&(t.flags|=32),t.memoizedState!==null&&(s=Vu(e,t,py,null,null,n),dc._currentValue=s),vr(e,t),Sn(e,t,a,n),t.child;case 6:return e===null&&We&&((e=n=Et)&&(n=tb(n,t.pendingProps,Gt),n!==null?(t.stateNode=n,kt=t,Et=null,e=!0):e=!1),e||Ra(t)),null;case 13:return rm(e,t,n);case 4:return Ye(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=$i(t,null,a,n):Sn(e,t,a,n),t.child;case 11:return em(e,t,t.type,t.pendingProps,n);case 7:return Sn(e,t,t.pendingProps,n),t.child;case 8:return Sn(e,t,t.pendingProps.children,n),t.child;case 12:return Sn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ma(t,t.type,a.value),Sn(e,t,a.children,n),t.child;case 9:return s=t.type._context,a=t.pendingProps.children,$a(t),s=en(s),a=a(s),t.flags|=1,Sn(e,t,a,n),t.child;case 14:return tm(e,t,t.type,t.pendingProps,n);case 15:return nm(e,t,t.type,t.pendingProps,n);case 19:return dm(e,t,n);case 31:return _y(e,t,n);case 22:return am(e,t,n,t.pendingProps);case 24:return $a(t),a=en(ae),e===null?(s=Uu(),s===null&&(s=Ct,c=ge(),s.pooledCache=c,c.refCount++,c!==null&&(s.pooledCacheLanes|=n),s=c),t.memoizedState={parent:a,cache:s},Ou(t),Ma(t,ae,s)):((e.lanes&n)!==0&&(Bu(e,t),Zo(t,null,null,n),Vo()),s=e.memoizedState,c=t.memoizedState,s.parent!==a?(s={parent:a,cache:a},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ma(t,ae,a)):(a=c.cache,Ma(t,ae,a),a!==s.cache&&ks(t,[ae],n,!0))),Sn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _l(e){e.flags|=4}function bd(e,t,n,a,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(Hm())e.flags|=8192;else throw Qi=lr,zu}else e.flags&=-16777217}function hm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tp(t))if(Hm())e.flags|=8192;else throw Qi=lr,zu}function Sr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?fn():536870912,e.lanes|=t,qs|=t)}function Fo(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&65011712,a|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function jy(e,t,n){var a=t.pendingProps;switch(Cs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Ut(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ba(ae),Re(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wl(t)?_l(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,qo())),Ut(t),null;case 26:var s=t.type,c=t.memoizedState;return e===null?(_l(t),c!==null?(Ut(t),hm(t,c)):(Ut(t),bd(t,s,null,a,n))):c?c!==e.memoizedState?(_l(t),Ut(t),hm(t,c)):(Ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&_l(t),Ut(t),bd(t,s,e,a,n)),null;case 27:if(ot(t),n=ue.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_l(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Ut(t),null}e=ie.current,Wl(t)?tr(t):(e=xp(s,a,n),t.stateNode=e,_l(t))}return Ut(t),null;case 5:if(ot(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_l(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Ut(t),null}if(c=ie.current,Wl(t))tr(t);else{var f=Or(ue.current);switch(c){case 1:c=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:c=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":c=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":c=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":c=f.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof a.is=="string"?f.createElement("select",{is:a.is}):f.createElement("select"),a.multiple?c.multiple=!0:a.size&&(c.size=a.size);break;default:c=typeof a.is=="string"?f.createElement(s,{is:a.is}):f.createElement(s)}}c[pe]=t,c[ke]=a;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)c.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=c;e:switch(wn(c,s,a),s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&_l(t)}}return Ut(t),bd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&_l(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=ue.current,Wl(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,s=kt,s!==null)switch(s.tag){case 27:case 5:a=s.memoizedProps}e[pe]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||rp(e.nodeValue,n)),e||Ra(t,!0)}else e=Or(e).createTextNode(a),e[pe]=t,t.stateNode=e}return Ut(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Wl(t),n!==null){if(e===null){if(!a)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[pe]=t}else bl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),e=!1}else n=qo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ia(t),t):(ia(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Ut(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Wl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!s)throw Error(o(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(o(317));s[pe]=t}else bl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),s=!1}else s=qo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ia(t),t):(ia(t),null)}return ia(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,s=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(s=a.alternate.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==s&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Sr(t,t.updateQueue),Ut(t),null);case 4:return Re(),e===null&&qd(t.stateNode.containerInfo),Ut(t),null;case 10:return ba(t.type),Ut(t),null;case 19:if(D(Ft),a=t.memoizedState,a===null)return Ut(t),null;if(s=(t.flags&128)!==0,c=a.rendering,c===null)if(s)Fo(a,!1);else{if(Zt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=cr(e),c!==null){for(t.flags|=128,Fo(a,!1),e=c.updateQueue,t.updateQueue=e,Sr(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Oo(n,e),n=n.sibling;return K(Ft,Ft.current&1|2),We&&Aa(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&R()>Er&&(t.flags|=128,s=!0,Fo(a,!1),t.lanes=4194304)}else{if(!s)if(e=cr(c),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Sr(t,e),Fo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!We)return Ut(t),null}else 2*R()-a.renderingStartTime>Er&&n!==536870912&&(t.flags|=128,s=!0,Fo(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(e=a.last,e!==null?e.sibling=c:t.child=c,a.last=c)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=R(),e.sibling=null,n=Ft.current,K(Ft,s?n&1|2:n&1),We&&Aa(t,a.treeForkCount),e):(Ut(t),null);case 22:case 23:return ia(t),Ku(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),n=t.updateQueue,n!==null&&Sr(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&D(Ja),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ba(ae),Ut(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Ey(e,t){switch(Cs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ba(ae),Re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ot(t),null;case 31:if(t.memoizedState!==null){if(ia(t),t.alternate===null)throw Error(o(340));bl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ia(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));bl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return D(Ft),null;case 4:return Re(),null;case 10:return ba(t.type),null;case 22:case 23:return ia(t),Ku(),e!==null&&D(Ja),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ba(ae),null;case 25:return null;default:return null}}function mm(e,t){switch(Cs(t),t.tag){case 3:ba(ae),Re();break;case 26:case 27:case 5:ot(t);break;case 4:Re();break;case 31:t.memoizedState!==null&&ia(t);break;case 13:ia(t);break;case 19:D(Ft);break;case 10:ba(t.type);break;case 22:case 23:ia(t),Ku(),e!==null&&D(Ja);break;case 24:ba(ae)}}function Wo(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&e)===e){a=void 0;var c=n.create,f=n.inst;a=c(),f.destroy=a}n=n.next}while(n!==s)}}catch(y){bt(t,t.return,y)}}function ii(e,t,n){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var c=s.next;a=c;do{if((a.tag&e)===e){var f=a.inst,y=f.destroy;if(y!==void 0){f.destroy=void 0,s=t;var N=n,L=y;try{L()}catch($){bt(s,N,$)}}}a=a.next}while(a!==c)}}catch($){bt(t,t.return,$)}}function pm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ih(t,n)}catch(a){bt(e,e.return,a)}}}function gm(e,t,n){n.props=Fi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){bt(e,t,a)}}function Po(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(s){bt(e,t,s)}}function Fa(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(s){bt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){bt(e,t,s)}else n.current=null}function ym(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){bt(e,e.return,s)}}function vd(e,t,n){try{var a=e.stateNode;Qy(a,e.type,n,t),a[ke]=t}catch(s){bt(e,e.return,s)}}function bm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fi(e.type)||e.tag===4}function xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sd(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ea));else if(a!==4&&(a===27&&fi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Sd(e,t,n),e=e.sibling;e!==null;)Sd(e,t,n),e=e.sibling}function wr(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&fi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(wr(e,t,n),e=e.sibling;e!==null;)wr(e,t,n),e=e.sibling}function vm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);wn(t,a,n),t[pe]=e,t[ke]=n}catch(c){bt(e,e.return,c)}}var Nl=!1,an=!1,wd=!1,xm=typeof WeakSet=="function"?WeakSet:Set,gn=null;function Cy(e,t){if(e=e.containerInfo,Gd=Gr,e=Ro(e),xs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,y=-1,N=-1,L=0,$=0,P=e,Y=null;t:for(;;){for(var Z;P!==n||s!==0&&P.nodeType!==3||(y=f+s),P!==c||a!==0&&P.nodeType!==3||(N=f+a),P.nodeType===3&&(f+=P.nodeValue.length),(Z=P.firstChild)!==null;)Y=P,P=Z;for(;;){if(P===e)break t;if(Y===n&&++L===s&&(y=f),Y===c&&++$===a&&(N=f),(Z=P.nextSibling)!==null)break;P=Y,Y=P.parentNode}P=Z}n=y===-1||N===-1?null:{start:y,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:e,selectionRange:n},Gr=!1,gn=t;gn!==null;)if(t=gn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gn=e;else for(;gn!==null;){switch(t=gn,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)s=e[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,n=t,s=c.memoizedProps,c=c.memoizedState,a=n.stateNode;try{var Ee=Fi(n.type,s);e=a.getSnapshotBeforeUpdate(Ee,c),a.__reactInternalSnapshotBeforeUpdate=e}catch(ze){bt(n,n.return,ze)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Id(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,gn=e;break}gn=t.return}}function Sm(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:El(e,n),a&4&&Wo(5,n);break;case 1:if(El(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){bt(n,n.return,f)}else{var s=Fi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){bt(n,n.return,f)}}a&64&&pm(n),a&512&&Po(n,n.return);break;case 3:if(El(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ih(e,t)}catch(f){bt(n,n.return,f)}}break;case 27:t===null&&a&4&&vm(n);case 26:case 5:El(e,n),t===null&&a&4&&ym(n),a&512&&Po(n,n.return);break;case 12:El(e,n);break;case 31:El(e,n),a&4&&Nm(e,n);break;case 13:El(e,n),a&4&&jm(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Oy.bind(null,n),nb(e,n))));break;case 22:if(a=n.memoizedState!==null||Nl,!a){t=t!==null&&t.memoizedState!==null||an,s=Nl;var c=an;Nl=a,(an=t)&&!c?Cl(e,n,(n.subtreeFlags&8772)!==0):El(e,n),Nl=s,an=c}break;case 30:break;default:El(e,n)}}function wm(e){var t=e.alternate;t!==null&&(e.alternate=null,wm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&E(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zt=null,Xn=!1;function jl(e,t,n){for(n=n.child;n!==null;)_m(e,t,n),n=n.sibling}function _m(e,t,n){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Qe,n)}catch{}switch(n.tag){case 26:an||Fa(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:an||Fa(n,t);var a=zt,s=Xn;fi(n.type)&&(zt=n.stateNode,Xn=!1),jl(e,t,n),cc(n.stateNode),zt=a,Xn=s;break;case 5:an||Fa(n,t);case 6:if(a=zt,s=Xn,zt=null,jl(e,t,n),zt=a,Xn=s,zt!==null)if(Xn)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(n.stateNode)}catch(c){bt(n,t,c)}else try{zt.removeChild(n.stateNode)}catch(c){bt(n,t,c)}break;case 18:zt!==null&&(Xn?(e=zt,pp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Qs(e)):pp(zt,n.stateNode));break;case 4:a=zt,s=Xn,zt=n.stateNode.containerInfo,Xn=!0,jl(e,t,n),zt=a,Xn=s;break;case 0:case 11:case 14:case 15:ii(2,n,t),an||ii(4,n,t),jl(e,t,n);break;case 1:an||(Fa(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&gm(n,t,a)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:an=(a=an)||n.memoizedState!==null,jl(e,t,n),an=a;break;default:jl(e,t,n)}}function Nm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qs(e)}catch(n){bt(t,t.return,n)}}}function jm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qs(e)}catch(n){bt(t,t.return,n)}}function Ty(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xm),t;default:throw Error(o(435,e.tag))}}function _r(e,t){var n=Ty(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var s=By.bind(null,e,a);a.then(s,s)}})}function In(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a],c=e,f=t,y=f;e:for(;y!==null;){switch(y.tag){case 27:if(fi(y.type)){zt=y.stateNode,Xn=!1;break e}break;case 5:zt=y.stateNode,Xn=!1;break e;case 3:case 4:zt=y.stateNode.containerInfo,Xn=!0;break e}y=y.return}if(zt===null)throw Error(o(160));_m(c,f,s),zt=null,Xn=!1,c=s.alternate,c!==null&&(c.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Em(t,e),t=t.sibling}var Da=null;function Em(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:In(t,e),Qn(e),a&4&&(ii(3,e,e.return),Wo(3,e),ii(5,e,e.return));break;case 1:In(t,e),Qn(e),a&512&&(an||n===null||Fa(n,n.return)),a&64&&Nl&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var s=Da;if(In(t,e),Qn(e),a&512&&(an||n===null||Fa(n,n.return)),a&4){var c=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":c=s.getElementsByTagName("title")[0],(!c||c[je]||c[pe]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=s.createElement(a),s.head.insertBefore(c,s.querySelector("head > title"))),wn(c,a,n),c[pe]=e,$e(c),a=c;break e;case"link":var f=Ep("link","href",s).get(a+(n.href||""));if(f){for(var y=0;y<f.length;y++)if(c=f[y],c.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&c.getAttribute("rel")===(n.rel==null?null:n.rel)&&c.getAttribute("title")===(n.title==null?null:n.title)&&c.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(y,1);break t}}c=s.createElement(a),wn(c,a,n),s.head.appendChild(c);break;case"meta":if(f=Ep("meta","content",s).get(a+(n.content||""))){for(y=0;y<f.length;y++)if(c=f[y],c.getAttribute("content")===(n.content==null?null:""+n.content)&&c.getAttribute("name")===(n.name==null?null:n.name)&&c.getAttribute("property")===(n.property==null?null:n.property)&&c.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&c.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(y,1);break t}}c=s.createElement(a),wn(c,a,n),s.head.appendChild(c);break;default:throw Error(o(468,a))}c[pe]=e,$e(c),a=c}e.stateNode=a}else Cp(s,e.type,e.stateNode);else e.stateNode=jp(s,a,e.memoizedProps);else c!==a?(c===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):c.count--,a===null?Cp(s,e.type,e.stateNode):jp(s,a,e.memoizedProps)):a===null&&e.stateNode!==null&&vd(e,e.memoizedProps,n.memoizedProps)}break;case 27:In(t,e),Qn(e),a&512&&(an||n===null||Fa(n,n.return)),n!==null&&a&4&&vd(e,e.memoizedProps,n.memoizedProps);break;case 5:if(In(t,e),Qn(e),a&512&&(an||n===null||Fa(n,n.return)),e.flags&32){s=e.stateNode;try{il(s,"")}catch(Ee){bt(e,e.return,Ee)}}a&4&&e.stateNode!=null&&(s=e.memoizedProps,vd(e,s,n!==null?n.memoizedProps:s)),a&1024&&(wd=!0);break;case 6:if(In(t,e),Qn(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Ee){bt(e,e.return,Ee)}}break;case 3:if(Hr=null,s=Da,Da=Br(t.containerInfo),In(t,e),Da=s,Qn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(Ee){bt(e,e.return,Ee)}wd&&(wd=!1,Cm(e));break;case 4:a=Da,Da=Br(e.stateNode.containerInfo),In(t,e),Qn(e),Da=a;break;case 12:In(t,e),Qn(e);break;case 31:In(t,e),Qn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_r(e,a)));break;case 13:In(t,e),Qn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(jr=R()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_r(e,a)));break;case 22:s=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,L=Nl,$=an;if(Nl=L||s,an=$||N,In(t,e),an=$,Nl=L,Qn(e),a&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||N||Nl||an||Wi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(c=N.stateNode,s)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{y=N.stateNode;var P=N.memoizedProps.style,Y=P!=null&&P.hasOwnProperty("display")?P.display:null;y.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Ee){bt(N,N.return,Ee)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=s?"":N.memoizedProps}catch(Ee){bt(N,N.return,Ee)}}}else if(t.tag===18){if(n===null){N=t;try{var Z=N.stateNode;s?gp(Z,!0):gp(N.stateNode,!1)}catch(Ee){bt(N,N.return,Ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,_r(e,n))));break;case 19:In(t,e),Qn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_r(e,a)));break;case 30:break;case 21:break;default:In(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(bm(a)){n=a;break}a=a.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var s=n.stateNode,c=xd(e);wr(e,c,s);break;case 5:var f=n.stateNode;n.flags&32&&(il(f,""),n.flags&=-33);var y=xd(e);wr(e,y,f);break;case 3:case 4:var N=n.stateNode.containerInfo,L=xd(e);Sd(e,L,N);break;default:throw Error(o(161))}}catch($){bt(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Cm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function El(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sm(e,t.alternate,t),t=t.sibling}function Wi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ii(4,t,t.return),Wi(t);break;case 1:Fa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&gm(t,t.return,n),Wi(t);break;case 27:cc(t.stateNode);case 26:case 5:Fa(t,t.return),Wi(t);break;case 22:t.memoizedState===null&&Wi(t);break;case 30:Wi(t);break;default:Wi(t)}e=e.sibling}}function Cl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,s=e,c=t,f=c.flags;switch(c.tag){case 0:case 11:case 15:Cl(s,c,n),Wo(4,c);break;case 1:if(Cl(s,c,n),a=c,s=a.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(L){bt(a,a.return,L)}if(a=c,s=a.updateQueue,s!==null){var y=a.stateNode;try{var N=s.shared.hiddenCallbacks;if(N!==null)for(s.shared.hiddenCallbacks=null,s=0;s<N.length;s++)lh(N[s],y)}catch(L){bt(a,a.return,L)}}n&&f&64&&pm(c),Po(c,c.return);break;case 27:vm(c);case 26:case 5:Cl(s,c,n),n&&a===null&&f&4&&ym(c),Po(c,c.return);break;case 12:Cl(s,c,n);break;case 31:Cl(s,c,n),n&&f&4&&Nm(s,c);break;case 13:Cl(s,c,n),n&&f&4&&jm(s,c);break;case 22:c.memoizedState===null&&Cl(s,c,n),Po(c,c.return);break;case 30:break;default:Cl(s,c,n)}t=t.sibling}}function _d(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&lt(n))}function Nd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&lt(e))}function Ua(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tm(e,t,n,a),t=t.sibling}function Tm(e,t,n,a){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Ua(e,t,n,a),s&2048&&Wo(9,t);break;case 1:Ua(e,t,n,a);break;case 3:Ua(e,t,n,a),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&lt(e)));break;case 12:if(s&2048){Ua(e,t,n,a),e=t.stateNode;try{var c=t.memoizedProps,f=c.id,y=c.onPostCommit;typeof y=="function"&&y(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){bt(t,t.return,N)}}else Ua(e,t,n,a);break;case 31:Ua(e,t,n,a);break;case 13:Ua(e,t,n,a);break;case 23:break;case 22:c=t.stateNode,f=t.alternate,t.memoizedState!==null?c._visibility&2?Ua(e,t,n,a):ec(e,t):c._visibility&2?Ua(e,t,n,a):(c._visibility|=2,Bs(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),s&2048&&_d(f,t);break;case 24:Ua(e,t,n,a),s&2048&&Nd(t.alternate,t);break;default:Ua(e,t,n,a)}}function Bs(e,t,n,a,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,f=t,y=n,N=a,L=f.flags;switch(f.tag){case 0:case 11:case 15:Bs(c,f,y,N,s),Wo(8,f);break;case 23:break;case 22:var $=f.stateNode;f.memoizedState!==null?$._visibility&2?Bs(c,f,y,N,s):ec(c,f):($._visibility|=2,Bs(c,f,y,N,s)),s&&L&2048&&_d(f.alternate,f);break;case 24:Bs(c,f,y,N,s),s&&L&2048&&Nd(f.alternate,f);break;default:Bs(c,f,y,N,s)}t=t.sibling}}function ec(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,s=a.flags;switch(a.tag){case 22:ec(n,a),s&2048&&_d(a.alternate,a);break;case 24:ec(n,a),s&2048&&Nd(a.alternate,a);break;default:ec(n,a)}t=t.sibling}}var tc=8192;function Ls(e,t,n){if(e.subtreeFlags&tc)for(e=e.child;e!==null;)Am(e,t,n),e=e.sibling}function Am(e,t,n){switch(e.tag){case 26:Ls(e,t,n),e.flags&tc&&e.memoizedState!==null&&mb(n,Da,e.memoizedState,e.memoizedProps);break;case 5:Ls(e,t,n);break;case 3:case 4:var a=Da;Da=Br(e.stateNode.containerInfo),Ls(e,t,n),Da=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=tc,tc=16777216,Ls(e,t,n),tc=a):Ls(e,t,n));break;default:Ls(e,t,n)}}function km(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function nc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];gn=a,Mm(a,e)}km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Rm(e),e=e.sibling}function Rm(e){switch(e.tag){case 0:case 11:case 15:nc(e),e.flags&2048&&ii(9,e,e.return);break;case 3:nc(e);break;case 12:nc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Nr(e)):nc(e);break;default:nc(e)}}function Nr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];gn=a,Mm(a,e)}km(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ii(8,t,t.return),Nr(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Nr(t));break;default:Nr(t)}e=e.sibling}}function Mm(e,t){for(;gn!==null;){var n=gn;switch(n.tag){case 0:case 11:case 15:ii(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:lt(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,gn=a;else e:for(n=e;gn!==null;){a=gn;var s=a.sibling,c=a.return;if(wm(a),a===n){gn=null;break e}if(s!==null){s.return=c,gn=s;break e}gn=c}}}var Ay={getCacheForType:function(e){var t=en(ae),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return en(ae).controller.signal}},ky=typeof WeakMap=="function"?WeakMap:Map,mt=0,Ct=null,nt=null,it=0,yt=0,sa=null,si=!1,Hs=!1,jd=!1,Tl=0,Zt=0,oi=0,Pi=0,Ed=0,oa=0,qs=0,ac=null,$n=null,Cd=!1,jr=0,Dm=0,Er=1/0,Cr=null,ci=null,cn=0,ri=null,Ks=null,Al=0,Td=0,Ad=null,Um=null,lc=0,kd=null;function ca(){return(mt&2)!==0&&it!==0?it&-it:j.T!==null?Od():Gn()}function zm(){if(oa===0)if((it&536870912)===0||We){var e=sn;sn<<=1,(sn&3932160)===0&&(sn=262144),oa=e}else oa=536870912;return e=la.current,e!==null&&(e.flags|=32),oa}function Jn(e,t,n){(e===Ct&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(Ys(e,0),ui(e,it,oa,!1)),vn(e,n),((mt&2)===0||e!==Ct)&&(e===Ct&&((mt&2)===0&&(Pi|=n),Zt===4&&ui(e,it,oa,!1)),Wa(e))}function Om(e,t,n){if((mt&6)!==0)throw Error(o(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ea(e,t),s=a?Dy(e,t):Md(e,t,!0),c=a;do{if(s===0){Hs&&!a&&ui(e,t,0,!1);break}else{if(n=e.current.alternate,c&&!Ry(n)){s=Md(e,t,!1),c=!1;continue}if(s===2){if(c=t,e.errorRecoveryDisabledLanes&c)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var y=e;s=ac;var N=y.current.memoizedState.isDehydrated;if(N&&(Ys(y,f).flags|=256),f=Md(y,f,!1),f!==2){if(jd&&!N){y.errorRecoveryDisabledLanes|=c,Pi|=c,s=4;break e}c=$n,$n=s,c!==null&&($n===null?$n=c:$n.push.apply($n,c))}s=f}if(c=!1,s!==2)continue}}if(s===1){Ys(e,0),ui(e,t,0,!0);break}e:{switch(a=e,c=s,c){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ui(a,t,oa,!si);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(s=jr+300-R(),10<s)){if(ui(a,t,oa,!si),At(a,0,!0)!==0)break e;Al=t,a.timeoutHandle=hp(Bm.bind(null,a,n,$n,Cr,Cd,t,oa,Pi,qs,si,c,"Throttled",-0,0),s);break e}Bm(a,n,$n,Cr,Cd,t,oa,Pi,qs,si,c,null,-0,0)}}break}while(!0);Wa(e)}function Bm(e,t,n,a,s,c,f,y,N,L,$,P,Y,Z){if(e.timeoutHandle=-1,P=t.subtreeFlags,P&8192||(P&16785408)===16785408){P={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ea},Am(t,c,P);var Ee=(c&62914560)===c?jr-R():(c&4194048)===c?Dm-R():0;if(Ee=pb(P,Ee),Ee!==null){Al=c,e.cancelPendingCommit=Ee(Zm.bind(null,e,t,c,n,a,s,f,y,N,$,P,null,Y,Z)),ui(e,c,f,!L);return}}Zm(e,t,c,n,a,s,f,y,N)}function Ry(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var s=n[a],c=s.getSnapshot;s=s.value;try{if(!Cn(c(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ui(e,t,n,a){t&=~Ed,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var s=t;0<s;){var c=31-pt(s),f=1<<c;a[c]=-1,s&=~f}n!==0&&ta(e,n,t)}function Tr(){return(mt&6)===0?(ic(0),!1):!0}function Rd(){if(nt!==null){if(yt===0)var e=nt.return;else e=nt,ya=Qa=null,Iu(e),Ms=null,Ko=0,e=nt;for(;e!==null;)mm(e.alternate,e),e=e.return;nt=null}}function Ys(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Fy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Al=0,Rd(),Ct=e,nt=n=Ta(e.current,null),it=t,yt=0,sa=null,si=!1,Hs=ea(e,t),jd=!1,qs=oa=Ed=Pi=oi=Zt=0,$n=ac=null,Cd=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var s=31-pt(a),c=1<<s;t|=e[s],a&=~c}return Tl=t,Ki(),n}function Lm(e,t){Ie=null,j.H=$o,t===Rs||t===ar?(t=eh(),yt=3):t===zu?(t=eh(),yt=4):yt=t===rd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,sa=t,nt===null&&(Zt=1,yr(e,zn(t,e.current)))}function Hm(){var e=la.current;return e===null?!0:(it&4194048)===it?va===null:(it&62914560)===it||(it&536870912)!==0?e===va:!1}function qm(){var e=j.H;return j.H=$o,e===null?$o:e}function Km(){var e=j.A;return j.A=Ay,e}function Ar(){Zt=4,si||(it&4194048)!==it&&la.current!==null||(Hs=!0),(oi&134217727)===0&&(Pi&134217727)===0||Ct===null||ui(Ct,it,oa,!1)}function Md(e,t,n){var a=mt;mt|=2;var s=qm(),c=Km();(Ct!==e||it!==t)&&(Cr=null,Ys(e,t)),t=!1;var f=Zt;e:do try{if(yt!==0&&nt!==null){var y=nt,N=sa;switch(yt){case 8:Rd(),f=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(t=!0);var L=yt;if(yt=0,sa=null,Gs(e,y,N,L),n&&Hs){f=0;break e}break;default:L=yt,yt=0,sa=null,Gs(e,y,N,L)}}My(),f=Zt;break}catch($){Lm(e,$)}while(!0);return t&&e.shellSuspendCounter++,ya=Qa=null,mt=a,j.H=s,j.A=c,nt===null&&(Ct=null,it=0,Ki()),f}function My(){for(;nt!==null;)Ym(nt)}function Dy(e,t){var n=mt;mt|=2;var a=qm(),s=Km();Ct!==e||it!==t?(Cr=null,Er=R()+500,Ys(e,t)):Hs=ea(e,t);e:do try{if(yt!==0&&nt!==null){t=nt;var c=sa;t:switch(yt){case 1:yt=0,sa=null,Gs(e,t,c,1);break;case 2:case 9:if(Wf(c)){yt=0,sa=null,Gm(t);break}t=function(){yt!==2&&yt!==9||Ct!==e||(yt=7),Wa(e)},c.then(t,t);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Wf(c)?(yt=0,sa=null,Gm(t)):(yt=0,sa=null,Gs(e,t,c,7));break;case 5:var f=null;switch(nt.tag){case 26:f=nt.memoizedState;case 5:case 27:var y=nt;if(f?Tp(f):y.stateNode.complete){yt=0,sa=null;var N=y.sibling;if(N!==null)nt=N;else{var L=y.return;L!==null?(nt=L,kr(L)):nt=null}break t}}yt=0,sa=null,Gs(e,t,c,5);break;case 6:yt=0,sa=null,Gs(e,t,c,6);break;case 8:Rd(),Zt=6;break e;default:throw Error(o(462))}}Uy();break}catch($){Lm(e,$)}while(!0);return ya=Qa=null,j.H=a,j.A=s,mt=n,nt!==null?0:(Ct=null,it=0,Ki(),Zt)}function Uy(){for(;nt!==null&&!Pn();)Ym(nt)}function Ym(e){var t=fm(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,t===null?kr(e):nt=t}function Gm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=sm(n,t,t.pendingProps,t.type,void 0,it);break;case 11:t=sm(n,t,t.pendingProps,t.type.render,t.ref,it);break;case 5:Iu(t);default:mm(n,t),t=nt=Oo(t,Tl),t=fm(n,t,Tl)}e.memoizedProps=e.pendingProps,t===null?kr(e):nt=t}function Gs(e,t,n,a){ya=Qa=null,Iu(t),Ms=null,Ko=0;var s=t.return;try{if(wy(e,s,t,n,it)){Zt=1,yr(e,zn(n,e.current)),nt=null;return}}catch(c){if(s!==null)throw nt=s,c;Zt=1,yr(e,zn(n,e.current)),nt=null;return}t.flags&32768?(We||a===1?e=!0:Hs||(it&536870912)!==0?e=!1:(si=e=!0,(a===2||a===9||a===3||a===6)&&(a=la.current,a!==null&&a.tag===13&&(a.flags|=16384))),Vm(t,e)):kr(t)}function kr(e){var t=e;do{if((t.flags&32768)!==0){Vm(t,si);return}e=t.return;var n=jy(t.alternate,t,Tl);if(n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);Zt===0&&(Zt=5)}function Vm(e,t){do{var n=Ey(e.alternate,e);if(n!==null){n.flags&=32767,nt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){nt=e;return}nt=e=n}while(e!==null);Zt=6,nt=null}function Zm(e,t,n,a,s,c,f,y,N){e.cancelPendingCommit=null;do Rr();while(cn!==0);if((mt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(c=t.lanes|t.childLanes,c|=_s,qt(e,n,c,f,y,N),e===Ct&&(nt=Ct=null,it=0),Ks=t,ri=e,Al=n,Td=c,Ad=s,Um=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ly(ct,function(){return Jm(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=j.T,j.T=null,s=G.p,G.p=2,f=mt,mt|=4;try{Cy(e,t,n)}finally{mt=f,G.p=s,j.T=a}}cn=1,Xm(),Im(),Qm()}}function Xm(){if(cn===1){cn=0;var e=ri,t=Ks,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=j.T,j.T=null;var a=G.p;G.p=2;var s=mt;mt|=4;try{Em(t,e);var c=Vd,f=Ro(e.containerInfo),y=c.focusedElem,N=c.selectionRange;if(f!==y&&y&&y.ownerDocument&&Vc(y.ownerDocument.documentElement,y)){if(N!==null&&xs(y)){var L=N.start,$=N.end;if($===void 0&&($=L),"selectionStart"in y)y.selectionStart=L,y.selectionEnd=Math.min($,y.value.length);else{var P=y.ownerDocument||document,Y=P&&P.defaultView||window;if(Y.getSelection){var Z=Y.getSelection(),Ee=y.textContent.length,ze=Math.min(N.start,Ee),jt=N.end===void 0?ze:Math.min(N.end,Ee);!Z.extend&&ze>jt&&(f=jt,jt=ze,ze=f);var M=ko(y,ze),C=ko(y,jt);if(M&&C&&(Z.rangeCount!==1||Z.anchorNode!==M.node||Z.anchorOffset!==M.offset||Z.focusNode!==C.node||Z.focusOffset!==C.offset)){var B=P.createRange();B.setStart(M.node,M.offset),Z.removeAllRanges(),ze>jt?(Z.addRange(B),Z.extend(C.node,C.offset)):(B.setEnd(C.node,C.offset),Z.addRange(B))}}}}for(P=[],Z=y;Z=Z.parentNode;)Z.nodeType===1&&P.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<P.length;y++){var W=P[y];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Gr=!!Gd,Vd=Gd=null}finally{mt=s,G.p=a,j.T=n}}e.current=t,cn=2}}function Im(){if(cn===2){cn=0;var e=ri,t=Ks,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=j.T,j.T=null;var a=G.p;G.p=2;var s=mt;mt|=4;try{Sm(e,t.alternate,t)}finally{mt=s,G.p=a,j.T=n}}cn=3}}function Qm(){if(cn===4||cn===3){cn=0,ua();var e=ri,t=Ks,n=Al,a=Um;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?cn=5:(cn=0,Ks=ri=null,$m(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(ci=null),Kt(n),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Qe,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=j.T,s=G.p,G.p=2,j.T=null;try{for(var c=e.onRecoverableError,f=0;f<a.length;f++){var y=a[f];c(y.value,{componentStack:y.stack})}}finally{j.T=t,G.p=s}}(Al&3)!==0&&Rr(),Wa(e),s=e.pendingLanes,(n&261930)!==0&&(s&42)!==0?e===kd?lc++:(lc=0,kd=e):lc=0,ic(0)}}function $m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,lt(t)))}function Rr(){return Xm(),Im(),Qm(),Jm()}function Jm(){if(cn!==5)return!1;var e=ri,t=Td;Td=0;var n=Kt(Al),a=j.T,s=G.p;try{G.p=32>n?32:n,j.T=null,n=Ad,Ad=null;var c=ri,f=Al;if(cn=0,Ks=ri=null,Al=0,(mt&6)!==0)throw Error(o(331));var y=mt;if(mt|=4,Rm(c.current),Tm(c,c.current,f,n),mt=y,ic(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Qe,c)}catch{}return!0}finally{G.p=s,j.T=a,$m(e,t)}}function Fm(e,t,n){t=zn(n,t),t=cd(e.stateNode,t,2),e=ni(e,t,2),e!==null&&(vn(e,2),Wa(e))}function bt(e,t,n){if(e.tag===3)Fm(e,e,n);else for(;t!==null;){if(t.tag===3){Fm(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ci===null||!ci.has(a))){e=zn(n,e),n=Wh(2),a=ni(t,n,2),a!==null&&(Ph(n,a,t,e),vn(a,2),Wa(a));break}}t=t.return}}function Dd(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new ky;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(n)||(jd=!0,s.add(n),e=zy.bind(null,e,t,n),t.then(e,e))}function zy(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ct===e&&(it&n)===n&&(Zt===4||Zt===3&&(it&62914560)===it&&300>R()-jr?(mt&2)===0&&Ys(e,0):Ed|=n,qs===it&&(qs=0)),Wa(e)}function Wm(e,t){t===0&&(t=fn()),e=gl(e,t),e!==null&&(vn(e,t),Wa(e))}function Oy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wm(e,n)}function By(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),Wm(e,n)}function Ly(e,t){return yn(e,t)}var Mr=null,Vs=null,Ud=!1,Dr=!1,zd=!1,di=0;function Wa(e){e!==Vs&&e.next===null&&(Vs===null?Mr=Vs=e:Vs=Vs.next=e),Dr=!0,Ud||(Ud=!0,qy())}function ic(e,t){if(!zd&&Dr){zd=!0;do for(var n=!1,a=Mr;a!==null;){if(e!==0){var s=a.pendingLanes;if(s===0)var c=0;else{var f=a.suspendedLanes,y=a.pingedLanes;c=(1<<31-pt(42|e)+1)-1,c&=s&~(f&~y),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(n=!0,np(a,c))}else c=it,c=At(a,a===Ct?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(c&3)===0||ea(a,c)||(n=!0,np(a,c));a=a.next}while(n);zd=!1}}function Hy(){Pm()}function Pm(){Dr=Ud=!1;var e=0;di!==0&&Jy()&&(e=di);for(var t=R(),n=null,a=Mr;a!==null;){var s=a.next,c=ep(a,t);c===0?(a.next=null,n===null?Mr=s:n.next=s,s===null&&(Vs=n)):(n=a,(e!==0||(c&3)!==0)&&(Dr=!0)),a=s}cn!==0&&cn!==5||ic(e),di!==0&&(di=0)}function ep(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var f=31-pt(c),y=1<<f,N=s[f];N===-1?((y&n)===0||(y&a)!==0)&&(s[f]=Fe(y,t)):N<=t&&(e.expiredLanes|=y),c&=~y}if(t=Ct,n=it,n=At(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ln(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ea(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&ln(a),Kt(n)){case 2:case 8:n=Be;break;case 32:n=ct;break;case 268435456:n=H;break;default:n=ct}return a=tp.bind(null,e),n=yn(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&ln(a),e.callbackPriority=2,e.callbackNode=null,2}function tp(e,t){if(cn!==0&&cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Rr()&&e.callbackNode!==n)return null;var a=it;return a=At(e,e===Ct?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Om(e,a,t),ep(e,R()),e.callbackNode!=null&&e.callbackNode===n?tp.bind(null,e):null)}function np(e,t){if(Rr())return null;Om(e,t,!0)}function qy(){Wy(function(){(mt&6)!==0?yn(Ge,Hy):Pm()})}function Od(){if(di===0){var e=ce;e===0&&(e=Ue,Ue<<=1,(Ue&261888)===0&&(Ue=256)),di=e}return di}function ap(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ss(""+e)}function lp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ky(e,t,n,a,s){if(t==="submit"&&n&&n.stateNode===s){var c=ap((s[ke]||null).action),f=a.submitter;f&&(t=(t=f[ke]||null)?ap(t.formAction):f.getAttribute("formAction"),t!==null&&(c=t,f=null));var y=new Ai("action","action",null,a,s);e.push({event:y,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(di!==0){var N=f?lp(s,f):new FormData(s);nd(n,{pending:!0,data:N,method:s.method,action:c},null,N)}}else typeof c=="function"&&(y.preventDefault(),N=f?lp(s,f):new FormData(s),nd(n,{pending:!0,data:N,method:s.method,action:c},c,N))},currentTarget:s}]})}}for(var Bd=0;Bd<Do.length;Bd++){var Ld=Do[Bd],Yy=Ld.toLowerCase(),Gy=Ld[0].toUpperCase()+Ld.slice(1);Yt(Yy,"on"+Gy)}Yt(Mo,"onAnimationEnd"),Yt(Zc,"onAnimationIteration"),Yt(Xc,"onAnimationStart"),Yt("dblclick","onDoubleClick"),Yt("focusin","onFocus"),Yt("focusout","onBlur"),Yt($l,"onTransitionRun"),Yt(Ic,"onTransitionStart"),Yt(Du,"onTransitionCancel"),Yt(Qc,"onTransitionEnd"),aa("onMouseEnter",["mouseout","mouseover"]),aa("onMouseLeave",["mouseout","mouseover"]),aa("onPointerEnter",["pointerout","pointerover"]),aa("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sc));function ip(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var c=void 0;if(t)for(var f=a.length-1;0<=f;f--){var y=a[f],N=y.instance,L=y.currentTarget;if(y=y.listener,N!==c&&s.isPropagationStopped())break e;c=y,s.currentTarget=L;try{c(s)}catch($){qi($)}s.currentTarget=null,c=N}else for(f=0;f<a.length;f++){if(y=a[f],N=y.instance,L=y.currentTarget,y=y.listener,N!==c&&s.isPropagationStopped())break e;c=y,s.currentTarget=L;try{c(s)}catch($){qi($)}s.currentTarget=null,c=N}}}}function at(e,t){var n=t[gt];n===void 0&&(n=t[gt]=new Set);var a=e+"__bubble";n.has(a)||(sp(t,e,2,!1),n.add(a))}function Hd(e,t,n){var a=0;t&&(a|=4),sp(n,e,a,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function qd(e){if(!e[Ur]){e[Ur]=!0,$t.forEach(function(n){n!=="selectionchange"&&(Vy.has(n)||Hd(n,!1,e),Hd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ur]||(t[Ur]=!0,Hd("selectionchange",!1,t))}}function sp(e,t,n,a){switch(zp(t)){case 2:var s=bb;break;case 8:s=vb;break;default:s=tf}n=s.bind(null,t,n,e),s=void 0,!uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kd(e,t,n,a,s){var c=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var y=a.stateNode.containerInfo;if(y===s)break;if(f===4)for(f=a.return;f!==null;){var N=f.tag;if((N===3||N===4)&&f.stateNode.containerInfo===s)return;f=f.return}for(;y!==null;){if(f=ne(y),f===null)return;if(N=f.tag,N===5||N===6||N===26||N===27){a=c=f;continue e}y=y.parentNode}}a=a.return}sl(function(){var L=c,$=Ci(n),P=[];e:{var Y=$c.get(e);if(Y!==void 0){var Z=Ai,Ee=e;switch(e){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":Z=Ui;break;case"focusin":Ee="focus",Z=po;break;case"focusout":Ee="blur",Z=po;break;case"beforeblur":case"afterblur":Z=po;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=ds;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Ru;break;case Mo:case Zc:case Xc:Z=Cu;break;case Qc:Z=xo;break;case"scroll":case"scrollend":Z=rs;break;case"wheel":Z=wo;break;case"copy":case"cut":case"paste":Z=Mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Xl;break;case"toggle":case"beforetoggle":Z=ul}var ze=(t&4)!==0,jt=!ze&&(e==="scroll"||e==="scrollend"),M=ze?Y!==null?Y+"Capture":null:Y;ze=[];for(var C=L,B;C!==null;){var W=C;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||M===null||(W=Gl(C,M),W!=null&&ze.push(oc(C,W,B))),jt)break;C=C.return}0<ze.length&&(Y=new Z(Y,Ee,null,n,$),P.push({event:Y,listeners:ze}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",Y&&n!==Ei&&(Ee=n.relatedTarget||n.fromElement)&&(ne(Ee)||Ee[ut]))break e;if((Z||Y)&&(Y=$.window===$?$:(Y=$.ownerDocument)?Y.defaultView||Y.parentWindow:window,Z?(Ee=n.relatedTarget||n.toElement,Z=L,Ee=Ee?ne(Ee):null,Ee!==null&&(jt=m(Ee),ze=Ee.tag,Ee!==jt||ze!==5&&ze!==27&&ze!==6)&&(Ee=null)):(Z=null,Ee=L),Z!==Ee)){if(ze=ho,W="onMouseLeave",M="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ze=Xl,W="onPointerLeave",M="onPointerEnter",C="pointer"),jt=Z==null?Y:tt(Z),B=Ee==null?Y:tt(Ee),Y=new ze(W,C+"leave",Z,n,$),Y.target=jt,Y.relatedTarget=B,W=null,ne($)===L&&(ze=new ze(M,C+"enter",Ee,n,$),ze.target=B,ze.relatedTarget=jt,W=ze),jt=W,Z&&Ee)t:{for(ze=Zy,M=Z,C=Ee,B=0,W=M;W;W=ze(W))B++;W=0;for(var Me=C;Me;Me=ze(Me))W++;for(;0<B-W;)M=ze(M),B--;for(;0<W-B;)C=ze(C),W--;for(;B--;){if(M===C||C!==null&&M===C.alternate){ze=M;break t}M=ze(M),C=ze(C)}ze=null}else ze=null;Z!==null&&op(P,Y,Z,ze,!1),Ee!==null&&jt!==null&&op(P,jt,Ee,ze,!0)}}e:{if(Y=L?tt(L):window,Z=Y.nodeName&&Y.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Y.type==="file")var ft=ys;else if(Eo(Y))if(qc)ft=Bi;else{ft=Mu;var Ce=Yc}else Z=Y.nodeName,!Z||Z.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?L&&ro(L.elementType)&&(ft=ys):ft=Jt;if(ft&&(ft=ft(e,L))){Lc(P,ft,n,$);break e}Ce&&Ce(e,Y,L),e==="focusout"&&L&&Y.type==="number"&&L.memoizedProps.value!=null&&ji(Y,"number",Y.value)}switch(Ce=L?tt(L):window,e){case"focusin":(Eo(Ce)||Ce.contentEditable==="true")&&(Ga=Ce,Mn=L,Hi=null);break;case"focusout":Hi=Mn=Ga=null;break;case"mousedown":Ss=!0;break;case"contextmenu":case"mouseup":case"dragend":Ss=!1,Va(P,n,$);break;case"selectionchange":if(Li)break;case"keydown":case"keyup":Va(P,n,$)}var Je;if(hs)e:{switch(e){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else fl?dl(e,n)&&(st="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(st="onCompositionStart");st&&(zi&&n.locale!=="ko"&&(fl||st!=="onCompositionStart"?st==="onCompositionEnd"&&fl&&(Je=fo()):(fa=$,Ti="value"in fa?fa.value:fa.textContent,fl=!0)),Ce=zr(L,st),0<Ce.length&&(st=new fs(st,e,null,n,$),P.push({event:st,listeners:Ce}),Je?st.data=Je:(Je=No(n),Je!==null&&(st.data=Je)))),(Je=ms?Bc(e,n):jo(e,n))&&(st=zr(L,"onBeforeInput"),0<st.length&&(Ce=new fs("onBeforeInput","beforeinput",null,n,$),P.push({event:Ce,listeners:st}),Ce.data=Je)),Ky(P,e,L,n,$)}ip(P,t)})}function oc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",a=[];e!==null;){var s=e,c=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||c===null||(s=Gl(e,n),s!=null&&a.unshift(oc(e,s,c)),s=Gl(e,t),s!=null&&a.push(oc(e,s,c))),e.tag===3)return a;e=e.return}return[]}function Zy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function op(e,t,n,a,s){for(var c=t._reactName,f=[];n!==null&&n!==a;){var y=n,N=y.alternate,L=y.stateNode;if(y=y.tag,N!==null&&N===a)break;y!==5&&y!==26&&y!==27||L===null||(N=L,s?(L=Gl(n,c),L!=null&&f.unshift(oc(n,L,N))):s||(L=Gl(n,c),L!=null&&f.push(oc(n,L,N)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Xy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function cp(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Iy,"")}function rp(e,t){return t=cp(t),cp(e)===t}function Nt(e,t,n,a,s,c){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||il(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&il(e,""+a);break;case"className":_i(e,"class",a);break;case"tabIndex":_i(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(e,n,a);break;case"style":co(e,a,c);break;case"data":if(t!=="object"){_i(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ss(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(n==="formAction"?(t!=="input"&&Nt(e,t,"name",s.name,s,null),Nt(e,t,"formEncType",s.formEncType,s,null),Nt(e,t,"formMethod",s.formMethod,s,null),Nt(e,t,"formTarget",s.formTarget,s,null)):(Nt(e,t,"encType",s.encType,s,null),Nt(e,t,"method",s.method,s,null),Nt(e,t,"target",s.target,s,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ss(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Ea);break;case"onScroll":a!=null&&at("scroll",e);break;case"onScrollEnd":a!=null&&at("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=ss(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":at("beforetoggle",e),at("toggle",e),Ll(e,"popover",a);break;case"xlinkActuate":Lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Lt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Lt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Lt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Lt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Ll(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Rc.get(n)||n,Ll(e,n,a))}}function Yd(e,t,n,a,s,c){switch(n){case"style":co(e,a,c);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(s.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof a=="string"?il(e,a):(typeof a=="number"||typeof a=="bigint")&&il(e,""+a);break;case"onScroll":a!=null&&at("scroll",e);break;case"onScrollEnd":a!=null&&at("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jn.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),c=e[ke]||null,c=c!=null?c[n]:null,typeof c=="function"&&e.removeEventListener(t,c,s),typeof a=="function")){typeof c!="function"&&c!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,s);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Ll(e,n,a)}}}function wn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",e),at("load",e);var a=!1,s=!1,c;for(c in n)if(n.hasOwnProperty(c)){var f=n[c];if(f!=null)switch(c){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Nt(e,t,c,f,n,null)}}s&&Nt(e,t,"srcSet",n.srcSet,n,null),a&&Nt(e,t,"src",n.src,n,null);return;case"input":at("invalid",e);var y=c=f=s=null,N=null,L=null;for(a in n)if(n.hasOwnProperty(a)){var $=n[a];if($!=null)switch(a){case"name":s=$;break;case"type":f=$;break;case"checked":N=$;break;case"defaultChecked":L=$;break;case"value":c=$;break;case"defaultValue":y=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,t));break;default:Nt(e,t,a,$,n,null)}}ql(e,c,y,N,L,f,s,!1);return;case"select":at("invalid",e),a=f=c=null;for(s in n)if(n.hasOwnProperty(s)&&(y=n[s],y!=null))switch(s){case"value":c=y;break;case"defaultValue":f=y;break;case"multiple":a=y;default:Nt(e,t,s,y,n,null)}t=c,n=f,e.multiple=!!a,t!=null?ja(e,!!a,t,!1):n!=null&&ja(e,!!a,n,!0);return;case"textarea":at("invalid",e),c=s=a=null;for(f in n)if(n.hasOwnProperty(f)&&(y=n[f],y!=null))switch(f){case"value":a=y;break;case"defaultValue":s=y;break;case"children":c=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:Nt(e,t,f,y,n,null)}so(e,a,s,c);return;case"option":for(N in n)if(n.hasOwnProperty(N)&&(a=n[N],a!=null))switch(N){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Nt(e,t,N,a,n,null)}return;case"dialog":at("beforetoggle",e),at("toggle",e),at("cancel",e),at("close",e);break;case"iframe":case"object":at("load",e);break;case"video":case"audio":for(a=0;a<sc.length;a++)at(sc[a],e);break;case"image":at("error",e),at("load",e);break;case"details":at("toggle",e);break;case"embed":case"source":case"link":at("error",e),at("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in n)if(n.hasOwnProperty(L)&&(a=n[L],a!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Nt(e,t,L,a,n,null)}return;default:if(ro(t)){for($ in n)n.hasOwnProperty($)&&(a=n[$],a!==void 0&&Yd(e,t,$,a,n,void 0));return}}for(y in n)n.hasOwnProperty(y)&&(a=n[y],a!=null&&Nt(e,t,y,a,n,null))}function Qy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,c=null,f=null,y=null,N=null,L=null,$=null;for(Z in n){var P=n[Z];if(n.hasOwnProperty(Z)&&P!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":N=P;default:a.hasOwnProperty(Z)||Nt(e,t,Z,null,a,P)}}for(var Y in a){var Z=a[Y];if(P=n[Y],a.hasOwnProperty(Y)&&(Z!=null||P!=null))switch(Y){case"type":c=Z;break;case"name":s=Z;break;case"checked":L=Z;break;case"defaultChecked":$=Z;break;case"value":f=Z;break;case"defaultValue":y=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,t));break;default:Z!==P&&Nt(e,t,Y,Z,a,P)}}lo(e,f,y,N,L,$,c,s);return;case"select":Z=f=y=Y=null;for(c in n)if(N=n[c],n.hasOwnProperty(c)&&N!=null)switch(c){case"value":break;case"multiple":Z=N;default:a.hasOwnProperty(c)||Nt(e,t,c,null,a,N)}for(s in a)if(c=a[s],N=n[s],a.hasOwnProperty(s)&&(c!=null||N!=null))switch(s){case"value":Y=c;break;case"defaultValue":y=c;break;case"multiple":f=c;default:c!==N&&Nt(e,t,s,c,a,N)}t=y,n=f,a=Z,Y!=null?ja(e,!!n,Y,!1):!!a!=!!n&&(t!=null?ja(e,!!n,t,!0):ja(e,!!n,n?[]:"",!1));return;case"textarea":Z=Y=null;for(y in n)if(s=n[y],n.hasOwnProperty(y)&&s!=null&&!a.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Nt(e,t,y,null,a,s)}for(f in a)if(s=a[f],c=n[f],a.hasOwnProperty(f)&&(s!=null||c!=null))switch(f){case"value":Y=s;break;case"defaultValue":Z=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(o(91));break;default:s!==c&&Nt(e,t,f,s,a,c)}io(e,Y,Z);return;case"option":for(var Ee in n)if(Y=n[Ee],n.hasOwnProperty(Ee)&&Y!=null&&!a.hasOwnProperty(Ee))switch(Ee){case"selected":e.selected=!1;break;default:Nt(e,t,Ee,null,a,Y)}for(N in a)if(Y=a[N],Z=n[N],a.hasOwnProperty(N)&&Y!==Z&&(Y!=null||Z!=null))switch(N){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:Nt(e,t,N,Y,a,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in n)Y=n[ze],n.hasOwnProperty(ze)&&Y!=null&&!a.hasOwnProperty(ze)&&Nt(e,t,ze,null,a,Y);for(L in a)if(Y=a[L],Z=n[L],a.hasOwnProperty(L)&&Y!==Z&&(Y!=null||Z!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,t));break;default:Nt(e,t,L,Y,a,Z)}return;default:if(ro(t)){for(var jt in n)Y=n[jt],n.hasOwnProperty(jt)&&Y!==void 0&&!a.hasOwnProperty(jt)&&Yd(e,t,jt,void 0,a,Y);for($ in a)Y=a[$],Z=n[$],!a.hasOwnProperty($)||Y===Z||Y===void 0&&Z===void 0||Yd(e,t,$,Y,a,Z);return}}for(var M in n)Y=n[M],n.hasOwnProperty(M)&&Y!=null&&!a.hasOwnProperty(M)&&Nt(e,t,M,null,a,Y);for(P in a)Y=a[P],Z=n[P],!a.hasOwnProperty(P)||Y===Z||Y==null&&Z==null||Nt(e,t,P,Y,a,Z)}function up(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $y(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var s=n[a],c=s.transferSize,f=s.initiatorType,y=s.duration;if(c&&y&&up(f)){for(f=0,y=s.responseEnd,a+=1;a<n.length;a++){var N=n[a],L=N.startTime;if(L>y)break;var $=N.transferSize,P=N.initiatorType;$&&up(P)&&(N=N.responseEnd,f+=$*(N<y?1:(y-L)/(N-L)))}if(--a,t+=8*(c+f)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Gd=null,Vd=null;function Or(e){return e.nodeType===9?e:e.ownerDocument}function dp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Zd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xd=null;function Jy(){var e=window.event;return e&&e.type==="popstate"?e===Xd?!1:(Xd=e,!0):(Xd=null,!1)}var hp=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(e){return mp.resolve(null).then(e).catch(Py)}:hp;function Py(e){setTimeout(function(){throw e})}function fi(e){return e==="head"}function pp(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(s),Qs(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")cc(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,cc(n);for(var c=n.firstChild;c;){var f=c.nextSibling,y=c.nodeName;c[je]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=f}}else n==="body"&&cc(e.ownerDocument.body);n=s}while(n);Qs(t)}function gp(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Id(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),E(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function eb(e,t,n,a){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=xa(e.nextSibling),e===null)break}return null}function tb(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=xa(e.nextSibling),e===null))return null;return e}function yp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=xa(e.nextSibling),e===null))return null;return e}function Qd(e){return e.data==="$?"||e.data==="$~"}function $d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function nb(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Jd=null;function bp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return xa(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function vp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function xp(e,t,n){switch(t=Or(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function cc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);E(e)}var Sa=new Map,Sp=new Set;function Br(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var kl=G.d;G.d={f:ab,r:lb,D:ib,C:sb,L:ob,m:cb,X:ub,S:rb,M:db};function ab(){var e=kl.f(),t=Tr();return e||t}function lb(e){var t=xe(e);t!==null&&t.tag===5&&t.type==="form"?Lh(t):kl.r(e)}var Zs=typeof document>"u"?null:document;function wp(e,t,n){var a=Zs;if(a&&typeof t=="string"&&t){var s=En(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Sp.has(s)||(Sp.add(s),e={rel:e,crossOrigin:n,href:t},a.querySelector(s)===null&&(t=a.createElement("link"),wn(t,"link",e),$e(t),a.head.appendChild(t)))}}function ib(e){kl.D(e),wp("dns-prefetch",e,null)}function sb(e,t){kl.C(e,t),wp("preconnect",e,t)}function ob(e,t,n){kl.L(e,t,n);var a=Zs;if(a&&e&&t){var s='link[rel="preload"][as="'+En(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+En(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+En(n.imageSizes)+'"]')):s+='[href="'+En(e)+'"]';var c=s;switch(t){case"style":c=Xs(e);break;case"script":c=Is(e)}Sa.has(c)||(e=A({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Sa.set(c,e),a.querySelector(s)!==null||t==="style"&&a.querySelector(rc(c))||t==="script"&&a.querySelector(uc(c))||(t=a.createElement("link"),wn(t,"link",e),$e(t),a.head.appendChild(t)))}}function cb(e,t){kl.m(e,t);var n=Zs;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+En(a)+'"][href="'+En(e)+'"]',c=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Is(e)}if(!Sa.has(c)&&(e=A({rel:"modulepreload",href:e},t),Sa.set(c,e),n.querySelector(s)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(uc(c)))return}a=n.createElement("link"),wn(a,"link",e),$e(a),n.head.appendChild(a)}}}function rb(e,t,n){kl.S(e,t,n);var a=Zs;if(a&&e){var s=Dt(a).hoistableStyles,c=Xs(e);t=t||"default";var f=s.get(c);if(!f){var y={loading:0,preload:null};if(f=a.querySelector(rc(c)))y.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sa.get(c))&&Fd(e,n);var N=f=a.createElement("link");$e(N),wn(N,"link",e),N._p=new Promise(function(L,$){N.onload=L,N.onerror=$}),N.addEventListener("load",function(){y.loading|=1}),N.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Lr(f,t,a)}f={type:"stylesheet",instance:f,count:1,state:y},s.set(c,f)}}}function ub(e,t){kl.X(e,t);var n=Zs;if(n&&e){var a=Dt(n).hoistableScripts,s=Is(e),c=a.get(s);c||(c=n.querySelector(uc(s)),c||(e=A({src:e,async:!0},t),(t=Sa.get(s))&&Wd(e,t),c=n.createElement("script"),$e(c),wn(c,"link",e),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(s,c))}}function db(e,t){kl.M(e,t);var n=Zs;if(n&&e){var a=Dt(n).hoistableScripts,s=Is(e),c=a.get(s);c||(c=n.querySelector(uc(s)),c||(e=A({src:e,async:!0,type:"module"},t),(t=Sa.get(s))&&Wd(e,t),c=n.createElement("script"),$e(c),wn(c,"link",e),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(s,c))}}function _p(e,t,n,a){var s=(s=ue.current)?Br(s):null;if(!s)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Xs(n.href),n=Dt(s).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Xs(n.href);var c=Dt(s).hoistableStyles,f=c.get(e);if(f||(s=s.ownerDocument||s,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,f),(c=s.querySelector(rc(e)))&&!c._p&&(f.instance=c,f.state.loading=5),Sa.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sa.set(e,n),c||fb(s,e,n,f.state))),t&&a===null)throw Error(o(528,""));return f}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Is(n),n=Dt(s).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Xs(e){return'href="'+En(e)+'"'}function rc(e){return'link[rel="stylesheet"]['+e+"]"}function Np(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function fb(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),wn(t,"link",n),$e(t),e.head.appendChild(t))}function Is(e){return'[src="'+En(e)+'"]'}function uc(e){return"script[async]"+e}function jp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+En(n.href)+'"]');if(a)return t.instance=a,$e(a),a;var s=A({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),$e(a),wn(a,"style",s),Lr(a,n.precedence,e),t.instance=a;case"stylesheet":s=Xs(n.href);var c=e.querySelector(rc(s));if(c)return t.state.loading|=4,t.instance=c,$e(c),c;a=Np(n),(s=Sa.get(s))&&Fd(a,s),c=(e.ownerDocument||e).createElement("link"),$e(c);var f=c;return f._p=new Promise(function(y,N){f.onload=y,f.onerror=N}),wn(c,"link",a),t.state.loading|=4,Lr(c,n.precedence,e),t.instance=c;case"script":return c=Is(n.src),(s=e.querySelector(uc(c)))?(t.instance=s,$e(s),s):(a=n,(s=Sa.get(c))&&(a=A({},n),Wd(a,s)),e=e.ownerDocument||e,s=e.createElement("script"),$e(s),wn(s,"link",a),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Lr(a,n.precedence,e));return t.instance}function Lr(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,c=s,f=0;f<a.length;f++){var y=a[f];if(y.dataset.precedence===t)c=y;else if(c!==s)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Fd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Wd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Hr=null;function Ep(e,t,n){if(Hr===null){var a=new Map,s=Hr=new Map;s.set(n,a)}else s=Hr,a=s.get(n),a||(a=new Map,s.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var c=n[s];if(!(c[je]||c[pe]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var f=c.getAttribute(t)||"";f=e+f;var y=a.get(f);y?y.push(c):a.set(f,[c])}}return a}function Cp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function hb(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mb(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var s=Xs(a.href),c=t.querySelector(rc(s));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=qr.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=c,$e(c);return}c=t.ownerDocument||t,a=Np(a),(s=Sa.get(s))&&Fd(a,s),c=c.createElement("link"),$e(c);var f=c;f._p=new Promise(function(y,N){f.onload=y,f.onerror=N}),wn(c,"link",a),n.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=qr.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Pd=0;function pb(e,t){return e.stylesheets&&e.count===0&&Yr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Yr(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Pd===0&&(Pd=62500*$y());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Yr(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Pd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(s)}}:null}function qr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kr=null;function Yr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kr=new Map,t.forEach(gb,e),Kr=null,qr.call(e))}function gb(e,t){if(!(t.state.loading&4)){var n=Kr.get(e);if(n)var a=n.get(null);else{n=new Map,Kr.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<s.length;c++){var f=s[c];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),a=f)}a&&n.set(null,a)}s=t.instance,f=s.getAttribute("data-precedence"),c=n.get(f)||a,c===a&&n.set(null,s),n.set(f,s),this.count++,a=qr.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),c?c.parentNode.insertBefore(s,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var dc={$$typeof:me,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function yb(e,t,n,a,s,c,f,y,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.hiddenUpdates=kn(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=c,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Ap(e,t,n,a,s,c,f,y,N,L,$,P){return e=new yb(e,t,n,f,N,L,$,P,y),t=1,c===!0&&(t|=24),c=Un(3,null,null,t),e.current=c,c.stateNode=e,t=ge(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:a,isDehydrated:n,cache:t},Ou(c),e}function kp(e){return e?(e=yl,e):yl}function Rp(e,t,n,a,s,c){s=kp(s),a.context===null?a.context=s:a.pendingContext=s,a=ti(t),a.payload={element:n},c=c===void 0?null:c,c!==null&&(a.callback=c),n=ni(e,a,t),n!==null&&(Jn(n,e,t),Go(n,e,t))}function Mp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ef(e,t){Mp(e,t),(e=e.alternate)&&Mp(e,t)}function Dp(e){if(e.tag===13||e.tag===31){var t=gl(e,67108864);t!==null&&Jn(t,e,67108864),ef(e,67108864)}}function Up(e){if(e.tag===13||e.tag===31){var t=ca();t=Ve(t);var n=gl(e,t);n!==null&&Jn(n,e,t),ef(e,t)}}var Gr=!0;function bb(e,t,n,a){var s=j.T;j.T=null;var c=G.p;try{G.p=2,tf(e,t,n,a)}finally{G.p=c,j.T=s}}function vb(e,t,n,a){var s=j.T;j.T=null;var c=G.p;try{G.p=8,tf(e,t,n,a)}finally{G.p=c,j.T=s}}function tf(e,t,n,a){if(Gr){var s=nf(a);if(s===null)Kd(e,t,a,Vr,n),Op(e,a);else if(Sb(s,e,t,n,a))a.stopPropagation();else if(Op(e,a),t&4&&-1<xb.indexOf(e)){for(;s!==null;){var c=xe(s);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=dn(c.pendingLanes);if(f!==0){var y=c;for(y.pendingLanes|=2,y.entangledLanes|=2;f;){var N=1<<31-pt(f);y.entanglements[1]|=N,f&=~N}Wa(c),(mt&6)===0&&(Er=R()+500,ic(0))}}break;case 31:case 13:y=gl(c,2),y!==null&&Jn(y,c,2),Tr(),ef(c,2)}if(c=nf(a),c===null&&Kd(e,t,a,Vr,n),c===s)break;s=c}s!==null&&a.stopPropagation()}else Kd(e,t,a,null,n)}}function nf(e){return e=Ci(e),af(e)}var Vr=null;function af(e){if(Vr=null,e=ne(e),e!==null){var t=m(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=g(t),e!==null)return e;e=null}else if(n===31){if(e=v(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Vr=e,null}function zp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Ge:return 2;case Be:return 8;case ct:case Ke:return 32;case H:return 268435456;default:return 32}default:return 32}}var lf=!1,hi=null,mi=null,pi=null,fc=new Map,hc=new Map,gi=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Op(e,t){switch(e){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":fc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(t.pointerId)}}function mc(e,t,n,a,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:c,targetContainers:[s]},t!==null&&(t=xe(t),t!==null&&Dp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Sb(e,t,n,a,s){switch(t){case"focusin":return hi=mc(hi,e,t,n,a,s),!0;case"dragenter":return mi=mc(mi,e,t,n,a,s),!0;case"mouseover":return pi=mc(pi,e,t,n,a,s),!0;case"pointerover":var c=s.pointerId;return fc.set(c,mc(fc.get(c)||null,e,t,n,a,s)),!0;case"gotpointercapture":return c=s.pointerId,hc.set(c,mc(hc.get(c)||null,e,t,n,a,s)),!0}return!1}function Bp(e){var t=ne(e.target);if(t!==null){var n=m(t);if(n!==null){if(t=n.tag,t===13){if(t=g(n),t!==null){e.blockedOn=t,Vn(e.priority,function(){Up(n)});return}}else if(t===31){if(t=v(n),t!==null){e.blockedOn=t,Vn(e.priority,function(){Up(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nf(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ei=a,n.target.dispatchEvent(a),Ei=null}else return t=xe(n),t!==null&&Dp(t),e.blockedOn=n,!1;t.shift()}return!0}function Lp(e,t,n){Zr(e)&&n.delete(t)}function wb(){lf=!1,hi!==null&&Zr(hi)&&(hi=null),mi!==null&&Zr(mi)&&(mi=null),pi!==null&&Zr(pi)&&(pi=null),fc.forEach(Lp),hc.forEach(Lp)}function Xr(e,t){e.blockedOn===t&&(e.blockedOn=null,lf||(lf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wb)))}var Ir=null;function Hp(e){Ir!==e&&(Ir=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ir===e&&(Ir=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],s=e[t+2];if(typeof a!="function"){if(af(a||n)===null)continue;break}var c=xe(n);c!==null&&(e.splice(t,3),t-=3,nd(c,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function Qs(e){function t(N){return Xr(N,e)}hi!==null&&Xr(hi,e),mi!==null&&Xr(mi,e),pi!==null&&Xr(pi,e),fc.forEach(t),hc.forEach(t);for(var n=0;n<gi.length;n++){var a=gi[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)Bp(n),n.blockedOn===null&&gi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var s=n[a],c=n[a+1],f=s[ke]||null;if(typeof c=="function")f||Hp(n);else if(f){var y=null;if(c&&c.hasAttribute("formAction")){if(s=c,f=c[ke]||null)y=f.formAction;else if(af(s)!==null)continue}else y=f.action;typeof y=="function"?n[a+1]=y:(n.splice(a,3),a-=3),Hp(n)}}}function qp(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(f){return s=f})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function sf(e){this._internalRoot=e}Qr.prototype.render=sf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,a=ca();Rp(n,a,e,t,null,null)},Qr.prototype.unmount=sf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rp(e.current,2,null,e,null,null),Tr(),t[ut]=null}};function Qr(e){this._internalRoot=e}Qr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gi.length&&t!==0&&t<gi[n].priority;n++);gi.splice(n,0,e),n===0&&Bp(e)}};var Kp=i.version;if(Kp!=="19.2.4")throw Error(o(527,Kp,"19.2.4"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=S(t),e=e!==null?k(e):null,e=e===null?null:e.stateNode,e};var _b={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$r.isDisabled&&$r.supportsFiber)try{Qe=$r.inject(_b),vt=$r}catch{}}return gc.createRoot=function(e,t){if(!h(e))throw Error(o(299));var n=!1,a="",s=Qh,c=$h,f=Jh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Ap(e,1,!1,null,null,n,a,null,s,c,f,qp),e[ut]=t.current,qd(e),new sf(t)},gc.hydrateRoot=function(e,t,n){if(!h(e))throw Error(o(299));var a=!1,s="",c=Qh,f=$h,y=Jh,N=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.formState!==void 0&&(N=n.formState)),t=Ap(e,1,!0,t,n??null,a,s,N,c,f,y,qp),t.context=kp(null),n=t.current,a=ca(),a=Ve(a),s=ti(a),s.callback=null,ni(n,s,a),n=a,t.current.lanes=n,vn(t,n),Wa(t),e[ut]=t.current,qd(e),new Qr(t)},gc.version="19.2.4",gc}var Fp;function zb(){if(Fp)return rf.exports;Fp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),rf.exports=Ub(),rf.exports}var Ob=zb();const Bb=Eg(Ob);/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Cg,setPrototypeOf:Wp,isFrozen:Lb,getPrototypeOf:Hb,getOwnPropertyDescriptor:qb}=Object;let{freeze:Kn,seal:Na,create:Ef}=Object,{apply:Cf,construct:Tf}=typeof Reflect<"u"&&Reflect;Kn||(Kn=function(i){return i});Na||(Na=function(i){return i});Cf||(Cf=function(i,u){for(var o=arguments.length,h=new Array(o>2?o-2:0),m=2;m<o;m++)h[m-2]=arguments[m];return i.apply(u,h)});Tf||(Tf=function(i){for(var u=arguments.length,o=new Array(u>1?u-1:0),h=1;h<u;h++)o[h-1]=arguments[h];return new i(...o)});const Jr=Yn(Array.prototype.forEach),Kb=Yn(Array.prototype.lastIndexOf),Pp=Yn(Array.prototype.pop),yc=Yn(Array.prototype.push),Yb=Yn(Array.prototype.splice),ou=Yn(String.prototype.toLowerCase),hf=Yn(String.prototype.toString),mf=Yn(String.prototype.match),bc=Yn(String.prototype.replace),Gb=Yn(String.prototype.indexOf),Vb=Yn(String.prototype.trim),Oa=Yn(Object.prototype.hasOwnProperty),Hn=Yn(RegExp.prototype.test),vc=Zb(TypeError);function Yn(r){return function(i){i instanceof RegExp&&(i.lastIndex=0);for(var u=arguments.length,o=new Array(u>1?u-1:0),h=1;h<u;h++)o[h-1]=arguments[h];return Cf(r,i,o)}}function Zb(r){return function(){for(var i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];return Tf(r,u)}}function et(r,i){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ou;Wp&&Wp(r,null);let o=i.length;for(;o--;){let h=i[o];if(typeof h=="string"){const m=u(h);m!==h&&(Lb(i)||(i[o]=m),h=m)}r[h]=!0}return r}function Xb(r){for(let i=0;i<r.length;i++)Oa(r,i)||(r[i]=null);return r}function el(r){const i=Ef(null);for(const[u,o]of Cg(r))Oa(r,u)&&(Array.isArray(o)?i[u]=Xb(o):o&&typeof o=="object"&&o.constructor===Object?i[u]=el(o):i[u]=o);return i}function xc(r,i){for(;r!==null;){const o=qb(r,i);if(o){if(o.get)return Yn(o.get);if(typeof o.value=="function")return Yn(o.value)}r=Hb(r)}function u(){return null}return u}const eg=Kn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pf=Kn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gf=Kn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ib=Kn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),yf=Kn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Qb=Kn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),tg=Kn(["#text"]),ng=Kn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),bf=Kn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ag=Kn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Fr=Kn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$b=Na(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Jb=Na(/<%[\w\W]*|[\w\W]*%>/gm),Fb=Na(/\$\{[\w\W]*/gm),Wb=Na(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pb=Na(/^aria-[\-\w]+$/),Tg=Na(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ev=Na(/^(?:\w+script|data):/i),tv=Na(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ag=Na(/^html$/i),nv=Na(/^[a-z][.\w]*(-[.\w]+)+$/i);var lg=Object.freeze({__proto__:null,ARIA_ATTR:Pb,ATTR_WHITESPACE:tv,CUSTOM_ELEMENT:nv,DATA_ATTR:Wb,DOCTYPE_NAME:Ag,ERB_EXPR:Jb,IS_ALLOWED_URI:Tg,IS_SCRIPT_OR_DATA:ev,MUSTACHE_EXPR:$b,TMPLIT_EXPR:Fb});const Sc={element:1,text:3,progressingInstruction:7,comment:8,document:9},av=function(){return typeof window>"u"?null:window},lv=function(i,u){if(typeof i!="object"||typeof i.createPolicy!="function")return null;let o=null;const h="data-tt-policy-suffix";u&&u.hasAttribute(h)&&(o=u.getAttribute(h));const m="dompurify"+(o?"#"+o:"");try{return i.createPolicy(m,{createHTML(g){return g},createScriptURL(g){return g}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}},ig=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function kg(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:av();const i=je=>kg(je);if(i.version="3.3.1",i.removed=[],!r||!r.document||r.document.nodeType!==Sc.document||!r.Element)return i.isSupported=!1,i;let{document:u}=r;const o=u,h=o.currentScript,{DocumentFragment:m,HTMLTemplateElement:g,Node:v,Element:b,NodeFilter:S,NamedNodeMap:k=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:A,DOMParser:Q,trustedTypes:O}=r,U=b.prototype,F=xc(U,"cloneNode"),te=xc(U,"remove"),re=xc(U,"nextSibling"),ye=xc(U,"childNodes"),me=xc(U,"parentNode");if(typeof g=="function"){const je=u.createElement("template");je.content&&je.content.ownerDocument&&(u=je.content.ownerDocument)}let he,De="";const{implementation:Xe,createNodeIterator:Ae,createDocumentFragment:we,getElementsByTagName:de}=u,{importNode:Oe}=o;let Te=ig();i.isSupported=typeof Cg=="function"&&typeof me=="function"&&Xe&&Xe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:se,TMPLIT_EXPR:V,DATA_ATTR:z,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:le}=lg;let{IS_ALLOWED_URI:oe}=lg,w=null;const D=et({},[...eg,...pf,...gf,...yf,...tg]);let K=null;const ie=et({},[...ng,...bf,...ag,...Fr]);let ee=Object.seal(Ef(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ue=null,_e=null;const Ye=Object.seal(Ef(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Re=!0,qe=!0,ot=!1,It=!0,Mt=!1,Qt=!0,Ot=!1,rn=!1,_n=!1,Pt=!1,un=!1,yn=!1,ln=!0,Pn=!1;const ua="user-content-";let R=!0,Se=!1,Ge={},Be=null;const ct=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ke=null;const H=et({},["audio","video","img","source","image","track"]);let Le=null;const Ht=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let pt=xt,Nn=!1,He=null;const La=et({},[Qe,vt,xt],hf);let Ue=et({},["mi","mo","mn","ms","mtext"]),sn=et({},["annotation-xml"]);const bn=et({},["title","style","font","a","script"]);let dn=null;const At=["application/xhtml+xml","text/html"],ea="text/html";let Fe=null,fn=null;const kn=u.createElement("form"),vn=function(E){return E instanceof RegExp||E instanceof Function},qt=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(fn&&fn===E)){if((!E||typeof E!="object")&&(E={}),E=el(E),dn=At.indexOf(E.PARSER_MEDIA_TYPE)===-1?ea:E.PARSER_MEDIA_TYPE,Fe=dn==="application/xhtml+xml"?hf:ou,w=Oa(E,"ALLOWED_TAGS")?et({},E.ALLOWED_TAGS,Fe):D,K=Oa(E,"ALLOWED_ATTR")?et({},E.ALLOWED_ATTR,Fe):ie,He=Oa(E,"ALLOWED_NAMESPACES")?et({},E.ALLOWED_NAMESPACES,hf):La,Le=Oa(E,"ADD_URI_SAFE_ATTR")?et(el(Ht),E.ADD_URI_SAFE_ATTR,Fe):Ht,Ke=Oa(E,"ADD_DATA_URI_TAGS")?et(el(H),E.ADD_DATA_URI_TAGS,Fe):H,Be=Oa(E,"FORBID_CONTENTS")?et({},E.FORBID_CONTENTS,Fe):ct,ue=Oa(E,"FORBID_TAGS")?et({},E.FORBID_TAGS,Fe):el({}),_e=Oa(E,"FORBID_ATTR")?et({},E.FORBID_ATTR,Fe):el({}),Ge=Oa(E,"USE_PROFILES")?E.USE_PROFILES:!1,Re=E.ALLOW_ARIA_ATTR!==!1,qe=E.ALLOW_DATA_ATTR!==!1,ot=E.ALLOW_UNKNOWN_PROTOCOLS||!1,It=E.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Mt=E.SAFE_FOR_TEMPLATES||!1,Qt=E.SAFE_FOR_XML!==!1,Ot=E.WHOLE_DOCUMENT||!1,Pt=E.RETURN_DOM||!1,un=E.RETURN_DOM_FRAGMENT||!1,yn=E.RETURN_TRUSTED_TYPE||!1,_n=E.FORCE_BODY||!1,ln=E.SANITIZE_DOM!==!1,Pn=E.SANITIZE_NAMED_PROPS||!1,R=E.KEEP_CONTENT!==!1,Se=E.IN_PLACE||!1,oe=E.ALLOWED_URI_REGEXP||Tg,pt=E.NAMESPACE||xt,Ue=E.MATHML_TEXT_INTEGRATION_POINTS||Ue,sn=E.HTML_INTEGRATION_POINTS||sn,ee=E.CUSTOM_ELEMENT_HANDLING||{},E.CUSTOM_ELEMENT_HANDLING&&vn(E.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=E.CUSTOM_ELEMENT_HANDLING.tagNameCheck),E.CUSTOM_ELEMENT_HANDLING&&vn(E.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=E.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),E.CUSTOM_ELEMENT_HANDLING&&typeof E.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=E.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(qe=!1),un&&(Pt=!0),Ge&&(w=et({},tg),K=[],Ge.html===!0&&(et(w,eg),et(K,ng)),Ge.svg===!0&&(et(w,pf),et(K,bf),et(K,Fr)),Ge.svgFilters===!0&&(et(w,gf),et(K,bf),et(K,Fr)),Ge.mathMl===!0&&(et(w,yf),et(K,ag),et(K,Fr))),E.ADD_TAGS&&(typeof E.ADD_TAGS=="function"?Ye.tagCheck=E.ADD_TAGS:(w===D&&(w=el(w)),et(w,E.ADD_TAGS,Fe))),E.ADD_ATTR&&(typeof E.ADD_ATTR=="function"?Ye.attributeCheck=E.ADD_ATTR:(K===ie&&(K=el(K)),et(K,E.ADD_ATTR,Fe))),E.ADD_URI_SAFE_ATTR&&et(Le,E.ADD_URI_SAFE_ATTR,Fe),E.FORBID_CONTENTS&&(Be===ct&&(Be=el(Be)),et(Be,E.FORBID_CONTENTS,Fe)),E.ADD_FORBID_CONTENTS&&(Be===ct&&(Be=el(Be)),et(Be,E.ADD_FORBID_CONTENTS,Fe)),R&&(w["#text"]=!0),Ot&&et(w,["html","head","body"]),w.table&&(et(w,["tbody"]),delete ue.tbody),E.TRUSTED_TYPES_POLICY){if(typeof E.TRUSTED_TYPES_POLICY.createHTML!="function")throw vc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof E.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');he=E.TRUSTED_TYPES_POLICY,De=he.createHTML("")}else he===void 0&&(he=lv(O,h)),he!==null&&typeof De=="string"&&(De=he.createHTML(""));Kn&&Kn(E),fn=E}},ta=et({},[...pf,...gf,...Ib]),Ne=et({},[...yf,...Qb]),na=function(E){let ne=me(E);(!ne||!ne.tagName)&&(ne={namespaceURI:pt,tagName:"template"});const xe=ou(E.tagName),tt=ou(ne.tagName);return He[E.namespaceURI]?E.namespaceURI===vt?ne.namespaceURI===xt?xe==="svg":ne.namespaceURI===Qe?xe==="svg"&&(tt==="annotation-xml"||Ue[tt]):!!ta[xe]:E.namespaceURI===Qe?ne.namespaceURI===xt?xe==="math":ne.namespaceURI===vt?xe==="math"&&sn[tt]:!!Ne[xe]:E.namespaceURI===xt?ne.namespaceURI===vt&&!sn[tt]||ne.namespaceURI===Qe&&!Ue[tt]?!1:!Ne[xe]&&(bn[xe]||!ta[xe]):!!(dn==="application/xhtml+xml"&&He[E.namespaceURI]):!1},Ve=function(E){yc(i.removed,{element:E});try{me(E).removeChild(E)}catch{te(E)}},Kt=function(E,ne){try{yc(i.removed,{attribute:ne.getAttributeNode(E),from:ne})}catch{yc(i.removed,{attribute:null,from:ne})}if(ne.removeAttribute(E),E==="is")if(Pt||un)try{Ve(ne)}catch{}else try{ne.setAttribute(E,"")}catch{}},Gn=function(E){let ne=null,xe=null;if(_n)E="<remove></remove>"+E;else{const $e=mf(E,/^[\r\n\t ]+/);xe=$e&&$e[0]}dn==="application/xhtml+xml"&&pt===xt&&(E='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+E+"</body></html>");const tt=he?he.createHTML(E):E;if(pt===xt)try{ne=new Q().parseFromString(tt,dn)}catch{}if(!ne||!ne.documentElement){ne=Xe.createDocument(pt,"template",null);try{ne.documentElement.innerHTML=Nn?De:tt}catch{}}const Dt=ne.body||ne.documentElement;return E&&xe&&Dt.insertBefore(u.createTextNode(xe),Dt.childNodes[0]||null),pt===xt?de.call(ne,Ot?"html":"body")[0]:Ot?ne.documentElement:Dt},Vn=function(E){return Ae.call(E.ownerDocument||E,E,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},q=function(E){return E instanceof A&&(typeof E.nodeName!="string"||typeof E.textContent!="string"||typeof E.removeChild!="function"||!(E.attributes instanceof k)||typeof E.removeAttribute!="function"||typeof E.setAttribute!="function"||typeof E.namespaceURI!="string"||typeof E.insertBefore!="function"||typeof E.hasChildNodes!="function")},pe=function(E){return typeof v=="function"&&E instanceof v};function ke(je,E,ne){Jr(je,xe=>{xe.call(i,E,ne,fn)})}const ut=function(E){let ne=null;if(ke(Te.beforeSanitizeElements,E,null),q(E))return Ve(E),!0;const xe=Fe(E.nodeName);if(ke(Te.uponSanitizeElement,E,{tagName:xe,allowedTags:w}),Qt&&E.hasChildNodes()&&!pe(E.firstElementChild)&&Hn(/<[/\w!]/g,E.innerHTML)&&Hn(/<[/\w!]/g,E.textContent)||E.nodeType===Sc.progressingInstruction||Qt&&E.nodeType===Sc.comment&&Hn(/<[/\w]/g,E.data))return Ve(E),!0;if(!(Ye.tagCheck instanceof Function&&Ye.tagCheck(xe))&&(!w[xe]||ue[xe])){if(!ue[xe]&&Rn(xe)&&(ee.tagNameCheck instanceof RegExp&&Hn(ee.tagNameCheck,xe)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(xe)))return!1;if(R&&!Be[xe]){const tt=me(E)||E.parentNode,Dt=ye(E)||E.childNodes;if(Dt&&tt){const $e=Dt.length;for(let $t=$e-1;$t>=0;--$t){const jn=F(Dt[$t],!0);jn.__removalCount=(E.__removalCount||0)+1,tt.insertBefore(jn,re(E))}}}return Ve(E),!0}return E instanceof b&&!na(E)||(xe==="noscript"||xe==="noembed"||xe==="noframes")&&Hn(/<\/no(script|embed|frames)/i,E.innerHTML)?(Ve(E),!0):(Mt&&E.nodeType===Sc.text&&(ne=E.textContent,Jr([be,se,V],tt=>{ne=bc(ne,tt," ")}),E.textContent!==ne&&(yc(i.removed,{element:E.cloneNode()}),E.textContent=ne)),ke(Te.afterSanitizeElements,E,null),!1)},gt=function(E,ne,xe){if(ln&&(ne==="id"||ne==="name")&&(xe in u||xe in kn))return!1;if(!(qe&&!_e[ne]&&Hn(z,ne))){if(!(Re&&Hn(j,ne))){if(!(Ye.attributeCheck instanceof Function&&Ye.attributeCheck(ne,E))){if(!K[ne]||_e[ne]){if(!(Rn(E)&&(ee.tagNameCheck instanceof RegExp&&Hn(ee.tagNameCheck,E)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(E))&&(ee.attributeNameCheck instanceof RegExp&&Hn(ee.attributeNameCheck,ne)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(ne,E))||ne==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&Hn(ee.tagNameCheck,xe)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(xe))))return!1}else if(!Le[ne]){if(!Hn(oe,bc(xe,X,""))){if(!((ne==="src"||ne==="xlink:href"||ne==="href")&&E!=="script"&&Gb(xe,"data:")===0&&Ke[E])){if(!(ot&&!Hn(G,bc(xe,X,"")))){if(xe)return!1}}}}}}}return!0},Rn=function(E){return E!=="annotation-xml"&&mf(E,le)},Bl=function(E){ke(Te.beforeSanitizeAttributes,E,null);const{attributes:ne}=E;if(!ne||q(E))return;const xe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K,forceKeepAttr:void 0};let tt=ne.length;for(;tt--;){const Dt=ne[tt],{name:$e,namespaceURI:$t,value:jn}=Dt,hn=Fe($e),aa=jn;let Bt=$e==="value"?aa:Vb(aa);if(xe.attrName=hn,xe.attrValue=Bt,xe.keepAttr=!0,xe.forceKeepAttr=void 0,ke(Te.uponSanitizeAttribute,E,xe),Bt=xe.attrValue,Pn&&(hn==="id"||hn==="name")&&(Kt($e,E),Bt=ua+Bt),Qt&&Hn(/((--!?|])>)|<\/(style|title|textarea)/i,Bt)){Kt($e,E);continue}if(hn==="attributename"&&mf(Bt,"href")){Kt($e,E);continue}if(xe.forceKeepAttr)continue;if(!xe.keepAttr){Kt($e,E);continue}if(!It&&Hn(/\/>/i,Bt)){Kt($e,E);continue}Mt&&Jr([be,se,V],ll=>{Bt=bc(Bt,ll," ")});const al=Fe(E.nodeName);if(!gt(al,hn,Bt)){Kt($e,E);continue}if(he&&typeof O=="object"&&typeof O.getAttributeType=="function"&&!$t)switch(O.getAttributeType(al,hn)){case"TrustedHTML":{Bt=he.createHTML(Bt);break}case"TrustedScriptURL":{Bt=he.createScriptURL(Bt);break}}if(Bt!==aa)try{$t?E.setAttributeNS($t,$e,Bt):E.setAttribute($e,Bt),q(E)?Ve(E):Pp(i.removed)}catch{Kt($e,E)}}ke(Te.afterSanitizeAttributes,E,null)},Ha=function je(E){let ne=null;const xe=Vn(E);for(ke(Te.beforeSanitizeShadowDOM,E,null);ne=xe.nextNode();)ke(Te.uponSanitizeShadowNode,ne,null),ut(ne),Bl(ne),ne.content instanceof m&&je(ne.content);ke(Te.afterSanitizeShadowDOM,E,null)};return i.sanitize=function(je){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=null,xe=null,tt=null,Dt=null;if(Nn=!je,Nn&&(je="<!-->"),typeof je!="string"&&!pe(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw vc("dirty is not a string, aborting")}else throw vc("toString is not a function");if(!i.isSupported)return je;if(rn||qt(E),i.removed=[],typeof je=="string"&&(Se=!1),Se){if(je.nodeName){const jn=Fe(je.nodeName);if(!w[jn]||ue[jn])throw vc("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof v)ne=Gn("<!---->"),xe=ne.ownerDocument.importNode(je,!0),xe.nodeType===Sc.element&&xe.nodeName==="BODY"||xe.nodeName==="HTML"?ne=xe:ne.appendChild(xe);else{if(!Pt&&!Mt&&!Ot&&je.indexOf("<")===-1)return he&&yn?he.createHTML(je):je;if(ne=Gn(je),!ne)return Pt?null:yn?De:""}ne&&_n&&Ve(ne.firstChild);const $e=Vn(Se?je:ne);for(;tt=$e.nextNode();)ut(tt),Bl(tt),tt.content instanceof m&&Ha(tt.content);if(Se)return je;if(Pt){if(un)for(Dt=we.call(ne.ownerDocument);ne.firstChild;)Dt.appendChild(ne.firstChild);else Dt=ne;return(K.shadowroot||K.shadowrootmode)&&(Dt=Oe.call(o,Dt,!0)),Dt}let $t=Ot?ne.outerHTML:ne.innerHTML;return Ot&&w["!doctype"]&&ne.ownerDocument&&ne.ownerDocument.doctype&&ne.ownerDocument.doctype.name&&Hn(Ag,ne.ownerDocument.doctype.name)&&($t="<!DOCTYPE "+ne.ownerDocument.doctype.name+`>
`+$t),Mt&&Jr([be,se,V],jn=>{$t=bc($t,jn," ")}),he&&yn?he.createHTML($t):$t},i.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qt(je),rn=!0},i.clearConfig=function(){fn=null,rn=!1},i.isValidAttribute=function(je,E,ne){fn||qt({});const xe=Fe(je),tt=Fe(E);return gt(xe,tt,ne)},i.addHook=function(je,E){typeof E=="function"&&yc(Te[je],E)},i.removeHook=function(je,E){if(E!==void 0){const ne=Kb(Te[je],E);return ne===-1?void 0:Yb(Te[je],ne,1)[0]}return Pp(Te[je])},i.removeHooks=function(je){Te[je]=[]},i.removeAllHooks=function(){Te=ig()},i}var iv=kg();function sv(){if(typeof window<"u"){const r=localStorage.getItem("accord_server_url");if(r)return r;if(window.__ACCORD_SERVER_URL__)return window.__ACCORD_SERVER_URL__}return"http://localhost:8080"}async function ov(){if(typeof window>"u")return null;const r=window.location.origin;if(r.includes(":1420")||r.includes(":5173")||r.includes(":3000"))return null;try{const i=await fetch(`${r}/health`,{signal:AbortSignal.timeout(3e3)});if(i.ok){const u=await i.json();if(u&&(u.status==="healthy"||u.status==="ok"))return r}}catch{}return null}class cv{constructor(i){fe(this,"baseUrl");fe(this,"_tokenRefresher",null);fe(this,"_refreshingToken",null);this.baseUrl=(i||sv()).replace(/\/+$/,"")}getBaseUrl(){return this.baseUrl}setBaseUrl(i){this.baseUrl=i.replace(/\/+$/,""),localStorage.setItem("accord_server_url",i)}setTokenRefresher(i){this._tokenRefresher=i}async refreshToken(){return this._tokenRefresher?(this._refreshingToken||(this._refreshingToken=this._tokenRefresher().finally(()=>{this._refreshingToken=null})),this._refreshingToken):null}async request(i,u={},o=!1){const h=`${this.baseUrl}${i}`,m=await fetch(h,{headers:{"Content-Type":"application/json",...u.headers},...u});if(m.status===401&&!o&&this._tokenRefresher){const v=await this.refreshToken();if(v){const b=i.replace(/([?&])token=[^&]*/,`$1token=${encodeURIComponent(v)}`);return this.request(b,u,!0)}}const g=await m.json();if(!m.ok){const v=g;throw new Error(v.error||`HTTP ${m.status}`)}return g}async health(){return this.request("/health")}async register(i,u){return this.request("/register",{method:"POST",body:JSON.stringify({public_key:i,password:u})})}async login(i,u){return this.request("/auth",{method:"POST",body:JSON.stringify({public_key:i,password:u})})}async createNode(i,u,o){const h={name:i,description:o};return this.request(`/nodes?token=${encodeURIComponent(u)}`,{method:"POST",body:JSON.stringify(h)})}async getNodeInfo(i,u){const o=u?`/nodes/${i}?token=${encodeURIComponent(u)}`:`/nodes/${i}`;return this.request(o)}async joinNode(i,u){return this.request(`/nodes/${i}/join?token=${encodeURIComponent(u)}`,{method:"POST"})}async leaveNode(i,u){return this.request(`/nodes/${i}/leave?token=${encodeURIComponent(u)}`,{method:"POST"})}async getUserNodes(i){return this.request(`/nodes?token=${encodeURIComponent(i)}`)}async getNodeChannels(i,u){return this.request(`/nodes/${i}/channels?token=${encodeURIComponent(u)}`)}async getNodeMembers(i,u){const o=await this.request(`/nodes/${i}/members?token=${encodeURIComponent(u)}`);return o&&o.members&&Array.isArray(o.members)?o.members:Array.isArray(o)?o:[]}async getChannelMessages(i,u,o=50,h){let m=`/channels/${i}/messages?limit=${o}&token=${encodeURIComponent(u)}`;return h&&(m+=`&before=${encodeURIComponent(h)}`),this.request(m)}async uploadFile(i,u,o,h,m){const g=new FormData;g.append("file",u),h&&g.append("encrypted_filename",h);const v=new XMLHttpRequest;return new Promise((b,S)=>{v.upload.addEventListener("progress",k=>{k.lengthComputable&&m&&m(k.loaded,k.total)}),v.addEventListener("load",()=>{if(v.status>=200&&v.status<300)try{const k=JSON.parse(v.responseText);b(k)}catch{S(new Error("Invalid JSON response"))}else try{const k=JSON.parse(v.responseText);S(new Error(k.error||`HTTP ${v.status}`))}catch{S(new Error(`Upload failed with status ${v.status}`))}}),v.addEventListener("error",()=>{S(new Error("Upload failed"))}),v.open("POST",`${this.baseUrl}/channels/${i}/files?token=${encodeURIComponent(o)}`),v.send(g)})}async downloadFile(i,u){const o=await fetch(`${this.baseUrl}/files/${i}?token=${encodeURIComponent(u)}`);if(!o.ok){const h=await o.json();throw new Error(h.error||`HTTP ${o.status}`)}return o.arrayBuffer()}async getChannelFiles(i,u){return this.request(`/channels/${i}/files?token=${encodeURIComponent(u)}`)}async deleteFile(i,u){return this.request(`/files/${i}?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async createChannel(i,u,o,h){const m={name:u,channel_type:o};return this.request(`/nodes/${i}/channels?token=${encodeURIComponent(h)}`,{method:"POST",body:JSON.stringify(m)})}async deleteChannel(i,u){return this.request(`/channels/${i}?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async createInvite(i,u){return this.request(`/nodes/${i}/invites?token=${encodeURIComponent(u)}`,{method:"POST"})}async kickMember(i,u,o){return this.request(`/nodes/${i}/members/${u}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async getUserProfile(i,u){const o=u?`/users/${i}/profile?token=${encodeURIComponent(u)}`:`/users/${i}/profile`;return this.request(o)}async updateProfile(i,u){return this.request(`/users/me/profile?token=${encodeURIComponent(u)}`,{method:"PATCH",body:JSON.stringify(i)})}async joinNodeByInvite(i,u){return this.request(`/invites/${i}/join?token=${encodeURIComponent(u)}`,{method:"POST"})}async getNodeInvites(i,u){const o=await this.request(`/nodes/${i}/invites?token=${encodeURIComponent(u)}`);return o&&o.invites&&Array.isArray(o.invites)?o.invites:Array.isArray(o)?o:[]}async createInviteWithOptions(i,u,o,h){const m={};return o!==void 0&&(m.max_uses=o),h!==void 0&&(m.expires_hours=h),this.request(`/nodes/${i}/invites?token=${encodeURIComponent(u)}`,{method:"POST",body:Object.keys(m).length>0?JSON.stringify(m):void 0})}async revokeInvite(i,u,o){return this.request(`/nodes/${i}/invites/${u}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async searchMessages(i,u,o,h){let m=`/nodes/${i}/search?q=${encodeURIComponent(u)}&token=${encodeURIComponent(o)}`;return h&&(m+=`&channel=${encodeURIComponent(h)}`),this.request(m)}async editMessage(i,u,o){return this.request(`/messages/${i}`,{method:"PATCH",body:JSON.stringify({user_id:u,encrypted_data:o})})}async deleteMessage(i,u){return this.request(`/messages/${i}?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async getMessageThread(i,u){return this.request(`/messages/${i}/thread?token=${encodeURIComponent(u)}`)}async getMessageReactions(i,u){return this.request(`/messages/${i}/reactions?token=${encodeURIComponent(u)}`)}async addReaction(i,u,o){return this.request(`/messages/${i}/reactions/${encodeURIComponent(u)}?token=${encodeURIComponent(o)}`,{method:"PUT"})}async removeReaction(i,u,o){return this.request(`/messages/${i}/reactions/${encodeURIComponent(u)}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async pinMessage(i,u){return this.request(`/messages/${i}/pin?token=${encodeURIComponent(u)}`,{method:"PUT"})}async unpinMessage(i,u){return this.request(`/messages/${i}/pin?token=${encodeURIComponent(u)}`,{method:"DELETE"})}async getPinnedMessages(i,u){return this.request(`/channels/${i}/pins?token=${encodeURIComponent(u)}`)}async createDmChannel(i,u){return this.request(`/dm/${i}?token=${encodeURIComponent(u)}`,{method:"POST"})}async getDmChannels(i){return this.request(`/dm?token=${encodeURIComponent(i)}`)}async getNodeAuditLog(i,u,o=50,h){const m=new URLSearchParams({token:u,limit:o.toString()});return h&&m.append("before",h),this.request(`/nodes/${i}/audit-log?${m.toString()}`)}async getRoles(i,u){const o=await this.request(`/nodes/${i}/roles?token=${encodeURIComponent(u)}`);return o&&Array.isArray(o.roles)?o.roles:Array.isArray(o)?o:[]}async createRole(i,u,o){return this.request(`/nodes/${i}/roles?token=${encodeURIComponent(u)}`,{method:"POST",body:JSON.stringify(o)})}async updateRole(i,u,o,h){return this.request(`/nodes/${i}/roles/${u}?token=${encodeURIComponent(o)}`,{method:"PUT",body:JSON.stringify(h)})}async deleteRole(i,u,o){return this.request(`/nodes/${i}/roles/${u}?token=${encodeURIComponent(o)}`,{method:"DELETE"})}async getMemberRoles(i,u,o){const h=await this.request(`/nodes/${i}/members/${u}/roles?token=${encodeURIComponent(o)}`);return h&&Array.isArray(h.roles)?h.roles:Array.isArray(h)?h:[]}async assignMemberRole(i,u,o,h){return this.request(`/nodes/${i}/members/${u}/roles/${o}?token=${encodeURIComponent(h)}`,{method:"PUT"})}async removeMemberRole(i,u,o,h){return this.request(`/nodes/${i}/members/${u}/roles/${o}?token=${encodeURIComponent(h)}`,{method:"DELETE"})}async importDiscordTemplate(i,u,o){return this.request(`/nodes/${i}/import-discord-template?token=${encodeURIComponent(o)}`,{method:"POST",body:JSON.stringify({template_code:u})})}async uploadNodeIcon(i,u,o){const h=new FormData;h.append("icon",u);const m=await fetch(`${this.baseUrl}/nodes/${i}/icon?token=${encodeURIComponent(o)}`,{method:"PUT",body:h});if(!m.ok){const g=await m.json();throw new Error(g.error||`HTTP ${m.status}`)}return m.json()}getNodeIconUrl(i){return`${this.baseUrl}/nodes/${i}/icon`}async uploadUserAvatar(i,u){const o=new FormData;o.append("avatar",i);const h=await fetch(`${this.baseUrl}/users/me/avatar?token=${encodeURIComponent(u)}`,{method:"PUT",body:o});if(!h.ok){const m=await h.json();throw new Error(m.error||`HTTP ${h.status}`)}return h.json()}getUserAvatarUrl(i){return`${this.baseUrl}/users/${i}/avatar`}async testConnection(){try{return await this.health(),!0}catch{return!1}}}function rv(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function uv(r){let i=r.replace(/-/g,"+").replace(/_/g,"/");for(;i.length%4;)i+="=";return atob(i)}function dv(r,i){return`accord://${rv(r)}/${i}`}function sg(r){const i=r.trim(),u=i.match(/^accord:\/\/([A-Za-z0-9_-]+)\/([^/?#]+)$/);if(u)try{const m=uv(u[1]);if(m.includes(".")||m.includes(":"))return{relayHost:m,relayUrl:`http://${m}`,inviteCode:u[2]}}catch{}const o=i.match(/^accord:\/\/([^/]+)\/invite\/([^/?#]+)/);if(o){const m=o[1];return{relayHost:m,relayUrl:`http://${m}`,inviteCode:o[2]}}const h=i.match(/^(https?):\/\/([^/]+)\/invite\/([^/?#]+)/);if(h){const m=h[1],g=h[2];return{relayHost:g,relayUrl:`${m}://${g}`,inviteCode:h[3]}}return null}function fv(r){return localStorage.getItem(`accord_token_${r}`)}function hv(r,i){localStorage.setItem(`accord_token_${r}`,i)}function mv(r){return localStorage.getItem(`accord_user_${r}`)}function pv(r,i){localStorage.setItem(`accord_user_${r}`,i)}const I=new cv;I.createNode.bind(I);I.getNodeInfo.bind(I);I.joinNode.bind(I);I.getUserNodes.bind(I);I.getNodeChannels.bind(I);I.getNodeMembers.bind(I);I.getChannelMessages.bind(I);I.createChannel.bind(I);I.deleteChannel.bind(I);I.createInvite.bind(I);I.kickMember.bind(I);I.getUserProfile.bind(I);I.updateProfile.bind(I);I.joinNodeByInvite.bind(I);I.getNodeInvites.bind(I);I.createInviteWithOptions.bind(I);I.revokeInvite.bind(I);I.testConnection.bind(I);I.searchMessages.bind(I);I.getMessageThread.bind(I);I.createDmChannel.bind(I);I.getDmChannels.bind(I);I.getNodeAuditLog.bind(I);class $s{constructor(i,u){fe(this,"ws",null);fe(this,"token");fe(this,"baseUrl");fe(this,"listeners",new Map);fe(this,"reconnectAttempts",0);fe(this,"maxReconnectAttempts",20);fe(this,"reconnectDelay",1e3);fe(this,"maxReconnectDelay",3e4);fe(this,"reconnectTimeout",null);fe(this,"isConnected",!1);fe(this,"isDestroyed",!1);fe(this,"pingInterval",null);fe(this,"connectionStatus","disconnected");fe(this,"messageQueue",[]);fe(this,"onlineHandler",null);fe(this,"offlineHandler",null);this.token=i;const o=u||typeof window<"u"&&window.__ACCORD_SERVER_URL__||"http://localhost:8080";this.baseUrl=String(o).replace(/^http/,"ws"),typeof window<"u"&&(this.onlineHandler=()=>{!this.isConnected&&!this.isDestroyed&&(this.reconnectAttempts=0,this.connect())},this.offlineHandler=()=>{this.setConnectionStatus("disconnected")},window.addEventListener("online",this.onlineHandler),window.addEventListener("offline",this.offlineHandler))}on(i,u){this.listeners.has(i)||this.listeners.set(i,new Set),this.listeners.get(i).add(u)}off(i,u){const o=this.listeners.get(i);o&&o.delete(u)}emit(i,u){const o=this.listeners.get(i);o&&o.forEach(h=>{try{h(u)}catch(m){console.error(`Error in ${i} listener:`,m)}})}setConnectionStatus(i){this.connectionStatus=i,this.emit("connection_status",{status:i,reconnectAttempt:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts})}getConnectionInfo(){return{status:this.connectionStatus,reconnectAttempt:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts}}retry(){this.isDestroyed=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.connect()}connect(){if(this.isDestroyed||this.ws&&this.ws.readyState===WebSocket.CONNECTING)return;const i=`${this.baseUrl}/ws?token=${encodeURIComponent(this.token)}`;try{this.ws=new WebSocket(i),this.setupEventHandlers()}catch(u){console.error("Failed to create WebSocket connection:",u),this.emit("error",new Error("Failed to create WebSocket connection")),this.scheduleReconnect()}}setupEventHandlers(){this.ws&&(this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.startPingInterval(),this.flushMessageQueue(),this.setConnectionStatus("connected"),this.emit("connected")},this.ws.onmessage=i=>{try{const u=JSON.parse(i.data);if(u.type==="error"&&u.code==="auth_failed"){this.emit("auth_error"),this.isDestroyed=!0;return}this.emit("message",u),u.type&&this.emit(u.type,u)}catch(u){console.error("Error parsing WebSocket message:",u),this.emit("error",new Error("Invalid message format"))}},this.ws.onclose=i=>{if(this.isConnected=!1,this.stopPingInterval(),i.code===4401||i.code===4403){this.setConnectionStatus("disconnected"),this.emit("auth_error"),this.emit("disconnected");return}this.emit("disconnected"),!this.isDestroyed&&i.code!==1e3?(this.setConnectionStatus("reconnecting"),this.scheduleReconnect()):this.setConnectionStatus("disconnected")},this.ws.onerror=i=>{console.error("WebSocket error:",i),this.emit("error",new Error("WebSocket connection error"))})}scheduleReconnect(){if(this.isDestroyed||this.reconnectTimeout)return;if(typeof navigator<"u"&&!navigator.onLine){this.setConnectionStatus("disconnected");return}if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.setConnectionStatus("disconnected"),this.emit("error",new Error("Max reconnection attempts reached"));return}this.reconnectAttempts++;const i=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),this.maxReconnectDelay);this.setConnectionStatus("reconnecting"),this.emit("reconnecting",{attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts}),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,this.connect()},i)}startPingInterval(){this.pingInterval=setInterval(()=>{this.isConnected&&this.ping()},3e4)}stopPingInterval(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}sendMessage(i){if(!this.isConnected||!this.ws){console.warn("WebSocket not connected, cannot send message");return}const u={message_type:i,message_id:this.generateId(),timestamp:Math.floor(Date.now()/1e3)};try{this.ws.send(JSON.stringify(u))}catch(o){console.error("Error sending WebSocket message:",o),this.emit("error",new Error("Failed to send message"))}}send(i){if(!this.isConnected||!this.ws){this.messageQueue.push(i);return}try{this.ws.send(i)}catch(u){console.error("Error sending WebSocket message:",u),this.messageQueue.push(i),this.emit("error",new Error("Failed to send message"))}}flushMessageQueue(){for(;this.messageQueue.length>0&&this.isConnected&&this.ws;){const i=this.messageQueue.shift();try{this.ws.send(i)}catch{this.messageQueue.unshift(i);break}}}getQueuedMessageCount(){return this.messageQueue.length}createNode(i,u){this.sendMessage({CreateNode:{name:i,description:u}})}joinNode(i){this.sendMessage({JoinNode:{node_id:i}})}leaveNode(i){this.sendMessage({LeaveNode:{node_id:i}})}getNodeInfo(i){this.sendMessage({GetNodeInfo:{node_id:i}})}createChannel(i,u){this.sendMessage({CreateChannel:{node_id:i,name:u}})}joinChannel(i){this.sendMessage({JoinChannel:{channel_id:i}})}leaveChannel(i){this.sendMessage({LeaveChannel:{channel_id:i}})}sendDirectMessage(i,u){this.sendMessage({DirectMessage:{to_user:i,encrypted_data:u}})}sendChannelMessage(i,u,o){this.sendMessage({ChannelMessage:{channel_id:i,encrypted_data:u,reply_to:o}})}sendEditMessage(i,u){this.sendMessage({EditMessage:{message_id:i,encrypted_data:u}})}sendDeleteMessage(i){this.sendMessage({DeleteMessage:{message_id:i}})}addReaction(i,u){this.sendMessage({AddReaction:{message_id:i,emoji:u}})}removeReaction(i,u){this.sendMessage({RemoveReaction:{message_id:i,emoji:u}})}pinMessage(i){this.sendMessage({PinMessage:{message_id:i}})}unpinMessage(i){this.sendMessage({UnpinMessage:{message_id:i}})}sendTypingStart(i){this.sendMessage({TypingStart:{channel_id:i}})}ping(){this.sendMessage("Ping")}pong(){this.sendMessage("Pong")}generateId(){var i;return((i=crypto.randomUUID)==null?void 0:i.call(crypto))??"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,u=>{const o=Math.random()*16|0;return(u==="x"?o:o&3|8).toString(16)})}isSocketConnected(){return this.isConnected}disconnect(){this.isDestroyed=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopPingInterval(),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),typeof window<"u"&&(this.onlineHandler&&window.removeEventListener("online",this.onlineHandler),this.offlineHandler&&window.removeEventListener("offline",this.offlineHandler)),this.messageQueue=[],this.listeners.clear()}}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Of(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function nl(r,i=""){if(!Number.isSafeInteger(r)||r<0){const u=i&&`"${i}" `;throw new Error(`${u}expected integer >= 0, got ${r}`)}}function Xt(r,i,u=""){const o=Of(r),h=r==null?void 0:r.length,m=i!==void 0;if(!o||m&&h!==i){const g=u&&`"${u}" `,v=m?` of length ${i}`:"",b=o?`length=${h}`:`type=${typeof r}`;throw new Error(g+"expected Uint8Array"+v+", got "+b)}return r}function Bf(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash must wrapped by utils.createHasher");nl(r.outputLen),nl(r.blockLen)}function du(r,i=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(i&&r.finished)throw new Error("Hash#digest() has already been called")}function gv(r,i){Xt(r,void 0,"digestInto() output");const u=i.outputLen;if(r.length<u)throw new Error('"digestInto() output" expected to be of length >='+u)}function _c(...r){for(let i=0;i<r.length;i++)r[i].fill(0)}function cu(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Pa(r,i){return r<<32-i|r>>>i}const Rg=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",yv=Array.from({length:256},(r,i)=>i.toString(16).padStart(2,"0"));function xu(r){if(Xt(r),Rg)return r.toHex();let i="";for(let u=0;u<r.length;u++)i+=yv[r[u]];return i}const Rl={_0:48,_9:57,A:65,F:70,a:97,f:102};function og(r){if(r>=Rl._0&&r<=Rl._9)return r-Rl._0;if(r>=Rl.A&&r<=Rl.F)return r-(Rl.A-10);if(r>=Rl.a&&r<=Rl.f)return r-(Rl.a-10)}function fu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Rg)return Uint8Array.fromHex(r);const i=r.length,u=i/2;if(i%2)throw new Error("hex string expected, got unpadded hex of length "+i);const o=new Uint8Array(u);for(let h=0,m=0;h<u;h++,m+=2){const g=og(r.charCodeAt(m)),v=og(r.charCodeAt(m+1));if(g===void 0||v===void 0){const b=r[m]+r[m+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+m)}o[h]=g*16+v}return o}function bv(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function cg(r,i=""){return typeof r=="string"?bv(r):Xt(r,void 0,i)}function wi(...r){let i=0;for(let o=0;o<r.length;o++){const h=r[o];Xt(h),i+=h.length}const u=new Uint8Array(i);for(let o=0,h=0;o<r.length;o++){const m=r[o];u.set(m,h),h+=m.length}return u}function vv(r,i){if(i!==void 0&&{}.toString.call(i)!=="[object Object]")throw new Error("options must be object or undefined");return Object.assign(r,i)}function xv(r,i={}){const u=(h,m)=>r(m).update(h).digest(),o=r(void 0);return u.outputLen=o.outputLen,u.blockLen=o.blockLen,u.create=h=>r(h),Object.assign(u,i),Object.freeze(u)}function Mg(r=32){const i=typeof globalThis=="object"?globalThis.crypto:null;if(typeof(i==null?void 0:i.getRandomValues)!="function")throw new Error("crypto.getRandomValues must be defined");return i.getRandomValues(new Uint8Array(r))}const Sv=r=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,r])});function wv(r,i,u){return r&i^~r&u}function _v(r,i,u){return r&i^r&u^i&u}class Nv{constructor(i,u,o,h){fe(this,"blockLen");fe(this,"outputLen");fe(this,"padOffset");fe(this,"isLE");fe(this,"buffer");fe(this,"view");fe(this,"finished",!1);fe(this,"length",0);fe(this,"pos",0);fe(this,"destroyed",!1);this.blockLen=i,this.outputLen=u,this.padOffset=o,this.isLE=h,this.buffer=new Uint8Array(i),this.view=cu(this.buffer)}update(i){du(this),Xt(i);const{view:u,buffer:o,blockLen:h}=this,m=i.length;for(let g=0;g<m;){const v=Math.min(h-this.pos,m-g);if(v===h){const b=cu(i);for(;h<=m-g;g+=h)this.process(b,g);continue}o.set(i.subarray(g,g+v),this.pos),this.pos+=v,g+=v,this.pos===h&&(this.process(u,0),this.pos=0)}return this.length+=i.length,this.roundClean(),this}digestInto(i){du(this),gv(i,this),this.finished=!0;const{buffer:u,view:o,blockLen:h,isLE:m}=this;let{pos:g}=this;u[g++]=128,_c(this.buffer.subarray(g)),this.padOffset>h-g&&(this.process(o,0),g=0);for(let A=g;A<h;A++)u[A]=0;o.setBigUint64(h-8,BigInt(this.length*8),m),this.process(o,0);const v=cu(i),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const S=b/4,k=this.get();if(S>k.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<S;A++)v.setUint32(4*A,k[A],m)}digest(){const{buffer:i,outputLen:u}=this;this.digestInto(i);const o=i.slice(0,u);return this.destroy(),o}_cloneInto(i){i||(i=new this.constructor),i.set(...this.get());const{blockLen:u,buffer:o,length:h,finished:m,destroyed:g,pos:v}=this;return i.destroyed=g,i.finished=m,i.length=h,i.pos=v,h%u&&i.buffer.set(o),i}clone(){return this._cloneInto()}}const bi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jv=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vi=new Uint32Array(64);class Ev extends Nv{constructor(i){super(64,i,8,!1)}get(){const{A:i,B:u,C:o,D:h,E:m,F:g,G:v,H:b}=this;return[i,u,o,h,m,g,v,b]}set(i,u,o,h,m,g,v,b){this.A=i|0,this.B=u|0,this.C=o|0,this.D=h|0,this.E=m|0,this.F=g|0,this.G=v|0,this.H=b|0}process(i,u){for(let A=0;A<16;A++,u+=4)vi[A]=i.getUint32(u,!1);for(let A=16;A<64;A++){const Q=vi[A-15],O=vi[A-2],U=Pa(Q,7)^Pa(Q,18)^Q>>>3,F=Pa(O,17)^Pa(O,19)^O>>>10;vi[A]=F+vi[A-7]+U+vi[A-16]|0}let{A:o,B:h,C:m,D:g,E:v,F:b,G:S,H:k}=this;for(let A=0;A<64;A++){const Q=Pa(v,6)^Pa(v,11)^Pa(v,25),O=k+Q+wv(v,b,S)+jv[A]+vi[A]|0,F=(Pa(o,2)^Pa(o,13)^Pa(o,22))+_v(o,h,m)|0;k=S,S=b,b=v,v=g+O|0,g=m,m=h,h=o,o=O+F|0}o=o+this.A|0,h=h+this.B|0,m=m+this.C|0,g=g+this.D|0,v=v+this.E|0,b=b+this.F|0,S=S+this.G|0,k=k+this.H|0,this.set(o,h,m,g,v,b,S,k)}roundClean(){_c(vi)}destroy(){this.set(0,0,0,0,0,0,0,0),_c(this.buffer)}}class Cv extends Ev{constructor(){super(32);fe(this,"A",bi[0]|0);fe(this,"B",bi[1]|0);fe(this,"C",bi[2]|0);fe(this,"D",bi[3]|0);fe(this,"E",bi[4]|0);fe(this,"F",bi[5]|0);fe(this,"G",bi[6]|0);fe(this,"H",bi[7]|0)}}const eo=xv(()=>new Cv,Sv(1));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lf=BigInt(0),Af=BigInt(1);function hu(r,i=""){if(typeof r!="boolean"){const u=i&&`"${i}" `;throw new Error(u+"expected boolean, got type="+typeof r)}return r}function Dg(r){if(typeof r=="bigint"){if(!ru(r))throw new Error("positive bigint expected, got "+r)}else nl(r);return r}function Wr(r){const i=Dg(r).toString(16);return i.length&1?"0"+i:i}function Ug(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Lf:BigInt("0x"+r)}function Su(r){return Ug(xu(r))}function zg(r){return Ug(xu(Tv(Xt(r)).reverse()))}function Hf(r,i){nl(i),r=Dg(r);const u=fu(r.toString(16).padStart(i*2,"0"));if(u.length!==i)throw new Error("number too large");return u}function Og(r,i){return Hf(r,i).reverse()}function Tv(r){return Uint8Array.from(r)}const ru=r=>typeof r=="bigint"&&Lf<=r;function Av(r,i,u){return ru(r)&&ru(i)&&ru(u)&&i<=r&&r<u}function kv(r,i,u,o){if(!Av(i,u,o))throw new Error("expected valid "+r+": "+u+" <= n < "+o+", got "+i)}function Rv(r){let i;for(i=0;r>Lf;r>>=Af,i+=1);return i}const qf=r=>(Af<<BigInt(r))-Af;function Mv(r,i,u){if(nl(r,"hashLen"),nl(i,"qByteLen"),typeof u!="function")throw new Error("hmacFn must be a function");const o=te=>new Uint8Array(te),h=Uint8Array.of(),m=Uint8Array.of(0),g=Uint8Array.of(1),v=1e3;let b=o(r),S=o(r),k=0;const A=()=>{b.fill(1),S.fill(0),k=0},Q=(...te)=>u(S,wi(b,...te)),O=(te=h)=>{S=Q(m,te),b=Q(),te.length!==0&&(S=Q(g,te),b=Q())},U=()=>{if(k++>=v)throw new Error("drbg: tried max amount of iterations");let te=0;const re=[];for(;te<i;){b=Q();const ye=b.slice();re.push(ye),te+=b.length}return wi(...re)};return(te,re)=>{A(),O(te);let ye;for(;!(ye=re(U()));)O();return A(),ye}}function Kf(r,i={},u={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function o(m,g,v){const b=r[m];if(v&&b===void 0)return;const S=typeof b;if(S!==g||b===null)throw new Error(`param "${m}" is invalid: expected ${g}, got ${S}`)}const h=(m,g)=>Object.entries(m).forEach(([v,b])=>o(v,b,g));h(i,!1),h(u,!0)}function rg(r){const i=new WeakMap;return(u,...o)=>{const h=i.get(u);if(h!==void 0)return h;const m=r(u,...o);return i.set(u,m),m}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ra=BigInt(0),qn=BigInt(1),ts=BigInt(2),Bg=BigInt(3),Lg=BigInt(4),Hg=BigInt(5),Dv=BigInt(7),qg=BigInt(8),Uv=BigInt(9),Kg=BigInt(16);function Ba(r,i){const u=r%i;return u>=ra?u:i+u}function ug(r,i){if(r===ra)throw new Error("invert: expected non-zero number");if(i<=ra)throw new Error("invert: expected positive modulus, got "+i);let u=Ba(r,i),o=i,h=ra,m=qn;for(;u!==ra;){const v=o/u,b=o%u,S=h-m*v;o=u,u=b,h=m,m=S}if(o!==qn)throw new Error("invert: does not exist");return Ba(h,i)}function Yf(r,i,u){if(!r.eql(r.sqr(i),u))throw new Error("Cannot find square root")}function Yg(r,i){const u=(r.ORDER+qn)/Lg,o=r.pow(i,u);return Yf(r,o,i),o}function zv(r,i){const u=(r.ORDER-Hg)/qg,o=r.mul(i,ts),h=r.pow(o,u),m=r.mul(i,h),g=r.mul(r.mul(m,ts),h),v=r.mul(m,r.sub(g,r.ONE));return Yf(r,v,i),v}function Ov(r){const i=Gf(r),u=Gg(r),o=u(i,i.neg(i.ONE)),h=u(i,o),m=u(i,i.neg(o)),g=(r+Dv)/Kg;return(v,b)=>{let S=v.pow(b,g),k=v.mul(S,o);const A=v.mul(S,h),Q=v.mul(S,m),O=v.eql(v.sqr(k),b),U=v.eql(v.sqr(A),b);S=v.cmov(S,k,O),k=v.cmov(Q,A,U);const F=v.eql(v.sqr(k),b),te=v.cmov(S,k,F);return Yf(v,te,b),te}}function Gg(r){if(r<Bg)throw new Error("sqrt is not defined for small field");let i=r-qn,u=0;for(;i%ts===ra;)i/=ts,u++;let o=ts;const h=Gf(r);for(;dg(h,o)===1;)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(u===1)return Yg;let m=h.pow(o,i);const g=(i+qn)/ts;return function(b,S){if(b.is0(S))return S;if(dg(b,S)!==1)throw new Error("Cannot find square root");let k=u,A=b.mul(b.ONE,m),Q=b.pow(S,i),O=b.pow(S,g);for(;!b.eql(Q,b.ONE);){if(b.is0(Q))return b.ZERO;let U=1,F=b.sqr(Q);for(;!b.eql(F,b.ONE);)if(U++,F=b.sqr(F),U===k)throw new Error("Cannot find square root");const te=qn<<BigInt(k-U-1),re=b.pow(A,te);k=U,A=b.sqr(re),Q=b.mul(Q,A),O=b.mul(O,re)}return O}}function Bv(r){return r%Lg===Bg?Yg:r%qg===Hg?zv:r%Kg===Uv?Ov(r):Gg(r)}const Lv=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hv(r){const i={ORDER:"bigint",BYTES:"number",BITS:"number"},u=Lv.reduce((o,h)=>(o[h]="function",o),i);return Kf(r,u),r}function qv(r,i,u){if(u<ra)throw new Error("invalid exponent, negatives unsupported");if(u===ra)return r.ONE;if(u===qn)return i;let o=r.ONE,h=i;for(;u>ra;)u&qn&&(o=r.mul(o,h)),h=r.sqr(h),u>>=qn;return o}function Vg(r,i,u=!1){const o=new Array(i.length).fill(u?r.ZERO:void 0),h=i.reduce((g,v,b)=>r.is0(v)?g:(o[b]=g,r.mul(g,v)),r.ONE),m=r.inv(h);return i.reduceRight((g,v,b)=>r.is0(v)?g:(o[b]=r.mul(g,o[b]),r.mul(g,v)),m),o}function dg(r,i){const u=(r.ORDER-qn)/ts,o=r.pow(i,u),h=r.eql(o,r.ONE),m=r.eql(o,r.ZERO),g=r.eql(o,r.neg(r.ONE));if(!h&&!m&&!g)throw new Error("invalid Legendre symbol result");return h?1:m?0:-1}function Kv(r,i){i!==void 0&&nl(i);const u=i!==void 0?i:r.toString(2).length,o=Math.ceil(u/8);return{nBitLength:u,nByteLength:o}}class Yv{constructor(i,u={}){fe(this,"ORDER");fe(this,"BITS");fe(this,"BYTES");fe(this,"isLE");fe(this,"ZERO",ra);fe(this,"ONE",qn);fe(this,"_lengths");fe(this,"_sqrt");fe(this,"_mod");var g;if(i<=ra)throw new Error("invalid field: expected ORDER > 0, got "+i);let o;this.isLE=!1,u!=null&&typeof u=="object"&&(typeof u.BITS=="number"&&(o=u.BITS),typeof u.sqrt=="function"&&(this.sqrt=u.sqrt),typeof u.isLE=="boolean"&&(this.isLE=u.isLE),u.allowedLengths&&(this._lengths=(g=u.allowedLengths)==null?void 0:g.slice()),typeof u.modFromBytes=="boolean"&&(this._mod=u.modFromBytes));const{nBitLength:h,nByteLength:m}=Kv(i,o);if(m>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=i,this.BITS=h,this.BYTES=m,this._sqrt=void 0,Object.preventExtensions(this)}create(i){return Ba(i,this.ORDER)}isValid(i){if(typeof i!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof i);return ra<=i&&i<this.ORDER}is0(i){return i===ra}isValidNot0(i){return!this.is0(i)&&this.isValid(i)}isOdd(i){return(i&qn)===qn}neg(i){return Ba(-i,this.ORDER)}eql(i,u){return i===u}sqr(i){return Ba(i*i,this.ORDER)}add(i,u){return Ba(i+u,this.ORDER)}sub(i,u){return Ba(i-u,this.ORDER)}mul(i,u){return Ba(i*u,this.ORDER)}pow(i,u){return qv(this,i,u)}div(i,u){return Ba(i*ug(u,this.ORDER),this.ORDER)}sqrN(i){return i*i}addN(i,u){return i+u}subN(i,u){return i-u}mulN(i,u){return i*u}inv(i){return ug(i,this.ORDER)}sqrt(i){return this._sqrt||(this._sqrt=Bv(this.ORDER)),this._sqrt(this,i)}toBytes(i){return this.isLE?Og(i,this.BYTES):Hf(i,this.BYTES)}fromBytes(i,u=!1){Xt(i);const{_lengths:o,BYTES:h,isLE:m,ORDER:g,_mod:v}=this;if(o){if(!o.includes(i.length)||i.length>h)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+i.length);const S=new Uint8Array(h);S.set(i,m?0:S.length-i.length),i=S}if(i.length!==h)throw new Error("Field.fromBytes: expected "+h+" bytes, got "+i.length);let b=m?zg(i):Su(i);if(v&&(b=Ba(b,g)),!u&&!this.isValid(b))throw new Error("invalid field element: outside of range 0..ORDER");return b}invertBatch(i){return Vg(this,i)}cmov(i,u,o){return o?u:i}}function Gf(r,i={}){return new Yv(r,i)}function Zg(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const i=r.toString(2).length;return Math.ceil(i/8)}function Xg(r){const i=Zg(r);return i+Math.ceil(i/2)}function Gv(r,i,u=!1){Xt(r);const o=r.length,h=Zg(i),m=Xg(i);if(o<16||o<m||o>1024)throw new Error("expected "+m+"-1024 bytes of input, got "+o);const g=u?zg(r):Su(r),v=Ba(g,i-qn)+qn;return u?Og(v,h):Hf(v,h)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ps=BigInt(0),ns=BigInt(1);function mu(r,i){const u=i.negate();return r?u:i}function fg(r,i){const u=Vg(r.Fp,i.map(o=>o.Z));return i.map((o,h)=>r.fromAffine(o.toAffine(u[h])))}function Ig(r,i){if(!Number.isSafeInteger(r)||r<=0||r>i)throw new Error("invalid window size, expected [1.."+i+"], got W="+r)}function vf(r,i){Ig(r,i);const u=Math.ceil(i/r)+1,o=2**(r-1),h=2**r,m=qf(r),g=BigInt(r);return{windows:u,windowSize:o,mask:m,maxNumber:h,shiftBy:g}}function hg(r,i,u){const{windowSize:o,mask:h,maxNumber:m,shiftBy:g}=u;let v=Number(r&h),b=r>>g;v>o&&(v-=m,b+=ns);const S=i*o,k=S+Math.abs(v)-1,A=v===0,Q=v<0,O=i%2!==0;return{nextN:b,offset:k,isZero:A,isNeg:Q,isNegF:O,offsetF:S}}const xf=new WeakMap,Qg=new WeakMap;function Sf(r){return Qg.get(r)||1}function mg(r){if(r!==Ps)throw new Error("invalid wNAF")}class Vv{constructor(i,u){fe(this,"BASE");fe(this,"ZERO");fe(this,"Fn");fe(this,"bits");this.BASE=i.BASE,this.ZERO=i.ZERO,this.Fn=i.Fn,this.bits=u}_unsafeLadder(i,u,o=this.ZERO){let h=i;for(;u>Ps;)u&ns&&(o=o.add(h)),h=h.double(),u>>=ns;return o}precomputeWindow(i,u){const{windows:o,windowSize:h}=vf(u,this.bits),m=[];let g=i,v=g;for(let b=0;b<o;b++){v=g,m.push(v);for(let S=1;S<h;S++)v=v.add(g),m.push(v);g=v.double()}return m}wNAF(i,u,o){if(!this.Fn.isValid(o))throw new Error("invalid scalar");let h=this.ZERO,m=this.BASE;const g=vf(i,this.bits);for(let v=0;v<g.windows;v++){const{nextN:b,offset:S,isZero:k,isNeg:A,isNegF:Q,offsetF:O}=hg(o,v,g);o=b,k?m=m.add(mu(Q,u[O])):h=h.add(mu(A,u[S]))}return mg(o),{p:h,f:m}}wNAFUnsafe(i,u,o,h=this.ZERO){const m=vf(i,this.bits);for(let g=0;g<m.windows&&o!==Ps;g++){const{nextN:v,offset:b,isZero:S,isNeg:k}=hg(o,g,m);if(o=v,!S){const A=u[b];h=h.add(k?A.negate():A)}}return mg(o),h}getPrecomputes(i,u,o){let h=xf.get(u);return h||(h=this.precomputeWindow(u,i),i!==1&&(typeof o=="function"&&(h=o(h)),xf.set(u,h))),h}cached(i,u,o){const h=Sf(i);return this.wNAF(h,this.getPrecomputes(h,i,o),u)}unsafe(i,u,o,h){const m=Sf(i);return m===1?this._unsafeLadder(i,u,h):this.wNAFUnsafe(m,this.getPrecomputes(m,i,o),u,h)}createCache(i,u){Ig(u,this.bits),Qg.set(i,u),xf.delete(i)}hasCache(i){return Sf(i)!==1}}function Zv(r,i,u,o){let h=i,m=r.ZERO,g=r.ZERO;for(;u>Ps||o>Ps;)u&ns&&(m=m.add(h)),o&ns&&(g=g.add(h)),h=h.double(),u>>=ns,o>>=ns;return{p1:m,p2:g}}function pg(r,i,u){if(i){if(i.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Hv(i),i}else return Gf(r,{isLE:u})}function Xv(r,i,u={},o){if(o===void 0&&(o=r==="edwards"),!i||typeof i!="object")throw new Error(`expected valid ${r} CURVE object`);for(const b of["p","n","h"]){const S=i[b];if(!(typeof S=="bigint"&&S>Ps))throw new Error(`CURVE.${b} must be positive bigint`)}const h=pg(i.p,u.Fp,o),m=pg(i.n,u.Fn,o),v=["Gx","Gy","a","b"];for(const b of v)if(!h.isValid(i[b]))throw new Error(`CURVE.${b} must be valid field element of CURVE.Fp`);return i=Object.freeze(Object.assign({},i)),{CURVE:i,Fp:h,Fn:m}}function Iv(r,i){return function(o){const h=r(o);return{secretKey:h,publicKey:i(h)}}}class $g{constructor(i,u){fe(this,"oHash");fe(this,"iHash");fe(this,"blockLen");fe(this,"outputLen");fe(this,"finished",!1);fe(this,"destroyed",!1);if(Bf(i),Xt(u,void 0,"key"),this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,h=new Uint8Array(o);h.set(u.length>o?i.create().update(u).digest():u);for(let m=0;m<h.length;m++)h[m]^=54;this.iHash.update(h),this.oHash=i.create();for(let m=0;m<h.length;m++)h[m]^=106;this.oHash.update(h),_c(h)}update(i){return du(this),this.iHash.update(i),this}digestInto(i){du(this),Xt(i,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:u,iHash:o,finished:h,destroyed:m,blockLen:g,outputLen:v}=this;return i=i,i.finished=h,i.destroyed=m,i.blockLen=g,i.outputLen=v,i.oHash=u._cloneInto(i.oHash),i.iHash=o._cloneInto(i.iHash),i}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vf=(r,i,u)=>new $g(r,i).update(u).digest();Vf.create=(r,i)=>new $g(r,i);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gg=(r,i)=>(r+(r>=0?i:-i)/Jg)/i;function Qv(r,i,u){const[[o,h],[m,g]]=i,v=gg(g*r,u),b=gg(-h*r,u);let S=r-v*o-b*m,k=-v*h-b*g;const A=S<Dl,Q=k<Dl;A&&(S=-S),Q&&(k=-k);const O=qf(Math.ceil(Rv(u)/2))+Fs;if(S<Dl||S>=O||k<Dl||k>=O)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:A,k1:S,k2neg:Q,k2:k}}function kf(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function wf(r,i){const u={};for(let o of Object.keys(i))u[o]=r[o]===void 0?i[o]:r[o];return hu(u.lowS,"lowS"),hu(u.prehash,"prehash"),u.format!==void 0&&kf(u.format),u}class $v extends Error{constructor(i=""){super(i)}}const Si={Err:$v,_tlv:{encode:(r,i)=>{const{Err:u}=Si;if(r<0||r>256)throw new u("tlv.encode: wrong tag");if(i.length&1)throw new u("tlv.encode: unpadded data");const o=i.length/2,h=Wr(o);if(h.length/2&128)throw new u("tlv.encode: long form length too big");const m=o>127?Wr(h.length/2|128):"";return Wr(r)+m+h+i},decode(r,i){const{Err:u}=Si;let o=0;if(r<0||r>256)throw new u("tlv.encode: wrong tag");if(i.length<2||i[o++]!==r)throw new u("tlv.decode: wrong tlv");const h=i[o++],m=!!(h&128);let g=0;if(!m)g=h;else{const b=h&127;if(!b)throw new u("tlv.decode(long): indefinite length not supported");if(b>4)throw new u("tlv.decode(long): byte length is too big");const S=i.subarray(o,o+b);if(S.length!==b)throw new u("tlv.decode: length bytes not complete");if(S[0]===0)throw new u("tlv.decode(long): zero leftmost byte");for(const k of S)g=g<<8|k;if(o+=b,g<128)throw new u("tlv.decode(long): not minimal encoding")}const v=i.subarray(o,o+g);if(v.length!==g)throw new u("tlv.decode: wrong value length");return{v,l:i.subarray(o+g)}}},_int:{encode(r){const{Err:i}=Si;if(r<Dl)throw new i("integer: negative integers are not allowed");let u=Wr(r);if(Number.parseInt(u[0],16)&8&&(u="00"+u),u.length&1)throw new i("unexpected DER parsing assertion: unpadded hex");return u},decode(r){const{Err:i}=Si;if(r[0]&128)throw new i("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new i("invalid signature integer: unnecessary leading zero");return Su(r)}},toSig(r){const{Err:i,_int:u,_tlv:o}=Si,h=Xt(r,void 0,"signature"),{v:m,l:g}=o.decode(48,h);if(g.length)throw new i("invalid signature: left bytes after parsing");const{v,l:b}=o.decode(2,m),{v:S,l:k}=o.decode(2,b);if(k.length)throw new i("invalid signature: left bytes after parsing");return{r:u.decode(v),s:u.decode(S)}},hexFromSig(r){const{_tlv:i,_int:u}=Si,o=i.encode(2,u.encode(r.r)),h=i.encode(2,u.encode(r.s)),m=o+h;return i.encode(48,m)}},Dl=BigInt(0),Fs=BigInt(1),Jg=BigInt(2),Pr=BigInt(3),Jv=BigInt(4);function Fv(r,i={}){const u=Xv("weierstrass",r,i),{Fp:o,Fn:h}=u;let m=u.CURVE;const{h:g,n:v}=m;Kf(i,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:b}=i;if(b&&(!o.is0(m.a)||typeof b.beta!="bigint"||!Array.isArray(b.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const S=Wg(o,h);function k(){if(!o.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function A(se,V,z){const{x:j,y:G}=V.toAffine(),X=o.toBytes(j);if(hu(z,"isCompressed"),z){k();const le=!o.isOdd(G);return wi(Fg(le),X)}else return wi(Uint8Array.of(4),X,o.toBytes(G))}function Q(se){Xt(se,void 0,"Point");const{publicKey:V,publicKeyUncompressed:z}=S,j=se.length,G=se[0],X=se.subarray(1);if(j===V&&(G===2||G===3)){const le=o.fromBytes(X);if(!o.isValid(le))throw new Error("bad point: is not on curve, wrong x");const oe=F(le);let w;try{w=o.sqrt(oe)}catch(ie){const ee=ie instanceof Error?": "+ie.message:"";throw new Error("bad point: is not on curve, sqrt error"+ee)}k();const D=o.isOdd(w);return(G&1)===1!==D&&(w=o.neg(w)),{x:le,y:w}}else if(j===z&&G===4){const le=o.BYTES,oe=o.fromBytes(X.subarray(0,le)),w=o.fromBytes(X.subarray(le,le*2));if(!te(oe,w))throw new Error("bad point: is not on curve");return{x:oe,y:w}}else throw new Error(`bad point: got length ${j}, expected compressed=${V} or uncompressed=${z}`)}const O=i.toBytes||A,U=i.fromBytes||Q;function F(se){const V=o.sqr(se),z=o.mul(V,se);return o.add(o.add(z,o.mul(se,m.a)),m.b)}function te(se,V){const z=o.sqr(V),j=F(se);return o.eql(z,j)}if(!te(m.Gx,m.Gy))throw new Error("bad curve params: generator point");const re=o.mul(o.pow(m.a,Pr),Jv),ye=o.mul(o.sqr(m.b),BigInt(27));if(o.is0(o.add(re,ye)))throw new Error("bad curve params: a or b");function me(se,V,z=!1){if(!o.isValid(V)||z&&o.is0(V))throw new Error(`bad point coordinate ${se}`);return V}function he(se){if(!(se instanceof de))throw new Error("Weierstrass Point expected")}function De(se){if(!b||!b.basises)throw new Error("no endo");return Qv(se,b.basises,h.ORDER)}const Xe=rg((se,V)=>{const{X:z,Y:j,Z:G}=se;if(o.eql(G,o.ONE))return{x:z,y:j};const X=se.is0();V==null&&(V=X?o.ONE:o.inv(G));const le=o.mul(z,V),oe=o.mul(j,V),w=o.mul(G,V);if(X)return{x:o.ZERO,y:o.ZERO};if(!o.eql(w,o.ONE))throw new Error("invZ was invalid");return{x:le,y:oe}}),Ae=rg(se=>{if(se.is0()){if(i.allowInfinityPoint&&!o.is0(se.Y))return;throw new Error("bad point: ZERO")}const{x:V,y:z}=se.toAffine();if(!o.isValid(V)||!o.isValid(z))throw new Error("bad point: x or y not field elements");if(!te(V,z))throw new Error("bad point: equation left != right");if(!se.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function we(se,V,z,j,G){return z=new de(o.mul(z.X,se),z.Y,z.Z),V=mu(j,V),z=mu(G,z),V.add(z)}const be=class be{constructor(V,z,j){fe(this,"X");fe(this,"Y");fe(this,"Z");this.X=me("x",V),this.Y=me("y",z,!0),this.Z=me("z",j),Object.freeze(this)}static CURVE(){return m}static fromAffine(V){const{x:z,y:j}=V||{};if(!V||!o.isValid(z)||!o.isValid(j))throw new Error("invalid affine point");if(V instanceof be)throw new Error("projective point not allowed");return o.is0(z)&&o.is0(j)?be.ZERO:new be(z,j,o.ONE)}static fromBytes(V){const z=be.fromAffine(U(Xt(V,void 0,"point")));return z.assertValidity(),z}static fromHex(V){return be.fromBytes(fu(V))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(V=8,z=!0){return Te.createCache(this,V),z||this.multiply(Pr),this}assertValidity(){Ae(this)}hasEvenY(){const{y:V}=this.toAffine();if(!o.isOdd)throw new Error("Field doesn't support isOdd");return!o.isOdd(V)}equals(V){he(V);const{X:z,Y:j,Z:G}=this,{X,Y:le,Z:oe}=V,w=o.eql(o.mul(z,oe),o.mul(X,G)),D=o.eql(o.mul(j,oe),o.mul(le,G));return w&&D}negate(){return new be(this.X,o.neg(this.Y),this.Z)}double(){const{a:V,b:z}=m,j=o.mul(z,Pr),{X:G,Y:X,Z:le}=this;let oe=o.ZERO,w=o.ZERO,D=o.ZERO,K=o.mul(G,G),ie=o.mul(X,X),ee=o.mul(le,le),ue=o.mul(G,X);return ue=o.add(ue,ue),D=o.mul(G,le),D=o.add(D,D),oe=o.mul(V,D),w=o.mul(j,ee),w=o.add(oe,w),oe=o.sub(ie,w),w=o.add(ie,w),w=o.mul(oe,w),oe=o.mul(ue,oe),D=o.mul(j,D),ee=o.mul(V,ee),ue=o.sub(K,ee),ue=o.mul(V,ue),ue=o.add(ue,D),D=o.add(K,K),K=o.add(D,K),K=o.add(K,ee),K=o.mul(K,ue),w=o.add(w,K),ee=o.mul(X,le),ee=o.add(ee,ee),K=o.mul(ee,ue),oe=o.sub(oe,K),D=o.mul(ee,ie),D=o.add(D,D),D=o.add(D,D),new be(oe,w,D)}add(V){he(V);const{X:z,Y:j,Z:G}=this,{X,Y:le,Z:oe}=V;let w=o.ZERO,D=o.ZERO,K=o.ZERO;const ie=m.a,ee=o.mul(m.b,Pr);let ue=o.mul(z,X),_e=o.mul(j,le),Ye=o.mul(G,oe),Re=o.add(z,j),qe=o.add(X,le);Re=o.mul(Re,qe),qe=o.add(ue,_e),Re=o.sub(Re,qe),qe=o.add(z,G);let ot=o.add(X,oe);return qe=o.mul(qe,ot),ot=o.add(ue,Ye),qe=o.sub(qe,ot),ot=o.add(j,G),w=o.add(le,oe),ot=o.mul(ot,w),w=o.add(_e,Ye),ot=o.sub(ot,w),K=o.mul(ie,qe),w=o.mul(ee,Ye),K=o.add(w,K),w=o.sub(_e,K),K=o.add(_e,K),D=o.mul(w,K),_e=o.add(ue,ue),_e=o.add(_e,ue),Ye=o.mul(ie,Ye),qe=o.mul(ee,qe),_e=o.add(_e,Ye),Ye=o.sub(ue,Ye),Ye=o.mul(ie,Ye),qe=o.add(qe,Ye),ue=o.mul(_e,qe),D=o.add(D,ue),ue=o.mul(ot,qe),w=o.mul(Re,w),w=o.sub(w,ue),ue=o.mul(Re,_e),K=o.mul(ot,K),K=o.add(K,ue),new be(w,D,K)}subtract(V){return this.add(V.negate())}is0(){return this.equals(be.ZERO)}multiply(V){const{endo:z}=i;if(!h.isValidNot0(V))throw new Error("invalid scalar: out of range");let j,G;const X=le=>Te.cached(this,le,oe=>fg(be,oe));if(z){const{k1neg:le,k1:oe,k2neg:w,k2:D}=De(V),{p:K,f:ie}=X(oe),{p:ee,f:ue}=X(D);G=ie.add(ue),j=we(z.beta,K,ee,le,w)}else{const{p:le,f:oe}=X(V);j=le,G=oe}return fg(be,[j,G])[0]}multiplyUnsafe(V){const{endo:z}=i,j=this;if(!h.isValid(V))throw new Error("invalid scalar: out of range");if(V===Dl||j.is0())return be.ZERO;if(V===Fs)return j;if(Te.hasCache(this))return this.multiply(V);if(z){const{k1neg:G,k1:X,k2neg:le,k2:oe}=De(V),{p1:w,p2:D}=Zv(be,j,X,oe);return we(z.beta,w,D,G,le)}else return Te.unsafe(j,V)}toAffine(V){return Xe(this,V)}isTorsionFree(){const{isTorsionFree:V}=i;return g===Fs?!0:V?V(be,this):Te.unsafe(this,v).is0()}clearCofactor(){const{clearCofactor:V}=i;return g===Fs?this:V?V(be,this):this.multiplyUnsafe(g)}isSmallOrder(){return this.multiplyUnsafe(g).is0()}toBytes(V=!0){return hu(V,"isCompressed"),this.assertValidity(),O(be,this,V)}toHex(V=!0){return xu(this.toBytes(V))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}};fe(be,"BASE",new be(m.Gx,m.Gy,o.ONE)),fe(be,"ZERO",new be(o.ZERO,o.ONE,o.ZERO)),fe(be,"Fp",o),fe(be,"Fn",h);let de=be;const Oe=h.BITS,Te=new Vv(de,i.endo?Math.ceil(Oe/2):Oe);return de.BASE.precompute(8),de}function Fg(r){return Uint8Array.of(r?2:3)}function Wg(r,i){return{secretKey:i.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*i.BYTES}}function Wv(r,i={}){const{Fn:u}=r,o=i.randomBytes||Mg,h=Object.assign(Wg(r.Fp,u),{seed:Xg(u.ORDER)});function m(O){try{const U=u.fromBytes(O);return u.isValidNot0(U)}catch{return!1}}function g(O,U){const{publicKey:F,publicKeyUncompressed:te}=h;try{const re=O.length;return U===!0&&re!==F||U===!1&&re!==te?!1:!!r.fromBytes(O)}catch{return!1}}function v(O=o(h.seed)){return Gv(Xt(O,h.seed,"seed"),u.ORDER)}function b(O,U=!0){return r.BASE.multiply(u.fromBytes(O)).toBytes(U)}function S(O){const{secretKey:U,publicKey:F,publicKeyUncompressed:te}=h;if(!Of(O)||"_lengths"in u&&u._lengths||U===F)return;const re=Xt(O,void 0,"key").length;return re===F||re===te}function k(O,U,F=!0){if(S(O)===!0)throw new Error("first arg must be private key");if(S(U)===!1)throw new Error("second arg must be public key");const te=u.fromBytes(O);return r.fromBytes(U).multiply(te).toBytes(F)}const A={isValidSecretKey:m,isValidPublicKey:g,randomSecretKey:v},Q=Iv(v,b);return Object.freeze({getPublicKey:b,getSharedSecret:k,keygen:Q,Point:r,utils:A,lengths:h})}function Pv(r,i,u={}){Bf(i),Kf(u,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),u=Object.assign({},u);const o=u.randomBytes||Mg,h=u.hmac||((V,z)=>Vf(i,V,z)),{Fp:m,Fn:g}=r,{ORDER:v,BITS:b}=g,{keygen:S,getPublicKey:k,getSharedSecret:A,utils:Q,lengths:O}=Wv(r,u),U={prehash:!0,lowS:typeof u.lowS=="boolean"?u.lowS:!0,format:"compact",extraEntropy:!1},F=v*Jg<m.ORDER;function te(V){const z=v>>Fs;return V>z}function re(V,z){if(!g.isValidNot0(z))throw new Error(`invalid signature ${V}: out of range 1..Point.Fn.ORDER`);return z}function ye(){if(F)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function me(V,z){kf(z);const j=O.signature,G=z==="compact"?j:z==="recovered"?j+1:void 0;return Xt(V,G)}class he{constructor(z,j,G){fe(this,"r");fe(this,"s");fe(this,"recovery");if(this.r=re("r",z),this.s=re("s",j),G!=null){if(ye(),![0,1,2,3].includes(G))throw new Error("invalid recovery id");this.recovery=G}Object.freeze(this)}static fromBytes(z,j=U.format){me(z,j);let G;if(j==="der"){const{r:w,s:D}=Si.toSig(Xt(z));return new he(w,D)}j==="recovered"&&(G=z[0],j="compact",z=z.subarray(1));const X=O.signature/2,le=z.subarray(0,X),oe=z.subarray(X,X*2);return new he(g.fromBytes(le),g.fromBytes(oe),G)}static fromHex(z,j){return this.fromBytes(fu(z),j)}assertRecovery(){const{recovery:z}=this;if(z==null)throw new Error("invalid recovery id: must be present");return z}addRecoveryBit(z){return new he(this.r,this.s,z)}recoverPublicKey(z){const{r:j,s:G}=this,X=this.assertRecovery(),le=X===2||X===3?j+v:j;if(!m.isValid(le))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const oe=m.toBytes(le),w=r.fromBytes(wi(Fg((X&1)===0),oe)),D=g.inv(le),K=Xe(Xt(z,void 0,"msgHash")),ie=g.create(-K*D),ee=g.create(G*D),ue=r.BASE.multiplyUnsafe(ie).add(w.multiplyUnsafe(ee));if(ue.is0())throw new Error("invalid recovery: point at infinify");return ue.assertValidity(),ue}hasHighS(){return te(this.s)}toBytes(z=U.format){if(kf(z),z==="der")return fu(Si.hexFromSig(this));const{r:j,s:G}=this,X=g.toBytes(j),le=g.toBytes(G);return z==="recovered"?(ye(),wi(Uint8Array.of(this.assertRecovery()),X,le)):wi(X,le)}toHex(z){return xu(this.toBytes(z))}}const De=u.bits2int||function(z){if(z.length>8192)throw new Error("input is too large");const j=Su(z),G=z.length*8-b;return G>0?j>>BigInt(G):j},Xe=u.bits2int_modN||function(z){return g.create(De(z))},Ae=qf(b);function we(V){return kv("num < 2^"+b,V,Dl,Ae),g.toBytes(V)}function de(V,z){return Xt(V,void 0,"message"),z?Xt(i(V),void 0,"prehashed message"):V}function Oe(V,z,j){const{lowS:G,prehash:X,extraEntropy:le}=wf(j,U);V=de(V,X);const oe=Xe(V),w=g.fromBytes(z);if(!g.isValidNot0(w))throw new Error("invalid private key");const D=[we(w),we(oe)];if(le!=null&&le!==!1){const ue=le===!0?o(O.secretKey):le;D.push(Xt(ue,void 0,"extraEntropy"))}const K=wi(...D),ie=oe;function ee(ue){const _e=De(ue);if(!g.isValidNot0(_e))return;const Ye=g.inv(_e),Re=r.BASE.multiply(_e).toAffine(),qe=g.create(Re.x);if(qe===Dl)return;const ot=g.create(Ye*g.create(ie+qe*w));if(ot===Dl)return;let It=(Re.x===qe?0:2)|Number(Re.y&Fs),Mt=ot;return G&&te(ot)&&(Mt=g.neg(ot),It^=1),new he(qe,Mt,F?void 0:It)}return{seed:K,k2sig:ee}}function Te(V,z,j={}){const{seed:G,k2sig:X}=Oe(V,z,j);return Mv(i.outputLen,g.BYTES,h)(G,X).toBytes(j.format)}function be(V,z,j,G={}){const{lowS:X,prehash:le,format:oe}=wf(G,U);if(j=Xt(j,void 0,"publicKey"),z=de(z,le),!Of(V)){const w=V instanceof he?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+w)}me(V,oe);try{const w=he.fromBytes(V,oe),D=r.fromBytes(j);if(X&&w.hasHighS())return!1;const{r:K,s:ie}=w,ee=Xe(z),ue=g.inv(ie),_e=g.create(ee*ue),Ye=g.create(K*ue),Re=r.BASE.multiplyUnsafe(_e).add(D.multiplyUnsafe(Ye));return Re.is0()?!1:g.create(Re.x)===K}catch{return!1}}function se(V,z,j={}){const{prehash:G}=wf(j,U);return z=de(z,G),he.fromBytes(V,"recovered").recoverPublicKey(z).toBytes()}return Object.freeze({keygen:S,getPublicKey:k,getSharedSecret:A,utils:Q,lengths:O,Point:r,sign:Te,verify:be,recoverPublicKey:se,Signature:he,hash:i})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ex={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},tx=Fv(ex),Cc=Pv(tx,eo);function nx(r,i,u,o){Bf(r);const h=vv({dkLen:32,asyncTick:10},o),{c:m,dkLen:g,asyncTick:v}=h;if(nl(m,"c"),nl(g,"dkLen"),nl(v,"asyncTick"),m<1)throw new Error("iterations (c) must be >= 1");const b=cg(i,"password"),S=cg(u,"salt"),k=new Uint8Array(g),A=Vf.create(r,b),Q=A._cloneInto().update(S);return{c:m,dkLen:g,asyncTick:v,DK:k,PRF:A,PRFSalt:Q}}function ax(r,i,u,o,h){return r.destroy(),i.destroy(),o&&o.destroy(),_c(h),u}function lx(r,i,u,o){const{c:h,dkLen:m,DK:g,PRF:v,PRFSalt:b}=nx(r,i,u,o);let S;const k=new Uint8Array(4),A=cu(k),Q=new Uint8Array(v.outputLen);for(let O=1,U=0;U<m;O++,U+=v.outputLen){const F=g.subarray(U,U+v.outputLen);A.setInt32(0,O,!1),(S=b._cloneInto(S)).update(k).digestInto(Q),F.set(Q.subarray(0,F.length));for(let te=1;te<h;te++){v._cloneInto(S).update(Q).digestInto(Q);for(let re=0;re<F.length;re++)F[re]^=Q[re]}}return ax(v,b,g,S,Q)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function ix(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Fn(r,i,u=""){const o=ix(r),h=r==null?void 0:r.length,m=i!==void 0;if(!o||m&&h!==i){const g=u&&`"${u}" `,v=m?` of length ${i}`:"",b=o?`length=${h}`:`type=${typeof r}`;throw new Error(g+"expected Uint8Array"+v+", got "+b)}return r}function pu(r,i=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(i&&r.finished)throw new Error("Hash#digest() has already been called")}function Pg(r,i){Fn(r,void 0,"output");const u=i.outputLen;if(r.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}function sx(r){return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function Ul(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function zl(...r){for(let i=0;i<r.length;i++)r[i].fill(0)}function wu(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}const ox=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cx(r,i){if(r.length!==i.length)return!1;let u=0;for(let o=0;o<r.length;o++)u|=r[o]^i[o];return u===0}const rx=(r,i)=>{function u(o,...h){if(Fn(o,void 0,"key"),!ox)throw new Error("Non little-endian hardware is not yet supported");if(r.nonceLength!==void 0){const k=h[0];Fn(k,r.varSizeNonce?void 0:r.nonceLength,"nonce")}const m=r.tagLength;m&&h[1]!==void 0&&Fn(h[1],void 0,"AAD");const g=i(o,...h),v=(k,A)=>{if(A!==void 0){if(k!==2)throw new Error("cipher output not supported");Fn(A,void 0,"output")}};let b=!1;return{encrypt(k,A){if(b)throw new Error("cannot encrypt() twice with same key + nonce");return b=!0,Fn(k),v(g.encrypt.length,A),g.encrypt(k,A)},decrypt(k,A){if(Fn(k),m&&k.length<m)throw new Error('"ciphertext" expected length bigger than tagLength='+m);return v(g.decrypt.length,A),g.decrypt(k,A)}}}return Object.assign(u,r),u};function ux(r,i,u=!0){if(i===void 0)return new Uint8Array(r);if(i.length!==r)throw new Error('"output" expected Uint8Array of length '+r+", got: "+i.length);if(u&&!gu(i))throw new Error("invalid output, must be aligned");return i}function dx(r,i,u){const o=new Uint8Array(16),h=wu(o);return h.setBigUint64(0,BigInt(i),u),h.setBigUint64(8,BigInt(r),u),o}function gu(r){return r.byteOffset%4===0}function as(r){return Uint8Array.from(r)}const Ml=16,Zf=new Uint8Array(16),tl=Ul(Zf),fx=225,hx=(r,i,u,o)=>{const h=o&1;return{s3:u<<31|o>>>1,s2:i<<31|u>>>1,s1:r<<31|i>>>1,s0:r>>>1^fx<<24&-(h&1)}},wa=r=>(r>>>0&255)<<24|(r>>>8&255)<<16|(r>>>16&255)<<8|r>>>24&255|0;function mx(r){r.reverse();const i=r[15]&1;let u=0;for(let o=0;o<r.length;o++){const h=r[o];r[o]=h>>>1|u,u=(h&1)<<7}return r[0]^=-i&225,r}const px=r=>r>64*1024?8:r>1024?4:2;class ey{constructor(i,u){fe(this,"blockLen",Ml);fe(this,"outputLen",Ml);fe(this,"s0",0);fe(this,"s1",0);fe(this,"s2",0);fe(this,"s3",0);fe(this,"finished",!1);fe(this,"t");fe(this,"W");fe(this,"windowSize");Fn(i,16,"key"),i=as(i);const o=wu(i);let h=o.getUint32(0,!1),m=o.getUint32(4,!1),g=o.getUint32(8,!1),v=o.getUint32(12,!1);const b=[];for(let U=0;U<128;U++)b.push({s0:wa(h),s1:wa(m),s2:wa(g),s3:wa(v)}),{s0:h,s1:m,s2:g,s3:v}=hx(h,m,g,v);const S=px(u||1024);if(![1,2,4,8].includes(S))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=S;const A=128/S,Q=this.windowSize=2**S,O=[];for(let U=0;U<A;U++)for(let F=0;F<Q;F++){let te=0,re=0,ye=0,me=0;for(let he=0;he<S;he++){if(!(F>>>S-he-1&1))continue;const{s0:Xe,s1:Ae,s2:we,s3:de}=b[S*U+he];te^=Xe,re^=Ae,ye^=we,me^=de}O.push({s0:te,s1:re,s2:ye,s3:me})}this.t=O}_updateBlock(i,u,o,h){i^=this.s0,u^=this.s1,o^=this.s2,h^=this.s3;const{W:m,t:g,windowSize:v}=this;let b=0,S=0,k=0,A=0;const Q=(1<<m)-1;let O=0;for(const U of[i,u,o,h])for(let F=0;F<4;F++){const te=U>>>8*F&255;for(let re=8/m-1;re>=0;re--){const ye=te>>>m*re&Q,{s0:me,s1:he,s2:De,s3:Xe}=g[O*v+ye];b^=me,S^=he,k^=De,A^=Xe,O+=1}}this.s0=b,this.s1=S,this.s2=k,this.s3=A}update(i){pu(this),Fn(i),i=as(i);const u=Ul(i),o=Math.floor(i.length/Ml),h=i.length%Ml;for(let m=0;m<o;m++)this._updateBlock(u[m*4+0],u[m*4+1],u[m*4+2],u[m*4+3]);return h&&(Zf.set(i.subarray(o*Ml)),this._updateBlock(tl[0],tl[1],tl[2],tl[3]),zl(tl)),this}destroy(){const{t:i}=this;for(const u of i)u.s0=0,u.s1=0,u.s2=0,u.s3=0}digestInto(i){pu(this),Pg(i,this),this.finished=!0;const{s0:u,s1:o,s2:h,s3:m}=this,g=Ul(i);return g[0]=u,g[1]=o,g[2]=h,g[3]=m,i}digest(){const i=new Uint8Array(Ml);return this.digestInto(i),this.destroy(),i}}class gx extends ey{constructor(i,u){Fn(i);const o=mx(as(i));super(o,u),zl(o)}update(i){pu(this),Fn(i),i=as(i);const u=Ul(i),o=i.length%Ml,h=Math.floor(i.length/Ml);for(let m=0;m<h;m++)this._updateBlock(wa(u[m*4+3]),wa(u[m*4+2]),wa(u[m*4+1]),wa(u[m*4+0]));return o&&(Zf.set(i.subarray(h*Ml)),this._updateBlock(wa(tl[3]),wa(tl[2]),wa(tl[1]),wa(tl[0])),zl(tl)),this}digestInto(i){pu(this),Pg(i,this),this.finished=!0;const{s0:u,s1:o,s2:h,s3:m}=this,g=Ul(i);return g[0]=u,g[1]=o,g[2]=h,g[3]=m,i.reverse()}}function ty(r){const i=(o,h)=>r(h,o.length).update(o).digest(),u=r(new Uint8Array(16),0);return i.outputLen=u.outputLen,i.blockLen=u.blockLen,i.create=(o,h)=>r(o,h),i}const yg=ty((r,i)=>new ey(r,i));ty((r,i)=>new gx(r,i));const Rf=16,yx=4,eu=new Uint8Array(Rf),bx=283;function vx(r){if(![16,24,32].includes(r.length))throw new Error('"aes key" expected Uint8Array of length 16/24/32, got length='+r.length)}function Xf(r){return r<<1^bx&-(r>>7)}function bg(r,i){let u=0;for(;i>0;i>>=1)u^=r&-(i&1),r=Xf(r);return u}const xx=(()=>{const r=new Uint8Array(256);for(let u=0,o=1;u<256;u++,o^=Xf(o))r[u]=o;const i=new Uint8Array(256);i[0]=99;for(let u=0;u<255;u++){let o=r[255-u];o|=o<<8,i[r[u]]=(o^o>>4^o>>5^o>>6^o>>7^99)&255}return zl(r),i})(),Sx=r=>r<<24|r>>>8,_f=r=>r<<8|r>>>24;function wx(r,i){if(r.length!==256)throw new Error("Wrong sbox length");const u=new Uint32Array(256).map((S,k)=>i(r[k])),o=u.map(_f),h=o.map(_f),m=h.map(_f),g=new Uint32Array(256*256),v=new Uint32Array(256*256),b=new Uint16Array(256*256);for(let S=0;S<256;S++)for(let k=0;k<256;k++){const A=S*256+k;g[A]=u[S]^o[k],v[A]=h[S]^m[k],b[A]=r[S]<<8|r[k]}return{sbox:r,sbox2:b,T0:u,T1:o,T2:h,T3:m,T01:g,T23:v}}const ny=wx(xx,r=>bg(r,3)<<24|r<<16|r<<8|bg(r,2)),_x=(()=>{const r=new Uint8Array(16);for(let i=0,u=1;i<16;i++,u=Xf(u))r[i]=u;return r})();function Nx(r){Fn(r);const i=r.length;vx(r);const{sbox2:u}=ny,o=[];gu(r)||o.push(r=as(r));const h=Ul(r),m=h.length,g=b=>wc(u,b,b,b,b),v=new Uint32Array(i+28);v.set(h);for(let b=m;b<v.length;b++){let S=v[b-1];b%m===0?S=g(Sx(S))^_x[b/m-1]:m>6&&b%m===4&&(S=g(S)),v[b]=v[b-m]^S}return zl(...o),v}function tu(r,i,u,o,h,m){return r[u<<8&65280|o>>>8&255]^i[h>>>8&65280|m>>>24&255]}function wc(r,i,u,o,h){return r[i&255|u&65280]|r[o>>>16&255|h>>>16&65280]<<16}function vg(r,i,u,o,h){const{sbox2:m,T01:g,T23:v}=ny;let b=0;i^=r[b++],u^=r[b++],o^=r[b++],h^=r[b++];const S=r.length/4-2;for(let U=0;U<S;U++){const F=r[b++]^tu(g,v,i,u,o,h),te=r[b++]^tu(g,v,u,o,h,i),re=r[b++]^tu(g,v,o,h,i,u),ye=r[b++]^tu(g,v,h,i,u,o);i=F,u=te,o=re,h=ye}const k=r[b++]^wc(m,i,u,o,h),A=r[b++]^wc(m,u,o,h,i),Q=r[b++]^wc(m,o,h,i,u),O=r[b++]^wc(m,h,i,u,o);return{s0:k,s1:A,s2:Q,s3:O}}function nu(r,i,u,o,h){Fn(u,Rf,"nonce"),Fn(o),h=ux(o.length,h);const m=u,g=Ul(m),v=wu(m),b=Ul(o),S=Ul(h),k=i?0:12,A=o.length;let Q=v.getUint32(k,i),{s0:O,s1:U,s2:F,s3:te}=vg(r,g[0],g[1],g[2],g[3]);for(let ye=0;ye+4<=b.length;ye+=4)S[ye+0]=b[ye+0]^O,S[ye+1]=b[ye+1]^U,S[ye+2]=b[ye+2]^F,S[ye+3]=b[ye+3]^te,Q=Q+1>>>0,v.setUint32(k,Q,i),{s0:O,s1:U,s2:F,s3:te}=vg(r,g[0],g[1],g[2],g[3]);const re=Rf*Math.floor(b.length/yx);if(re<A){const ye=new Uint32Array([O,U,F,te]),me=sx(ye);for(let he=re,De=0;he<A;he++,De++)h[he]=o[he]^me[De];zl(ye)}return h}function jx(r,i,u,o,h){const m=h?h.length:0,g=r.create(u,o.length+m);h&&g.update(h);const v=dx(8*o.length,8*m,i);g.update(o),g.update(v);const b=g.digest();return zl(v),b}const to=rx({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(i,u,o){if(u.length<8)throw new Error("aes/gcm: invalid nonce length");const h=16;function m(v,b,S){const k=jx(yg,!1,v,S,o);for(let A=0;A<b.length;A++)k[A]^=b[A];return k}function g(){const v=Nx(i),b=eu.slice(),S=eu.slice();if(nu(v,!1,S,S,b),u.length===12)S.set(u);else{const A=eu.slice();wu(A).setBigUint64(8,BigInt(u.length*8),!1);const O=yg.create(b).update(u).update(A);O.digestInto(S),O.destroy()}const k=nu(v,!1,S,eu);return{xk:v,authKey:b,counter:S,tagMask:k}}return{encrypt(v){const{xk:b,authKey:S,counter:k,tagMask:A}=g(),Q=new Uint8Array(v.length+h),O=[b,S,k,A];gu(v)||O.push(v=as(v)),nu(b,!1,k,v,Q.subarray(0,v.length));const U=m(S,A,Q.subarray(0,Q.length-h));return O.push(U),Q.set(U,v.length),zl(...O),Q},decrypt(v){const{xk:b,authKey:S,counter:k,tagMask:A}=g(),Q=[b,S,A,k];gu(v)||Q.push(v=as(v));const O=v.subarray(0,-h),U=v.subarray(-h),F=m(S,A,O);if(Q.push(F),!cx(F,U))throw new Error("aes/gcm: invalid ghash tag");const te=nu(b,!1,k,O);return zl(...Q),te}}}),ay=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];function Nc(r){const i=new Uint8Array(r);return crypto.getRandomValues(i),i}function Ex(r){const i=r?`_${r.slice(0,16)}`:"";return{PRIVATE_KEY:`accord_private_key${i}`,PUBLIC_KEY:`accord_public_key${i}`,CHANNEL_KEYS:`accord_channel_keys${i}`}}let ly;function za(r){ly=r}function Tc(r){return Ex(r||ly)}const Ol={PRIVATE_KEY:"accord_private_key",PUBLIC_KEY:"accord_public_key",CHANNEL_KEYS:"accord_channel_keys"},jc={name:"ECDH",namedCurve:"P-256"},Cx={name:"AES-GCM",length:256},Wn=typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u";function Tx(){return!0}async function xi(r){const i=new TextEncoder().encode(r);if(Wn){const o=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(h=>h.toString(16).padStart(2,"0")).join("")}const u=eo(i);return Array.from(u).map(o=>o.toString(16).padStart(2,"0")).join("")}function ls(r){const i=String.fromCharCode.apply(null,Array.from(new Uint8Array(r)));return btoa(i)}function Ec(r){const i=atob(r),u=new ArrayBuffer(i.length),o=new Uint8Array(u);for(let h=0;h<i.length;h++)o[h]=i.charCodeAt(h);return u}function If(r){return ls(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength))}function Ax(r){return new Uint8Array(Ec(r))}async function iy(r,i){const u=new TextEncoder,o=await window.crypto.subtle.importKey("raw",u.encode(r),"PBKDF2",!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function sy(r,i){const u=new TextEncoder;return lx(eo,u.encode(r),i,{c:1e5,dkLen:32})}async function oy(r,i){const u=Nc(16),o=Nc(12);if(Wn){const b=await iy(i,u),S=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},b,r),k=new Uint8Array(u.length+o.length+S.byteLength);return k.set(u,0),k.set(o,u.length),k.set(new Uint8Array(S),u.length+o.length),ls(k.buffer)}const h=sy(i,u),g=to(h,o).encrypt(new Uint8Array(r)),v=new Uint8Array(u.length+o.length+g.length);return v.set(u,0),v.set(o,u.length),v.set(g,u.length+o.length),If(v)}async function cy(r,i){const u=new Uint8Array(Ec(r)),o=u.slice(0,16),h=u.slice(16,28),m=u.slice(28);if(Wn){const S=await iy(i,o);return window.crypto.subtle.decrypt({name:"AES-GCM",iv:h},S,m)}const g=sy(i,o),b=to(g,h).decrypt(m);return b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength)}function ry(){return`accord-key-wrap:${localStorage.getItem("accord_token")||""}`}async function Nf(){return Wn?await window.crypto.subtle.generateKey(jc,!0,["deriveKey","deriveBits"]):kx()}function kx(){const r=Nc(32),i=Cc.getPublicKey(r,!1),u=_u(i),o=Nu(r,i);return{privateKey:{_nobleRaw:r,_noblePkcs8:o},publicKey:{_nobleRaw:i,_nobleSpki:u},_privateKeyRaw:r,_publicKeyRaw:u}}const Ws=new Uint8Array([48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7]);function _u(r){const i=new Uint8Array(3+r.length);i[0]=3,i[1]=1+r.length,i[2]=0,i.set(r,3);const u=Ws.length+i.length,o=new Uint8Array(2+u);return o[0]=48,o[1]=u,o.set(Ws,2),o.set(i,2+Ws.length),o}function Nu(r,i){const u=Rx(r,i),o=new Uint8Array([2,1,0]),h=new Uint8Array(2+u.length);h[0]=4,h[1]=u.length,h.set(u,2);const m=o.length+Ws.length+h.length,g=new Uint8Array(2+m);g[0]=48,g[1]=m;let v=2;return g.set(o,v),v+=o.length,g.set(Ws,v),v+=Ws.length,g.set(h,v),g}function Rx(r,i){const u=new Uint8Array([2,1,1]),o=new Uint8Array([4,32,...r]),h=new Uint8Array([3,1+i.length,0,...i]),m=new Uint8Array([161,h.length,...h]),g=u.length+o.length+m.length,v=new Uint8Array(2+g);v[0]=48,v[1]=g;let b=2;return v.set(u,b),b+=u.length,v.set(o,b),b+=o.length,v.set(m,b),v}function Qf(r){for(let i=0;i<r.length-33;i++)if(r[i]===4&&r[i+1]===32){const u=r.slice(i+2,i+34);try{return Cc.getPublicKey(u,!1),u}catch{continue}}throw new Error("Could not extract P-256 private key from PKCS8")}async function es(r){if(Wn&&!r._nobleSpki){const u=await window.crypto.subtle.exportKey("spki",r);return ls(u)}const i=r._nobleSpki;if(!i)throw new Error("Cannot export noble public key: missing SPKI data");return If(i)}async function au(r,i){let u,o;if(Wn&&!r.privateKey._nobleRaw)u=await window.crypto.subtle.exportKey("pkcs8",r.privateKey),o=await window.crypto.subtle.exportKey("spki",r.publicKey);else{const v=r.privateKey._noblePkcs8,b=r.publicKey._nobleSpki;u=v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength),o=b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength)}const h=ry(),m=await oy(u,h),g=Tc(i);localStorage.setItem(g.PRIVATE_KEY,m),localStorage.setItem(g.PUBLIC_KEY,ls(o))}async function lu(r){try{const i=Tc(r);let u=localStorage.getItem(i.PRIVATE_KEY),o=localStorage.getItem(i.PUBLIC_KEY);if((!u||!o)&&(u=localStorage.getItem(Ol.PRIVATE_KEY),o=localStorage.getItem(Ol.PUBLIC_KEY)),!u||!o)return null;let h;try{const k=ry();h=await cy(u,k)}catch{h=Ec(u)}const m=Ec(o);if(Wn){const k=await window.crypto.subtle.importKey("pkcs8",h,jc,!0,["deriveKey","deriveBits"]),A=await window.crypto.subtle.importKey("spki",m,jc,!0,[]);return{privateKey:k,publicKey:A}}const g=Qf(new Uint8Array(h)),v=Cc.getPublicKey(g,!1),b=_u(v),S=Nu(g,v);return{privateKey:{_nobleRaw:g,_noblePkcs8:S},publicKey:{_nobleRaw:v,_nobleSpki:b}}}catch(i){return console.warn("Failed to load keys from storage (may be password-encrypted):",i),null}}async function Mx(r){const i=new TextEncoder,u=localStorage.getItem("accord_token")||"",o=localStorage.getItem(Ol.PRIVATE_KEY)||"",h=`${r}:${u}:${o.slice(0,32)}`,m=i.encode(h);if(Wn){const g=await window.crypto.subtle.digest("SHA-256",m);return window.crypto.subtle.importKey("raw",g,Cx,!1,["encrypt","decrypt"])}return eo(m)}async function Dx(r,i){return Mx(i)}const uu=new Map;async function _a(r,i){if(uu.has(i))return uu.get(i);const u=await Dx(r,i);return uu.set(i,u),u}function Ux(){uu.clear()}async function yu(r,i){const u=new TextEncoder().encode(i),o=Nc(12);if(Wn&&r instanceof CryptoKey){const b=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},r,u),S=new Uint8Array(o.length+b.byteLength);return S.set(o),S.set(new Uint8Array(b),o.length),ls(S.buffer)}const h=r instanceof Uint8Array?r:new Uint8Array(0),g=to(h,o).encrypt(u),v=new Uint8Array(o.length+g.length);return v.set(o),v.set(g,o.length),If(v)}async function bu(r,i){const u=Ax(i),o=u.slice(0,12),h=u.slice(12);if(Wn&&r instanceof CryptoKey){const b=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:o},r,h);return new TextDecoder().decode(b)}const m=r instanceof Uint8Array?r:new Uint8Array(0),v=to(m,o).decrypt(h);return new TextDecoder().decode(v)}async function uy(r,i){const u=Nc(12);if(Wn&&r instanceof CryptoKey){const v=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:u},r,i),b=new Uint8Array(u.length+v.byteLength);return b.set(u),b.set(new Uint8Array(v),u.length),b.buffer}const o=r instanceof Uint8Array?r:new Uint8Array(0),m=to(o,u).encrypt(new Uint8Array(i)),g=new Uint8Array(u.length+m.length);return g.set(u),g.set(m,u.length),g.buffer.slice(g.byteOffset,g.byteOffset+g.byteLength)}async function Mf(r,i){const u=new Uint8Array(i),o=u.slice(0,12),h=u.slice(12);if(Wn&&r instanceof CryptoKey)return window.crypto.subtle.decrypt({name:"AES-GCM",iv:o},r,h);const m=r instanceof Uint8Array?r:new Uint8Array(0),v=to(m,o).decrypt(h);return v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength)}async function dy(r,i){return yu(r,i)}async function Df(r,i){return bu(r,i)}function zx(r){if(r.length!==32)throw new Error("Expected 32 bytes of entropy");const u=eo(r)[0];let o="";for(const m of r)o+=m.toString(2).padStart(8,"0");o+=u.toString(2).padStart(8,"0");const h=[];for(let m=0;m<24;m++){const g=parseInt(o.slice(m*11,(m+1)*11),2);h.push(ay[g])}return h.join(" ")}function Ox(r){const i=r.trim().toLowerCase().split(/\s+/);if(i.length!==24)throw new Error("Expected 24 words");let u="";for(const b of i){const S=ay.indexOf(b);if(S===-1)throw new Error(`Unknown word: "${b}"`);u+=S.toString(2).padStart(11,"0")}const o=u.slice(0,256),h=u.slice(256,264),m=new Uint8Array(32);for(let b=0;b<32;b++)m[b]=parseInt(o.slice(b*8,(b+1)*8),2);const v=eo(m)[0].toString(2).padStart(8,"0");if(h!==v)throw new Error("Invalid mnemonic checksum");return m}async function Bx(r){if(r.privateKey._nobleRaw)return r.privateKey._nobleRaw;const i=await window.crypto.subtle.exportKey("pkcs8",r.privateKey);return Qf(new Uint8Array(i))}async function xg(r){const i=await Bx(r);return zx(i)}function Lx(r){const i=Ox(r),u=Cc.getPublicKey(i,!1),o=_u(u),h=Nu(i,u);return{privateKey:{_nobleRaw:i,_noblePkcs8:h},publicKey:{_nobleRaw:u,_nobleSpki:o}}}async function iu(r,i,u){let o,h;if(Wn&&!r.privateKey._nobleRaw)o=await window.crypto.subtle.exportKey("pkcs8",r.privateKey),h=await window.crypto.subtle.exportKey("spki",r.publicKey);else{const b=r.privateKey._noblePkcs8,S=r.publicKey._nobleSpki;o=b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength),h=S.buffer.slice(S.byteOffset,S.byteOffset+S.byteLength)}const m=`accord-key-wrap:${i}`,g=await oy(o,m),v=Tc(u);localStorage.setItem(v.PRIVATE_KEY,g),localStorage.setItem(v.PUBLIC_KEY,ls(h)),localStorage.setItem(Ol.PRIVATE_KEY,g),localStorage.setItem(Ol.PUBLIC_KEY,ls(h))}async function Uf(r,i){const u=Tc(i);let o=localStorage.getItem(u.PRIVATE_KEY),h=localStorage.getItem(u.PUBLIC_KEY);(!o||!h)&&(o=localStorage.getItem(Ol.PRIVATE_KEY),h=localStorage.getItem(Ol.PUBLIC_KEY));try{if(!o||!h)return null;const m=`accord-key-wrap:${r}`,g=await cy(o,m),v=Ec(h);if(Wn){const Q=await window.crypto.subtle.importKey("pkcs8",g,jc,!0,["deriveKey","deriveBits"]),O=await window.crypto.subtle.importKey("spki",v,jc,!0,[]);return{privateKey:Q,publicKey:O}}const b=Qf(new Uint8Array(g)),S=Cc.getPublicKey(b,!1),k=_u(S),A=Nu(b,S);return{privateKey:{_nobleRaw:b,_noblePkcs8:A},publicKey:{_nobleRaw:S,_nobleSpki:k}}}catch{return null}}function Sg(r){const i=Tc(r);return!!localStorage.getItem(i.PUBLIC_KEY)||!!localStorage.getItem(Ol.PUBLIC_KEY)}function jf(){return localStorage.getItem(Ol.PUBLIC_KEY)}const $f="accord_token",Jf="accord_token_expiry",Hx=1440*60*1e3;function Js(r,i=Hx){const u=Date.now()+i;localStorage.setItem($f,r),localStorage.setItem(Jf,u.toString())}function qx(){const r=localStorage.getItem($f),i=localStorage.getItem(Jf);if(!r)return null;if(i){const u=parseInt(i,10);if(Date.now()>u)return fy(),null}return r}function fy(){localStorage.removeItem($f),localStorage.removeItem(Jf)}const Kx=({channelId:r,token:i,keyPair:u,encryptionEnabled:o})=>{const h=x.useRef(null),[m,g]=x.useState({isUploading:!1,progress:null,fileName:""}),v=()=>{var k;(k=h.current)==null||k.click()},b=x.useCallback(async k=>{g({isUploading:!0,progress:{loaded:0,total:k.size,percentage:0},fileName:k.name});try{let A=k,Q;if(o&&u)try{const O=await _a(u.privateKey,r),U=await k.arrayBuffer(),F=await uy(O,U);Q=await dy(O,k.name),A=new File([F],"encrypted_file",{type:"application/octet-stream"})}catch(O){console.warn("Failed to encrypt file, uploading plaintext:",O)}await I.uploadFile(r,A,i,Q,(O,U)=>{const F=Math.round(O/U*100);g(te=>({...te,progress:{loaded:O,total:U,percentage:F}}))}),g({isUploading:!1,progress:null,fileName:""}),h.current&&(h.current.value="")}catch(A){console.error("File upload failed:",A),alert(`File upload failed: ${A instanceof Error?A.message:"Unknown error"}`),g({isUploading:!1,progress:null,fileName:""})}},[r,i,u,o]),S=async k=>{var Q;const A=(Q=k.target.files)==null?void 0:Q[0];A&&await b(A)};return l.jsxs("div",{className:"file-upload-wrapper",children:[l.jsx("input",{ref:h,type:"file",onChange:S,style:{display:"none"},disabled:m.isUploading}),l.jsx("button",{onClick:v,disabled:m.isUploading,className:"file-upload-btn",title:"Attach file",children:""}),m.isUploading&&m.progress&&l.jsxs("div",{className:"file-upload-progress",children:[l.jsxs("div",{className:"file-upload-progress-name",children:["Uploading ",m.fileName]}),l.jsx("div",{className:"file-upload-progress-bar-track",children:l.jsx("div",{className:"file-upload-progress-bar-fill",style:{width:`${m.progress.percentage}%`}})}),l.jsxs("div",{className:"file-upload-progress-text",children:[m.progress.percentage,"% (",vu(m.progress.loaded)," / ",vu(m.progress.total),")"]})]})]})},Yx=({channelId:r,token:i,keyPair:u,encryptionEnabled:o,children:h})=>{const[m,g]=x.useState(!1),[v,b]=x.useState({isUploading:!1,progress:null,fileName:""}),S=x.useRef(0),k=x.useCallback(U=>{U.preventDefault(),U.stopPropagation(),S.current++,U.dataTransfer.items&&U.dataTransfer.items.length>0&&g(!0)},[]),A=x.useCallback(U=>{U.preventDefault(),U.stopPropagation(),S.current--,S.current===0&&g(!1)},[]),Q=x.useCallback(U=>{U.preventDefault(),U.stopPropagation()},[]),O=x.useCallback(async U=>{U.preventDefault(),U.stopPropagation(),g(!1),S.current=0;const F=U.dataTransfer.files;if(!F||F.length===0)return;const te=F[0];b({isUploading:!0,progress:{loaded:0,total:te.size,percentage:0},fileName:te.name});try{let re=te,ye;if(o&&u)try{const me=await _a(u.privateKey,r),he=await te.arrayBuffer(),De=await uy(me,he);ye=await dy(me,te.name),re=new File([De],"encrypted_file",{type:"application/octet-stream"})}catch(me){console.warn("Failed to encrypt file, uploading plaintext:",me)}await I.uploadFile(r,re,i,ye,(me,he)=>{const De=Math.round(me/he*100);b(Xe=>({...Xe,progress:{loaded:me,total:he,percentage:De}}))}),b({isUploading:!1,progress:null,fileName:""})}catch(re){console.error("File upload failed:",re),alert(`File upload failed: ${re instanceof Error?re.message:"Unknown error"}`),b({isUploading:!1,progress:null,fileName:""})}},[r,i,u,o]);return l.jsxs("div",{className:"file-drop-zone",onDragEnter:k,onDragLeave:A,onDragOver:Q,onDrop:O,children:[h,m&&l.jsx("div",{className:"file-drop-overlay",children:l.jsxs("div",{className:"file-drop-overlay-content",children:[l.jsx("span",{className:"file-drop-icon",children:""}),l.jsx("span",{children:"Drop file to upload"})]})}),v.isUploading&&v.progress&&l.jsxs("div",{className:"file-drop-upload-toast",children:[l.jsxs("div",{className:"file-upload-progress-name",children:["Uploading ",v.fileName]}),l.jsx("div",{className:"file-upload-progress-bar-track",children:l.jsx("div",{className:"file-upload-progress-bar-fill",style:{width:`${v.progress.percentage}%`}})}),l.jsxs("div",{className:"file-upload-progress-text",children:[v.progress.percentage,"%"]})]})]})},Gx=({file:r,token:i,channelId:u,keyPair:o,encryptionEnabled:h})=>{const[m,g]=x.useState(r.encrypted_filename),[v,b]=x.useState(null),[S,k]=x.useState(!1);x.useEffect(()=>{let O=!1;return(async()=>{let F=r.encrypted_filename;if(h&&o)try{const te=await _a(o.privateKey,u);F=await Df(te,r.encrypted_filename)}catch{}if(!O&&(g(F),Zx(F)))try{const te=await I.downloadFile(r.id,i);let re=te;if(h&&o)try{const ye=await _a(o.privateKey,u);re=await Mf(ye,te)}catch{}if(!O){const ye=new Blob([re]);b(URL.createObjectURL(ye))}}catch{}})(),()=>{O=!0}},[r.id,r.encrypted_filename,u,i,o,h]),x.useEffect(()=>()=>{v&&URL.revokeObjectURL(v)},[v]);const A=async()=>{k(!0);try{const O=await I.downloadFile(r.id,i);let U=O,F=m;if(h&&o)try{const me=await _a(o.privateKey,u);U=await Mf(me,O),F=await Df(me,r.encrypted_filename)}catch{}const te=new Blob([U]),re=URL.createObjectURL(te),ye=document.createElement("a");ye.href=re,ye.download=F,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(re)}catch(O){console.error("Download failed:",O),alert(`Download failed: ${O instanceof Error?O.message:"Unknown error"}`)}finally{k(!1)}},Q=hy(m);return l.jsxs("div",{className:"file-attachment",children:[v&&l.jsx("div",{className:"file-attachment-image-preview",children:l.jsx("img",{src:v,alt:m,onClick:A})}),l.jsxs("div",{className:"file-attachment-info",children:[l.jsx("span",{className:"file-attachment-icon",children:Q}),l.jsxs("div",{className:"file-attachment-details",children:[l.jsx("span",{className:"file-attachment-name",title:m,children:m}),l.jsx("span",{className:"file-attachment-size",children:vu(r.file_size_bytes)})]}),l.jsx("button",{className:"file-attachment-download",onClick:A,disabled:S,title:"Download",children:S?"":""})]})]})},Vx=({channelId:r,token:i,keyPair:u,encryptionEnabled:o})=>{const[h,m]=x.useState([]),[g,v]=x.useState(!1),[b,S]=x.useState(!1),k=x.useCallback(async()=>{if(b){v(!0);try{const U=await I.getChannelFiles(r,i);m(U)}catch(U){console.error("Failed to load files:",U)}finally{v(!1)}}},[r,i,b]);x.useEffect(()=>{k()},[k]);const A=async U=>{try{const F=await I.downloadFile(U.id,i);let te=F,re=U.encrypted_filename;if(o&&u)try{const De=await _a(u.privateKey,r);te=await Mf(De,F),re=await Df(De,U.encrypted_filename)}catch(De){console.warn("Failed to decrypt file, using encrypted data:",De)}const ye=new Blob([te]),me=URL.createObjectURL(ye),he=document.createElement("a");he.href=me,he.download=re,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(me)}catch(F){console.error("File download failed:",F),alert(`File download failed: ${F instanceof Error?F.message:"Unknown error"}`)}},Q=async U=>{if(confirm(`Are you sure you want to delete "${U.encrypted_filename}"?`))try{await I.deleteFile(U.id,i),await k()}catch(F){console.error("File deletion failed:",F),alert(`File deletion failed: ${F instanceof Error?F.message:"Unknown error"}`)}},O=U=>{const F=new Date(U*1e3);return F.toLocaleDateString()+" "+F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return l.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[l.jsx("button",{onClick:()=>S(!b),className:"file-list-toggle-btn",title:"Show files",children:""}),b&&l.jsxs("div",{className:"file-list-panel",children:[l.jsxs("div",{className:"file-list-header",children:[l.jsx("div",{className:"file-list-title",children:"Channel Files"}),l.jsx("button",{className:"file-list-close",onClick:()=>S(!1),children:""})]}),g?l.jsx("div",{className:"file-list-empty",children:"Loading files..."}):h.length===0?l.jsx("div",{className:"file-list-empty",children:"No files uploaded yet"}):l.jsx("div",{className:"file-list-items",children:h.map(U=>l.jsxs("div",{className:"file-list-item",children:[l.jsx("div",{className:"file-list-item-icon",children:hy(U.encrypted_filename)}),l.jsxs("div",{className:"file-list-item-info",children:[l.jsx("div",{className:"file-list-item-name",children:U.encrypted_filename}),l.jsxs("div",{className:"file-list-item-meta",children:[vu(U.file_size_bytes),"  ",O(U.created_at)]})]}),l.jsxs("div",{className:"file-list-item-actions",children:[l.jsx("button",{onClick:()=>A(U),className:"file-list-item-download",title:"Download",children:""}),l.jsx("button",{onClick:()=>Q(U),className:"file-list-item-delete",title:"Delete",children:""})]})]},U.id))})]})]})};function vu(r){if(r===0)return"0 B";const i=1024,u=["B","KB","MB","GB"],o=Math.floor(Math.log(r)/Math.log(i));return parseFloat((r/Math.pow(i,o)).toFixed(1))+" "+u[o]}function Zx(r){var u;const i=((u=r.split(".").pop())==null?void 0:u.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(i)}function hy(r){var u;const i=((u=r.split(".").pop())==null?void 0:u.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(i)?"":["mp4","webm","mov","avi"].includes(i)?"":["mp3","wav","ogg","flac","aac"].includes(i)?"":["pdf"].includes(i)?"":["zip","tar","gz","rar","7z"].includes(i)?"":["doc","docx","txt","md","rtf"].includes(i)?"":["xls","xlsx","csv"].includes(i)?"":["js","ts","py","rs","go","c","cpp","h","java"].includes(i)?"":["json","yaml","yml","toml","xml"].includes(i)?"":""}const Xx=[{name:"Smileys",emojis:["","","","","","","","","","","",""]},{name:"Reactions",emojis:["","","","","","","","","","","",""]},{name:"Objects",emojis:["","","","","","","","","","","",""]}],Ix=({isOpen:r,onToggle:i,onSelect:u,onClose:o})=>{const h=x.useRef(null);return x.useEffect(()=>{if(!r)return;const m=g=>{h.current&&!h.current.contains(g.target)&&o()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[r,o]),l.jsxs("div",{className:"emoji-picker-wrapper",ref:h,children:[l.jsx("button",{className:"emoji-picker-toggle",onClick:i,title:"Emoji picker",type:"button",children:""}),r&&l.jsx("div",{className:"emoji-picker-popup",children:Xx.map(m=>l.jsxs("div",{className:"emoji-picker-category",children:[l.jsx("div",{className:"emoji-picker-category-label",children:m.name}),l.jsx("div",{className:"emoji-picker-grid",children:m.emojis.map(g=>l.jsx("button",{className:"emoji-picker-item",onClick:()=>u(g),type:"button",children:g},g))})]},m.name))})]})},Qx=({ws:r,currentUserId:i,channelId:u,channelName:o,onLeave:h,privateKey:m})=>{const[g,v]=x.useState({channelId:null,isConnected:!1,isMuted:!0,isDeafened:!1,outputVolume:100,connectedUsers:[],isCapturingAudio:!1,vadThreshold:.01,isSpeaking:!1}),b=x.useRef(null),S=x.useRef(null),k=x.useRef(null),A=x.useRef(null),Q=x.useRef(null),O=x.useRef(new Map),U=x.useRef(null),F=x.useRef(null),te=x.useCallback(async()=>{try{b.current=new(window.AudioContext||window.webkitAudioContext);const de=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}});S.current=de,k.current=b.current.createAnalyser(),k.current.fftSize=2048,k.current.smoothingTimeConstant=.8,A.current=b.current.createMediaStreamSource(de),Q.current=b.current.createScriptProcessor(4096,1,1),A.current.connect(k.current),k.current.connect(Q.current),Q.current.connect(b.current.destination),Q.current.onaudioprocess=Oe=>{if(g.isMuted)return;const Te=Oe.inputBuffer.getChannelData(0),be=new Int16Array(Te.length);for(let z=0;z<Te.length;z++)be[z]=Math.max(-1,Math.min(1,Te[z]))*32767;const se=be.buffer,V=btoa(String.fromCharCode(...new Uint8Array(se)));r&&r.isSocketConnected()&&(async()=>{let j=V;if(m)try{const G=await _a(m,u);j=await yu(G,V)}catch{}r.send(JSON.stringify({type:"voice_packet",channel_id:u,user_id:i,data:j,encrypted:!!m}))})()},v(Oe=>({...Oe,isCapturingAudio:!0})),re()}catch(de){console.error("Failed to initialize audio:",de),alert("Failed to access microphone. Please check permissions.")}},[r,u,i,g.isMuted]),re=x.useCallback(()=>{U.current||(U.current=setInterval(()=>{if(!k.current||g.isMuted)return;const de=new Uint8Array(k.current.frequencyBinCount);k.current.getByteFrequencyData(de);const be=de.reduce((se,V)=>se+V,0)/de.length/255>g.vadThreshold;be!==g.isSpeaking&&(v(se=>({...se,isSpeaking:be})),r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_speaking",channel_id:u,user_id:i,speaking:be})),F.current&&clearTimeout(F.current),be||(F.current=setTimeout(()=>{v(se=>({...se,isSpeaking:!1})),r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_speaking",channel_id:u,user_id:i,speaking:!1}))},500)))},100))},[k,g.isMuted,g.vadThreshold,g.isSpeaking,r,u,i]),ye=x.useCallback(()=>{U.current&&(clearInterval(U.current),U.current=null),F.current&&(clearTimeout(F.current),F.current=null)},[]),me=x.useCallback(async(de,Oe)=>{if(!g.isDeafened)try{const Te=atob(Oe),be=new Uint8Array(Te.length);for(let X=0;X<Te.length;X++)be[X]=Te.charCodeAt(X);const se=new Int16Array(be.buffer),V=new Float32Array(se.length);for(let X=0;X<se.length;X++)V[X]=se[X]/32767;let z=O.current.get(de);if(!z){const X=new(window.AudioContext||window.webkitAudioContext),le=X.createGain();le.connect(X.destination),le.gain.value=g.outputVolume/100,z={context:X,gainNode:le},O.current.set(de,z)}const j=z.context.createBuffer(1,V.length,44100);j.copyToChannel(V,0);const G=z.context.createBufferSource();G.buffer=j,G.connect(z.gainNode),G.start()}catch(Te){console.error("Failed to play audio:",Te)}},[g.isDeafened,g.outputVolume]),he=x.useCallback(async()=>{if(!g.isConnected)try{await te(),r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_join",channel_id:u,user_id:i})),v(de=>({...de,channelId:u,isConnected:!0}))}catch(de){console.error("Failed to connect to voice:",de)}},[te,r,u,i,g.isConnected]),De=x.useCallback(()=>{r&&r.isSocketConnected()&&r.send(JSON.stringify({type:"voice_leave",channel_id:u,user_id:i})),ye(),Q.current&&(Q.current.disconnect(),Q.current=null),A.current&&(A.current.disconnect(),A.current=null),k.current&&(k.current.disconnect(),k.current=null),S.current&&(S.current.getTracks().forEach(de=>de.stop()),S.current=null),b.current&&(b.current.close(),b.current=null),O.current.forEach(de=>{de.context.close()}),O.current.clear(),v(de=>({...de,channelId:null,isConnected:!1,connectedUsers:[],isCapturingAudio:!1,isSpeaking:!1})),h()},[r,u,i,ye,h]),Xe=x.useCallback(()=>{v(de=>({...de,isMuted:!de.isMuted}))},[]),Ae=x.useCallback(()=>{v(de=>({...de,isDeafened:!de.isDeafened,isMuted:de.isDeafened?de.isMuted:!0}))},[]),we=x.useCallback(de=>{v(Oe=>({...Oe,outputVolume:Math.max(0,Math.min(100,de))})),O.current.forEach(Oe=>{Oe.gainNode.gain.value=de/100})},[]);return x.useEffect(()=>{if(!r)return;const de=se=>{se.channel_id===u&&v(V=>{var z,j;return{...V,connectedUsers:[...V.connectedUsers.filter(G=>G.userId!==se.user_id),{userId:se.user_id,displayName:((z=se.public_key_hash)==null?void 0:z.slice(0,16))||`User ${(j=se.user_id)==null?void 0:j.slice(0,8)}`,isSpeaking:!1,audioLevel:0}]}})},Oe=se=>{if(se.channel_id!==u)return;v(z=>({...z,connectedUsers:z.connectedUsers.filter(j=>j.userId!==se.user_id)}));const V=O.current.get(se.user_id);V&&(V.context.close(),O.current.delete(se.user_id))},Te=async se=>{if(se.channel_id!==u||se.user_id===i)return;let V=se.data;if(se.encrypted&&m)try{const z=await _a(m,u);V=await bu(z,se.data)}catch{}me(se.user_id,V)},be=se=>{se.channel_id===u&&v(V=>({...V,connectedUsers:V.connectedUsers.map(z=>z.userId===se.user_id?{...z,isSpeaking:se.speaking}:z)}))};return r.on("voice_join",de),r.on("voice_leave",Oe),r.on("voice_packet",Te),r.on("voice_speaking",be),()=>{r.off("voice_join",de),r.off("voice_leave",Oe),r.off("voice_packet",Te),r.off("voice_speaking",be)}},[r,u,i,me]),x.useEffect(()=>(he(),()=>{De()}),[]),l.jsxs("div",{style:{position:"fixed",bottom:0,left:"312px",right:"240px",height:"120px",background:"#2f3136",borderTop:"1px solid #202225",display:"flex",flexDirection:"column",zIndex:1e3},children:[l.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #202225",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"#43b581"},children:" Voice Connected"}),l.jsx("span",{style:{fontSize:"13px",color:"#b9bbbe"},children:o})]}),l.jsx("button",{onClick:De,style:{background:"#f04747",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Disconnect"})]}),l.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[l.jsxs("span",{style:{fontSize:"12px",color:"#8e9297",marginRight:"8px"},children:["Users (",g.connectedUsers.length+1,"):"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"4px",background:g.isSpeaking?"rgba(67, 181, 129, 0.3)":"transparent",border:g.isSpeaking?"2px solid #43b581":"2px solid transparent",transition:"all 0.2s"},children:[l.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#fff"},children:"U"}),l.jsx("span",{style:{fontSize:"12px",color:"#dcddde"},children:"You"}),g.isMuted&&l.jsx("span",{style:{fontSize:"10px",color:"#f04747"},children:""})]}),g.connectedUsers.map(de=>{var Oe;return l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"4px",background:de.isSpeaking?"rgba(67, 181, 129, 0.3)":"transparent",border:de.isSpeaking?"2px solid #43b581":"2px solid transparent",transition:"all 0.2s"},children:[l.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#fff"},children:(Oe=de.displayName[0])==null?void 0:Oe.toUpperCase()}),l.jsx("span",{style:{fontSize:"12px",color:"#dcddde"},children:de.displayName})]},de.userId)})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("button",{onClick:Xe,style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",background:g.isMuted?"#f04747":"#3ba55d",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},title:g.isMuted?"Unmute":"Mute",children:g.isMuted?"":""}),l.jsx("button",{onClick:Ae,style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",background:g.isDeafened?"#f04747":"#4f545c",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},title:g.isDeafened?"Undeafen":"Deafen",children:g.isDeafened?"":""}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"120px"},children:[l.jsx("span",{style:{fontSize:"12px",color:"#8e9297"},children:"Vol:"}),l.jsx("input",{type:"range",min:"0",max:"100",value:g.outputVolume,onChange:de=>we(parseInt(de.target.value)),style:{flex:1,height:"4px",borderRadius:"2px",background:"#4f545c",outline:"none",cursor:"pointer"}}),l.jsxs("span",{style:{fontSize:"11px",color:"#8e9297",minWidth:"25px"},children:[g.outputVolume,"%"]})]})]})]})]})},$x=({isVisible:r,onClose:i,nodeId:u,channels:o,token:h,onNavigateToMessage:m})=>{const[g,v]=x.useState(""),[b,S]=x.useState(""),[k,A]=x.useState([]),[Q,O]=x.useState(!1),[U,F]=x.useState(""),[te,re]=x.useState(""),ye=x.useRef(null),me=x.useRef(void 0);x.useEffect(()=>{r&&ye.current&&ye.current.focus()},[r]);const he=x.useCallback(async(we,de)=>{if(!u||!h||!we.trim()){A([]),re("");return}O(!0),F("");try{const Oe=await I.searchMessages(u,we.trim(),h,de||void 0);A(Oe.results),re(Oe.note||"")}catch(Oe){F(Oe instanceof Error?Oe.message:"Search failed"),A([]),re("")}finally{O(!1)}},[u,h]),De=x.useCallback(we=>{v(we),me.current&&window.clearTimeout(me.current),me.current=window.setTimeout(()=>{he(we,b)},300)},[he,b]),Xe=x.useCallback(we=>{S(we),g.trim()&&he(g,we)},[g,he]),Ae=we=>{m(we.channel_id,we.message_id),i()};return x.useEffect(()=>{const we=de=>{de.key==="Escape"&&r&&i()};if(r)return document.addEventListener("keydown",we),()=>{document.removeEventListener("keydown",we)}},[r,i]),x.useEffect(()=>()=>{me.current&&window.clearTimeout(me.current)},[]),r?l.jsxs("div",{className:"search-overlay",children:[l.jsx("div",{className:"search-overlay-backdrop",onClick:i}),l.jsxs("div",{className:"search-overlay-content",children:[l.jsxs("div",{className:"search-overlay-header",children:[l.jsx("h3",{children:"Search Messages"}),l.jsx("button",{className:"search-overlay-close",onClick:i,children:""})]}),l.jsxs("div",{className:"search-overlay-body",children:[l.jsxs("div",{className:"search-controls",children:[l.jsxs("div",{className:"search-input-container",children:[l.jsx("input",{ref:ye,type:"text",placeholder:"Search messages...",value:g,onChange:we=>De(we.target.value),className:"search-input"}),Q&&l.jsx("div",{className:"search-loading",children:""})]}),l.jsx("div",{className:"search-filter",children:l.jsxs("select",{value:b,onChange:we=>Xe(we.target.value),className:"channel-filter-select",children:[l.jsx("option",{value:"",children:"All channels"}),o.map(we=>l.jsxs("option",{value:we.id,children:["#",we.name]},we.id))]})})]}),te&&l.jsxs("div",{className:"search-note",children:[" ",te]}),U&&l.jsxs("div",{className:"search-error",children:[" ",U]}),l.jsxs("div",{className:"search-results",children:[k.length===0&&g.trim()&&!Q&&!U&&l.jsxs("div",{className:"search-no-results",children:['No messages found for "',g,'"']}),k.map(we=>{var de;return l.jsxs("div",{className:"search-result",onClick:()=>Ae(we),children:[l.jsxs("div",{className:"search-result-header",children:[l.jsx("span",{className:"search-result-sender",children:((de=we.sender_public_key_hash)==null?void 0:de.slice(0,16))||"Unknown"}),l.jsxs("span",{className:"search-result-channel",children:["#",we.channel_name]}),l.jsx("span",{className:"search-result-time",children:new Date(we.timestamp).toLocaleString()})]}),l.jsx("div",{className:"search-result-snippet",children:"Click to view message"})]},we.message_id)})]})]}),l.jsx("div",{className:"search-overlay-footer",children:l.jsx("div",{className:"search-encryption-note",children:" Content search requires client-side decryption"})})]})]}):null};function Jx({isOpen:r,onClose:i,node:u,token:o,userRole:h,onNodeUpdated:m,onLeaveNode:g}){const[v,b]=x.useState("general"),[S,k]=x.useState([]),[A,Q]=x.useState(!1),[O,U]=x.useState(""),[F,te]=x.useState(""),[re,ye]=x.useState([]),[me,he]=x.useState(!1),[De,Xe]=x.useState("all"),[Ae,we]=x.useState(!0),[de,Oe]=x.useState(),[Te,be]=x.useState(u.name),[se,V]=x.useState(u.description||""),[z,j]=x.useState(!1),[G,X]=x.useState(!1),[le,oe]=x.useState(""),[w,D]=x.useState(""),[K,ie]=x.useState(!1),[ee,ue]=x.useState([]),[_e,Ye]=x.useState(!1),[Re,qe]=x.useState(null),[ot,It]=x.useState(!1),[Mt,Qt]=x.useState("New Role"),[Ot,rn]=x.useState("#99aab5"),[_n,Pt]=x.useState(!1),[un,yn]=x.useState(!1),[ln,Pn]=x.useState(""),[ua,R]=x.useState("#99aab5"),[Se,Ge]=x.useState(!1),[Be,ct]=x.useState(!1),[Ke,H]=x.useState(0),[Le,Ht]=x.useState(!1),Qe=h==="admin",vt=h==="admin"||h==="moderator",xt=h==="admin",pt=h==="admin"||h==="moderator",Nn=x.useCallback(async()=>{if(vt){Q(!0),U("");try{const q=await I.getNodeInvites(u.id,o);k(q)}catch(q){U(q instanceof Error?q.message:"Failed to load invites")}finally{Q(!1)}}},[u.id,o,vt]),He=x.useCallback(async()=>{if(xt){Ye(!0);try{const q=await I.getRoles(u.id,o);ue((Array.isArray(q)?q:[]).sort((pe,ke)=>ke.position-pe.position))}catch(q){U(q instanceof Error?q.message:"Failed to load roles")}finally{Ye(!1)}}},[u.id,o,xt]),La=x.useCallback(async()=>{Ht(!0),U("");try{await I.createRole(u.id,o,{name:Mt,color:Ot,hoist:_n,mentionable:un}),te("Role created!"),It(!1),Qt("New Role"),rn("#99aab5"),Pt(!1),yn(!1),await He()}catch(q){U(q instanceof Error?q.message:"Failed to create role")}finally{Ht(!1)}},[u.id,o,Mt,Ot,_n,un,He]),Ue=x.useCallback(async()=>{if(Re){Ht(!0),U("");try{await I.updateRole(u.id,Re.id,o,{name:ln,color:ua,hoist:Se,mentionable:Be,permissions:Ke}),te("Role updated!"),qe(null),await He()}catch(q){U(q instanceof Error?q.message:"Failed to update role")}finally{Ht(!1)}}},[u.id,o,Re,ln,ua,Se,Be,Ke,He]),sn=x.useCallback(async q=>{if(confirm("Delete this role? Members will lose it."))try{await I.deleteRole(u.id,q,o),te("Role deleted!"),(Re==null?void 0:Re.id)===q&&qe(null),await He()}catch(pe){U(pe instanceof Error?pe.message:"Failed to delete role")}},[u.id,o,Re,He]),bn=x.useCallback(async(q,pe)=>{const ke=ee.findIndex(gt=>gt.id===q);if(ke<0)return;const ut=pe==="up"?ke-1:ke+1;if(!(ut<0||ut>=ee.length))try{const gt=ee[ke],Rn=ee[ut];await I.updateRole(u.id,gt.id,o,{position:Rn.position}),await I.updateRole(u.id,Rn.id,o,{position:gt.position}),await He()}catch(gt){U(gt instanceof Error?gt.message:"Failed to reorder roles")}},[u.id,o,ee,He]),dn=x.useCallback(q=>{qe(q),Pn(q.name),R(q.color||"#99aab5"),Ge(q.hoist),ct(q.mentionable),H(q.permissions)},[]),At=[{bit:1,label:"Manage Channels"},{bit:2,label:"Manage Members"},{bit:4,label:"Kick Members"},{bit:8,label:"Manage Invites"},{bit:16,label:"Manage Node"},{bit:32,label:"Manage Roles"},{bit:64,label:"Manage Messages"}],ea=x.useCallback(async()=>{ie(!0),U("");try{const q=le?parseInt(le,10):void 0,pe=w?parseInt(w,10):void 0;await I.createInviteWithOptions(u.id,o,q,pe),te("Invite created successfully!"),oe(""),D(""),X(!1),await Nn()}catch(q){U(q instanceof Error?q.message:"Failed to create invite")}finally{ie(!1)}},[u.id,o,le,w,Nn]),Fe=x.useCallback(async q=>{if(confirm("Are you sure you want to revoke this invite?"))try{await I.revokeInvite(u.id,q,o),te("Invite revoked successfully!"),await Nn()}catch(pe){U(pe instanceof Error?pe.message:"Failed to revoke invite")}},[u.id,o,Nn]),fn=x.useCallback(async(q=!1)=>{if(pt){he(!0),U("");try{const pe=q?void 0:de,ke=await I.getNodeAuditLog(u.id,o,50,pe),ut=Array.isArray(ke==null?void 0:ke.entries)?ke.entries:[];ye(q?ut:gt=>[...gt,...ut]),we((ke==null?void 0:ke.has_more)??!1),Oe(ke==null?void 0:ke.next_cursor)}catch(pe){U(pe instanceof Error?pe.message:"Failed to load audit log")}finally{he(!1)}}},[u.id,o,pt,de]),kn=x.useCallback(async()=>{!Ae||me||await fn(!1)},[Ae,me,fn]),vn=x.useCallback(()=>De==="all"?re:re.filter(q=>q.action===De),[re,De]),qt=q=>{switch(q){case"channel_create":return"";case"channel_delete":return"";case"member_kick":return"";case"member_ban":return"";case"role_change":return"";case"invite_create":return"";case"invite_revoke":return"";case"message_pin":return"";case"message_unpin":return"";case"message_delete":return"";case"node_settings_update":return"";default:return""}},ta=q=>{const pe=q.details?JSON.parse(q.details):{};switch(q.action){case"channel_create":return`created channel #${pe.channel_name||"unknown"}`;case"channel_delete":return`deleted channel #${pe.channel_name||"unknown"}`;case"member_kick":return"kicked a user";case"member_ban":return"banned a user";case"role_change":return`changed user role to ${pe.new_role||"unknown"}`;case"invite_create":return"created an invite";case"invite_revoke":return`revoked invite ${pe.invite_code||"unknown"}`;case"message_pin":return"pinned a message";case"message_unpin":return"unpinned a message";case"message_delete":return"deleted a message";case"node_settings_update":return"updated node settings";default:return q.action.replace(/_/g," ")}},Ne=x.useCallback(async()=>{if(Qe){j(!0),U("");try{if(te("Node settings saved!"),m){const q={...u,name:Te,description:se};m(q)}}catch(q){U(q instanceof Error?q.message:"Failed to update node")}finally{j(!1)}}},[Qe,Te,se,u,m]),na=x.useCallback(async()=>{if(confirm(Qe?"Are you sure you want to leave this Node? As the admin, this will delete the Node permanently!":"Are you sure you want to leave this Node?"))try{await I.leaveNode(u.id,o),te("Left Node successfully!"),setTimeout(()=>{g==null||g(),i()},1e3)}catch(pe){U(pe instanceof Error?pe.message:"Failed to leave node")}},[Qe,u.id,o,g,i]),Ve=q=>{navigator.clipboard.writeText(q).then(()=>{te("Invite code copied to clipboard!")}).catch(()=>{const pe=document.createElement("textarea");pe.value=q,document.body.appendChild(pe),pe.select(),document.execCommand("copy"),document.body.removeChild(pe),te("Invite code copied to clipboard!")})},Kt=q=>new Date(q*1e3).toLocaleDateString()+" "+new Date(q*1e3).toLocaleTimeString(),Gn=q=>!!(q.expires_at&&q.expires_at*1e3<Date.now()),Vn=q=>!!(q.max_uses&&q.uses>=q.max_uses);return x.useEffect(()=>{r&&v==="roles"&&xt&&He()},[r,v,xt,He]),x.useEffect(()=>{r&&v==="invites"&&vt&&Nn()},[r,v,vt,Nn]),x.useEffect(()=>{r&&v==="audit"&&pt&&fn(!0)},[r,v,pt,fn]),x.useEffect(()=>{if(F){const q=setTimeout(()=>te(""),3e3);return()=>clearTimeout(q)}},[F]),x.useEffect(()=>{if(O){const q=setTimeout(()=>U(""),5e3);return()=>clearTimeout(q)}},[O]),r?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:l.jsxs("div",{style:{background:"#36393f",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",color:"#ffffff",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #40444b",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Node Settings"}),l.jsx("button",{onClick:i,style:{background:"none",border:"none",color:"#b9bbbe",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:1},children:""})]}),l.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #40444b",background:"#2f3136"},children:[l.jsx("button",{onClick:()=>b("general"),style:{background:v==="general"?"#40444b":"transparent",border:"none",color:v==="general"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"General"}),xt&&l.jsx("button",{onClick:()=>b("roles"),style:{background:v==="roles"?"#40444b":"transparent",border:"none",color:v==="roles"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Roles"}),vt&&l.jsx("button",{onClick:()=>b("invites"),style:{background:v==="invites"?"#40444b":"transparent",border:"none",color:v==="invites"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Invites"}),pt&&l.jsx("button",{onClick:()=>b("audit"),style:{background:v==="audit"?"#40444b":"transparent",border:"none",color:v==="audit"?"#ffffff":"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Audit Log"})]}),l.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[v==="general"&&l.jsxs("div",{children:[l.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"16px"},children:[l.jsxs("div",{onClick:()=>{if(!Qe)return;const q=document.createElement("input");q.type="file",q.accept="image/png,image/jpeg,image/gif,image/webp",q.onchange=async pe=>{var ut;const ke=(ut=pe.target.files)==null?void 0:ut[0];if(ke){if(ke.size>256*1024){U("Icon must be under 256KB");return}try{U("");const gt=await I.uploadNodeIcon(u.id,ke,o);te("Node icon updated!"),m&&m({...u,icon_hash:gt.icon_hash})}catch(gt){U(gt instanceof Error?gt.message:"Failed to upload icon")}}},q.click()},style:{width:"80px",height:"80px",borderRadius:"50%",background:"#40444b",display:"flex",alignItems:"center",justifyContent:"center",cursor:Qe?"pointer":"default",overflow:"hidden",fontSize:"32px",color:"#b9bbbe",flexShrink:0,position:"relative"},title:Qe?"Click to upload icon":"Node icon",children:[u.icon_hash?l.jsx("img",{src:`${I.getNodeIconUrl(u.id)}?v=${u.icon_hash}`,alt:u.name[0],style:{width:"100%",height:"100%",objectFit:"cover"}}):u.name[0],Qe&&l.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",fontSize:"10px",textAlign:"center",padding:"2px",color:"#fff"},children:"EDIT"})]}),l.jsx("div",{style:{color:"#b9bbbe",fontSize:"13px"},children:Qe?"Click the icon to upload a new one (PNG, JPEG, GIF, WebP  max 256KB)":"Node icon"})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Node Name"}),l.jsx("input",{type:"text",value:Te,onChange:q=>be(q.target.value),disabled:!Qe||z,maxLength:32,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"none",background:Qe?"#40444b":"#2f3136",color:"#ffffff",fontSize:"14px"}})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Description"}),l.jsx("textarea",{value:se,onChange:q=>V(q.target.value),disabled:!Qe||z,maxLength:200,rows:3,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"none",background:Qe?"#40444b":"#2f3136",color:"#ffffff",fontSize:"14px",resize:"vertical"}})]}),Qe&&l.jsx("div",{style:{marginBottom:"20px"},children:l.jsx("button",{onClick:Ne,disabled:z,style:{background:"#43b581",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:z?"not-allowed":"pointer",fontSize:"14px",opacity:z?.6:1},children:z?"Saving...":"Save Changes"})}),l.jsxs("div",{style:{marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #40444b"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",color:Qe?"#f04747":"#faa61a"},children:Qe?"Delete Node":"Leave Node"}),l.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#b9bbbe"},children:Qe?"Permanently delete this Node. This action cannot be undone.":"Leave this Node. You can rejoin later with an invite."}),l.jsx("button",{onClick:na,style:{background:Qe?"#f04747":"#faa61a",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:Qe?"Delete Node":"Leave Node"})]})]}),v==="roles"&&xt&&l.jsx("div",{children:Re?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[l.jsx("button",{onClick:()=>qe(null),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"18px"},children:""}),l.jsx("h4",{style:{margin:0,fontSize:"16px"},children:"Edit Role"})]}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe",fontWeight:600},children:"Role Name"}),l.jsx("input",{type:"text",value:ln,onChange:q=>Pn(q.target.value),maxLength:32,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#40444b",color:"#fff",fontSize:"14px"}})]}),l.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe",fontWeight:600},children:"Color"}),l.jsx("input",{type:"color",value:ua,onChange:q=>R(q.target.value),style:{width:"48px",height:"32px",border:"none",background:"none",cursor:"pointer"}})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Se,onChange:q=>Ge(q.target.checked)})," Display separately in member list"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Be,onChange:q=>ct(q.target.checked)})," Allow anyone to @mention this role"]})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"12px",color:"#b9bbbe",fontWeight:600},children:"Permissions"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:At.map(q=>l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:(Ke&q.bit)!==0,onChange:pe=>H(ke=>pe.target.checked?ke|q.bit:ke&~q.bit)}),q.label]},q.bit))})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:Ue,disabled:Le,style:{background:"#43b581",border:"none",color:"#fff",padding:"8px 16px",borderRadius:"4px",cursor:Le?"not-allowed":"pointer",fontSize:"13px",opacity:Le?.6:1},children:Le?"Saving...":"Save Changes"}),l.jsx("button",{onClick:()=>sn(Re.id),style:{background:"#f04747",border:"none",color:"#fff",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Delete Role"})]})]}):l.jsxs("div",{children:[l.jsx("div",{style:{marginBottom:"16px"},children:ot?l.jsxs("div",{style:{background:"#40444b",padding:"16px",borderRadius:"8px"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"16px"},children:"New Role"}),l.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Name"}),l.jsx("input",{type:"text",value:Mt,onChange:q=>Qt(q.target.value),maxLength:32,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#fff",fontSize:"14px"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Color"}),l.jsx("input",{type:"color",value:Ot,onChange:q=>rn(q.target.value),style:{width:"48px",height:"32px",border:"none",background:"none",cursor:"pointer"}})]})]}),l.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"12px"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:_n,onChange:q=>Pt(q.target.checked)})," Hoisted"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#dcddde",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:un,onChange:q=>yn(q.target.checked)})," Mentionable"]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:La,disabled:Le,style:{background:"#43b581",border:"none",color:"#fff",padding:"8px 12px",borderRadius:"4px",cursor:Le?"not-allowed":"pointer",fontSize:"13px",opacity:Le?.6:1},children:Le?"Creating...":"Create"}),l.jsx("button",{onClick:()=>It(!1),style:{background:"#4f545c",border:"none",color:"#fff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Cancel"})]})]}):l.jsx("button",{onClick:()=>It(!0),style:{background:"#7289da",border:"none",color:"#fff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:" Create Role"})}),_e?l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading roles..."}):ee.length===0?l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No roles created yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:ee.map((q,pe)=>l.jsxs("div",{style:{background:"#40444b",padding:"10px 12px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:q.color||"#99aab5",flexShrink:0}}),l.jsx("span",{style:{flex:1,fontSize:"14px",color:q.color||"#dcddde",fontWeight:500,cursor:"pointer"},onClick:()=>dn(q),children:q.name}),q.hoist&&l.jsx("span",{style:{fontSize:"11px",color:"#72767d",background:"#2f3136",padding:"1px 6px",borderRadius:"3px"},children:"hoisted"}),l.jsxs("div",{style:{display:"flex",gap:"2px"},children:[l.jsx("button",{onClick:()=>bn(q.id,"up"),disabled:pe===0,style:{background:"none",border:"none",color:pe===0?"#4f545c":"#b9bbbe",cursor:pe===0?"default":"pointer",fontSize:"14px",padding:"2px 4px"},children:""}),l.jsx("button",{onClick:()=>bn(q.id,"down"),disabled:pe===ee.length-1,style:{background:"none",border:"none",color:pe===ee.length-1?"#4f545c":"#b9bbbe",cursor:pe===ee.length-1?"default":"pointer",fontSize:"14px",padding:"2px 4px"},children:""})]})]},q.id))})]})}),v==="invites"&&vt&&l.jsxs("div",{children:[l.jsx("div",{style:{marginBottom:"24px"},children:G?l.jsxs("div",{style:{background:"#40444b",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[l.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Create New Invite"}),l.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Max Uses (optional)"}),l.jsx("input",{type:"number",placeholder:"",value:le,onChange:q=>oe(q.target.value),min:"1",max:"100",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#ffffff",fontSize:"14px"}})]}),l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#b9bbbe"},children:"Expires in (hours)"}),l.jsx("input",{type:"number",placeholder:"Never",value:w,onChange:q=>D(q.target.value),min:"1",max:"8760",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"none",background:"#36393f",color:"#ffffff",fontSize:"14px"}})]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:ea,disabled:K,style:{background:"#43b581",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:K?"not-allowed":"pointer",fontSize:"13px",opacity:K?.6:1},children:K?"Creating...":"Create"}),l.jsx("button",{onClick:()=>{X(!1),oe(""),D("")},disabled:K,style:{background:"#4f545c",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:K?"not-allowed":"pointer",fontSize:"13px"},children:"Cancel"})]})]}):l.jsx("button",{onClick:()=>X(!0),style:{background:"#7289da",border:"none",color:"#ffffff",padding:"10px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:" Create Invite"})}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Active Invites"}),A?l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading invites..."}):S.length===0?l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No active invites"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:S.map(q=>{const pe=Gn(q),ke=Vn(q),ut=pe||ke;return l.jsxs("div",{style:{background:"#40444b",padding:"12px",borderRadius:"6px",border:ut?"1px solid #f04747":"none",opacity:ut?.7:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[l.jsx("code",{style:{background:"#2f3136",padding:"4px 8px",borderRadius:"4px",fontSize:"13px",fontFamily:"monospace"},children:q.code}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:()=>Ve(q.code),disabled:ut,style:{background:"#7289da",border:"none",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",cursor:ut?"not-allowed":"pointer",fontSize:"12px",opacity:ut?.5:1},children:"Copy"}),l.jsx("button",{onClick:()=>Fe(q.code),style:{background:"#f04747",border:"none",color:"#ffffff",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Revoke"})]})]}),l.jsxs("div",{style:{fontSize:"12px",color:"#b9bbbe",display:"flex",flexWrap:"wrap",gap:"16px"},children:[l.jsxs("span",{children:["Created: ",Kt(q.created_at)]}),l.jsxs("span",{children:["Uses: ",q.uses,q.max_uses?`/${q.max_uses}`:""]}),q.expires_at&&l.jsxs("span",{style:{color:pe?"#f04747":"#b9bbbe"},children:[pe?"Expired: ":"Expires: ",Kt(q.expires_at)]}),ke&&l.jsx("span",{style:{color:"#f04747"},children:"Max uses reached"})]})]},q.code)})})]})]}),v==="audit"&&pt&&l.jsxs("div",{children:[l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#b9bbbe"},children:"Filter by Action"}),l.jsxs("select",{value:De,onChange:q=>Xe(q.target.value),style:{padding:"8px 12px",borderRadius:"4px",border:"none",background:"#40444b",color:"#ffffff",fontSize:"14px",cursor:"pointer",minWidth:"200px"},children:[l.jsx("option",{value:"all",children:"All Actions"}),l.jsx("option",{value:"channel_create",children:"Channel Create"}),l.jsx("option",{value:"channel_delete",children:"Channel Delete"}),l.jsx("option",{value:"member_kick",children:"Member Kick"}),l.jsx("option",{value:"role_change",children:"Role Change"}),l.jsx("option",{value:"invite_create",children:"Invite Create"}),l.jsx("option",{value:"invite_revoke",children:"Invite Revoke"}),l.jsx("option",{value:"message_pin",children:"Message Pin"}),l.jsx("option",{value:"message_unpin",children:"Message Unpin"}),l.jsx("option",{value:"message_delete",children:"Message Delete"}),l.jsx("option",{value:"node_settings_update",children:"Settings Update"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px"},children:"Recent Activity"}),me&&re.length===0?l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#b9bbbe"},children:"Loading audit log..."}):vn().length===0?l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#72767d"},children:"No audit entries found"}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"400px",overflowY:"auto"},children:[vn().map(q=>{var pe;return l.jsxs("div",{style:{background:"#40444b",padding:"12px",borderRadius:"6px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[l.jsx("div",{style:{fontSize:"18px",marginTop:"2px"},children:qt(q.action)}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{marginBottom:"4px",fontSize:"14px"},children:[l.jsx("span",{style:{fontWeight:"600",color:"#ffffff"},children:((pe=q.actor_public_key_hash)==null?void 0:pe.slice(0,16))||"Unknown"})," ",l.jsx("span",{style:{color:"#b9bbbe"},children:ta(q)})]}),l.jsxs("div",{style:{fontSize:"12px",color:"#72767d",display:"flex",alignItems:"center",gap:"16px"},children:[l.jsx("span",{children:Kt(q.created_at)}),l.jsx("span",{style:{background:"#2f3136",padding:"2px 6px",borderRadius:"3px",fontSize:"11px",fontFamily:"monospace"},children:q.target_type})]})]})]},q.id)}),Ae&&l.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:l.jsx("button",{onClick:kn,disabled:me,style:{background:"#7289da",border:"none",color:"#ffffff",padding:"8px 16px",borderRadius:"4px",cursor:me?"not-allowed":"pointer",fontSize:"13px",opacity:me?.6:1},children:me?"Loading...":"Load More"})})]})]})]})]}),(O||F)&&l.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",background:O?"#f04747":"#43b581",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",maxWidth:"300px",zIndex:1002},children:O||F})]})}):null}class Fx{constructor(){fe(this,"preferences");fe(this,"unreads",{});fe(this,"currentUsername","");fe(this,"windowFocused",!0);fe(this,"activeChannelId",null);fe(this,"audioContext",null);this.preferences=this.loadPreferences(),this.setupWindowFocusHandlers(),this.requestNotificationPermission(),this.initAudioContext()}loadPreferences(){const i=localStorage.getItem("accord_notification_preferences");return i?JSON.parse(i):{enabled:!0,mode:"all",sounds:!0}}savePreferences(){localStorage.setItem("accord_notification_preferences",JSON.stringify(this.preferences))}loadUnreads(){const i=localStorage.getItem("accord_unreads");return i?JSON.parse(i):{}}saveUnreads(){localStorage.setItem("accord_unreads",JSON.stringify(this.unreads))}setupWindowFocusHandlers(){window.addEventListener("focus",()=>{this.windowFocused=!0}),window.addEventListener("blur",()=>{this.windowFocused=!1}),this.windowFocused=document.hasFocus()}async requestNotificationPermission(){"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()}initAudioContext(){(typeof AudioContext<"u"||typeof window.webkitAudioContext<"u")&&(this.audioContext=new(AudioContext||window.webkitAudioContext))}setActiveChannel(i){this.activeChannelId=i}setCurrentUsername(i){this.currentUsername=i,this.unreads=this.loadUnreads()}getPreferences(){return{...this.preferences}}updatePreferences(i){this.preferences={...this.preferences,...i},this.savePreferences()}getNodeUnreads(i){const u=this.unreads[i];return u?{totalUnreads:u.totalUnreads,totalMentions:u.totalMentions}:{totalUnreads:0,totalMentions:0}}getChannelUnreads(i,u){const o=this.unreads[i];return!o||!o.channels[u]?{lastReadMessageId:null,count:0,mentions:0,lastMessageTimestamp:0}:o.channels[u]}markChannelAsRead(i,u,o){this.unreads[i]||(this.unreads[i]={totalUnreads:0,totalMentions:0,channels:{}}),this.unreads[i].channels[u]||(this.unreads[i].channels[u]={lastReadMessageId:null,count:0,mentions:0,lastMessageTimestamp:0});const h=this.unreads[i].channels[u];this.unreads[i].totalUnreads-=h.count,this.unreads[i].totalMentions-=h.mentions,h.count=0,h.mentions=0,o&&(h.lastReadMessageId=o,h.lastMessageTimestamp=Date.now()),this.unreads[i].totalUnreads=Math.max(0,this.unreads[i].totalUnreads),this.unreads[i].totalMentions=Math.max(0,this.unreads[i].totalMentions),this.saveUnreads()}addMessage(i,u,o){if(o.author===this.currentUsername)return;this.unreads[i]||(this.unreads[i]={totalUnreads:0,totalMentions:0,channels:{}}),this.unreads[i].channels[u]||(this.unreads[i].channels[u]={lastReadMessageId:null,count:0,mentions:0,lastMessageTimestamp:0});const h=this.unreads[i].channels[u];if(!h.lastReadMessageId||o.timestamp>h.lastMessageTimestamp){const g=this.containsMention(o.content);h.count++,this.unreads[i].totalUnreads++,g&&(h.mentions++,this.unreads[i].totalMentions++),h.lastMessageTimestamp=Math.max(h.lastMessageTimestamp,o.timestamp),this.saveUnreads(),this.handleMessageNotification(o,u,g)}}containsMention(i){if(!this.currentUsername)return!1;const u=i.toLowerCase(),o=this.currentUsername.toLowerCase();return u.includes(`@${o}`)||u.includes("@everyone")}highlightMentions(i){if(!this.currentUsername)return i;const u=window.DOMPurify;let h=u?u.sanitize(i,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}):this.escapeHtml(i);const m=this.escapeRegExp(this.currentUsername),g=new RegExp(`(@${m})`,"gi");h=h.replace(g,'<span class="mention">$1</span>');const v=new RegExp("(@everyone)","gi");return h=h.replace(v,'<span class="mention mention-everyone">$1</span>'),h}escapeHtml(i){const u=document.createElement("div");return u.textContent=i,u.innerHTML}escapeRegExp(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}handleMessageNotification(i,u,o){if(!this.preferences.enabled||this.windowFocused&&this.activeChannelId===u)return;(this.preferences.mode==="all"||this.preferences.mode==="mentions"&&o)&&(this.showDesktopNotification(i,u,o),this.preferences.sounds&&this.playNotificationSound())}showDesktopNotification(i,u,o){if("Notification"in window&&Notification.permission==="granted"){const h=o?`${i.author} mentioned you`:`${i.author}`,m=i.content.length>100?i.content.substring(0,100)+"...":i.content,g=new Notification(h,{body:m,icon:"/favicon.ico",badge:"/favicon.ico",tag:u});setTimeout(()=>{g.close()},5e3),g.onclick=()=>{window.focus(),g.close()}}}playNotificationSound(){if(this.audioContext)try{const i=this.audioContext.createOscillator(),u=this.audioContext.createGain();i.connect(u),u.connect(this.audioContext.destination),i.frequency.setValueAtTime(800,this.audioContext.currentTime),i.frequency.setValueAtTime(600,this.audioContext.currentTime+.1),u.gain.setValueAtTime(0,this.audioContext.currentTime),u.gain.linearRampToValueAtTime(.1,this.audioContext.currentTime+.01),u.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+.2),i.start(this.audioContext.currentTime),i.stop(this.audioContext.currentTime+.2)}catch(i){console.warn("Failed to play notification sound:",i)}}getAllUnreads(){return{...this.unreads}}clearAllUnreads(){this.unreads={},this.saveUnreads()}clearNodeUnreads(i){delete this.unreads[i],this.saveUnreads()}}const Rt=new Fx,Wx=({isOpen:r,onClose:i,preferences:u,onPreferencesChange:o})=>{if(!r)return null;const h=k=>{const A={...u,mode:k};o(A)},m=()=>{const k={...u,enabled:!u.enabled};o(k)},g=()=>{const k={...u,sounds:!u.sounds};o(k)},v=()=>{"Notification"in window&&(Notification.permission==="granted"?new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"}):Notification.permission!=="denied"&&Notification.requestPermission().then(k=>{k==="granted"&&new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"})}))},b=()=>{u.sounds&&Rt.playNotificationSound()},S=()=>{Rt.clearAllUnreads(),o({...u})};return l.jsx("div",{className:"notification-modal",children:l.jsxs("div",{className:"notification-modal-content",children:[l.jsx("h3",{style:{margin:"0 0 16px 0",color:"#ffffff"},children:"Notification Settings"}),l.jsxs("div",{className:"notification-setting",children:[l.jsx("label",{children:"Enable Notifications"}),l.jsx("div",{className:`notification-checkbox ${u.enabled?"checked":""}`,onClick:m,children:u.enabled&&""})]}),l.jsxs("div",{className:"notification-setting",children:[l.jsx("label",{children:"Notification Mode"}),l.jsxs("div",{style:{display:"flex",gap:"4px"},children:[l.jsx("button",{className:`notification-toggle ${u.mode==="all"?"active":""}`,onClick:()=>h("all"),children:"All"}),l.jsx("button",{className:`notification-toggle ${u.mode==="mentions"?"active":""}`,onClick:()=>h("mentions"),children:"Mentions"}),l.jsx("button",{className:`notification-toggle ${u.mode==="none"?"active":""}`,onClick:()=>h("none"),children:"None"})]})]}),l.jsxs("div",{className:"notification-setting",children:[l.jsx("label",{children:"Sound Notifications"}),l.jsx("div",{className:`notification-checkbox ${u.sounds?"checked":""}`,onClick:g,children:u.sounds&&""})]}),l.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #40444b"},children:[l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[l.jsx("button",{onClick:v,style:{flex:1,background:"#7289da",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Test Notification"}),l.jsx("button",{onClick:b,style:{flex:1,background:"#43b581",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Test Sound"})]}),l.jsx("button",{onClick:S,style:{width:"100%",background:"#f04747",border:"none",color:"#ffffff",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",marginBottom:"12px"},children:"Clear All Unread Counts"})]}),l.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"16px"},children:l.jsx("button",{onClick:i,style:{background:"#747f8d",border:"none",color:"#ffffff",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Close"})}),l.jsxs("div",{style:{fontSize:"11px",color:"#72767d",marginTop:"12px",lineHeight:"1.4"},children:[l.jsx("strong",{children:"Tips:"}),l.jsx("br",{})," Desktop notifications only show when window is not focused",l.jsx("br",{})," @username and @everyone will be highlighted in messages",l.jsx("br",{})," Orange badges show mentions, red badges show regular unreads"]})]})})},wg={displayName:"",bio:"",status:"online"},_g={theme:"dark",fontSize:15,messageDensity:"comfortable"},Ng={inputDevice:"default",outputDevice:"default",inputVolume:100,outputVolume:100,vadSensitivity:50,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},jg={readReceipts:!0,typingIndicators:!0,blockedUsers:[]},Px=({isOpen:r,onClose:i,currentUser:u,onUserUpdate:o,serverInfo:h})=>{const[m,g]=x.useState("account"),[v,b]=x.useState(wg),[S,k]=x.useState(_g),[A,Q]=x.useState(Rt.getPreferences()),[O,U]=x.useState(Ng),[F,te]=x.useState(jg),[re,ye]=x.useState([]),[me,he]=x.useState([]),[De,Xe]=x.useState(""),[Ae,we]=x.useState(!1),[de,Oe]=x.useState(!1),[Te,be]=x.useState(""),[se,V]=x.useState(""),[z,j]=x.useState(!1);x.useEffect(()=>{r&&((()=>{try{const Se=localStorage.getItem("accord_account_settings");Se?b({...wg,...JSON.parse(Se)}):u&&b({displayName:u.displayName||u.display_name||u.username||u.public_key_hash.slice(0,16),bio:u.bio||"",status:u.status||"online"});const Ge=localStorage.getItem("accord_appearance_settings");if(Ge){const Ke=JSON.parse(Ge);if(typeof Ke.fontSize=="string"){const H={small:13,medium:15,large:17};Ke.fontSize=H[Ke.fontSize]||15}Ke.compactMode!==void 0&&!Ke.messageDensity&&(Ke.messageDensity=Ke.compactMode?"compact":"comfortable",delete Ke.compactMode),k({..._g,...Ke})}const Be=localStorage.getItem("accord_voice_settings");Be&&U({...Ng,...JSON.parse(Be)});const ct=localStorage.getItem("accord_privacy_settings");ct&&te({...jg,...JSON.parse(ct)}),Q(Rt.getPreferences())}catch(Se){console.error("Error loading settings:",Se)}})(),G(),we(!1),be(""),j(!1))},[r,u]),x.useEffect(()=>{ie(S)},[S]);const G=x.useCallback(async()=>{try{const R=await navigator.mediaDevices.enumerateDevices();ye(R.filter(Se=>Se.kind==="audioinput")),he(R.filter(Se=>Se.kind==="audiooutput")),Xe("")}catch(R){Xe("Failed to load audio devices"),console.error("Error loading media devices:",R)}},[]),X=x.useCallback(R=>{b(R),we(!0),be("")},[]),le=x.useCallback(async()=>{Oe(!0),be("");try{const R=localStorage.getItem("accord_token")||(u?localStorage.getItem(`accord_token_${I.getBaseUrl().replace(/https?:\/\//,"")}`):null);R&&await I.updateProfile({display_name:v.displayName,bio:v.bio},R),localStorage.setItem("accord_account_settings",JSON.stringify(v)),o==null||o(v),we(!1),be("Profile saved!")}catch(R){console.error("Failed to save profile:",R),localStorage.setItem("accord_account_settings",JSON.stringify(v)),o==null||o(v),we(!1),be("Saved locally (server sync failed)")}finally{Oe(!1)}},[v,u,o]),oe=x.useCallback(R=>{localStorage.setItem("accord_appearance_settings",JSON.stringify(R)),k(R)},[]),w=x.useCallback(R=>{localStorage.setItem("accord_voice_settings",JSON.stringify(R)),U(R)},[]),D=x.useCallback(R=>{localStorage.setItem("accord_privacy_settings",JSON.stringify(R)),te(R)},[]),K=x.useCallback(R=>{Rt.updatePreferences(R),Q(R)},[]),ie=R=>{const Se=document.documentElement;R.theme==="light"?(Se.style.setProperty("--bg-primary","#ffffff"),Se.style.setProperty("--bg-secondary","#f6f6f6"),Se.style.setProperty("--bg-tertiary","#e3e5e8"),Se.style.setProperty("--text-primary","#2e3338"),Se.style.setProperty("--text-secondary","#747f8d")):(Se.style.setProperty("--bg-primary","#36393f"),Se.style.setProperty("--bg-secondary","#2f3136"),Se.style.setProperty("--bg-tertiary","#202225"),Se.style.setProperty("--text-primary","#dcddde"),Se.style.setProperty("--text-secondary","#8e9297")),Se.style.setProperty("--font-size",`${R.fontSize}px`),localStorage.setItem("accord_font_size",String(R.fontSize));const Ge={compact:"2px",comfortable:"8px",cozy:"16px"};Se.style.setProperty("--message-spacing",Ge[R.messageDensity]),localStorage.setItem("accord_message_density",R.messageDensity),document.body.className=`theme-${R.theme} density-${R.messageDensity}`};x.useEffect(()=>{const R=Se=>{r&&Se.key==="Escape"&&i()};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[r,i]);const ee=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({audio:!0});setTimeout(()=>{R.getTracks().forEach(Se=>Se.stop()),alert("Microphone test completed!")},2e3)}catch(R){alert("Microphone test failed: "+R)}},ue=()=>{const R=new(window.AudioContext||window.webkitAudioContext),Se=R.createOscillator(),Ge=R.createGain();Se.connect(Ge),Ge.connect(R.destination),Se.frequency.setValueAtTime(440,R.currentTime),Ge.gain.setValueAtTime(O.outputVolume/100*.1,R.currentTime),Se.start(),Se.stop(R.currentTime+.5)},[_e,Ye]=x.useState(""),[Re,qe]=x.useState(""),[ot,It]=x.useState(null),[Mt,Qt]=x.useState(""),[Ot,rn]=x.useState(!1),_n=x.useRef(null),Pt=()=>{const Se=((u==null?void 0:u.public_key_hash)||"").substring(0,16);if(!Se){alert("No identity found to export.");return}const Ge=localStorage.getItem(`accord_private_key_${Se}`),Be=localStorage.getItem(`accord_public_key_${Se}`),ct=Ge||localStorage.getItem("accord_private_key"),Ke=Be||localStorage.getItem("accord_public_key");if(!ct||!Ke){alert("Could not find encrypted keys in storage. Cannot export.");return}const H=JSON.stringify({version:1,public_key:Ke,encrypted_private_key:ct,public_key_hash:Se},null,2),Le=new Blob([H],{type:"application/json"}),Ht=URL.createObjectURL(Le),Qe=document.createElement("a");Qe.href=Ht,Qe.download=`accord-identity-${Se}.json`,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),URL.revokeObjectURL(Ht)},un=R=>{var Be;qe(""),Ye("");const Se=(Be=R.target.files)==null?void 0:Be[0];if(!Se)return;const Ge=new FileReader;Ge.onload=ct=>{var Ke;try{const H=JSON.parse((Ke=ct.target)==null?void 0:Ke.result);if(!H.version||!H.public_key||!H.encrypted_private_key||!H.public_key_hash){qe("Invalid identity file: missing required fields (version, public_key, encrypted_private_key, public_key_hash).");return}if(H.version!==1){qe(`Unsupported identity file version: ${H.version}`);return}It({hash16:H.public_key_hash,encPrivKey:H.encrypted_private_key,pubKeyB64:H.public_key})}catch{qe("Failed to parse identity file. Must be valid JSON.")}},Ge.readAsText(Se),R.target.value=""},yn=async()=>{if(!(!ot||!Mt)){rn(!0),qe("");try{const{hash16:R,encPrivKey:Se,pubKeyB64:Ge}=ot;if(localStorage.setItem(`accord_private_key_${R}`,Se),localStorage.setItem(`accord_public_key_${R}`,Ge),localStorage.setItem("accord_private_key",Se),localStorage.setItem("accord_public_key",Ge),!await Uf(Mt,R)){qe("Incorrect password  could not decrypt the private key."),rn(!1);return}za(R),It(null),Qt(""),Ye("Identity imported successfully! Reloading..."),setTimeout(()=>window.location.reload(),1200)}catch(R){qe(`Import failed: ${R.message||"unknown error"}`)}finally{rn(!1)}}},ln=()=>{if(!z){j(!0);return}const R=[];for(let Se=0;Se<localStorage.length;Se++){const Ge=localStorage.key(Se);Ge&&Ge.startsWith("accord_")&&R.push(Ge)}R.forEach(Se=>localStorage.removeItem(Se)),j(!1),alert("Local data cleared. Please refresh the app."),window.location.reload()},Pn=()=>{if(!se.trim())return;let R=se.trim();!R.startsWith("http://")&&!R.startsWith("https://")&&(R="http://"+R),I.setBaseUrl(R),alert(`Relay URL set to ${R}. You may need to re-authenticate.`),V("")},ua=R=>R.slice(0,32).replace(/(.{4})/g,"$1 ").trim().toUpperCase();return r?l.jsx("div",{className:"settings-overlay",children:l.jsxs("div",{className:"settings-modal",children:[l.jsxs("div",{className:"settings-sidebar",children:[l.jsx("div",{className:"settings-header",children:l.jsx("h2",{children:"Settings"})}),l.jsxs("nav",{className:"settings-nav",children:[l.jsx("button",{className:`settings-nav-item ${m==="account"?"active":""}`,onClick:()=>g("account"),children:" Profile"}),l.jsx("button",{className:`settings-nav-item ${m==="appearance"?"active":""}`,onClick:()=>g("appearance"),children:" Appearance"}),l.jsx("button",{className:`settings-nav-item ${m==="notifications"?"active":""}`,onClick:()=>g("notifications"),children:" Notifications"}),l.jsx("button",{className:`settings-nav-item ${m==="voice"?"active":""}`,onClick:()=>g("voice"),children:" Voice & Audio"}),l.jsx("button",{className:`settings-nav-item ${m==="privacy"?"active":""}`,onClick:()=>g("privacy"),children:" Privacy"}),l.jsx("button",{className:`settings-nav-item ${m==="advanced"?"active":""}`,onClick:()=>g("advanced"),children:" Advanced"}),l.jsx("button",{className:`settings-nav-item ${m==="server"?"active":""}`,onClick:()=>g("server"),children:" Server Info"}),l.jsx("button",{className:`settings-nav-item ${m==="about"?"active":""}`,onClick:()=>g("about"),children:" About"})]})]}),l.jsxs("div",{className:"settings-content",children:[l.jsx("div",{className:"settings-content-header",children:l.jsx("button",{className:"settings-close",onClick:i,children:""})}),l.jsxs("div",{className:"settings-panel",children:[m==="account"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Profile"}),l.jsxs("div",{className:"settings-group",style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[l.jsxs("div",{onClick:()=>{const R=document.createElement("input");R.type="file",R.accept="image/png,image/jpeg,image/gif,image/webp",R.onchange=async Se=>{var Be;const Ge=(Be=Se.target.files)==null?void 0:Be[0];if(Ge){if(Ge.size>256*1024){be("Avatar must be under 256KB");return}try{const ct=localStorage.getItem("accord_auth_token")||"";await I.uploadUserAvatar(Ge,ct),be("Avatar updated!"),we(!1)}catch(ct){be(ct instanceof Error?ct.message:"Failed to upload avatar")}}},R.click()},style:{width:"80px",height:"80px",borderRadius:"50%",background:"#40444b",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",overflow:"hidden",fontSize:"32px",color:"#b9bbbe",flexShrink:0,position:"relative"},title:"Click to upload avatar",children:[u!=null&&u.id?l.jsx("img",{src:`${I.getUserAvatarUrl(u.id)}?t=${Date.now()}`,alt:((u==null?void 0:u.display_name)||"U")[0],style:{width:"100%",height:"100%",objectFit:"cover"},onError:R=>{R.target.style.display="none",R.target.parentElement.textContent=((u==null?void 0:u.display_name)||"U")[0]}}):((u==null?void 0:u.display_name)||"U")[0],l.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",fontSize:"10px",textAlign:"center",padding:"2px",color:"#fff"},children:"EDIT"})]}),l.jsx("div",{style:{color:"#b9bbbe",fontSize:"13px"},children:"Click to upload avatar (PNG, JPEG, GIF, WebP  max 256KB)"})]}),(u==null?void 0:u.public_key_hash)&&l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Public Key Fingerprint"}),l.jsx("div",{className:"settings-info",style:{fontFamily:"var(--font-mono)",fontSize:13,letterSpacing:"0.05em"},children:ua(u.public_key_hash)})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Display Name"}),l.jsx("input",{type:"text",className:"settings-input",value:v.displayName,onChange:R=>X({...v,displayName:R.target.value}),placeholder:"Enter display name..."})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Bio"}),l.jsx("textarea",{className:"settings-textarea",value:v.bio,onChange:R=>X({...v,bio:R.target.value}),placeholder:"Tell others about yourself...",rows:3})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Status"}),l.jsx("div",{className:"status-buttons",children:["online","away","busy","invisible"].map(R=>l.jsxs("button",{className:`status-button ${v.status===R?"active":""}`,onClick:()=>X({...v,status:R}),children:[l.jsx("div",{className:`status-indicator ${R}`}),R.charAt(0).toUpperCase()+R.slice(1)]},R))})]}),l.jsxs("div",{className:"settings-group",style:{display:"flex",alignItems:"center",gap:12},children:[l.jsx("button",{className:"btn btn-primary",style:{width:"auto",padding:"10px 24px"},disabled:!Ae||de,onClick:le,children:de?"Saving...":"Save Profile"}),Te&&l.jsx("span",{style:{fontSize:13,color:Te.includes("failed")?"var(--yellow)":"var(--green)"},children:Te})]}),l.jsx("div",{className:"settings-group",children:l.jsxs("div",{className:"settings-info",children:[l.jsx("strong",{children:"User ID:"})," ",(u==null?void 0:u.id)||"Unknown"]})})]}),m==="appearance"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Appearance"}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Theme"}),l.jsxs("div",{className:"theme-buttons",children:[l.jsx("button",{className:`theme-button dark ${S.theme==="dark"?"active":""}`,onClick:()=>oe({...S,theme:"dark"}),children:" Dark"}),l.jsx("button",{className:`theme-button light ${S.theme==="light"?"active":""}`,onClick:()=>oe({...S,theme:"light"}),children:" Light"})]}),l.jsx("div",{className:"settings-help",children:"Light theme is experimental and may not look perfect everywhere."})]}),l.jsxs("div",{className:"settings-group",children:[l.jsxs("label",{className:"settings-label",children:["Font Size: ",S.fontSize,"px"]}),l.jsx("input",{type:"range",className:"settings-slider",min:"12",max:"20",step:"1",value:S.fontSize,onChange:R=>oe({...S,fontSize:parseInt(R.target.value)})}),l.jsxs("div",{className:"settings-help",style:{display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:"12px"}),l.jsx("span",{children:"20px"})]})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Message Density"}),l.jsx("div",{className:"font-size-buttons",children:["compact","comfortable","cozy"].map(R=>l.jsx("button",{className:`font-size-button ${S.messageDensity===R?"active":""}`,onClick:()=>oe({...S,messageDensity:R}),children:R.charAt(0).toUpperCase()+R.slice(1)},R))}),l.jsx("div",{className:"settings-help",children:"Controls spacing between messages. Compact shows more messages on screen."})]})]}),m==="notifications"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Notification Settings"}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:A.enabled,onChange:R=>K({...A,enabled:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Enable Desktop Notifications"]})}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Notification Mode"}),l.jsx("div",{className:"notification-mode-buttons",children:["all","mentions","none"].map(R=>l.jsx("button",{className:`notification-button ${A.mode===R?"active":""}`,onClick:()=>K({...A,mode:R}),children:R==="all"?"All Messages":R==="mentions"?"Mentions Only":"None"},R))})]}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:A.sounds,onChange:R=>K({...A,sounds:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Sound Notifications"]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("div",{className:"test-buttons",children:[l.jsx("button",{className:"test-button",onClick:()=>{"Notification"in window&&Notification.permission==="granted"?new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"}):Notification.requestPermission().then(R=>{R==="granted"&&new Notification("Test Notification",{body:"This is a test notification from Accord!",icon:"/favicon.ico"})})},children:"Test Notification"}),l.jsx("button",{className:"test-button",onClick:()=>{var R;return(R=Rt.playNotificationSound)==null?void 0:R.call(Rt)},children:"Test Sound"}),l.jsx("button",{className:"clear-button",onClick:()=>{Rt.clearAllUnreads(),alert("All unread counts cleared")},children:"Clear All Unreads"})]})})]}),m==="voice"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Voice & Audio Settings"}),De&&l.jsx("div",{className:"settings-error",children:De}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-label",children:["Input Device",l.jsxs("select",{className:"settings-select",value:O.inputDevice,onChange:R=>w({...O,inputDevice:R.target.value}),children:[l.jsx("option",{value:"default",children:"Default"}),re.map(R=>l.jsx("option",{value:R.deviceId,children:R.label||`Microphone ${R.deviceId.slice(0,8)}...`},R.deviceId))]})]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-label",children:["Output Device",l.jsxs("select",{className:"settings-select",value:O.outputDevice,onChange:R=>w({...O,outputDevice:R.target.value}),children:[l.jsx("option",{value:"default",children:"Default"}),me.map(R=>l.jsx("option",{value:R.deviceId,children:R.label||`Speaker ${R.deviceId.slice(0,8)}...`},R.deviceId))]})]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-label",children:["Input Volume: ",O.inputVolume,"%",l.jsx("input",{type:"range",className:"settings-slider",min:"0",max:"100",value:O.inputVolume,onChange:R=>w({...O,inputVolume:parseInt(R.target.value)})})]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-label",children:["Output Volume: ",O.outputVolume,"%",l.jsx("input",{type:"range",className:"settings-slider",min:"0",max:"100",value:O.outputVolume,onChange:R=>w({...O,outputVolume:parseInt(R.target.value)})})]})}),l.jsxs("div",{className:"settings-group",children:[l.jsxs("label",{className:"settings-label",children:["Voice Activity Sensitivity: ",O.vadSensitivity,"%",l.jsx("input",{type:"range",className:"settings-slider",min:"0",max:"100",value:O.vadSensitivity,onChange:R=>w({...O,vadSensitivity:parseInt(R.target.value)})})]}),l.jsx("div",{className:"settings-help",children:"Higher values require louder audio to trigger voice activation."})]}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:O.echoCancellation,onChange:R=>w({...O,echoCancellation:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Echo Cancellation"]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:O.noiseSuppression,onChange:R=>w({...O,noiseSuppression:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Noise Suppression"]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:O.autoGainControl,onChange:R=>w({...O,autoGainControl:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Automatic Gain Control"]})}),l.jsx("div",{className:"settings-group",children:l.jsxs("div",{className:"test-buttons",children:[l.jsx("button",{className:"test-button",onClick:ee,children:"Test Microphone"}),l.jsx("button",{className:"test-button",onClick:ue,children:"Test Speakers"}),l.jsx("button",{className:"refresh-button",onClick:G,children:"Refresh Devices"})]})})]}),m==="privacy"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Privacy Settings"}),l.jsxs("div",{className:"settings-group",children:[l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:F.readReceipts,onChange:R=>D({...F,readReceipts:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Send Read Receipts"]}),l.jsx("div",{className:"settings-help",children:"Let others know when you've read their messages."})]}),l.jsxs("div",{className:"settings-group",children:[l.jsxs("label",{className:"settings-checkbox",children:[l.jsx("input",{type:"checkbox",checked:F.typingIndicators,onChange:R=>D({...F,typingIndicators:R.target.checked})}),l.jsx("span",{className:"checkmark"}),"Show Typing Indicators"]}),l.jsx("div",{className:"settings-help",children:"Show when you're typing to other users."})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Block List"}),l.jsx("div",{className:"blocked-users",children:F.blockedUsers.length===0?l.jsx("div",{className:"settings-help",children:"No blocked users"}):F.blockedUsers.map(R=>l.jsxs("div",{className:"blocked-user",children:[l.jsx("span",{children:R}),l.jsx("button",{className:"unblock-button",onClick:()=>D({...F,blockedUsers:F.blockedUsers.filter(Se=>Se!==R)}),children:"Unblock"})]},R))})]})]}),m==="advanced"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Advanced"}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Current Relay URL"}),l.jsx("div",{className:"settings-info",style:{fontFamily:"var(--font-mono)",fontSize:13},children:I.getBaseUrl()})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Connect to Relay Manually"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{type:"text",className:"settings-input",value:se,onChange:R=>V(R.target.value),placeholder:"e.g. 192.168.1.100:8080",onKeyDown:R=>{R.key==="Enter"&&Pn()}}),l.jsx("button",{className:"btn btn-primary",style:{width:"auto",padding:"10px 16px",whiteSpace:"nowrap"},onClick:Pn,disabled:!se.trim(),children:"Connect"})]}),l.jsx("div",{className:"settings-help",children:"Enter a relay server address to connect to a different server."})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Identity Key Management"}),l.jsxs("div",{className:"test-buttons",children:[l.jsx("button",{className:"test-button",onClick:Pt,children:" Export Identity"}),l.jsx("button",{className:"test-button",onClick:()=>{var R;return(R=_n.current)==null?void 0:R.click()},children:" Import Identity"}),l.jsx("input",{ref:_n,type:"file",accept:".json",style:{display:"none"},onChange:un})]}),l.jsx("div",{className:"settings-help",children:"Export your encrypted identity to a JSON file for backup or transfer to another browser. Import a previously exported identity file to restore access."}),_e&&l.jsx("div",{className:"auth-success",style:{marginTop:8},children:_e}),Re&&l.jsx("div",{style:{color:"var(--red, #f44)",marginTop:8,fontSize:13},children:Re}),ot&&l.jsxs("div",{style:{marginTop:12,padding:12,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsxs("div",{style:{marginBottom:8,fontSize:14},children:["Enter password to decrypt identity ",l.jsx("code",{children:ot.hash16}),":"]}),l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsx("input",{type:"password",placeholder:"Password",value:Mt,onChange:R=>Qt(R.target.value),onKeyDown:R=>{R.key==="Enter"&&yn()},className:"form-input",style:{flex:1},autoFocus:!0}),l.jsx("button",{className:"test-button",onClick:yn,disabled:Ot||!Mt,children:Ot?"Verifying...":"Confirm"}),l.jsx("button",{className:"test-button",onClick:()=>{It(null),Qt("")},children:"Cancel"})]})]})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Clear Local Data"}),z?l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsx("button",{className:"clear-button",onClick:ln,children:"Confirm  Delete Everything"}),l.jsx("button",{className:"test-button",onClick:()=>j(!1),children:"Cancel"})]}):l.jsx("button",{className:"clear-button",onClick:ln,children:" Clear Local Data"}),l.jsx("div",{className:"settings-help",children:"Removes all locally stored settings, keys, and tokens. This cannot be undone."})]})]}),m==="server"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"Server Info"}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Connection Status"}),l.jsx("div",{className:"settings-info",children:h!=null&&h.isConnected?" Connected":" Disconnected"})]}),(h==null?void 0:h.version)&&l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Server Version"}),l.jsx("div",{className:"settings-info",children:h.version})]}),(h==null?void 0:h.buildHash)&&l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Server Build Hash"}),l.jsxs("div",{className:"settings-info copyable",style:{fontFamily:"var(--font-mono)",fontSize:13,cursor:"pointer"},title:"Click to copy",onClick:()=>{navigator.clipboard.writeText(h.buildHash)},children:[h.buildHash," "]})]}),(h==null?void 0:h.connectedSince)&&l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Connected Since"}),l.jsx("div",{className:"settings-info",children:new Date(h.connectedSince).toLocaleString()})]}),l.jsxs("div",{className:"settings-group",children:[l.jsx("label",{className:"settings-label",children:"Relay Address"}),l.jsx("div",{className:"settings-info",style:{fontFamily:"var(--font-mono)",fontSize:13},children:(h==null?void 0:h.relayAddress)||I.getBaseUrl()})]})]}),m==="about"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"About Accord"}),l.jsxs("div",{className:"about-content",children:[l.jsxs("div",{className:"about-logo",children:[l.jsx("div",{className:"app-icon",children:"A"}),l.jsx("h2",{children:"Accord"})]}),l.jsxs("div",{className:"about-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("strong",{children:"Version:"})," 0.1.0-beta"]}),l.jsxs("div",{className:"info-row",children:[l.jsx("strong",{children:"Protocol:"})," Accord Protocol v1"]}),l.jsxs("div",{className:"info-row",children:[l.jsx("strong",{children:"Platform:"})," Desktop (Tauri + React)"]}),l.jsxs("div",{className:"info-row",children:[l.jsx("strong",{children:"Build:"})," Development"]})]}),l.jsx("div",{className:"about-description",children:l.jsx("p",{children:"Accord is an open-source, privacy-first chat application with end-to-end encryption. Your keys, your data, your control."})}),l.jsxs("div",{className:"about-links",children:[l.jsx("a",{href:"https://github.com/accord-chat/accord",target:"_blank",rel:"noopener noreferrer",children:" Source Code on GitHub"}),l.jsx("a",{href:"https://github.com/accord-chat/accord/issues",target:"_blank",rel:"noopener noreferrer",children:" Report a Bug"}),l.jsx("a",{href:"https://github.com/accord-chat/accord/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:" License (MIT)"})]}),l.jsxs("div",{className:"about-credits",children:[l.jsx("h4",{children:"Built with  by the Accord team"}),l.jsx("p",{children:"Special thanks to all contributors and the open-source community."})]})]})]})]})]})]})}):null};function Tt(r){return!r||r.length<16?r||"unknown":r.substring(0,8)+"..."+r.substring(r.length-8)}const e0=({channelName:r,connectedAt:i,onDisconnect:u})=>{const[o,h]=x.useState("00:00"),[m,g]=x.useState(!1),[v,b]=x.useState(!1);return x.useEffect(()=>{if(!i)return;const S=setInterval(()=>{const k=Math.floor((Date.now()-i)/1e3),A=String(Math.floor(k/60)).padStart(2,"0"),Q=String(k%60).padStart(2,"0");h(`${A}:${Q}`)},1e3);return()=>clearInterval(S)},[i]),l.jsxs("div",{className:"voice-connection-panel",children:[l.jsxs("div",{className:"voice-connection-info",children:[l.jsx("span",{className:"voice-connection-dot",children:""}),l.jsxs("div",{className:"voice-connection-details",children:[l.jsx("span",{className:"voice-connection-label",children:"Voice Connected"}),l.jsx("span",{className:"voice-connection-channel",children:r})]}),l.jsx("span",{className:"voice-connection-timer",children:o})]}),l.jsxs("div",{className:"voice-connection-controls",children:[l.jsx("button",{className:`voice-ctrl-btn ${m?"active":""}`,onClick:()=>g(!m),title:m?"Unmute":"Mute",children:m?"":""}),l.jsx("button",{className:`voice-ctrl-btn ${v?"active":""}`,onClick:()=>{b(!v),v||g(!0)},title:v?"Undeafen":"Deafen",children:v?"":""}),l.jsx("button",{className:"voice-ctrl-btn voice-disconnect-btn",onClick:u,title:"Disconnect",children:""})]})]})};function t0(){var Pl,Ts,Qa,ya,Ma,ba,As,ks,vl,Xi,$a,en;const[r,i]=x.useState(()=>localStorage.getItem("accord_server_url")||"http://localhost:8080"),[u,o]=x.useState(!1),[h,m]=x.useState(!1),[g,v]=x.useState(!1),[b,S]=x.useState(""),[k,A]=x.useState(()=>{if(localStorage.getItem("accord_server_url"))return!1;const p=typeof window<"u"?window.location.origin:"";return p&&!p.includes(":1420")&&!p.includes(":5173")&&!p.includes(":3000")?(localStorage.setItem("accord_server_url",p),!1):!0}),[Q,O]=x.useState("choose"),[U,F]=x.useState(""),[te,re]=x.useState(null),[ye,me]=x.useState(""),[he,De]=x.useState(!1),[Xe,Ae]=x.useState(""),[we,de]=x.useState(!1),[Oe,Te]=x.useState(""),[be,se]=x.useState(!1),[V,z]=x.useState(!1),[j,G]=x.useState(!0),[X,le]=x.useState(""),[oe,w]=x.useState(""),[D,K]=x.useState(""),[ie,ee]=x.useState(!1),[ue,_e]=x.useState(""),[Ye,Re]=x.useState(!1),[qe,ot]=x.useState(""),[It,Mt]=x.useState(!1),[Qt,Ot]=x.useState(!1),[rn,_n]=x.useState(""),[Pt,un]=x.useState(""),[yn,ln]=x.useState(""),[Pn,ua]=x.useState(!1),[R,Se]=x.useState(()=>Sg()),Ge=x.useRef(""),[Be,ct]=x.useState(null),[Ke]=x.useState(Tx()),[H,Le]=x.useState({isAuthenticated:!1,nodes:[],messages:[],isConnected:!1}),[Ht,Qe]=x.useState(""),[vt,xt]=x.useState("# general"),[pt,Nn]=x.useState(0),[He,La]=x.useState(!1),[Ue,sn]=x.useState(null),[bn,dn]=x.useState({status:"disconnected",reconnectAttempt:0,maxReconnectAttempts:20}),[At,ea]=x.useState(null),[Fe,fn]=x.useState([]),[kn,vn]=x.useState([]),[qt,ta]=x.useState([]),[Ne,na]=x.useState(null),[Ve,Kt]=x.useState(null),[Gn,Vn]=x.useState(!1),[q,pe]=x.useState(!0),[ke,ut]=x.useState(void 0),gt=x.useRef(null),[Rn,Bl]=x.useState(null),[Ha,je]=x.useState(""),[E,ne]=x.useState(null),xe=(d,p)=>{Bl(d),je(p)},[tt,Dt]=x.useState({}),[$e,$t]=x.useState(!1),[jn,hn]=x.useState(""),[aa,Bt]=x.useState("text"),[al,ll]=x.useState(!1),[no,Ll]=x.useState(""),[_i,Lt]=x.useState(""),[on,is]=x.useState(null),[Ac,Ni]=x.useState(""),[kc,Hl]=x.useState(null),[ao,En]=x.useState(""),[lo,ql]=x.useState(!1),[ji,ja]=x.useState(""),[io,so]=x.useState(!1),[il,ju]=x.useState([]),[oo,co]=x.useState(null),[ro,Rc]=x.useState(null),Eu=["","","","","","","","","",""],[ss,Ea]=x.useState(Rt.getPreferences()),[Ei,Ci]=x.useState(!1),[Kl,da]=x.useState(0),[os,Yl]=x.useState(!1),[sl,Gl]=x.useState([]),[St,uo]=x.useState(null),[Vl,fa]=x.useState(!1),[Ti,Ca]=x.useState(!1),[fo,ol]=x.useState(!1),[qa,cs]=x.useState(""),[xn,Ka]=x.useState(!1),[Ai,cl]=x.useState(""),[rs,ki]=x.useState(""),[us,rl]=x.useState(""),[Ri,ho]=x.useState(!1),[mo,ds]=x.useState(!1),[Zl,po]=x.useState(""),[Mi,Cu]=x.useState(""),[go,Mc]=x.useState(null),[Tu,fs]=x.useState(!1),[yo,bo]=x.useState(!1),[Au,ku]=x.useState(new Set),[Di,Dc]=x.useState([]),[Ui,Uc]=x.useState({}),[Xl,zc]=x.useState(null),[Ru,vo]=x.useState(!1),[xo,So]=x.useState(""),[wo,Oc]=x.useState(!1),[ul,_o]=x.useState(null),[hs,Ya]=x.useState(""),[ms,zi]=x.useState(null),[ps,Il]=x.useState(!1),[dl,No]=x.useState(""),[fl,Bc]=x.useState(!1),[jo,gs]=x.useState(!1),[Eo,Lc]=x.useState(!0),[Oi,hl]=x.useState(!1),Hc=x.useRef(null),ml=x.useRef(void 0),ys=x.useRef(!1),[qc,Co]=x.useState(!1),[bs,vs]=x.useState(0),[To,Kc]=x.useState(new Map),[Yc,Mu]=x.useState(new Map),[Jt,Bi]=x.useState(null),[Gc,Cn]=x.useState(new Map),[Ql,Ao]=x.useState(new Map),[ko,Vc]=x.useState(0),Ro=x.useState(()=>localStorage.getItem("accord-typing-indicators")!=="false")[0],xs=x.useCallback(d=>tt[d]||"member",[tt]),Li=x.useCallback((d,p)=>{switch(xs(d)){case"admin":return!0;case"moderator":return["KickMembers","ManageInvites"].includes(p);case"member":return!1;default:return!1}},[xs]),Ga=d=>{switch(d){case"admin":return"";case"moderator":return"";default:return""}},Mn=d=>{d.message&&d.message.includes("403")?Lt("You don't have permission to perform this action"):Lt(d.message||"An error occurred"),setTimeout(()=>Lt(""),5e3)},Hi=x.useCallback(d=>{if(!Ro||!Ue||!d)return;const p=Date.now();p-ko>=3e3&&(Ue.sendTypingStart(d),Vc(p))},[Ue,Ro,ko]),Ss=x.useCallback(d=>{const p=Gc.get(d)||[],_=localStorage.getItem("accord_user_id"),T=p.filter(ae=>ae.user_id!==_);if(T.length===0)return"";const J=ae=>{var lt,Pe;const ge=qt.find(ve=>ve.user_id===ae.user_id);return(lt=ge==null?void 0:ge.user)!=null&&lt.display_name?ge.user.display_name:(Pe=ge==null?void 0:ge.profile)!=null&&Pe.display_name?ge.profile.display_name:ae.displayName};return T.length===1?`${J(T[0])} is typing`:T.length===2?`${J(T[0])} and ${J(T[1])} are typing`:"Several people are typing"},[Gc,qt]);x.useEffect(()=>{const d=async()=>{const p=jf(),_=Ge.current;if(!p||!_)return null;try{const T=await I.login(p,_);return Js(T.token),localStorage.setItem("accord_user_id",T.user_id),Le(J=>({...J,token:T.token})),T.token}catch{return null}};return I.setTokenRefresher(d),()=>I.setTokenRefresher(null)},[]),x.useEffect(()=>{(async()=>{if(!localStorage.getItem("accord_server_url")){const _=await ov();if(_){I.setBaseUrl(_),i(_),La(!0),A(!1);return}}const p=await I.testConnection();La(p)})()},[]);const Va=x.useCallback(d=>{d.on("connected",()=>{var p;Le(_=>({..._,isConnected:!0})),dn({status:"connected",reconnectAttempt:0,maxReconnectAttempts:20}),Mc(Date.now()),(p=ml.current)==null||p.call(ml)}),d.on("hello",p=>{p.server_version&&Cu(p.server_version),p.server_build_hash&&po(p.server_build_hash)}),d.on("disconnected",()=>{Le(p=>({...p,isConnected:!1})),Mc(null)}),d.on("connection_status",p=>{dn(p)}),d.on("auth_error",async()=>{const p=jf(),_=Ge.current;if(p&&_)try{const T=await I.login(p,_);Js(T.token),localStorage.setItem("accord_user_id",T.user_id),Le(ae=>({...ae,token:T.token})),d.disconnect();const J=new $s(T.token,r.replace(/^http/,"ws"));Va(J),sn(J),J.connect();return}catch{}Es()}),d.on("message",p=>{}),d.on("channel_message",async p=>{var ce,dt,wt;let _=p.encrypted_data,T=!1;if(Ke&&Be&&p.channel_id)try{const rt=await _a(Be.privateKey,p.channel_id);_=await bu(rt,p.encrypted_data),T=!0}catch(rt){console.warn("Failed to decrypt message, showing encrypted data:",rt)}const J=qt.find(rt=>rt.user_id===p.from),ae=J?((ce=J.user)==null?void 0:ce.display_name)||((dt=J.profile)==null?void 0:dt.display_name)||Tt(J.public_key_hash||p.from||""):Tt(p.from||""),ge={id:p.message_id||Math.random().toString(),author:ae,content:_,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:p.timestamp*1e3,channel_id:p.channel_id,isEncrypted:T,reply_to:p.reply_to,replied_message:p.replied_message?{id:p.replied_message.id,sender_id:p.replied_message.sender_id,sender_public_key_hash:p.replied_message.sender_public_key_hash||"",encrypted_payload:p.replied_message.encrypted_payload,created_at:p.replied_message.created_at,content:p.replied_message.content}:void 0};if(p.from&&Mu(rt=>{const Bn=new Map(rt);return Bn.set(p.from,Date.now()),Bn}),p.is_dm||sl.some(rt=>rt.id===p.channel_id)){Yt();const rt=sl.find(Bn=>Bn.id===p.channel_id);rt&&(Rt.addMessage(`dm-${rt.id}`,p.channel_id,ge),da(Bn=>Bn+1))}else{const rt=(wt=Fe.find(Bn=>kn.some(pn=>pn.id===p.channel_id&&pn.node_id===Bn.id)))==null?void 0:wt.id;rt&&(Rt.addMessage(rt,p.channel_id,ge),da(Bn=>Bn+1))}const Pe=gt.current,ve=Pe?Pe.scrollHeight-Pe.scrollTop-Pe.clientHeight<50:!0;Le(rt=>({...rt,messages:[...rt.messages,ge]})),ve&&Pe?setTimeout(()=>{Pe.scrollTop=Pe.scrollHeight},0):vs(rt=>rt+1)}),d.on("node_info",p=>{p.data&&Le(_=>({..._,nodes:_.nodes.map(T=>T.id===p.data.id?p.data:T)}))}),d.on("message_edit",async p=>{try{let _=p.encrypted_data;if(Ke&&Be){const T=await _a(Be.privateKey,p.channel_id);_=await bu(T,p.encrypted_data)}Le(T=>({...T,messages:T.messages.map(J=>J.id===p.message_id?{...J,content:_,edited_at:p.edited_at,isEncrypted:Ke}:J)}))}catch(_){console.warn("Failed to decrypt edited message:",_),Le(T=>({...T,messages:T.messages.map(J=>J.id===p.message_id?{...J,content:p.encrypted_data,edited_at:p.edited_at,isEncrypted:!0}:J)}))}}),d.on("message_delete",p=>{Le(_=>({..._,messages:_.messages.filter(T=>T.id!==p.message_id)}))}),d.on("reaction_add",p=>{Le(_=>({..._,messages:_.messages.map(T=>T.id===p.message_id?{...T,reactions:p.reactions}:T)}))}),d.on("reaction_remove",p=>{Le(_=>({..._,messages:_.messages.map(T=>T.id===p.message_id?{...T,reactions:p.reactions}:T)}))}),d.on("message_pin",p=>{Le(_=>({..._,messages:_.messages.map(T=>T.id===p.message_id?{...T,pinned_at:p.timestamp,pinned_by:p.pinned_by}:T)}))}),d.on("message_unpin",p=>{Le(_=>({..._,messages:_.messages.map(T=>T.id===p.message_id?{...T,pinned_at:void 0,pinned_by:void 0}:T)}))}),d.on("typing_start",p=>{const _={user_id:p.user_id,displayName:p.public_key_hash?Tt(p.public_key_hash):p.user_id.substring(0,8),startedAt:Date.now()};Cn(J=>{const ae=new Map(J),lt=(ae.get(p.channel_id)||[]).filter(Pe=>Pe.user_id!==p.user_id);return ae.set(p.channel_id,[...lt,_]),ae});const T=`${p.channel_id}_${p.user_id}`;Ao(J=>{const ae=new Map(J),ge=ae.get(T);ge&&clearTimeout(ge);const lt=window.setTimeout(()=>{Cn(Pe=>{const ve=new Map(Pe),dt=(ve.get(p.channel_id)||[]).filter(wt=>wt.user_id!==p.user_id);return dt.length>0?ve.set(p.channel_id,dt):ve.delete(p.channel_id),ve}),Ao(Pe=>{const ve=new Map(Pe);return ve.delete(T),ve})},5e3);return ae.set(T,lt),ae})}),d.on("presence_update",p=>{p.user_id&&p.status&&Kc(_=>{const T=new Map(_);return T.set(p.user_id,p.status),T})}),d.on("error",p=>{console.error("WebSocket error:",p)})},[Ke,Be]);x.useEffect(()=>()=>{Ql.forEach(d=>clearTimeout(d))},[Ql]);const mn=x.useCallback(async()=>{if(!(!H.token||!He))try{const d=await I.getUserNodes(H.token);fn(Array.isArray(d)?d:[]),d.length>0&&!Ne&&na(d[0].id)}catch(d){console.error("Failed to load nodes:",d)}},[H.token,He,Ne]);ml.current=mn;const Dn=x.useCallback(async d=>{if(!(!H.token||!He))try{const p=await I.getNodeChannels(d,H.token);vn(Array.isArray(p)?p:[]),p.length>0&&!Ve&&Kt(p[0].id)}catch(p){console.error("Failed to load channels:",p),Mn(p),vn([])}},[H.token,He,Ve]),Za=x.useCallback(async d=>{if(!(!H.token||!He))try{const p=await I.getNodeMembers(d,H.token),_=(Array.isArray(p)?p:[]).map(J=>{var ae;return{...J,user:J.user||{id:J.user_id,public_key_hash:J.public_key_hash||"",public_key:"",created_at:J.joined_at||0,display_name:((ae=J.profile)==null?void 0:ae.display_name)||void 0}}});ta(_),pl(d,_);const T=localStorage.getItem("accord_user_id");if(T&&_.length>0){const J=_.find(ae=>ae.user_id===T);J&&Dt(ae=>({...ae,[d]:J.role}))}}catch(p){console.error("Failed to load members:",p),Mn(p),ta([])}},[H.token,He]),ws=x.useCallback(async d=>{if(!(!H.token||!He))try{const p=await I.getRoles(d,H.token);Dc(Array.isArray(p)?p:[])}catch(p){console.error("Failed to load roles:",p),Dc([])}},[H.token,He]),pl=x.useCallback(async(d,p)=>{if(!H.token||!He)return;const _={};await Promise.all(p.map(async T=>{try{const J=await I.getMemberRoles(d,T.user_id,H.token);_[T.user_id]=Array.isArray(J)?J:[]}catch{_[T.user_id]=[]}})),Uc(_)},[H.token,He]),Mo=x.useCallback(d=>{const p=Ui[d];if(!p||p.length===0)return;const _=[...p].sort((ae,ge)=>ge.position-ae.position),T=_.find(ae=>ae.hoist&&ae.color);if(T)return T.color;const J=_.find(ae=>ae.color);return(J==null?void 0:J.color)||void 0},[Ui]),Zc=x.useCallback(d=>{const p=Ui[d];if(!(!p||p.length===0))return[...p].sort((_,T)=>T.position-_.position).find(_=>_.hoist)},[Ui]),Xc=x.useCallback(async(d,p,_)=>{if(!(!Ne||!H.token))try{_?await I.removeMemberRole(Ne,d,p,H.token):await I.assignMemberRole(Ne,d,p,H.token);const T=await I.getMemberRoles(Ne,d,H.token);Uc(J=>({...J,[d]:Array.isArray(T)?T:[]}))}catch(T){Lt(T instanceof Error?T.message:"Failed to update role")}},[Ne,H.token]),$l=x.useCallback(async d=>{if(!(!H.token||!He))try{const p=await I.getChannelMessages(d,H.token),_=p.messages.map(T=>({...T,author:T.author||Tt(T.sender_public_key_hash||T.sender_id||"")||"Unknown",time:T.time||new Date(T.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));_.sort((T,J)=>T.timestamp-J.timestamp),Le(T=>({...T,messages:_})),pe(p.has_more),ut(p.next_cursor),setTimeout(()=>{const T=gt.current;T&&(T.scrollTop=T.scrollHeight)},0),Ta(d,_)}catch(p){console.error("Failed to load messages:",p),Mn(p),Le(_=>({..._,messages:[]})),pe(!1),ut(void 0)}},[H.token,He]),Ic=x.useCallback(async d=>{if(!(!H.token||!He||Gn||!q||!ke)){Vn(!0);try{const p=await I.getChannelMessages(d,H.token,50,ke);if(p.messages.length===0){pe(!1),Vn(!1);return}const _=p.messages.map(ge=>({...ge,author:ge.author||Tt(ge.sender_public_key_hash||ge.sender_id||"")||"Unknown",time:ge.time||new Date(ge.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));_.sort((ge,lt)=>ge.timestamp-lt.timestamp);const T=gt.current,J=(T==null?void 0:T.scrollTop)||0,ae=(T==null?void 0:T.scrollHeight)||0;Le(ge=>({...ge,messages:[..._,...ge.messages]})),pe(p.has_more),ut(p.next_cursor),setTimeout(()=>{if(T){const lt=T.scrollHeight-ae;T.scrollTop=J+lt}},0)}catch(p){console.error("Failed to load older messages:",p),Mn(p)}finally{Vn(!1)}}},[H.token,He,Gn,q,ke]),Du=x.useCallback(d=>{const p=Hc.current;if(p){const _=p.selectionStart,T=p.selectionEnd,J=Ht.substring(0,_)+d+Ht.substring(T);Qe(J),setTimeout(()=>{p.selectionStart=p.selectionEnd=_+d.length,p.focus()},0)}else Qe(_=>_+d);hl(!1)},[Ht]),Qc=x.useCallback(d=>{const p=d.target;p.scrollTop<=50&&q&&!Gn&&Ve&&Ic(Ve);const _=p.scrollHeight-p.scrollTop-p.clientHeight;Co(_>200),_<50&&vs(0)},[q,Gn,Ve,Ic]),$c=x.useCallback(()=>{const d=gt.current;d&&(d.scrollTo({top:d.scrollHeight,behavior:"smooth"}),vs(0))},[]),Do=x.useCallback((d,p)=>{na(d),Kt(null),Nn(p),vn([]),ta([]),Le(_=>({..._,messages:[]})),Vn(!1),pe(!0),ut(void 0),Dn(d),Za(d),ws(d)},[Dn,Za,ws]),Yt=x.useCallback(async()=>{if(!(!H.token||!He))try{const d=await I.getDmChannels(H.token);Gl(d.dm_channels)}catch(d){console.error("Failed to load DM channels:",d),Mn(d),Gl([])}},[H.token,He]),qi=x.useCallback(async d=>{if(!H.token||!He)return null;try{const p=await I.createDmChannel(d,H.token);return await Yt(),p}catch(p){return console.error("Failed to create DM channel:",p),Mn(p),null}},[H.token,He,Yt]),Tn=x.useCallback(d=>{na(null),Kt(null),uo(d),Rt.setActiveChannel(d.id),Vn(!1),pe(!0),ut(void 0),$l(d.id),Ue&&Ue.isSocketConnected()&&Ue.joinChannel(d.id)},[$l,Ue]),Xa=x.useCallback(async d=>{const p=await qi(d.id);if(p){await Yt();const _=sl.find(T=>T.id===p.id);_&&Tn(_)}},[qi,Yt,sl,Tn]),_s=async()=>{if(!(!dl.trim()||!H.token)){Bc(!0);try{await I.updateProfile({display_name:dl.trim()},H.token),Le(d=>({...d,user:d.user?{...d.user,display_name:dl.trim()}:d.user})),Rt.setCurrentUsername(dl.trim()),Il(!1),No("")}catch(d){console.error("Failed to update display name:",d)}finally{Bc(!1)}}},Ki=async()=>{if(!H.token)return;const d=ji.trim().slice(0,128);try{await I.updateProfile({custom_status:d||void 0},H.token),En(d),ql(!1)}catch(p){console.error("Failed to update custom status:",p)}};x.useEffect(()=>{var d;(d=H.user)!=null&&d.id&&H.token&&I.getUserProfile(H.user.id,H.token).then(p=>{p!=null&&p.custom_status&&(En(p.custom_status),ja(p.custom_status))}).catch(()=>{})},[(Pl=H.user)==null?void 0:Pl.id,H.token]);const Jl=x.useCallback((d,p)=>{if(Kt(d),xt(p),Le(_=>({..._,activeChannel:d})),Rt.setActiveChannel(d),Ne){const _=H.messages.length>0?H.messages[H.messages.length-1]:null;Rt.markChannelAsRead(Ne,d,_==null?void 0:_.id),localStorage.setItem(`accord_lastread_${d}`,Date.now().toString()),da(T=>T+1)}Vn(!1),pe(!0),ut(void 0),$l(d),Ue&&Ue.isSocketConnected()&&Ue.joinChannel(d)},[$l,Ue,Ne,H.messages]),Uo=async()=>{if(!(!Ne||!H.token||!jn.trim()))try{await I.createChannel(Ne,jn.trim(),aa,H.token),$t(!1),hn(""),Bt("text"),await Dn(Ne)}catch(d){console.error("Failed to create channel:",d),Mn(d)}},gl=async()=>{if(!(!Ne||!H.token))try{const d=await I.createInviteWithOptions(Ne,H.token),p=I.getBaseUrl();try{const T=new URL(p).host;Ll(dv(T,d.invite_code))}catch{Ll(d.invite_code)}ll(!0)}catch(d){console.error("Failed to generate invite:",d),Mn(d)}},Jc=async(d,p)=>{if(!(!Ne||!H.token||!window.confirm(`Are you sure you want to kick ${p} from this node?`)))try{await I.kickMember(Ne,d,H.token),await Za(Ne)}catch(T){console.error("Failed to kick member:",T),Mn(T)}},Ns=async d=>{if(H.token){try{await I.deleteChannel(d,H.token),d===Ve&&(Kt(null),xt("# general")),Ne&&await Dn(Ne)}catch(p){console.error("Failed to delete channel:",p),Mn(p)}zi(null)}},yl=async()=>{if(!(!H.token||!qa.trim())){Ka(!0),cl("");try{const d=qa.trim(),p=sg(d),_=p?p.inviteCode:d;await I.joinNodeByInvite(_,H.token),ol(!1),Ca(!1),cs(""),await mn()}catch(d){cl(d.message||"Failed to join node")}finally{Ka(!1)}}},Fc=async()=>{if(!(!H.token||!rs.trim())&&!ys.current){ys.current=!0,ho(!0);try{const d=await I.createNode(rs.trim(),H.token,us.trim()||void 0);try{const p=await I.getNodeChannels(d.id,H.token);Array.isArray(p)&&p.length>0||await I.createChannel(d.id,"general","text",H.token)}catch(p){console.warn("Failed to check/create #general channel:",p)}await mn(),na(d.id),Nn(Fe.length),Ca(!1),ki(""),rl(""),await Dn(d.id),await Za(d.id)}catch(d){console.error("Failed to create node:",d),Mn(d)}finally{ho(!1),ys.current=!1}}},Un=x.useCallback(d=>{Rt.updatePreferences(d),Ea(d),da(p=>p+1)},[]),zo=x.useCallback((d,p)=>{if(d!==Ve){const _=kn.find(T=>T.id===d);_&&Jl(d,`# ${_.name}`)}},[Ve,kn,Jl]),Ta=x.useCallback((d,p)=>{if(Ne&&p.length>0){const _=p[p.length-1];Rt.markChannelAsRead(Ne,d,_.id),localStorage.setItem(`accord_lastread_${d}`,Date.now().toString()),da(T=>T+1)}},[Ne]),Oo=async()=>{me("");const d=sg(U);if(!d){me("Invalid invite link. Expected format: accord://host:port/invite/CODE or https://host:port/invite/CODE");return}re(d),De(!0);try{I.setBaseUrl(d.relayUrl);const p=await I.health();o(!0),La(!0),Ae(p.version),i(d.relayUrl);const _=fv(d.relayHost),T=mv(d.relayHost);if(_&&T)try{Js(_),localStorage.setItem("accord_user_id",T);let J="";if(Ke){const lt=await lu();if(lt){ct(lt);const Pe=await es(lt.publicKey);J=await xi(Pe),_e(J),za(J),w(Pe)}}Le(lt=>({...lt,isAuthenticated:!0,token:_,user:{id:T,public_key_hash:J,public_key:"",created_at:0,display_name:Tt(J)}})),z(!0);try{await I.joinNodeByInvite(d.inviteCode,_)}catch{}const ae=r.replace(/^http/,"ws"),ge=new $s(_,ae);Va(ge),sn(ge),ge.connect(),A(!1),setTimeout(()=>{mn(),Yt()},100);return}catch{}de(!0)}catch{me(`Cannot connect to relay at ${d.relayUrl}`),re(null)}finally{De(!1)}},Yi=async()=>{if(te){if(me(""),Oe.length<8){me("Password must be at least 8 characters");return}se(!0);try{let d="",p="";if(Ke){const J=await Nf();d=await es(J.publicKey),p=await xi(d),za(p),await au(J,p),await iu(J,Oe,p),ct(J),w(d);const ae=await xg(J);ot(ae)}if(!d){me("Failed to generate encryption keys"),se(!1);return}await I.register(d,Oe),Ge.current=Oe,_e(p),za(p);const _=await I.login(d,Oe);Js(_.token),localStorage.setItem("accord_user_id",_.user_id),hv(te.relayHost,_.token),pv(te.relayHost,_.user_id);try{await I.joinNodeByInvite(te.inviteCode,_.token)}catch{}Le(J=>({...J,isAuthenticated:!0,token:_.token,user:{id:_.user_id,public_key_hash:p,public_key:d,created_at:0,display_name:Tt(p)}})),z(!0),Rt.setCurrentUsername(Tt(p));const T=new $s(_.token,r.replace(/^http/,"ws"));Va(T),sn(T),T.connect(),Re(!0),Mt(!1),A(!1),setTimeout(()=>{Il(!0)},500),setTimeout(()=>{mn(),Yt()},100)}catch(d){me(d instanceof Error?d.message:"Registration failed")}finally{se(!1)}}},ha=async()=>{v(!0),K("");try{const d=r.replace(/\/+$/,"");i(d),I.setBaseUrl(d),localStorage.setItem("accord_server_url",d);const p=await I.health();o(!0),La(!0),S(p.version),m(!1),A(!1)}catch{K(`Cannot connect to ${r}`),o(!1)}finally{v(!1)}},js=async()=>{if(!He){if(Ke&&!Be)try{const d=await Nf();await au(d),ct(d);const p=await es(d.publicKey);w(p),_e(await xi(p))}catch(d){console.warn("Failed to generate demo keys:",d)}z(!0),Le(d=>({...d,isAuthenticated:!0}));return}K("");try{if(j){let d=oe.trim();if(!d&&Ke){const J=localStorage.getItem("accord_public_key_hash");J&&za(J);let ae=await Uf(X);if(ae||(ae=await lu()),ae)d=await es(ae.publicKey),ct(ae),w(d);else if(R){const ge=jf();ge&&(d=ge)}if(!d){const ge=localStorage.getItem("accord_public_key_plain");ge&&(d=ge)}}if(!d){if(localStorage.getItem("accord_public_key_hash")){K("Keypair not found in this browser. Use 'Recover with recovery phrase' to restore your identity, or register a new account.");return}K("No identity found. Create a new identity or recover with your recovery phrase.");return}const p=await I.login(d,X);Js(p.token),localStorage.setItem("accord_user_id",p.user_id),Ge.current=X;const _=await xi(d);if(_e(_),za(_),Ke&&!Be){let J=await Uf(X,_);J||(J=await lu(_)),J&&(ct(J),await iu(J,X,_))}Se(!0),localStorage.setItem("accord_public_key_plain",d),localStorage.setItem("accord_public_key_hash",_),Le(J=>({...J,isAuthenticated:!0,token:p.token,user:{id:p.user_id,public_key_hash:_,public_key:d,created_at:0,display_name:Tt(_)}})),z(!0),Rt.setCurrentUsername(Tt(_));const T=new $s(p.token,r.replace(/^http/,"ws"));Va(T),sn(T),T.connect(),setTimeout(()=>{mn(),Yt()},100)}else{if(X.length<8){K("Password must be at least 8 characters long");return}let d=oe.trim();if(!d&&Ke)try{const _=await Nf();d=await es(_.publicKey);const T=await xi(d);za(T),await au(_,T),await iu(_,X,T),ct(_),w(d);const J=await xg(_);ot(J)}catch{K("Failed to generate encryption keys");return}if(!d){K("Public key generation failed. Crypto may not be supported.");return}await I.register(d,X),Ge.current=X;const p=await xi(d);_e(p),za(p),localStorage.setItem("accord_public_key_plain",d),localStorage.setItem("accord_public_key_hash",p),Re(!0),Mt(!1),setTimeout(()=>{Il(!0)},500)}}catch(d){K(d instanceof Error?d.message:"Authentication failed")}},Bo=async()=>{ln(""),ua(!0);try{const d=Lx(rn),p=await es(d.publicKey),_=await I.login(p,Pt),T=await xi(p);za(T),await au(d,T),await iu(d,Pt,T),ct(d),w(p),Ge.current=Pt,_e(T),za(T),Js(_.token),localStorage.setItem("accord_user_id",_.user_id),Le(ae=>({...ae,isAuthenticated:!0,token:_.token,user:{id:_.user_id,public_key_hash:T,public_key:p,created_at:0,display_name:Tt(T)}})),z(!0),Ot(!1),_n(""),un(""),Se(!0),Rt.setCurrentUsername(Tt(T));const J=new $s(_.token,r.replace(/^http/,"ws"));Va(J),sn(J),J.connect(),setTimeout(()=>{mn(),Yt()},100)}catch(d){ln(d instanceof Error?d.message:"Recovery failed. Check your phrase and password.")}finally{ua(!1)}},Es=()=>{Ue&&(Ue.disconnect(),sn(null)),fy(),localStorage.removeItem("accord_user_id"),Ge.current="",ct(null),Ux(),Se(Sg()),fn([]),vn([]),ta([]),na(null),Kt(null),z(!1),Le({isAuthenticated:!1,nodes:[],messages:[],isConnected:!1}),le(""),w(""),_e(""),A(!0),O("choose"),F(""),re(null),me(""),de(!1),Te("")},Wc=async()=>{var p,_,T,J;if(!Ht.trim())return;const d=(St==null?void 0:St.id)||Ve||H.activeChannel;if(Ue&&Ue.isSocketConnected()&&d)try{let ae=Ht,ge=!1;if(Ke&&Be&&d)try{const ve=await _a(Be.privateKey,d);ae=await yu(ve,Ht),ge=!0}catch(ve){console.warn("Failed to encrypt message, sending plaintext:",ve)}Ue.sendChannelMessage(d,ae,At==null?void 0:At.id);const lt={id:Math.random().toString(),author:((p=H.user)==null?void 0:p.display_name)||Tt(((_=H.user)==null?void 0:_.public_key_hash)||"")||"You",content:Ht,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:Date.now(),channel_id:d,isEncrypted:ge,reply_to:At==null?void 0:At.id,replied_message:At?{id:At.id,sender_id:At.author,sender_public_key_hash:"",encrypted_payload:"",created_at:At.timestamp,content:At.content}:void 0};Le(ve=>({...ve,messages:[...ve.messages,lt]}));const Pe=gt.current;Pe&&setTimeout(()=>{Pe.scrollTop=Pe.scrollHeight},0)}catch(ae){console.error("Failed to send message:",ae)}else{const ae={id:Math.random().toString(),author:((T=H.user)==null?void 0:T.display_name)||Tt(((J=H.user)==null?void 0:J.public_key_hash)||"")||"You",content:Ht,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:Date.now(),isEncrypted:!1};Le(lt=>({...lt,messages:[...lt.messages,ae]}));const ge=gt.current;ge&&setTimeout(()=>{ge.scrollTop=ge.scrollHeight},0)}Qe(""),ea(null)},zn=async()=>{if(!(!Rn||!Ha.trim()||!H.user))try{let d=Ha;if(Ke&&Be&&Ve)try{const p=await _a(Be.privateKey,Ve);d=await yu(p,Ha)}catch(p){console.warn("Failed to encrypt edited message:",p),Lt("Failed to encrypt message");return}Ue&&Ue.isSocketConnected()?Ue.sendEditMessage(Rn,d):(await I.editMessage(Rn,H.user.id,d),Le(p=>({...p,messages:p.messages.map(_=>_.id===Rn?{..._,content:Ha,edited_at:Date.now()}:_)}))),Bl(null),je("")}catch(d){console.error("Failed to edit message:",d),Lt("Failed to edit message")}},Ia=()=>{Bl(null),je("")},Fl=async d=>{if(H.token)try{Ue&&Ue.isSocketConnected()?Ue.sendDeleteMessage(d):(await I.deleteMessage(d,H.token),Le(p=>({...p,messages:p.messages.filter(_=>_.id!==d)}))),ne(null)}catch(p){console.error("Failed to delete message:",p),Lt("Failed to delete message")}},Gi=d=>{if(!H.user||!Ne)return!1;if(d.author===(H.user.display_name||Tt(H.user.public_key_hash)))return!0;const p=localStorage.getItem("accord_user_id"),_=qt.find(T=>T.user_id===p);return _?_.role==="admin"||_.role==="moderator":!1},Vi=d=>{ea(d);const p=document.querySelector(".message-input");p&&p.focus()},On=()=>{ea(null)},Zn=d=>{const p=document.querySelector(`[data-message-id="${d}"]`);p&&(p.scrollIntoView({behavior:"smooth",block:"center"}),p.classList.add("highlight-message"),setTimeout(()=>{p.classList.remove("highlight-message")},2e3))},ma=async(d,p)=>{if(H.token){try{Ue&&Ue.isSocketConnected()?Ue.addReaction(d,p):await I.addReaction(d,p,H.token)}catch(_){console.error("Failed to add reaction:",_),Lt("Failed to add reaction")}co(null)}},pa=async(d,p)=>{if(H.token)try{Ue&&Ue.isSocketConnected()?Ue.removeReaction(d,p):await I.removeReaction(d,p,H.token)}catch(_){console.error("Failed to remove reaction:",_),Lt("Failed to remove reaction")}},ga=async d=>{if(H.token)try{Ue&&Ue.isSocketConnected()?Ue.pinMessage(d):await I.pinMessage(d,H.token)}catch(p){console.error("Failed to pin message:",p),Lt("Failed to pin message")}},Aa=async d=>{if(H.token)try{Ue&&Ue.isSocketConnected()?Ue.unpinMessage(d):await I.unpinMessage(d,H.token)}catch(p){console.error("Failed to unpin message:",p),Lt("Failed to unpin message")}},Pc=async()=>{if(!(!Ve||!H.token))try{const p=(await I.getPinnedMessages(Ve,H.token)).pinned_messages.map(_=>({..._,time:new Date(_.created_at*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pinned_at:_.pinned_at*1e3,timestamp:_.created_at*1e3}));ju(p)}catch(d){console.error("Failed to load pinned messages:",d),Lt("Failed to load pinned messages")}},Lo=()=>{so(d=>(d||Pc(),!d))},Cs=async(d,p)=>{if(!H.user)return;const _=H.messages.find(J=>J.id===d);if(!_||!_.reactions){ma(d,p);return}const T=_.reactions.find(J=>J.emoji===p);T&&T.users.includes(H.user.id)?pa(d,p):ma(d,p)};x.useEffect(()=>{(async()=>{const p=qx(),_=localStorage.getItem("accord_user_id");if(p&&_&&He){A(!1);let T=null;Ke&&(T=await lu(),T&&ct(T));let J="";if(T){const ge=await es(T.publicKey);J=await xi(ge),_e(J),za(J),w(ge)}Le(ge=>({...ge,isAuthenticated:!0,token:p,user:{id:_,public_key_hash:J,public_key:"",created_at:0,display_name:Tt(J)}})),z(!0);const ae=new $s(p,r.replace(/^http/,"ws"));Va(ae),sn(ae),ae.connect(),setTimeout(()=>{mn(),Yt()},100)}})()},[He,Va,Ke,mn]),x.useEffect(()=>{Ne&&H.token&&He&&(Dn(Ne),Za(Ne))},[Ne,H.token,He,Dn,Za]),x.useEffect(()=>{Ve&&H.token&&He&&$l(Ve)},[Ve,H.token,He,$l]),x.useEffect(()=>{const d=p=>{if((p.ctrlKey||p.metaKey)&&(p.key==="k"||p.key==="f")&&(p.preventDefault(),Yl(!0)),(p.ctrlKey||p.metaKey)&&p.key===","&&(p.preventDefault(),ds(!0)),(p.ctrlKey||p.metaKey)&&p.key==="/"&&(p.preventDefault(),gs(_=>!_)),p.key==="Escape"){if(jo){gs(!1);return}if(os){Yl(!1);return}if(mo){ds(!1);return}if(yo){bo(!1);return}if(ms){zi(null);return}if(Ei){Ci(!1);return}if(Ti){Ca(!1);return}if(al){ll(!1);return}if(ps){Il(!1);return}if(Rn){Ia();return}if(At){On();return}}};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[jo,os,mo,Ei,Ti,al,ps,Rn,At]),x.useEffect(()=>{const d=localStorage.getItem("accord-font-size");d&&document.documentElement.style.setProperty("--font-size",d)},[]);const[er]=x.useState(()=>localStorage.getItem("accord-message-density")||"comfortable");x.useEffect(()=>()=>{Ue&&Ue.disconnect()},[Ue]);const kt=x.useCallback(d=>{var J;const p=To.get(d);if(p)return p;const _=Yc.get(d);if(_&&Date.now()-_<300*1e3)return"online";const T=qt.find(ae=>ae.user_id===d);return T!=null&&T.status?T.status:(J=T==null?void 0:T.profile)!=null&&J.status?T.profile.status:"offline"},[To,Yc,qt]),Et=su.useMemo(()=>{const d={online:0,idle:1,dnd:2,offline:3};return[...qt].sort((p,_)=>{const T=d[kt(p.user_id)]??3,J=d[kt(_.user_id)]??3;return T-J})},[qt,kt]),We=x.useCallback((d,p,_,T,J,ae)=>{d.preventDefault(),Bi({x:d.clientX,y:d.clientY,userId:p,publicKeyHash:_,displayName:T,bio:J,user:ae})},[]);if(x.useEffect(()=>{const d=()=>Bi(null);if(Jt)return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[Jt]),Ye)return l.jsx("div",{className:"app",children:l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card key-backup-card",children:[l.jsx("h2",{className:"auth-title",children:" Save Your Recovery Phrase"}),l.jsxs("p",{className:"auth-subtitle",children:["This 24-word phrase is the ",l.jsx("strong",{children:"only way"})," to recover your identity if you lose access to this browser.",l.jsx("strong",{className:"warning",style:{color:"var(--yellow)"},children:" Write it down and store it safely. It will NOT be shown again."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Recovery Phrase (24 words)"}),l.jsx("div",{style:{background:"var(--bg-tertiary)",border:"2px solid var(--yellow)",borderRadius:"8px",padding:"16px",fontFamily:"monospace",fontSize:"15px",lineHeight:"2",wordSpacing:"8px",userSelect:"all",cursor:"text"},children:qe})]}),l.jsx("div",{className:"form-group",style:{marginTop:"16px"},children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:It,onChange:d=>Mt(d.target.checked)}),"I have written down my recovery phrase and stored it safely"]})}),l.jsxs("div",{className:"key-backup-actions",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(qe).catch(()=>{}),alert("Recovery phrase copied to clipboard! Store it safely and clear your clipboard.")},className:"btn btn-green",children:"Copy to Clipboard"}),l.jsx("button",{onClick:()=>{Re(!1),ot(""),V||(G(!0),le(""),K(""))},disabled:!It,className:"btn btn-primary",title:It?"":"Please acknowledge you saved your phrase",children:V?"Continue":"Continue to Login"})]})]})})});if(Qt)return l.jsx("div",{className:"app",children:l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsx("button",{onClick:()=>{Ot(!1),ln(""),_n(""),un("")},className:"auth-back-btn",children:" Back"}),l.jsx("h2",{className:"auth-title",children:" Recover Identity"}),l.jsx("p",{className:"auth-subtitle",children:"Enter your 24-word recovery phrase and password to restore your identity"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Recovery Phrase (24 words)"}),l.jsx("textarea",{placeholder:"word1 word2 word3 ... word24",value:rn,onChange:d=>_n(d.target.value),rows:3,className:"form-textarea",style:{fontFamily:"monospace"}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Password"}),l.jsx("input",{type:"password",placeholder:"Your account password",value:Pt,onChange:d=>un(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Bo()},className:"form-input"})]}),yn&&l.jsx("div",{className:"auth-error",children:yn}),l.jsx("button",{onClick:Bo,disabled:Pn||!rn.trim()||!Pt,className:"btn btn-primary",children:Pn?"Recovering...":"Recover Identity"})]})})});if(ie)return l.jsx("div",{className:"app",children:l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card key-backup-card",children:[l.jsx("h2",{className:"auth-title",children:" Backup Your Key"}),l.jsxs("p",{className:"auth-subtitle",children:["Your identity is your keypair. If you lose it, you lose access to your account forever.",l.jsx("strong",{className:"warning",style:{color:"var(--yellow)"},children:" There is no recovery."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Your Public Key Fingerprint"}),l.jsx("div",{className:"key-value",children:ue||"computing..."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Public Key (share this)"}),l.jsx("textarea",{readOnly:!0,value:oe,rows:3,className:"form-textarea"})]}),l.jsx("div",{className:"auth-success",style:{marginBottom:"16px"},children:" Your keypair is saved in this browser's storage. To use Accord on another device, you'll need to export and import your key."}),l.jsxs("div",{className:"key-backup-actions",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(oe).catch(()=>{}),alert("Public key copied to clipboard!")},className:"btn btn-green",children:"Copy Public Key"}),l.jsx("button",{onClick:()=>{ee(!1),G(!0),le(""),K("")},className:"btn btn-primary",children:"Continue to Login"})]})]})})});if(k)return l.jsx("div",{className:"app",children:l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card auth-card-narrow",children:[Q==="choose"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"auth-brand",children:l.jsxs("h1",{children:[" ",l.jsx("span",{className:"brand-accent",children:"Accord"})]})}),l.jsx("p",{className:"auth-tagline",children:"Privacy-first community communications"}),l.jsx("div",{className:"auth-buttons-stack",children:He?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{A(!1),G(!0)},className:"btn btn-primary",children:"Log in"}),l.jsx("button",{onClick:()=>{A(!1),G(!1)},className:"btn btn-outline",children:"Create new identity"}),l.jsx("button",{onClick:()=>O("invite"),className:"btn btn-outline",children:"I have an invite link"}),l.jsx("button",{onClick:()=>{A(!1),Ot(!0),ln("")},className:"btn-ghost",style:{fontSize:"13px",marginTop:"8px",opacity:.8},children:" Recover identity with recovery phrase"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>O("invite"),className:"btn btn-primary",children:"I have an invite link"}),l.jsx("button",{onClick:()=>O("admin"),className:"btn btn-outline",children:"Set up a new relay (admin)"}),l.jsx("button",{onClick:()=>O("recover"),className:"btn-ghost",style:{fontSize:"13px",marginTop:"8px",opacity:.8},children:" Recover identity (connect to relay first)"})]})})]}),Q==="invite"&&!we&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{O("choose"),me(""),F(""),re(null),Ae("")},className:"auth-back-btn",children:" Back"}),l.jsx("h2",{className:"auth-title",children:"Join via Invite"}),l.jsx("p",{className:"auth-subtitle",children:"Paste the invite link you received"}),l.jsx("div",{className:"form-group",children:l.jsx("input",{type:"text",placeholder:"accord://host:port/invite/CODE or https://...",value:U,onChange:d=>F(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Oo()},className:"form-input"})}),ye&&l.jsx("div",{className:"auth-error",children:ye}),Xe&&l.jsxs("div",{className:"auth-success",children:[" Connected to relay v",Xe]}),l.jsx("button",{onClick:Oo,disabled:he||!U.trim(),className:"btn btn-primary",children:he?"Connecting to relay...":"Join"})]}),Q==="invite"&&we&&l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"auth-title",children:"Create Your Identity"}),l.jsx("p",{className:"auth-subtitle",children:"Connected to relay  now set a password to create your identity"}),l.jsx("div",{className:"auth-info-box",children:l.jsx("span",{className:"accent",children:" A keypair will be auto-generated. No username needed."})}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Password (min 8 characters)"}),l.jsx("input",{type:"password",placeholder:"Choose a password",value:Oe,onChange:d=>Te(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Yi()},className:"form-input"})]}),ye&&l.jsx("div",{className:"auth-error",children:ye}),l.jsx("button",{onClick:Yi,disabled:be||Oe.length<8,className:"btn btn-green",children:be?"Creating identity & joining...":"Create Identity & Join"})]}),Q==="admin"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{O("choose"),K("")},className:"auth-back-btn",children:" Back"}),l.jsx("h2",{className:"auth-title",children:"Connect to Relay"}),l.jsx("p",{className:"auth-subtitle",children:"Enter the relay server URL (admin/power-user)"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Server URL"}),l.jsx("input",{type:"text",placeholder:"http://localhost:8080",value:r,onChange:d=>i(d.target.value),onKeyDown:d=>{d.key==="Enter"&&ha()},className:"form-input"})]}),D&&l.jsx("div",{className:"auth-error",children:D}),b&&l.jsxs("div",{className:"auth-success",children:[" Connected  server v",b]}),l.jsx("button",{onClick:ha,disabled:g,className:"btn btn-primary",children:g?"Connecting...":"Connect"})]})]})})});if(h)return l.jsx("div",{className:"app",children:l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card auth-card-narrow",children:[l.jsx("h2",{className:"auth-title",children:"Connect to Relay"}),l.jsx("p",{className:"auth-subtitle",children:"Manual relay connection"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Server URL"}),l.jsx("input",{type:"text",placeholder:"http://localhost:8080",value:r,onChange:d=>i(d.target.value),onKeyDown:d=>{d.key==="Enter"&&ha()},className:"form-input"})]}),D&&l.jsx("div",{className:"auth-error",children:D}),b&&l.jsxs("div",{className:"auth-success",children:[" Connected  server v",b]}),l.jsx("button",{onClick:ha,disabled:g,className:"btn btn-primary",children:g?"Connecting...":"Connect"})]})})});if(!V)return l.jsx("div",{className:"app",children:l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-card",children:[l.jsx("h2",{className:"auth-title",children:j?R?"Welcome Back":"Login to Accord":"Create Identity"}),l.jsx("p",{className:"auth-subtitle",children:j?R?"Enter your password to sign back in":"Authenticate with your keypair and password":"A new keypair will be generated automatically"}),l.jsxs("div",{className:"auth-server-bar",children:[l.jsxs("span",{children:[" ",r," ",He&&l.jsx("span",{className:"connected",children:" connected"})]}),l.jsx("button",{onClick:()=>{A(!0),O("choose"),K("")},className:"btn-ghost",style:{fontSize:"12px"},children:"Change"})]}),j&&l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Key Status"}),l.jsx("div",{className:"auth-info-box",children:Be||oe||R?l.jsx("span",{className:"accent",children:" Keypair found  enter your password to sign back in"}):localStorage.getItem("accord_public_key_plain")?l.jsx("span",{className:"accent",children:" Identity remembered  enter your password to log in"}):l.jsx("span",{style:{color:"var(--yellow)"},children:" No identity found on this device  create a new one or recover with your phrase"})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Password"}),l.jsx("input",{type:"password",placeholder:j?"Enter your password":"Choose a password (min 8 chars)",value:X,onChange:d=>le(d.target.value),onKeyDown:d=>{d.key==="Enter"&&js()},className:"form-input"}),!j&&X&&X.length<8&&l.jsx("div",{className:"form-hint",style:{color:"var(--red)"},children:"Password must be at least 8 characters"})]}),!j&&Ke&&l.jsxs("div",{className:"auth-info-box",style:{marginBottom:"20px"},children:[l.jsx("div",{className:"accent",children:" A new ECDH P-256 keypair will be generated for your identity"}),l.jsx("div",{style:{fontSize:"12px",marginTop:"4px"},children:"No username needed  you are identified by your public key hash"})]}),D&&l.jsx("div",{className:"auth-error",children:D}),l.jsx("button",{onClick:js,className:"btn btn-primary",style:{marginBottom:"16px"},children:j?"Login":"Create Identity & Register"}),l.jsxs("div",{className:"auth-toggle",style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[l.jsx("button",{onClick:()=>{G(!j),K(""),le("")},className:"btn-ghost",children:j?"Need to create an identity?":"Already have a keypair? Login"}),l.jsxs("div",{style:{borderTop:"1px solid var(--border)",width:"100%",paddingTop:"12px",marginTop:"4px",display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[l.jsx("span",{style:{fontSize:"12px",opacity:.6},children:"Lost access to your keypair?"}),l.jsx("button",{onClick:()=>{Ot(!0),ln("")},className:"btn btn-outline",style:{width:"100%"},children:" Recover with recovery phrase"})]})]})]})})});const ka=Fe.map(d=>d.name),Gt=d=>d?d.display_name||Tt(d.public_key_hash):"Unknown",Zi=d=>typeof d.channel_type=="number"?d.channel_type:d.channel_type==="voice"?2:d.channel_type==="category"?4:0,Ra=[...kn].sort((d,p)=>(d.position??0)-(p.position??0)),tr=Ra.filter(d=>Zi(d)===4),Ho=Ra.filter(d=>Zi(d)!==4),Wl=Ho.filter(d=>!d.parent_id),bl=d=>Ho.filter(p=>p.parent_id===d),qo=d=>{ku(p=>{const _=new Set(p);return _.has(d)?_.delete(d):_.add(d),_})};return l.jsxs("div",{className:"app",children:[l.jsxs("div",{className:"server-list",children:[ka.map((d,p)=>{var J,ae;const _=Fe.length>0?(J=Fe[p])==null?void 0:J.id:null,T=_?Rt.getNodeUnreads(_):{totalUnreads:0,totalMentions:0};return l.jsxs("div",{className:`server-icon ${p===pt?"active":""}`,onClick:()=>{_?Do(_,p):Nn(p)},title:d,children:[(ae=Fe[p])!=null&&ae.icon_hash?l.jsx("img",{src:`${I.getNodeIconUrl(Fe[p].id)}?v=${Fe[p].icon_hash}`,alt:d[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"inherit"},onError:ge=>{ge.target.style.display="none",ge.target.parentElement.textContent=d[0]}}):d[0],T.totalMentions>0&&l.jsx("div",{className:"server-notification mention",children:T.totalMentions>9?"9+":T.totalMentions}),T.totalMentions===0&&T.totalUnreads>0&&l.jsx("div",{className:"server-notification dot"})]},_||d)}),l.jsx("div",{className:"server-icon add-server",title:"Join or Create Node",onClick:()=>Ca(!0),style:{cursor:"pointer"},children:"+"})]},Kl),l.jsxs("div",{className:"channel-sidebar",children:[l.jsxs("div",{className:"sidebar-header",children:[l.jsxs("div",{className:"sidebar-header-row",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[ka[pt],He&&l.jsxs("span",{className:"connection-status",children:[l.jsx("span",{className:`connection-dot ${bn.status}`,children:""}),l.jsxs("span",{className:"connection-label",children:[bn.status==="connected"&&"Connected",bn.status==="reconnecting"&&`Reconnecting... ${bn.reconnectAttempt}/${bn.maxReconnectAttempts}`,bn.status==="disconnected"&&!H.isConnected&&"Disconnected"]}),bn.status==="disconnected"&&!H.isConnected&&Ue&&l.jsx("button",{className:"connection-retry-btn",onClick:()=>Ue.retry(),children:"Retry"})]}),!He&&l.jsx("span",{className:"demo-badge",children:"DEMO"})]}),l.jsxs("div",{className:"sidebar-admin-buttons",children:[Ne&&Li(Ne,"ManageInvites")&&l.jsx("button",{onClick:gl,className:"sidebar-admin-btn",title:"Generate Invite",children:"Invite"}),Ne&&l.jsx("button",{onClick:()=>bo(!0),className:"sidebar-admin-btn",title:"Node Settings",children:""})]})]}),Ne&&tt[Ne]&&l.jsxs("div",{className:"sidebar-role",children:[Ga(tt[Ne])," ",tt[Ne]]}),Ne&&((Ts=Fe.find(d=>d.id===Ne))==null?void 0:Ts.description)&&l.jsx("div",{className:"sidebar-description",title:(Qa=Fe.find(d=>d.id===Ne))==null?void 0:Qa.description,children:(ya=Fe.find(d=>d.id===Ne))==null?void 0:ya.description})]}),l.jsxs("div",{className:"channel-list",children:[(()=>{const d=Ne&&Li(Ne,"DeleteChannel"),p=_=>{var Pe,ve;const T=Zi(_)===2,J=_.id===Ve,ae=T&&on===_.id,ge=Ne?Rt.getChannelUnreads(Ne,_.id):{count:0,mentions:0},lt=ge.count>0||ge.mentions>0;return l.jsxs("div",{className:`channel ${J?"active":""} ${ae?"voice-connected":""} ${lt&&!J?"unread":""}`,title:_.topic||void 0,children:[l.jsxs("div",{onClick:()=>{T?ae||(is(_.id),Ni(_.name),Hl(Date.now())):Jl(_.id,`# ${_.name}`)},style:{flex:1,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[l.jsxs("span",{style:{color:T?"#8e9297":void 0},children:[T?"":"#"," ",_.name]}),T&&!ae&&l.jsx("span",{style:{fontSize:"10px",color:"#8e9297",marginLeft:"4px"},children:"Voice Channel"}),ae&&l.jsx("span",{style:{fontSize:"10px",color:"#43b581"},children:""})]}),l.jsxs("div",{className:"channel-badges",children:[ge.mentions>0&&l.jsx("div",{className:"mention-badge",children:ge.mentions>9?"9+":ge.mentions}),ge.mentions===0&&ge.count>0&&l.jsx("div",{className:"unread-badge",children:ge.count>99?"99+":ge.count}),d&&l.jsx("button",{onClick:ce=>{ce.stopPropagation(),zi({id:_.id,name:_.name})},className:"channel-delete-btn",title:"Delete channel",children:""})]}),ae&&on===_.id&&l.jsx("div",{className:"voice-channel-users",children:l.jsxs("div",{className:"voice-channel-user",children:[l.jsx("div",{className:"voice-user-avatar",children:(((Pe=H.user)==null?void 0:Pe.display_name)||"U")[0]}),l.jsx("span",{className:"voice-user-name",children:((ve=H.user)==null?void 0:ve.display_name)||"You"})]})})]},_.id)};return l.jsxs(l.Fragment,{children:[Wl.map(_=>p(_)),tr.map(_=>{const T=bl(_.id),J=Au.has(_.id);return l.jsxs("div",{className:"channel-category",children:[l.jsxs("div",{className:"category-header",onClick:()=>qo(_.id),children:[l.jsx("span",{className:"category-arrow",children:J?"":""}),l.jsx("span",{className:"category-name",children:_.name})]}),!J&&T.map(ae=>p(ae))]},_.id)})]})})(),Ne&&Li(Ne,"ManageNode")&&l.jsx("div",{style:{padding:"4px 8px"},children:l.jsx("button",{onClick:()=>vo(!0),className:"btn btn-outline btn-sm",style:{width:"100%",fontSize:"11px"},children:" Import Discord Template"})}),Ne&&Li(Ne,"CreateChannel")&&l.jsx("div",{style:{marginTop:"4px",padding:"0 8px"},children:$e?l.jsxs("div",{className:"create-channel-form",children:[l.jsx("input",{type:"text",placeholder:"Channel name",value:jn,onChange:d=>hn(d.target.value)}),l.jsxs("select",{value:aa,onChange:d=>Bt(d.target.value),children:[l.jsx("option",{value:"text",children:"Text Channel"}),l.jsx("option",{value:"voice",children:"Voice Channel"})]}),l.jsxs("div",{className:"create-channel-actions",children:[l.jsx("button",{onClick:Uo,className:"btn btn-green btn-sm",children:"Create"}),l.jsx("button",{onClick:()=>{$t(!1),hn(""),Bt("text")},className:"btn btn-outline btn-sm",children:"Cancel"})]})]}):l.jsx("button",{onClick:()=>$t(!0),className:"btn btn-green btn-sm",style:{width:"100%"},children:"+ Create Channel"})})]}),l.jsxs("div",{className:"dm-section",children:[l.jsxs("div",{className:"dm-header",children:["Direct Messages",l.jsx("button",{onClick:()=>fa(!Vl),className:"dm-header-add-btn",title:"Create DM",children:"+"})]}),l.jsxs("div",{className:"dm-list",children:[sl.map(d=>{var T;const p=(St==null?void 0:St.id)===d.id,_=Rt.getChannelUnreads(`dm-${d.id}`,d.id);return l.jsxs("div",{className:`dm-item ${p?"active":""}`,onClick:()=>Tn(d),children:[l.jsx("div",{className:"dm-avatar",children:(((T=d.other_user_profile)==null?void 0:T.display_name)||"?")[0].toUpperCase()}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{className:"dm-name",children:d.other_user_profile.display_name}),d.last_message&&l.jsx("div",{className:"dm-last-message",children:d.last_message.content.substring(0,30)})]}),l.jsxs("div",{className:"dm-badges",children:[_.mentions>0&&l.jsx("div",{className:"mention-badge",children:_.mentions>9?"9+":_.mentions}),_.mentions===0&&_.count>0&&l.jsx("div",{className:"notification-dot"})]})]},d.id)}),sl.length===0&&l.jsx("div",{className:"dm-empty",children:"No direct messages yet"})]})]}),on&&l.jsx(e0,{channelName:Ac,connectedAt:kc,onDisconnect:()=>{is(null),Ni(""),Hl(null)}}),l.jsxs("div",{className:"user-panel",children:[l.jsx("div",{className:"user-avatar",children:(Ma=H.user)!=null&&Ma.id?l.jsx("img",{src:`${I.getUserAvatarUrl(H.user.id)}`,alt:(((ba=H.user)==null?void 0:ba.display_name)||"U")[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:d=>{var p,_,T;d.target.style.display="none",d.target.parentElement.textContent=((T=((p=H.user)==null?void 0:p.display_name)||Tt(((_=H.user)==null?void 0:_.public_key_hash)||""))==null?void 0:T[0])||"U"}}):((vl=((As=H.user)==null?void 0:As.display_name)||Tt(((ks=H.user)==null?void 0:ks.public_key_hash)||""))==null?void 0:vl[0])||"U"}),l.jsxs("div",{className:"user-info",children:[l.jsx("div",{className:"username",children:((Xi=H.user)==null?void 0:Xi.display_name)||Tt((($a=H.user)==null?void 0:$a.public_key_hash)||"")||"You"}),l.jsx("div",{className:"user-status",onClick:()=>{ja(ao),ql(!0)},style:{cursor:"pointer"},title:"Click to set custom status",children:ao||(H.isConnected?"Online":"Offline")})]}),l.jsx("button",{onClick:()=>fs(!0),className:"user-panel-settings connection-indicator",title:H.isConnected?`Connected${Mi?`  v${Mi}`:""}${Zl?` (${Zl.slice(0,8)})`:""}`:"Disconnected",children:H.isConnected?"":""}),l.jsx("button",{onClick:()=>Ci(!0),className:"user-panel-settings",title:"Notification Settings",children:""}),l.jsx("button",{onClick:()=>ds(!0),className:"user-panel-settings",title:"Settings (Ctrl+,)",children:""}),l.jsx("button",{onClick:Es,className:"user-panel-logout",children:"Logout"})]}),lo&&l.jsxs("div",{className:"status-popover",children:[l.jsxs("div",{className:"status-popover-header",children:[l.jsx("span",{children:"Set Custom Status"}),l.jsx("button",{onClick:()=>ql(!1),className:"status-popover-close",children:""})]}),l.jsx("input",{type:"text",className:"status-popover-input",placeholder:"What's on your mind?",value:ji,onChange:d=>ja(d.target.value.slice(0,128)),onKeyDown:d=>{d.key==="Enter"&&Ki(),d.key==="Escape"&&ql(!1)},maxLength:128,autoFocus:!0}),l.jsxs("div",{className:"status-popover-footer",children:[l.jsxs("span",{className:"status-popover-count",children:[ji.length,"/128"]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[ao&&l.jsx("button",{className:"status-popover-clear",onClick:()=>{ja(""),En(""),I.updateProfile({custom_status:""},H.token||"").catch(()=>{}),ql(!1)},children:"Clear"}),l.jsx("button",{className:"status-popover-save",onClick:Ki,children:"Save"})]})]})]})]}),l.jsx("div",{className:"chat-area",children:l.jsxs(Yx,{channelId:(St==null?void 0:St.id)||Ve||"",token:H.token||"",keyPair:Be,encryptionEnabled:Ke,children:[l.jsxs("div",{className:"chat-header",children:[l.jsx("div",{className:"chat-header-left",children:St?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("div",{className:"dm-avatar",style:{width:"24px",height:"24px",fontSize:"12px",marginRight:"8px"},children:(((en=St.other_user_profile)==null?void 0:en.display_name)||"?")[0].toUpperCase()}),l.jsx("span",{className:"chat-channel-name",children:St.other_user_profile.display_name})]}),l.jsxs("span",{className:"chat-topic",children:["Direct message with ",St.other_user_profile.display_name]})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"chat-channel-name",children:vt}),l.jsx("span",{className:"chat-topic",children:(()=>{const d=kn.find(p=>p.id===Ve);return(d==null?void 0:d.channel_type)==="voice"?` Voice channel  ${d.name}`:d!=null&&d.topic?d.topic:""})()})]})}),l.jsxs("div",{className:"chat-header-right",children:[l.jsx("button",{onClick:Lo,className:`chat-header-btn ${io?"active":""}`,title:"Toggle pinned messages",children:""}),Ke&&Be&&l.jsx("span",{className:"e2ee-badge enabled",title:"End-to-end encryption enabled",children:" E2EE"}),Ke&&!Be&&l.jsx("span",{className:"e2ee-badge warning",title:"Encryption not available",children:" No Keys"}),!Ke&&l.jsx("span",{className:"e2ee-badge disabled",title:"Encryption not supported",children:" No E2EE"}),l.jsx("button",{className:"search-button",onClick:()=>Yl(!0),title:"Search messages (Ctrl+K)",children:""}),l.jsx("button",{onClick:()=>Lc(d=>!d),className:`chat-header-btn ${Eo?"active":""}`,title:"Toggle member list",children:""})]})]}),l.jsxs("div",{className:`messages ${on?"with-voice":""} density-${er}`,ref:gt,onScroll:Qc,children:[Gn&&l.jsxs("div",{className:"messages-loading",children:[l.jsx("span",{className:"spinner spinner-sm"})," Loading older messages..."]}),!q&&H.messages.length>0&&l.jsx("div",{className:"messages-beginning",children:"You've reached the beginning of this channel"}),!Gn&&H.messages.length===0&&Ve&&l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"No messages yet"}),l.jsx("div",{className:"empty-state-text",children:"Be the first to send a message in this channel!"})]}),!Ve&&!St&&kn.length===0&&Fe.length>0&&l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:"#"}),l.jsx("div",{className:"empty-state-title",children:"No channels"}),l.jsx("div",{className:"empty-state-text",children:"Create a channel to start chatting."})]}),Fe.length===0&&!St&&l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("div",{className:"empty-state-title",children:"Welcome to Accord"}),l.jsx("div",{className:"empty-state-text",children:"Join a node via invite or create your own to get started."})]}),H.messages.map((d,p)=>{const _=p>0?H.messages[p-1]:null,T=_&&_.author===d.author&&Math.abs(d.timestamp-_.timestamp)<300*1e3&&!d.reply_to,J=new Date(d.timestamp),ae=_?new Date(_.timestamp):null,ge=!ae||J.toDateString()!==ae.toDateString(),lt=ve=>{const ce=new Date,dt=new Date(ce.getFullYear(),ce.getMonth(),ce.getDate()),wt=new Date(ve.getFullYear(),ve.getMonth(),ve.getDate()),rt=dt.getTime()-wt.getTime();return rt===0?"Today":rt===864e5?"Yesterday":ve.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},Pe=ve=>{const ce=Date.now()-ve;return ce<6e4?"just now":ce<36e5?`${Math.floor(ce/6e4)}m ago`:ce<864e5?`${Math.floor(ce/36e5)}h ago`:new Date(ve).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return l.jsxs(su.Fragment,{children:[ge&&l.jsx("div",{className:"date-separator",children:l.jsx("span",{className:"date-separator-text",children:lt(J)})}),l.jsxs("div",{className:`message ${d.reply_to?"reply-message":""} ${T?"message-grouped":""}`,"data-message-id":d.id,children:[d.replied_message&&l.jsxs("div",{className:"reply-preview",onClick:()=>Zn(d.reply_to),children:[l.jsx("div",{className:"reply-bar"}),l.jsxs("div",{className:"reply-content",children:[l.jsxs("span",{className:"reply-author",children:["Replying to ",Tt(d.replied_message.sender_public_key_hash)]}),l.jsx("span",{className:"reply-snippet",children:d.replied_message.content||d.replied_message.encrypted_payload.substring(0,50)+"..."})]})]}),!T&&l.jsx("div",{className:"message-avatar",children:d.sender_id?l.jsx("img",{src:`${I.getUserAvatarUrl(d.sender_id)}`,alt:(d.author||"?")[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:ve=>{ve.target.style.display="none",ve.target.parentElement.textContent=(d.author||"?")[0]}}):(d.author||"?")[0]}),T&&l.jsx("div",{className:"message-avatar-spacer",children:l.jsx("span",{className:"message-hover-time",children:new Date(d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}),l.jsxs("div",{className:"message-body",children:[!T&&l.jsxs("div",{className:"message-header",children:[l.jsx("span",{className:"message-author",style:{color:(()=>{const ve=qt.find(ce=>Gt(ce.user)===d.author||Tt(ce.public_key_hash)===d.author);return ve?Mo(ve.user_id):void 0})()||void 0},onContextMenu:ve=>{var dt;const ce=qt.find(wt=>Gt(wt.user)===d.author||Tt(wt.public_key_hash)===d.author);ce&&We(ve,ce.user_id,ce.public_key_hash,d.author,(dt=ce.profile)==null?void 0:dt.bio,ce.user)},children:d.author}),l.jsx("span",{className:"message-time",children:Pe(d.timestamp)}),d.edited_at&&l.jsx("span",{className:"message-edited",title:`Edited at ${new Date(d.edited_at).toLocaleString()}`,children:"(edited)"}),d.isEncrypted&&l.jsx("span",{className:"message-encrypted-badge",title:"End-to-end encrypted",children:""}),d.pinned_at&&l.jsx("span",{className:"message-pinned-badge",title:`Pinned ${new Date(d.pinned_at).toLocaleString()}`,children:""}),H.user&&l.jsxs("div",{className:"message-actions",children:[l.jsx("button",{onClick:()=>Vi(d),className:"message-action-btn",title:"Reply to message",children:""}),d.author===(H.user.display_name||Tt(H.user.public_key_hash))&&l.jsx("button",{onClick:()=>xe(d.id,d.content),className:"message-action-btn",title:"Edit message",children:""}),(d.author===(H.user.display_name||Tt(H.user.public_key_hash))||Gi(d))&&l.jsx("button",{onClick:()=>ne(d.id),className:"message-action-btn",title:"Delete message",children:""}),Gi(d)&&l.jsx("button",{onClick:()=>d.pinned_at?Aa(d.id):ga(d.id),className:"message-action-btn",title:d.pinned_at?"Unpin message":"Pin message",children:""})]})]}),Rn===d.id?l.jsxs("div",{className:"message-edit-container",children:[l.jsx("input",{type:"text",value:Ha,onChange:ve=>je(ve.target.value),onKeyDown:ve=>{ve.key==="Enter"&&!ve.shiftKey?(ve.preventDefault(),zn()):ve.key==="Escape"&&Ia()},className:"message-edit-input",placeholder:"Edit your message...",autoFocus:!0}),l.jsxs("div",{className:"message-edit-actions",children:[l.jsx("button",{onClick:zn,className:"edit-save-btn",children:"Save"}),l.jsx("button",{onClick:Ia,className:"edit-cancel-btn",children:"Cancel"})]})]}):l.jsx("div",{className:"message-content",dangerouslySetInnerHTML:{__html:Rt.highlightMentions(d.content)}}),d.files&&d.files.length>0&&l.jsx("div",{className:"message-attachments",children:d.files.map(ve=>l.jsx(Gx,{file:ve,token:H.token||"",channelId:d.channel_id||(St==null?void 0:St.id)||Ve||"",keyPair:Be,encryptionEnabled:Ke},ve.id))}),l.jsxs("div",{className:"message-reactions-container",onMouseEnter:()=>Rc(d.id),onMouseLeave:()=>Rc(null),children:[d.reactions&&d.reactions.length>0&&l.jsx("div",{className:"message-reactions",children:d.reactions.map(ve=>{const ce=H.user&&ve.users.includes(H.user.id);return l.jsxs("button",{className:`reaction ${ce?"reaction-user-reacted":""}`,onClick:()=>Cs(d.id,ve.emoji),title:`${ve.users.length} reactions`,children:[l.jsx("span",{className:"reaction-emoji",children:ve.emoji}),l.jsx("span",{className:"reaction-count",children:ve.count})]},ve.emoji)})}),ro===d.id&&H.user&&l.jsxs("div",{className:"add-reaction-container quick-react-bar",children:[["","","","",""].map(ve=>l.jsx("button",{className:"quick-react-btn",onClick:()=>Cs(d.id,ve),title:`React with ${ve}`,children:ve},ve)),l.jsx("button",{className:"add-reaction-btn",onClick:()=>co(oo===d.id?null:d.id),title:"More reactions",children:"+"}),oo===d.id&&l.jsx("div",{className:"emoji-picker",children:Eu.map(ve=>l.jsx("button",{className:"emoji-option",onClick:()=>ma(d.id,ve),title:`React with ${ve}`,children:ve},ve))})]})]}),E===d.id&&l.jsx("div",{className:"delete-confirm-overlay",children:l.jsxs("div",{className:"delete-confirm-dialog",children:[l.jsx("p",{children:"Are you sure you want to delete this message?"}),l.jsxs("div",{className:"delete-confirm-actions",children:[l.jsx("button",{onClick:()=>Fl(d.id),className:"delete-confirm-btn",children:"Delete"}),l.jsx("button",{onClick:()=>ne(null),className:"delete-cancel-btn",children:"Cancel"})]})]})})]})]})]},d.id||p)}),qc&&l.jsxs("button",{className:"scroll-to-bottom-btn",onClick:$c,children:[" ",bs>0&&l.jsx("span",{className:"scroll-to-bottom-count",children:bs})]})]}),Ve&&Ss(Ve)&&l.jsxs("div",{className:"typing-indicator",children:[l.jsxs("div",{className:"typing-dots-animated",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]}),l.jsx("span",{className:"typing-text",children:Ss(Ve)})]}),l.jsxs("div",{className:"message-input-container",children:[At&&l.jsxs("div",{className:"reply-input-preview",children:[l.jsx("div",{className:"reply-input-bar"}),l.jsxs("div",{className:"reply-input-content",children:[l.jsxs("span",{className:"reply-input-text",children:["Replying to ",l.jsx("strong",{children:At.author}),": ",At.content.substring(0,100),At.content.length>100?"...":""]}),l.jsx("button",{className:"reply-cancel-btn",onClick:On,title:"Cancel reply",children:""})]})]}),He&&H.activeChannel&&l.jsx(Kx,{channelId:H.activeChannel,token:H.token||"",keyPair:Be,encryptionEnabled:Ke}),l.jsx("textarea",{ref:Hc,className:"message-input",placeholder:`Message ${vt}`,value:Ht,rows:1,onChange:d=>{Qe(d.target.value),d.target.style.height="auto",d.target.style.height=Math.min(d.target.scrollHeight,200)+"px",Ve&&Hi(Ve)},onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),Wc())}}),l.jsx(Ix,{isOpen:Oi,onToggle:()=>hl(d=>!d),onSelect:Du,onClose:()=>hl(!1)}),He&&H.activeChannel&&l.jsx(Vx,{channelId:H.activeChannel,token:H.token||"",keyPair:Be,encryptionEnabled:Ke})]})]})}),on&&l.jsx(Qx,{ws:Ue,currentUserId:localStorage.getItem("accord_user_id"),channelId:on,channelName:Ac,onLeave:()=>{is(null),Ni(""),Hl(null)}}),Eo&&l.jsxs("div",{className:"member-sidebar",children:[l.jsxs("div",{className:"member-header",children:["Members  ",qt.filter(d=>d.user).length]}),(()=>{const d=localStorage.getItem("accord_user_id"),p=Ne&&Li(Ne,"KickMembers"),_=ce=>{var rt,Bn;const dt=ce.user_id===d,wt=kt(ce.user_id);return l.jsxs("div",{className:`member ${wt==="offline"?"member-offline":""}`,onContextMenu:pn=>{var Ja;return We(pn,ce.user_id,ce.public_key_hash,Gt(ce.user),(Ja=ce.profile)==null?void 0:Ja.bio,ce.user)},children:[l.jsxs("div",{className:"member-avatar-wrapper",children:[l.jsx("div",{className:"member-avatar",children:l.jsx("img",{src:`${I.getUserAvatarUrl(ce.user_id)}`,alt:Gt(ce.user)[0],style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:pn=>{pn.target.style.display="none",pn.target.parentElement.textContent=Gt(ce.user)[0]}})}),l.jsx("span",{className:`presence-dot presence-${wt}`,title:wt})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx("span",{className:"member-name",style:{color:Mo(ce.user_id)||void 0},children:Gt(ce.user)}),l.jsx("span",{className:"member-role-badge",title:ce.role,children:Ga(ce.role)})]}),((rt=ce.profile)==null?void 0:rt.custom_status)&&l.jsx("span",{className:"member-custom-status",children:ce.profile.custom_status})]}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px"},children:[!dt&&l.jsx("button",{onClick:pn=>{pn.stopPropagation(),Xa(ce.user)},className:"member-action-btn",title:"Send DM",children:"DM"}),p&&!dt&&l.jsx("button",{onClick:pn=>{pn.stopPropagation(),zc({userId:ce.user_id,x:pn.clientX,y:pn.clientY})},className:"member-action-btn",title:"Manage roles",children:"Roles"}),p&&!dt&&l.jsx("button",{onClick:pn=>{pn.stopPropagation(),Jc(ce.user_id,Gt(ce.user))},className:"member-action-btn danger",title:"Kick member",children:"Kick"})]})]},((Bn=ce.user)==null?void 0:Bn.id)||ce.user_id)},T=Di.filter(ce=>ce.hoist).sort((ce,dt)=>dt.position-ce.position),J=Et.filter(ce=>ce.user);if(T.length===0){const ce=J.filter(wt=>kt(wt.user_id)!=="offline"),dt=J.filter(wt=>kt(wt.user_id)==="offline");return l.jsxs(l.Fragment,{children:[ce.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"role-section-header",children:["Online  ",ce.length]}),ce.map(wt=>_(wt))]}),dt.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"role-section-header",style:{color:"#72767d"},children:["Offline  ",dt.length]}),dt.map(wt=>_(wt))]})]})}const ae=new Set,ge=[];for(const ce of T){const dt=J.filter(wt=>{if(ae.has(wt.user_id))return!1;const rt=Zc(wt.user_id);return(rt==null?void 0:rt.id)===ce.id});dt.forEach(wt=>ae.add(wt.user_id)),ge.push({name:ce.name,color:ce.color,members:dt})}const lt=J.filter(ce=>!ae.has(ce.user_id)),Pe=lt.filter(ce=>kt(ce.user_id)!=="offline"),ve=lt.filter(ce=>kt(ce.user_id)==="offline");return l.jsxs(l.Fragment,{children:[ge.filter(ce=>ce.members.length>0).map(ce=>l.jsxs(su.Fragment,{children:[l.jsxs("div",{className:"role-section-header",style:{color:ce.color||void 0},children:[ce.name,"  ",ce.members.length]}),ce.members.map(dt=>_(dt))]},ce.name)),Pe.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"role-section-header",children:["Online  ",Pe.length]}),Pe.map(ce=>_(ce))]}),ve.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"role-section-header",style:{color:"#72767d"},children:["Offline  ",ve.length]}),ve.map(ce=>_(ce))]}),J.length===0&&qt.length===0&&l.jsx("div",{className:"members-empty",children:Fe.length===0?"Join or create a node to see members":"No members loaded"})]})})()]}),Xl&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1050},onClick:()=>zc(null),children:l.jsxs("div",{style:{position:"absolute",top:Math.min(Xl.y,window.innerHeight-300),left:Math.min(Xl.x,window.innerWidth-220),background:"#2f3136",border:"1px solid #40444b",borderRadius:"6px",padding:"8px",minWidth:"200px",maxHeight:"280px",overflowY:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.4)"},onClick:d=>d.stopPropagation(),children:[l.jsx("div",{style:{fontSize:"12px",color:"#b9bbbe",fontWeight:600,padding:"4px 8px",marginBottom:"4px"},children:"ASSIGN ROLES"}),Di.length===0?l.jsx("div",{style:{padding:"8px",color:"#72767d",fontSize:"13px"},children:"No roles available"}):Di.sort((d,p)=>p.position-d.position).map(d=>{const p=(Ui[Xl.userId]||[]).some(_=>_.id===d.id);return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",color:"#dcddde"},onMouseEnter:_=>_.currentTarget.style.background="#40444b",onMouseLeave:_=>_.currentTarget.style.background="transparent",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:()=>Xc(Xl.userId,d.id,p)}),l.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:d.color||"#99aab5",flexShrink:0}}),d.name]},d.id)})]})}),_i&&l.jsxs("div",{className:"error-toast",children:[l.jsx("span",{style:{flex:1},children:_i}),l.jsx("button",{onClick:()=>Lt(""),className:"error-toast-close",children:""})]}),Ti&&!fo&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",children:[l.jsx("h3",{children:"Create a Node"}),l.jsx("p",{children:"A Node is your community space. A #general channel will be created automatically."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Node Name"}),l.jsx("input",{type:"text",placeholder:"My Community",value:rs,onChange:d=>ki(d.target.value),onKeyDown:d=>{d.key==="Enter"&&Fc()},className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Description (optional)"}),l.jsx("input",{type:"text",placeholder:"What's this node about?",value:us,onChange:d=>rl(d.target.value),className:"form-input"})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{onClick:Fc,disabled:Ri||!rs.trim(),className:"btn btn-green",children:Ri?"Creating...":"Create Node"}),l.jsx("button",{onClick:()=>{Ca(!1),ki(""),rl("")},className:"btn btn-outline",children:"Cancel"})]}),l.jsx("div",{style:{borderTop:"1px solid var(--border)",marginTop:"16px",paddingTop:"16px",textAlign:"center"},children:l.jsxs("button",{onClick:()=>ol(!0),className:"btn-ghost",children:["Have an invite code? ",l.jsx("strong",{children:"Join a Node"})]})})]})}),fo&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",children:[l.jsx("h3",{children:"Join a Node"}),l.jsx("p",{children:"Enter an invite code or link to join an existing Node."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Invite Code or Link"}),l.jsx("input",{type:"text",placeholder:"accord://host/invite/CODE or just the code",value:qa,onChange:d=>cs(d.target.value),onKeyDown:d=>{d.key==="Enter"&&qa.trim()&&yl()},className:"form-input"})]}),Ai&&l.jsx("div",{className:"auth-error",children:Ai}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{onClick:yl,disabled:xn||!qa.trim(),className:"btn btn-primary",children:xn?"Joining...":"Join Node"}),l.jsx("button",{onClick:()=>{ol(!1),Ca(!1),cs(""),cl("")},className:"btn btn-outline",children:"Cancel"})]}),l.jsx("div",{style:{borderTop:"1px solid var(--border)",marginTop:"16px",paddingTop:"16px",textAlign:"center"},children:l.jsxs("button",{onClick:()=>ol(!1),className:"btn-ghost",children:["Want to create your own? ",l.jsx("strong",{children:"Create a Node"})]})})]})}),al&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",children:[l.jsx("h3",{children:"Invite Link Generated"}),l.jsx("p",{children:"Share this link to invite others to your node. The relay address is encoded for privacy."}),l.jsx("div",{className:"modal-code-block",style:{wordBreak:"break-all",fontFamily:"monospace",fontSize:"0.85em"},children:no}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(no).then(()=>{alert("Invite code copied to clipboard!")}).catch(()=>{const d=document.createElement("textarea");d.value=no,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),alert("Invite code copied to clipboard!")})},className:"btn btn-primary",style:{width:"auto"},children:"Copy"}),l.jsx("button",{onClick:()=>{ll(!1),Ll("")},className:"btn btn-outline",style:{width:"auto"},children:"Close"})]})]})}),ms&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",children:[l.jsx("h3",{children:"Delete Channel"}),l.jsxs("p",{children:["Are you sure you want to delete ",l.jsxs("strong",{children:["#",ms.name]}),"? This action cannot be undone. All messages will be permanently lost."]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{onClick:()=>Ns(ms.id),className:"btn btn-red",children:"Delete Channel"}),l.jsx("button",{onClick:()=>zi(null),className:"btn btn-outline",children:"Cancel"})]})]})}),Ru&&Ne&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",style:{maxWidth:"480px"},children:[l.jsx("h3",{children:" Import Discord Template"}),ul?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"#43b581",marginBottom:"12px",fontSize:"14px"},children:" Import complete!"}),l.jsxs("div",{style:{color:"#dcddde",fontSize:"13px",lineHeight:"1.6"},children:[ul.roles_created!==void 0&&l.jsxs("div",{children:["Roles created: ",l.jsx("strong",{children:ul.roles_created})]}),ul.channels_created!==void 0&&l.jsxs("div",{children:["Channels created: ",l.jsx("strong",{children:ul.channels_created})]}),ul.categories_created!==void 0&&l.jsxs("div",{children:["Categories created: ",l.jsx("strong",{children:ul.categories_created})]})]}),l.jsx("div",{className:"modal-actions",style:{marginTop:"16px"},children:l.jsx("button",{className:"btn btn-green",onClick:()=>{vo(!1),So(""),_o(null),Ya(""),Ne&&(Dn(Ne),ws(Ne))},children:"Done"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"#b9bbbe",fontSize:"14px"},children:"Paste a discord.new link, discord.com/template link, or raw template code."}),l.jsx("div",{className:"form-group",children:l.jsx("input",{type:"text",placeholder:"discord.new/CODE or template code",value:xo,onChange:d=>So(d.target.value),className:"form-input",disabled:wo})}),hs&&l.jsx("div",{style:{color:"#f04747",fontSize:"13px",marginBottom:"8px"},children:hs}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"btn btn-green",disabled:wo||!xo.trim(),onClick:async()=>{Ya(""),Oc(!0);try{let d=xo.trim();const p=d.match(/discord\.new\/([A-Za-z0-9]+)/),_=d.match(/discord\.com\/template\/([A-Za-z0-9]+)/);p?d=p[1]:_&&(d=_[1]);const T=await I.importDiscordTemplate(Ne,d,H.token||"");_o(T)}catch(d){Ya(d.message||"Import failed")}finally{Oc(!1)}},children:wo?" Importing...":"Import"}),l.jsx("button",{className:"btn btn-outline",onClick:()=>{vo(!1),So(""),Ya(""),_o(null)},children:"Cancel"})]})]})]})}),yo&&Ne&&(()=>{const d=Fe.find(p=>p.id===Ne);return d?l.jsx(Jx,{isOpen:yo,onClose:()=>bo(!1),node:d,token:H.token||"",userRole:tt[Ne]||"member",onNodeUpdated:p=>{fn(_=>_.map(T=>T.id===p.id?p:T))},onLeaveNode:()=>{na(null),vn([]),ta([]),mn()}}):null})(),l.jsx($x,{isVisible:os,onClose:()=>Yl(!1),nodeId:Ne,channels:kn,token:H.token||null,onNavigateToMessage:zo}),l.jsx(Wx,{isOpen:Ei,onClose:()=>Ci(!1),preferences:ss,onPreferencesChange:Un}),l.jsx(Px,{isOpen:mo,onClose:()=>ds(!1),currentUser:H.user,serverInfo:{version:Mi,buildHash:Zl,connectedSince:go,relayAddress:I.getBaseUrl(),isConnected:H.isConnected},onUserUpdate:d=>{H.user&&Le(p=>({...p,user:{...p.user,...d}}))}}),Tu&&l.jsx("div",{className:"settings-overlay",onClick:()=>fs(!1),children:l.jsxs("div",{className:"connection-info-modal",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"connection-info-header",children:[l.jsx("h3",{children:"Connection Info"}),l.jsx("button",{className:"settings-close",onClick:()=>fs(!1),children:""})]}),l.jsxs("div",{className:"connection-info-body",children:[l.jsxs("div",{className:"connection-info-row",children:[l.jsx("span",{className:"connection-info-label",children:"Status"}),l.jsx("span",{className:"connection-info-value",children:H.isConnected?" Connected":" Disconnected"})]}),Mi&&l.jsxs("div",{className:"connection-info-row",children:[l.jsx("span",{className:"connection-info-label",children:"Server Version"}),l.jsx("span",{className:"connection-info-value",children:Mi})]}),Zl&&l.jsxs("div",{className:"connection-info-row",children:[l.jsx("span",{className:"connection-info-label",children:"Build Hash"}),l.jsxs("span",{className:"connection-info-value copyable",title:"Click to copy",onClick:()=>{navigator.clipboard.writeText(Zl)},children:[l.jsx("code",{children:Zl}),l.jsx("span",{className:"copy-hint",children:""})]})]}),go&&l.jsxs("div",{className:"connection-info-row",children:[l.jsx("span",{className:"connection-info-label",children:"Connected Since"}),l.jsx("span",{className:"connection-info-value",children:new Date(go).toLocaleString()})]}),l.jsxs("div",{className:"connection-info-row",children:[l.jsx("span",{className:"connection-info-label",children:"Relay Address"}),l.jsx("span",{className:"connection-info-value",children:l.jsx("code",{children:I.getBaseUrl()})})]})]})]})}),io&&l.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"400px",height:"100vh",background:"var(--background)",borderLeft:"1px solid var(--border)",zIndex:1e3,display:"flex",flexDirection:"column",color:"var(--text)"},children:[l.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600},children:" Pinned Messages"}),l.jsx("button",{onClick:()=>so(!1),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"var(--text)",padding:"4px",borderRadius:"4px"},children:""})]}),l.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:il.length===0?l.jsxs("div",{style:{textAlign:"center",color:"var(--text-muted)",marginTop:"50px"},children:[l.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),l.jsx("p",{children:"No pinned messages in this channel yet."}),l.jsx("p",{style:{fontSize:"14px"},children:"Pin messages to keep important information easily accessible."})]}):l.jsx("div",{children:il.map((d,p)=>l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"var(--background-modifier-accent)",borderRadius:"8px",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px"},children:[l.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:600,marginRight:"8px"},children:(d.author||"?")[0]}),l.jsx("span",{style:{fontWeight:600,marginRight:"8px"},children:d.author}),l.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"12px"},children:[new Date(d.timestamp).toLocaleDateString()," at ",d.time]})]}),l.jsx("div",{style:{marginLeft:"32px",lineHeight:"1.4"},dangerouslySetInnerHTML:{__html:Rt.highlightMentions(d.content)}}),l.jsxs("div",{style:{marginLeft:"32px",marginTop:"8px",fontSize:"12px",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:[" Pinned ",new Date(d.pinned_at).toLocaleDateString()]})]},d.id||p))})})]}),Vl&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",style:{maxWidth:"380px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0},children:"Start a Direct Message"}),l.jsx("button",{onClick:()=>fa(!1),className:"error-toast-close",style:{color:"var(--text-muted)"},children:""})]}),l.jsx("p",{children:"Select a user to start a direct message:"}),l.jsxs("div",{style:{maxHeight:"300px",overflow:"auto"},children:[qt.filter(d=>d.user_id!==localStorage.getItem("accord_user_id")).map(d=>l.jsxs("div",{className:"member",onClick:()=>{Xa(d.user),fa(!1)},children:[l.jsx("div",{className:"dm-avatar",style:{width:"24px",height:"24px",fontSize:"12px",marginRight:"12px"},children:Gt(d.user)[0].toUpperCase()}),l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:"500"},children:Gt(d.user)}),l.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"12px"},children:[Ga(d.role)," ",d.role]})]})]},d.user_id)),qt.filter(d=>d.user_id!==localStorage.getItem("accord_user_id")).length===0&&l.jsx("div",{className:"members-empty",children:"No other members available"})]})]})}),ps&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-card",children:[l.jsx("h3",{children:"Set Your Display Name"}),l.jsx("p",{children:"Choose a name that others will see instead of your fingerprint."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Display Name"}),l.jsx("input",{type:"text",placeholder:"Enter a display name...",value:dl,onChange:d=>No(d.target.value),onKeyDown:d=>{d.key==="Enter"&&_s()},className:"form-input",autoFocus:!0,maxLength:32})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{onClick:_s,disabled:fl||!dl.trim(),className:"btn btn-green",style:{width:"auto"},children:fl?"Saving...":"Save"}),l.jsx("button",{onClick:()=>Il(!1),className:"btn btn-outline",style:{width:"auto"},children:"Skip"})]})]})}),Jt&&l.jsxs("div",{className:"context-menu",style:{left:Jt.x,top:Jt.y},children:[l.jsxs("div",{className:"context-menu-item context-menu-profile-header",children:[l.jsx("div",{style:{fontWeight:600,fontSize:"14px"},children:Jt.displayName}),l.jsx("div",{style:{fontSize:"11px",color:"var(--text-faint)",fontFamily:"var(--font-mono)"},children:Tt(Jt.publicKeyHash)}),Jt.bio&&l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:Jt.bio})]}),l.jsx("div",{className:"context-menu-separator"}),l.jsx("div",{className:"context-menu-item",onClick:()=>{const d=`Display Name: ${Jt.displayName}
Fingerprint: ${Tt(Jt.publicKeyHash)}
Full Hash: ${Jt.publicKeyHash}${Jt.bio?`
Bio: ${Jt.bio}`:""}`;alert(d),Bi(null)},children:" View Profile"}),Jt.user&&Jt.userId!==localStorage.getItem("accord_user_id")&&l.jsx("div",{className:"context-menu-item",onClick:()=>{Jt.user&&Xa(Jt.user),Bi(null)},children:" Send DM"}),l.jsx("div",{className:"context-menu-separator"}),l.jsx("div",{className:"context-menu-item",onClick:()=>{navigator.clipboard.writeText(Jt.publicKeyHash).catch(()=>{}),Bi(null)},children:" Copy Public Key Hash"})]}),jo&&l.jsx("div",{className:"modal-overlay",onClick:()=>gs(!1),children:l.jsxs("div",{className:"modal-card shortcuts-modal",onClick:d=>d.stopPropagation(),children:[l.jsx("h3",{children:" Keyboard Shortcuts"}),l.jsxs("div",{className:"shortcuts-list",children:[l.jsxs("div",{className:"shortcut-row",children:[l.jsx("kbd",{children:"Enter"}),l.jsx("span",{children:"Send message"})]}),l.jsxs("div",{className:"shortcut-row",children:[l.jsx("kbd",{children:"Shift + Enter"}),l.jsx("span",{children:"New line in message"})]}),l.jsxs("div",{className:"shortcut-row",children:[l.jsx("kbd",{children:"Escape"}),l.jsx("span",{children:"Close modal / Cancel edit"})]}),l.jsxs("div",{className:"shortcut-row",children:[l.jsx("kbd",{children:"Ctrl + K"}),l.jsx("span",{children:"Open search"})]}),l.jsxs("div",{className:"shortcut-row",children:[l.jsx("kbd",{children:"Ctrl + /"}),l.jsx("span",{children:"Show this help"})]}),l.jsxs("div",{className:"shortcut-row",children:[l.jsx("kbd",{children:"Ctrl + ,"}),l.jsx("span",{children:"Open settings"})]})]}),l.jsx("div",{className:"modal-actions",style:{marginTop:"16px"},children:l.jsx("button",{onClick:()=>gs(!1),className:"btn btn-outline",style:{width:"auto"},children:"Close"})})]})})]})}class n0 extends x.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,u){console.error("Uncaught error:",i,u)}render(){var i;return this.state.hasError?l.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:[l.jsx("h1",{children:"Something went wrong"}),l.jsx("p",{children:(i=this.state.error)==null?void 0:i.message}),l.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{marginTop:"1rem",padding:"0.5rem 1rem",cursor:"pointer",background:"#5865f2",color:"white",border:"none",borderRadius:"4px"},children:"Try Again"})]}):this.props.children}}window.DOMPurify=iv;Bb.createRoot(document.getElementById("root")).render(l.jsx(su.StrictMode,{children:l.jsx(n0,{children:l.jsx(t0,{})})}));
