# Accord Environment Configuration
# Copy this file to .env and customize for your deployment

# === Server Configuration ===
ACCORD_HOST=0.0.0.0
ACCORD_PORT=8443
ACCORD_WEBSOCKET_PORT=8080

# TLS Configuration (Required for production)
ACCORD_TLS_CERT_PATH=./certs/cert.pem
ACCORD_TLS_KEY_PATH=./certs/key.pem

# === Database Configuration ===
# PostgreSQL (Primary database)
POSTGRES_USER=accord
POSTGRES_PASSWORD=accordpass  # Change this!
POSTGRES_DB=accord
ACCORD_DATABASE_URL=postgres://accord:accordpass@localhost:5432/accord

# Redis (Session storage and caching)
REDIS_PASSWORD=accordredis  # Change this!
ACCORD_REDIS_URL=redis://localhost:6379

# === File Storage Configuration ===
# MinIO (S3-compatible object storage)
MINIO_ROOT_USER=accord
MINIO_ROOT_PASSWORD=accordminio123  # Change this!
ACCORD_S3_ENDPOINT=http://localhost:9000
ACCORD_S3_BUCKET=accord-files
ACCORD_S3_ACCESS_KEY=accord
ACCORD_S3_SECRET_KEY=accordminio123

# === Security Configuration ===
# JWT signing key (generate with: openssl rand -base64 32)
ACCORD_JWT_SECRET=your-jwt-secret-here-change-this

# Encryption key for server-side encrypted data (32 bytes base64)
ACCORD_SERVER_ENCRYPTION_KEY=your-encryption-key-here-change-this

# CORS origins (comma-separated)
ACCORD_CORS_ORIGINS=https://localhost:3000,https://accord.chat

# === Feature Flags ===
ACCORD_ENABLE_REGISTRATION=true
ACCORD_ENABLE_FILE_UPLOAD=true
ACCORD_ENABLE_VOICE_CHAT=true
ACCORD_MAX_FILE_SIZE=50MB
ACCORD_MAX_MESSAGE_LENGTH=2000

# === Logging Configuration ===
RUST_LOG=info,accord=debug
RUST_BACKTRACE=1

# === Development Configuration ===
# Set to 'development' for dev mode, 'production' for prod
ACCORD_ENVIRONMENT=development

# Enable debug features (development only)
ACCORD_DEBUG=false

# === External Services ===
# SMTP for email notifications (optional)
ACCORD_SMTP_HOST=smtp.example.com
ACCORD_SMTP_PORT=587
ACCORD_SMTP_USER=noreply@accord.chat
ACCORD_SMTP_PASSWORD=smtp-password
ACCORD_SMTP_FROM=noreply@accord.chat

# Push notification services (optional)
ACCORD_APNS_KEY_ID=your-apns-key-id
ACCORD_APNS_TEAM_ID=your-apns-team-id
ACCORD_APNS_KEY_PATH=./certs/apns-key.p8

ACCORD_FCM_API_KEY=your-fcm-api-key

# === Rate Limiting ===
ACCORD_RATE_LIMIT_MESSAGES=100  # Messages per minute per user
ACCORD_RATE_LIMIT_CONNECTIONS=10  # Connections per minute per IP
ACCORD_RATE_LIMIT_FILE_UPLOADS=5  # File uploads per minute per user

# === Performance Tuning ===
ACCORD_MAX_CONNECTIONS=1000
ACCORD_WORKER_THREADS=4
ACCORD_CONNECTION_TIMEOUT=30  # seconds

# === Privacy Configuration ===
# How long to keep logs (in days)
ACCORD_LOG_RETENTION_DAYS=30

# Enable/disable telemetry (no personal data collected)
ACCORD_TELEMETRY_ENABLED=false

# === Backup Configuration ===
ACCORD_BACKUP_ENABLED=true
ACCORD_BACKUP_INTERVAL=24h  # How often to backup
ACCORD_BACKUP_RETENTION=30  # Days to keep backups
ACCORD_BACKUP_S3_BUCKET=accord-backups